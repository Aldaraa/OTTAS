"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[2646],{92646:function(e,t,n){n.r(t);var s=n(29439),a=n(92350),r=n(12019),i=n(12998),l=n(56573),c=n(2880),o=n(47313),u=n(313),d=n.n(u),f=n(46417);t.default=function(){var e=(0,o.useState)(null),t=(0,s.Z)(e,2),n=t[0],u=t[1],x=(0,o.useState)(!0),m=(0,s.Z)(x,2),h=m[0],j=m[1],v=(0,o.useState)(!1),g=(0,s.Z)(v,2),p=g[0],Z=g[1],k=(0,o.useState)(!1),y=(0,s.Z)(k,2),b=y[0],w=y[1],C=i.ZP.useNotification(),N=(0,s.Z)(C,2),S=N[0],T=N[1],E=(0,o.useRef)(null);(0,o.useEffect)((function(){_()}),[]);var _=(0,o.useCallback)((function(){(0,l.Z)({method:"get",url:"tas/agreement"}).then((function(e){u(e.data)})).catch((function(e){})).then((function(){return j(!1)}))}),[]);return(0,f.jsxs)("div",{className:"flex justify-center",children:[(0,f.jsxs)("div",{className:"min-w-[400px] max-w-[800px] rounded-ot shadow-card bg-white p-5 flex flex-col w-full",children:[(0,f.jsx)("div",{className:"text-lg font-bold mb-3",children:"Privacy Policy"}),h?(0,f.jsx)(c.Skeleton,{}):(0,f.jsx)(f.Fragment,{children:b?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.HTMLEditor,{className:"flex-1",ref:E,defaultValue:n.AgreementText}),(0,f.jsxs)("div",{className:"flex justify-end mt-5 self-end gap-4",children:[(0,f.jsx)(c.Button,{type:"primary",onClick:function(){Z(!0),(0,l.Z)({method:"post",url:"tas/agreement/create",data:{agreementText:E.current.instance.option("value")}}).then((function(){w(!1),_()})).catch((function(e){var t,n,s=e.err;400===s.response.status&&S.error({message:"Error",duration:5,description:(0,f.jsx)("div",{children:null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message})})})).then((function(){return Z(!1)}))},loading:p,icon:(0,f.jsx)(a.Z,{}),children:"Save"}),(0,f.jsx)(c.Button,{onClick:function(){return w(!1)},disabled:p,children:"Cancel"})]})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{dangerouslySetInnerHTML:{__html:d().sanitize(null===n||void 0===n?void 0:n.AgreementText)}}),(0,f.jsx)(c.Button,{className:"self-end mt-5",type:"primary",onClick:function(){return w(!0)},icon:(0,f.jsx)(r.Z,{}),children:"Edit"})]})})]}),T]})}}}]);