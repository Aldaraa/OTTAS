"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[6973],{16973:function(e,l,n){n.r(l),n.d(l,{default:function(){return H}});var t=n(74165),a=n(15861),o=n(29439),i=n(47313),s=n(56573),r=n(65040),d=n(12998),u=n(21975),c=n(74294),m=n(2880),p=n(93031),v=n(42614),f=n(10658),h=n.n(f),x=n(46417);var g=function(e){var l=e.data,n=e.refreshData,t=e.disabled,a=e.currentGroup,d=(0,i.useState)([]),f=(0,o.Z)(d,2),g=f[0],b=f[1],j=(0,i.useState)(!1),I=(0,o.Z)(j,2),y=I[0],N=I[1],D=(0,i.useState)(!1),F=(0,o.Z)(D,2),C=F[0],S=F[1],q=(0,i.useContext)(v.V),T=q.state,Z=(q.action,r.Z.useForm()),w=(0,o.Z)(Z,1)[0],E=(0,i.useMemo)((function(){var e,n,t,a,o;if(l)return{startDate:l.ExistingScheduleDate?h()(l.ExistingScheduleDate):null,endDate:l.ReScheduleDate?h()(l.ReScheduleDate):null,ShiftId:l.shiftId,Direction:l.ExistingScheduleDirection,ExistingScheduleDescription:l.ExistingScheduleDescription,ReScheduleId:l.ReScheduleId,RoomId:null!==(e=T.userProfileData)&&void 0!==e&&e.RoomId?null===(n=T.userProfileData)||void 0===n?void 0:n.RoomId:null===(t=T.referData.noRoomId)||void 0===t?void 0:t.Id,RoomNumber:null!==(a=T.userProfileData)&&void 0!==a&&a.RoomNumber?null===(o=T.userProfileData)||void 0===o?void 0:o.RoomNumber:"Virtual room"}}),[l]);(0,i.useEffect)((function(){l&&(0,s.Z)({method:"get",url:"tas/ActiveTransport/getdatetransport?eventDate=".concat(l.ReScheduleDate,"&Direction=").concat(l.ExistingScheduleDirection)}).then((function(e){var l=[];e.data.map((function(e){l.push({value:e.ScheduleId,label:"".concat(e.Description," \u2022 ").concat(e.Seat,"/").concat(e.BookedCount)})})),b(l)}))}),[l]);var R=[{type:"component",component:(0,x.jsx)(m.Form.Item,{label:"Existing Transport",className:"col-span-12 mb-2",children:(0,x.jsxs)("div",{className:"flex gap-2",children:[(0,x.jsx)(m.Form.Item,{name:"startDate",className:"mb-0 w-[115px]",children:(0,x.jsx)(p.Z,{disabled:!0,className:"w-full"})}),(0,x.jsx)(m.Form.Item,{name:"Direction",className:"mb-0 w-[60px]",children:(0,x.jsx)(u.Z,{disabled:!0,className:"w-full py-[1px]"})}),(0,x.jsx)(m.Tooltip,{title:(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"flex gap-2",children:[(0,x.jsx)("span",{className:"text-gray-500",children:"Seats:"})," ",null===l||void 0===l?void 0:l.ExistingScheduleSeat]}),(0,x.jsxs)("div",{className:"flex gap-2",children:[(0,x.jsx)("span",{className:"text-gray-500",children:"Booked:"})," ",null===l||void 0===l?void 0:l.ExistingScheduleBookedCount]}),(0,x.jsxs)("div",{className:"flex gap-2",children:[(0,x.jsx)("span",{className:"text-gray-500",children:"Available Seats:"}),(0,x.jsx)("span",{children:(null===l||void 0===l?void 0:l.ExistingScheduleSeat)>(null===l||void 0===l?void 0:l.ExistingScheduleBooked)?(null===l||void 0===l?void 0:l.ExistingScheduleSeat)-(null===l||void 0===l?void 0:l.ExistingScheduleBooked):0})]})]}),children:(0,x.jsx)(m.Form.Item,{name:"ExistingScheduleDescription",className:"flex-1 mb-0",rules:[{required:!0,message:"Flight is required"}],children:(0,x.jsx)(u.Z,{disabled:!0,className:"py-[1px]"})})})]})})},{type:"component",component:(0,x.jsx)(m.Form.Item,{label:"Reschedule Transport",className:"col-span-12 mb-2",children:(0,x.jsxs)("div",{className:"flex gap-2",children:[(0,x.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.startDate!==l.startDate||e.endDate!==l.endDate},children:function(e){var n=e.getFieldValue,t=!1;return n("endDate")||(t=n("startDate")),(0,x.jsx)(m.Form.Item,{name:"endDate",className:"mb-0 w-[115px]",children:(0,x.jsx)(p.Z,{defaultPickerValue:t,showWeek:!0,className:"w-[115px]",onChange:function(e,n){return function(e){e&&(0,s.Z)({method:"get",url:"tas/ActiveTransport/getdatetransport?eventDate=".concat(e,"&Direction=").concat(l.ExistingScheduleDirection)}).then((function(e){var l=[];e.data.map((function(e){l.push({value:e.ScheduleId,label:"".concat(e.Description," \u2022 ").concat(e.Seat,"/").concat(e.BookedCount)})})),w.setFieldValue("ReScheduleId",null),b(l)}))}(n)}})})}}),(0,x.jsx)(m.Form.Item,{name:"Direction",className:"mb-0 w-[60px]",children:(0,x.jsx)(u.Z,{disabled:!0,className:"w-[60px] py-[1px]"})}),(0,x.jsx)(m.Form.Item,{name:"ReScheduleId",className:"mb-0 flex-1 w-full max-w-[360px]",rules:[{required:!0,message:"Flight is required"}],children:(0,x.jsx)(c.Z,{options:g,popupMatchSelectWidth:!1,allowClear:!0,style:{width:"100%"},showSearch:!0,filterOption:function(e,l){var n;return(null!==(n=null===l||void 0===l?void 0:l.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())}})})]})})}];return(0,x.jsx)("div",{className:"w-full",children:(0,x.jsx)(m.Form,{form:w,fields:R,onFinish:function(e){var t,a;N(!0),(0,s.Z)({method:"put",url:"tas/requestexternaltravel/reschedule",data:{id:null===l||void 0===l?void 0:l.Id,newScheduleId:e.ReScheduleId,CostCodeId:null===(t=T.userProfileData)||void 0===t?void 0:t.CostCodeId,DepartmentId:null===(a=T.userProfileData)||void 0===a?void 0:a.DepartmentId}}).then((function(e){n(),S(!1)})).catch((function(e){})).then((function(){return N(!1)}))},editData:E,disabled:!C,className:"grid grid-cols-12 gap-x-5 max-w-[700px]",size:"small",labelAlign:"left",labelCol:{flex:"150px"},children:!t&&"Completed"!==(null===a||void 0===a?void 0:a.GroupTag)&&(0,x.jsx)("div",{className:"col-span-12 flex justify-end gap-5 text-xs",children:C?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.Button,{htmlType:"button",onClick:function(){return w.submit()},type:"success",loading:y,children:"Save"}),(0,x.jsx)(m.Button,{htmlType:"button",onClick:function(){S(!1)},disabled:y,children:"Cancel"})]}):(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(m.Button,{htmlType:"button",onClick:function(){return S(!0)},type:"primary",children:"Edit"})})})})})},b=n(31283);var j=function(e){var l=e.form,n=e.editData,t=e.disabled,a=(0,i.useContext)(v.V);a.state,a.action,(0,i.useEffect)((function(){var e={};n&&(e={firstTransport:{flightId:n.ScheduleId,Direction:n.ScheduleDirection,Date:n.ScheduleDate?h()(n.ScheduleDate):null,Description:n.ScheduleDescription}},l.setFieldsValue(e))}),[n]);var o=[{type:"component",component:(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(m.Form.Item,{label:"First Transport",className:"col-span-12 mb-2",children:(0,x.jsxs)("div",{className:"flex gap-2",children:[(0,x.jsx)(m.Form.Item,{name:["firstTransport","Date"],className:"mb-0 w-[115px]",children:(0,x.jsx)(p.Z,{disabled:!0,className:"w-full"})}),(0,x.jsx)(m.Form.Item,{name:["firstTransport","Direction"],className:"mb-0 w-[100px]",children:(0,x.jsx)(u.Z,{disabled:!0,className:"w-full"})}),(0,x.jsx)(m.Form.Item,{className:"mb-0",name:["firstTransport","Description"],rules:[{required:!0,message:"Flight is required"}],children:(0,x.jsx)(u.Z,{disabled:!0})}),(0,x.jsx)(m.Form.Item,{noStyle:!0,name:["firstTransport","flightId"]})]})})})}];return(0,x.jsx)("div",{className:"w-full max-w-[1200px]",children:(0,x.jsx)(m.Form,{form:l,fields:o,size:"small",labelAlign:"right",labelCol:{span:4},wrapperCol:{span:14},disabled:t,children:(0,x.jsx)(m.Form.Item,{valuePropName:"checked",label:"No Show",name:"noShow",className:"col-span-12 mb-2",children:(0,x.jsx)(b.Z,{disabled:!0,onChange:function(e){l.setFieldValue("noShow",e.target.checked?1:0)}})},"form-item-check")})})},I=n(58467),y=n(1413),N=n(14261),D=n(3489),F=n(22231),C=n(82138);var S=function(e){e.mainForm,e.getMaster;var l=e.disabled,n=e.showTitle,t=void 0===n||n,a=(0,i.useState)(!1),d=(0,o.Z)(a,2),u=d[0],c=d[1],p=(0,i.useState)(!0),v=(0,o.Z)(p,2),f=(v[0],v[1]),h=(0,i.useState)(!1),g=(0,o.Z)(h,2),b=g[0],j=g[1],S=(0,i.useState)(!1),q=(0,o.Z)(S,2),T=q[0],Z=q[1],w=(0,i.useState)([]),E=(0,o.Z)(w,2),R=E[0],G=E[1],L=(0,i.useState)(null),P=(0,o.Z)(L,2),A=P[0],k=P[1],V=(0,i.useState)([]),M=(0,o.Z)(V,2),B=M[0],O=M[1],U=r.Z.useForm(),z=(0,o.Z)(U,1)[0],Y=(0,I.UO)().documentId;(0,i.useEffect)((function(){_()}),[]);var _=function(){f(!0),(0,s.Z)({method:"get",url:"/tas/requestdocumentattachment/".concat(Y)}).then((function(e){G(e.data)})).catch((function(e){})).then((function(){return f(!1)}))},H=[{type:"component",component:(0,x.jsx)(m.Form.Item,{name:"files",valuePropName:"file",label:"File",className:"col-span-12 mb-2",children:(0,x.jsx)(D.Z,{beforeUpload:!0,multiple:!0,maxCount:5,onChange:function(e){return function(e){var l=[];e.fileList.map((function(e){l.push(e.originFileObj)})),O(l)}(e)},accept:".png, .jpeg, .jpg, .doc, .docx, .pdf",children:(0,x.jsx)(m.Button,{htmlType:"button",icon:(0,x.jsx)(F.Z,{}),children:"Upload File"})})},"form-item-c file-1")},{label:"Description",name:"Description",className:"col-span-12 mb-2",type:"textarea"},{label:"Include E-Mail",name:"includeEmail",className:"col-span-12 mb-2",type:"check"}],W=[{label:"File",name:"FileAddress",alignment:"left",cellRender:function(e){return(0,x.jsx)(m.Tooltip,{title:"".concat("https://ottas-api").concat(e.value),children:(0,x.jsx)("a",{className:"edit-button",href:"".concat("https://ottas-api").concat(e.value),target:"_blank",children:"View File"})})}},{label:"Uploader name",name:"FullName",alignment:"left"},{label:"Created Date",name:"CreatedDate",alignment:"left"},{label:"Include E-Mail",name:"IncludeEmail",alignment:"left",cellRender:function(e){return(0,x.jsx)(N.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})}},{label:"Comment",name:"Description",alignment:"left"},{label:"",name:"action",width:"".concat(l?"0px":"150px"),alignment:"center",cellRender:function(e){return!l&&(0,x.jsxs)("div",{className:"flex gap-4",children:[(0,x.jsx)("button",{type:"button",className:"edit-button",onClick:function(){return function(e){k(e),c(!0)}(e.data)},children:"Edit"}),(0,x.jsx)("button",{type:"button",className:"dlt-button",onClick:function(l){return n=e.data,k(n),void j(!0);var n},children:"Delete"})]})}}],J=function(){z.resetFields(),c(!1),Z(!1)};return(0,x.jsxs)("div",{className:"col-span-12",children:[(0,x.jsx)(m.Table,{data:R,columns:W,allowColumnReordering:!1,containerClass:"shadow-none border border-gray-300",keyExpr:"Id",pager:R.length>20,title:(0,x.jsxs)("div",{className:"flex justify-between items-center py-2 gap-3 border-b",children:[(0,x.jsx)("div",{className:"text-md font-bold pl-2",children:t?"Attachments":null}),!l&&(0,x.jsx)("div",{className:"flex gap-4 items-center",children:(0,x.jsx)(m.Button,{icon:(0,x.jsx)(C.Z,{}),onClick:function(){k(null),c(!0)},className:"text-xs",htmlType:"button",children:"Add Attachment"})})]})}),(0,x.jsx)(m.Modal,{title:"Add Attachment",open:u,onCancel:function(){return c(!1)},children:(0,x.jsx)(m.Form,{form:z,fields:A?[{label:"Comment",name:"Description",className:"col-span-12 mb-2",type:"textarea"},{label:"Include E-Mail",name:"IncludeEmail",className:"col-span-12 mb-2",type:"check"}]:H,size:"small",className:"grid grid-cols-12 gap-x-8",onFinish:function(e){if(Z(!0),A)(0,s.Z)({method:"put",url:"tas/requestdocumentattachment",data:(0,y.Z)((0,y.Z)({},e),{},{id:A.Id})}).then((function(e){_(),J()})).catch((function(e){})).then((function(){return Z(!1)}));else{var l=new FormData;B.map((function(e){l.append("files",e)})),(0,s.Z)({method:"post",url:"/tas/SysFile/multi",data:l}).then((function(l){(0,s.Z)({method:"post",url:"/tas/requestdocumentattachment",data:(0,y.Z)((0,y.Z)({},e),{},{fileAddressIds:l.data.map((function(e){return e.Id})),documentId:Y})}).then((function(e){_()})).catch((function(e){})).then((function(){return J()}))})).catch((function(e){J()}))}},children:(0,x.jsxs)("div",{className:"col-span-12 flex justify-end gap-3",children:[(0,x.jsx)(m.Button,{htmlType:"submit",type:"primary",icon:(0,x.jsx)(C.Z,{}),loading:T,children:"Save"}),(0,x.jsx)(m.Button,{htmlType:"button",onClick:J,disabled:T,children:"Cancel"})]})})}),(0,x.jsxs)(N.GI,{visible:b,showTitle:!1,height:110,width:350,children:[(0,x.jsx)("div",{children:"Are you sure you want to delete this record?"}),(0,x.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,x.jsx)(m.Button,{type:"danger",onClick:function(){(0,s.Z)({method:"delete",url:"tas/requestdocumentattachment/".concat(A.Id)}).then((function(){_(),j(!1)})).catch((function(e){}))},children:"Yes"}),(0,x.jsx)(m.Button,{onClick:function(){return j(!1)},children:"No"})]})]})]})};var q=function(e){var l,n,t,a=e.documentDetail,r=e.refreshData,d=e.disabled,f=(0,i.useState)(!1),g=(0,o.Z)(f,2),b=g[0],j=g[1],I=(0,i.useState)(null),N=(0,o.Z)(I,2),D=N[0],F=N[1],C=(0,i.useState)(!1),S=(0,o.Z)(C,2),q=S[0],T=S[1],Z=(0,i.useState)(!1),w=(0,o.Z)(Z,2),E=w[0],R=w[1],G=(0,i.useContext)(v.V),L=G.state,P=G.action,A=m.Form.useForm(),k=(0,o.Z)(A,1)[0];(0,i.useEffect)((function(){a&&V(a.TravelData)}),[a]);var V=function(e){k.setFieldsValue((0,y.Z)((0,y.Z)({},e),{},{firstTransport:{Date:e.FirstScheduleDate?h()(e.FirstScheduleDate):null,Description:"".concat(e.FirstScheduleDescription),flightId:e.FirstScheduleId},lastTransport:{Date:e.LastScheduleDate?h()(e.LastScheduleDate):null,Description:"".concat(e.LastScheduleDescription),flightId:e.LastScheduleId}}))},M=function(){var e={StartDate:k.getFieldValue(["firstTransport","Date"])?k.getFieldValue(["firstTransport","Date"]):null,EndDate:null};F((0,y.Z)((0,y.Z)({},e),{},{transportType:"first"})),T(!0)},B=function(){var e={StartDate:k.getFieldValue(["lastTransport","Date"])?k.getFieldValue(["lastTransport","Date"]):null,EndDate:null};F((0,y.Z)((0,y.Z)({},e),{},{transportType:"last"})),T(!0)},O=[{type:"component",component:(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(m.Form.Item,{label:"First Transport",className:"col-span-12 mb-2",children:(0,x.jsxs)("div",{className:"flex gap-2",children:[(0,x.jsx)(m.Form.Item,{name:["firstTransport","Date"],className:"mb-0",rules:[{required:!0,message:"First Transport Date is required"}],children:(0,x.jsx)(p.Z,{showWeek:!0,onChange:function(e){P.setFlightCalendarDate(h()(e).format("YYYY-MM-DD")),k.setFieldValue(["firstTransport","flightId"],null),k.setFieldValue(["firstTransport","Description"],null)}})}),(0,x.jsx)(m.Form.Item,{className:"mb-0 w-[100px]",rules:[{required:!0,message:"Direction is required"}],children:(0,x.jsx)(u.Z,{disabled:!0,value:"EXTERNAL"})}),(0,x.jsx)(m.Form.Item,{noStyle:!0,name:["firstTransport","flightId"]}),(0,x.jsx)(m.Form.Item,{name:["firstTransport","Description"],className:"flex-1 mb-0",children:(0,x.jsx)(u.Z,{readOnly:!0})}),(0,x.jsx)(m.Form.Item,{className:"mb-0",shouldUpdate:function(e,l){var n,t;return(null===(n=e.firstTransport)||void 0===n?void 0:n.Date)!==(null===(t=l.firstTransport)||void 0===t?void 0:t.Date)},children:function(e){var l=e.getFieldValue;return(0,x.jsx)(m.Button,{className:"text-xs py-[2px]",type:"primary",onClick:M,disabled:!l(["firstTransport","Date"])||!E,children:"..."})}})]})})})},{type:"component",component:(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(m.Form.Item,{label:"Last Transport",className:"col-span-12 mb-2",children:(0,x.jsxs)("div",{className:"flex gap-2",children:[(0,x.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){var n,t;return(null===(n=e.firstTransport)||void 0===n?void 0:n.Date)!==(null===(t=l.firstTransport)||void 0===t?void 0:t.Date)},children:function(e){var l=e.getFieldValue,n=!1;return l(["lastTransport","Date"])||(n=l(["firstTransport","Date"])),(0,x.jsx)(m.Form.Item,{name:["lastTransport","Date"],className:"mb-0",children:(0,x.jsx)(p.Z,{defaultPickerValue:n,showWeek:!0,className:"w-full"})})}}),(0,x.jsx)(m.Form.Item,{className:"mb-0 w-[100px]",children:(0,x.jsx)(u.Z,{disabled:!0,value:"EXTERNAL"})}),(0,x.jsx)(m.Form.Item,{noStyle:!0,name:["lastTransport","flightId"]}),(0,x.jsx)(m.Form.Item,{name:["lastTransport","Description"],className:"flex-1 mb-0",children:(0,x.jsx)(u.Z,{readOnly:!0})}),(0,x.jsx)(m.Form.Item,{className:"col-span-1 mb-0",shouldUpdate:function(e,l){var n,t;return(null===(n=e.lastTransport)||void 0===n?void 0:n.Date)!==(null===(t=l.lastTransport)||void 0===t?void 0:t.Date)},children:function(e){var l=e.getFieldValue;return(0,x.jsx)(m.Button,{className:"text-xs py-[2px]",type:"primary",onClick:B,disabled:!l(["lastTransport","Date"])||!E,children:"..."})}})]})})})},{label:"Department",name:"DepartmentId",className:"col-span-12 mb-2",type:"treeSelect",rules:[{required:!0,message:"Department is required"}],inputprops:{treeData:null===(l=L.referData)||void 0===l?void 0:l.departments,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},allowClear:!0,showSearch:!0,filterTreeNode:function(e,l){var n;return(null!==(n=null===l||void 0===l?void 0:l.Name)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())}}},{label:"Position",name:"PositionId",className:"col-span-12 mb-2",type:"select",rules:[{required:!0,message:"Position is required"}],inputprops:{options:null===(n=L.referData)||void 0===n?void 0:n.positions}},{type:"component",component:(0,x.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.DepartmentId!==l.DepartmentId},children:function(e){var l,n=e.getFieldValue,t=e.setFieldValue,a=null===(l=L.referData.departments)||void 0===l?void 0:l.find((function(e){return e.Id===n("DepartmentId")}));return a&&a.CostCodeId&&t("CostCodeId",a.CostCodeId),(0,x.jsx)(m.Form.Item,{name:"CostCodeId",label:"CostCodeId",rules:[{required:!0,message:"Cost Code is required"}],className:"col-span-12 mb-2",children:(0,x.jsx)(c.Z,{options:L.referData.costCodes,allowClear:!0,showSearch:!0,filterOption:function(e,l){var n;return(null!==(n=null===l||void 0===l?void 0:l.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())}})})}})},{label:"Employer",name:"EmployerId",className:"col-span-12 mb-2",type:"select",rules:[{required:!0,message:"Employer is required"}],inputprops:{options:null===(t=L.referData)||void 0===t?void 0:t.employers}}];return(0,x.jsxs)("div",{children:[(0,x.jsx)(m.Form,{form:k,fields:O,onFinish:function(e){j(!0),(0,s.Z)({method:"put",url:"tas/requestexternaltravel/addtravel",data:{firstScheduleId:e.firstTransport.flightId,lastScheduleId:e.lastTransport.flightId?e.lastTransport.flightId:null,departmentId:e.DepartmentId,positionId:e.PositionId,employerId:e.EmployerId,costCodeId:e.CostCodeId,Id:null===a||void 0===a?void 0:a.TravelData.Id}}).then((function(e){r()})).catch((function(e){})).then((function(){return j(!1)}))},labelCol:{flex:"150px"},wrapperCol:{flex:1},disabled:!E,size:"small",children:d?null:(0,x.jsx)("div",{className:"col-span-12 gap-3 flex justify-end mt-3",children:E?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.Button,{type:"primary",onClick:function(){return k.submit()},loading:b,children:"Save"}),(0,x.jsx)(m.Button,{onClick:function(e){e.stopPropagation(),R(!1),V(null===a||void 0===a?void 0:a.TravelData)},children:"Cancel"})]}):(0,x.jsx)(m.Button,{onClick:function(){return R(!0)},children:"Edit"})})}),(0,x.jsx)(m.Modal,{title:"Select Transport",open:q,zIndex:1100,width:900,onCancel:function(){return T(!1)},destroyOnClose:!1,children:(0,x.jsx)(m.TransportSearch,{initialSearchValues:D,handleSelect:function(e){"first"===D.transportType?(k.setFieldValue(["firstTransport","Date"],h()(e.EventDate)),k.setFieldValue(["firstTransport","Description"],"".concat(e.Code," ").concat(e.Description)),k.setFieldValue(["firstTransport","flightId"],e.Id),T(!1)):(k.setFieldValue(["lastTransport","Date"],h()(e.EventDate)),k.setFieldValue(["lastTransport","Description"],"".concat(e.Code," ").concat(e.Description)),k.setFieldValue(["lastTransport","flightId"],e.Id),T(!1))},isExternal:!0})})]})},T=n(8251),Z=n(10202),w=n(82241),E=n(24957),R=n(53979),G=n(68197),L=n(59624),P=n(76047),A=n(46146),k=n.n(A),V=n(69226),M=n.n(V),B=n(2135);h().extend(k()),h().extend(M());var O=new RegExp(/^[0-9]{8}$/),U=new RegExp(/^[A-Za-z -]+$/g),z=new RegExp(/^[0-9 +]+$/),Y={labelCol:{xs:{span:24},sm:{span:12},md:{span:8},lg:{span:12},xl:{span:8},xxl:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}};var _=function(e){var l,n,f,g,b,j,N,D,F,C,S,q,T,Z,w,A,k,V,M,_,H,W,J,K,$,X,Q,ee,le,ne,te,ae,oe,ie,se,re,de,ue,ce,me,pe,ve,fe,he,xe,ge,be,je,Ie,ye,Ne,De,Fe,Ce,Se,qe,Te,Ze,we,Ee,Re,Ge,Le,Pe,Ae,ke,Ve,Me,Be,Oe,Ue,ze,Ye,_e,He,We,Je,Ke,$e,Xe,Qe,el,ll,nl,tl,al,ol,il,sl,rl,dl,ul,cl,ml,pl,vl,fl,hl,xl=e.form,gl=e.className,bl=e.refreshData,jl=(e.currentGroup,e.disabled),Il=(0,i.useState)(0),yl=(0,o.Z)(Il,2),Nl=yl[0],Dl=yl[1],Fl=(0,i.useState)(!0),Cl=(0,o.Z)(Fl,2),Sl=(Cl[0],Cl[1]),ql=(0,i.useState)(!1),Tl=(0,o.Z)(ql,2),Zl=Tl[0],wl=Tl[1],El=(0,i.useState)(null),Rl=(0,o.Z)(El,2),Gl=Rl[0],Ll=Rl[1],Pl=(0,i.useState)(!1),Al=(0,o.Z)(Pl,2),kl=Al[0],Vl=Al[1],Ml=(0,i.useState)([]),Bl=(0,o.Z)(Ml,2),Ol=(Bl[0],Bl[1],(0,i.useState)([])),Ul=(0,o.Z)(Ol,2),zl=Ul[0],Yl=Ul[1],_l=(0,i.useState)(!0),Hl=(0,o.Z)(_l,2),Wl=(Hl[0],Hl[1]),Jl=(0,i.useContext)(v.V),Kl=Jl.state,$l=(Jl.action,d.ZP.useNotification()),Xl=(0,o.Z)($l,2),Ql=Xl[0],en=Xl[1];(0,I.s0)(),(0,i.useEffect)((function(){ln()}),[]),(0,i.useEffect)((function(){var e;Kl.userProfileData&&xl&&(null===xl||void 0===xl||xl.setFieldsValue(Kl.userProfileData),nn.map((function(e){"date"===e.type&&Kl.userProfileData[e.name]&&(null===xl||void 0===xl||xl.setFieldValue(e.name,h()(Kl.userProfileData[e.name])))})),tn.map((function(e){"date"===e.type&&Kl.userProfileData[e.name]&&(null===xl||void 0===xl||xl.setFieldValue(e.name,h()(Kl.userProfileData[e.name])))})),rn.map((function(e){"date"===e.type&&Kl.userProfileData[e.name]&&(null===xl||void 0===xl||xl.setFieldValue(e.name,h()(Kl.userProfileData[e.name])))})),null===(e=Kl.userProfileData.GroupData)||void 0===e||e.map((function(e){null===xl||void 0===xl||xl.setFieldValue(e.GroupMasterId,e.GroupDetailId)})))}),[Kl.userProfileData,xl]);var ln=function(){(0,s.Z)({method:"get",url:"tas/profilefield"}).then((function(e){var l={};e.data.map((function(e){l[e.ColumnName]=e})),Yl(l)})).catch((function(){})).then((function(){return Wl(!1)}))},nn=[{label:null===(l=zl.NationalityId)||void 0===l?void 0:l.Label,name:"NationalityId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(n=zl.NationalityId)||void 0===n?void 0:n.FieldRequired,message:"".concat(null===(f=zl.NationalityId)||void 0===f?void 0:f.Label," is required")}],inputprops:{options:Kl.referData.nationalities}},{type:"component",component:(0,x.jsx)("div",{className:"col-span-6"})},{label:null===(g=zl.Gender)||void 0===g?void 0:g.Label,name:"Gender",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(b=zl.Gender)||void 0===b?void 0:b.FieldRequired,message:"".concat(null===(j=zl.Gender)||void 0===j?void 0:j.Label," is required")}],inputprops:{options:[{value:1,label:"Male"},{value:0,label:"Female"}]}},{label:null===(N=zl.Dob)||void 0===N?void 0:N.Label,name:"Dob",className:"col-span-12 lg:col-span-6 mb-0",type:"date",rules:[{required:null===(D=zl.Dob)||void 0===D?void 0:D.FieldRequired,message:"".concat(null===(F=zl.Dob)||void 0===F?void 0:F.Label," is required")}]},{label:null===(C=zl.Firstname)||void 0===C?void 0:C.Label,name:"Firstname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(S=zl.Firstname)||void 0===S?void 0:S.FieldRequired,message:"".concat(null===(q=zl.Firstname)||void 0===q?void 0:q.Label," is required")}]},{label:null===(T=zl.Lastname)||void 0===T?void 0:T.Label,name:"Lastname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(Z=zl.Lastname)||void 0===Z?void 0:Z.FieldRequired,message:"".concat(null===(w=zl.Lastname)||void 0===w?void 0:w.Label," is required")}]},{label:null===(A=zl.MFirstname)||void 0===A?void 0:A.Label,name:"MFirstname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(k=zl.MFirstname)||void 0===k?void 0:k.FieldRequired,message:"".concat(null===(V=zl.MFirstname)||void 0===V?void 0:V.Label," is required")}]},{label:null===(M=zl.MLastname)||void 0===M?void 0:M.Label,name:"MLastname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(_=zl.MLastname)||void 0===_?void 0:_.FieldRequired,message:"".concat(null===(H=zl.MLastname)||void 0===H?void 0:H.Label," is required")}]},{label:null===(W=zl.CommenceDate)||void 0===W?void 0:W.Label,name:"CommenceDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date",rules:[{required:null===(J=zl.CommenceDate)||void 0===J?void 0:J.FieldRequired,message:"".concat(null===(K=zl.CommenceDate)||void 0===K?void 0:K.Label," is required")}],inputprops:{format:"M/D/YYYY"}},{label:"Completion Date",name:"CompletionDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date",inputprops:{format:"M/D/YYYY"}},{label:null===($=zl.DepartmentId)||void 0===$?void 0:$.Label,name:"DepartmentId",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(X=zl.DepartmentId)||void 0===X?void 0:X.FieldRequired,message:"".concat(null===(Q=zl.DepartmentId)||void 0===Q?void 0:Q.Label," is required")}],type:"treeSelect",inputprops:{treeData:Kl.referData.departments,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},allowClear:!0,showSearch:!0,filterTreeNode:function(e,l){var n;return(null!==(n=null===l||void 0===l?void 0:l.Name)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())}}},{label:null===(ee=zl.CostCodeId)||void 0===ee?void 0:ee.Label,name:"CostCodeId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(le=zl.CostCodeId)||void 0===le?void 0:le.FieldRequired,message:"".concat(null===(ne=zl.CostCodeId)||void 0===ne?void 0:ne.Label," is required")}],inputprops:{options:Kl.referData.costCodes}},{label:null===(te=zl.StateId)||void 0===te?void 0:te.Label,name:"StateId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(ae=zl.StateId)||void 0===ae?void 0:ae.FieldRequired,message:"".concat(null===(oe=zl.StateId)||void 0===oe?void 0:oe.Label," is required")}],inputprops:{options:Kl.referData.states}},{label:null===(ie=zl.Email)||void 0===ie?void 0:ie.Label,name:"Email",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(se=zl.Email)||void 0===se?void 0:se.FieldRequired,message:"".concat(null===(re=zl.Email)||void 0===re?void 0:re.Label," is required")},{type:"email",message:"The input is not valid E-mail!"}]},{type:"component",component:(0,x.jsx)(r.Z.Item,{className:"col-span-12 lg:col-span-6 mb-0",label:"AD Account",children:(0,x.jsxs)(G.Z,{gutter:8,children:[(0,x.jsx)(L.Z,{span:12,children:(0,x.jsx)(r.Z.Item,{name:"ADAccount",className:"mb-0",children:(0,x.jsx)(u.Z,{})})}),(0,x.jsx)(L.Z,{span:12,children:(0,x.jsx)(m.Button,{htmlType:"button",disabled:!kl,onClick:function(){var e;(0,s.Z)({method:"post",url:"tas/employee/checkadaccount",data:{employeeId:null===(e=Kl.userProfileData)||void 0===e?void 0:e.Id,adAccount:null===xl||void 0===xl?void 0:xl.getFieldValue("ADAccount")}}).then((function(e){e.data.AdAccountValidationStatus?Ql.success({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1,description:(0,x.jsx)("div",{})}):Ql.error({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1,description:(0,x.jsx)("div",{children:e.data.EmployeeId&&(0,x.jsxs)(B.Link,{to:"/tas/people/search/".concat(e.data.EmployeeId),className:"text-blue-500 hover:underline",children:[e.data.Firstname," ",e.data.Lastname]})})})})).catch((function(e){})).then((function(){return Sl(!1)}))},children:"Account Check"})})]})},"component-ADAccount")}],tn=[{label:null===(de=zl.EmployerId)||void 0===de?void 0:de.Label,name:"EmployerId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(ue=zl.EmployerId)||void 0===ue?void 0:ue.FieldRequired,message:"".concat(null===(ce=zl.EmployerId)||void 0===ce?void 0:ce.Label," is required")}],inputprops:{options:null===(me=Kl.referData)||void 0===me?void 0:me.employers}},{label:null===(pe=zl.PeopleTypeId)||void 0===pe?void 0:pe.Label,name:"PeopleTypeId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(ve=zl.PeopleTypeId)||void 0===ve?void 0:ve.FieldRequired,message:"".concat(null===(fe=zl.PeopleTypeId)||void 0===fe?void 0:fe.Label," is required")}],inputprops:{options:null===(he=Kl.referData)||void 0===he?void 0:he.peopleTypes}},{label:null===(xe=zl.SAPID)||void 0===xe?void 0:xe.Label,name:"SAPID",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(ge=zl.SAPID)||void 0===ge?void 0:ge.FieldRequired,message:"".concat(null===(be=zl.SAPID)||void 0===be?void 0:be.Label," is required")}],inputprops:{maxLength:8}},{label:null===(je=zl.ContractNumber)||void 0===je?void 0:je.Label,name:"ContractNumber",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(Ie=zl.ContractNumber)||void 0===Ie?void 0:Ie.FieldRequired,message:"".concat(null===(ye=zl.ContractNumber)||void 0===ye?void 0:ye.Label," is required")}]},{label:"Person #",name:"Id",className:"col-span-12 lg:col-span-6 mb-0",inputprops:{disabled:!0}},{label:null===(Ne=zl.PositionId)||void 0===Ne?void 0:Ne.Label,name:"PositionId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(De=zl.PositionId)||void 0===De?void 0:De.FieldRequired,message:"".concat(null===(Fe=zl.PositionId)||void 0===Fe?void 0:Fe.Label," is required")}],inputprops:{options:null===(Ce=Kl.referData)||void 0===Ce?void 0:Ce.positions}},{label:null===(Se=zl.HotelCheck)||void 0===Se?void 0:Se.Label,name:"HotelCheck",className:"col-span-12 lg:col-span-6 mb-0",type:"check",rules:[{required:null===(qe=zl.HotelCheck)||void 0===qe?void 0:qe.FieldRequired,message:"".concat(null===(Te=zl.HotelCheck)||void 0===Te?void 0:Te.Label," is required")}]},{label:null===(Ze=zl.RosterId)||void 0===Ze?void 0:Ze.Label,name:"RosterId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(we=zl.RosterId)||void 0===we?void 0:we.FieldRequired,message:"".concat(null===(Ee=zl.RosterId)||void 0===Ee?void 0:Ee.Label," is required")}],inputprops:{options:null===(Re=Kl.referData)||void 0===Re?void 0:Re.rosters}},{label:"Next Roster Start",name:"NextRosterDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date"},{label:null===(Ge=zl.RoomId)||void 0===Ge?void 0:Ge.Label,name:"RoomId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Le=zl.RoomId)||void 0===Le?void 0:Le.FieldRequired,message:"".concat(null===(Pe=zl.RoomId)||void 0===Pe?void 0:Pe.Label," is required")}],inputprops:{options:null===(Ae=Kl.referData)||void 0===Ae?void 0:Ae.rooms}},{label:null===(ke=zl.LocationId)||void 0===ke?void 0:ke.Label,name:"LocationId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Ve=zl.LocationId)||void 0===Ve?void 0:Ve.FieldRequired,message:"".concat(null===(Me=zl.LocationId)||void 0===Me?void 0:Me.Label," is required")}],inputprops:{options:null===(Be=Kl.referData)||void 0===Be?void 0:Be.locations.filter((function(e){return 1!==e.onSite}))}},{label:null===(Oe=zl.FlightGroupMasterId)||void 0===Oe?void 0:Oe.Label,name:"FlightGroupMasterId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Ue=zl.FlightGroupMasterId)||void 0===Ue?void 0:Ue.FieldRequired,message:"".concat(null===(ze=zl.FlightGroupMasterId)||void 0===ze?void 0:ze.Label," is required")}],inputprops:{options:null===(Ye=Kl.referData)||void 0===Ye?void 0:Ye.transportGroups}},{label:null===(_e=zl.SiteContactEmployeeId)||void 0===_e?void 0:_e.Label,name:"SiteContactEmployeeId",className:"col-span-12 lg:col-span-6 mb-0",type:"searchSelect",rules:[{required:null===(He=zl.SiteContactEmployeeId)||void 0===He?void 0:He.FieldRequired,message:"".concat(null===(We=zl.SiteContactEmployeeId)||void 0===We?void 0:We.Label," is required")}],inputprops:{fetchOptions:function(e){return(0,s.Z)({method:"post",url:"tas/employee/searchshort",data:{model:{keyWord:e},pageIndex:0,pageSize:100}}).then((function(e){return e.data.data.map((function(e){return{label:"".concat(e.Firstname," ").concat(e.Lastname," /").concat(e.Mobile,"/"),value:e.Id}}))}))},showSearch:!0,editName:["SiteContactEmployeeFirstname","SiteContactEmployeeLastname"],placeholder:"Select user",allowClear:!0}}],an=[{label:null===(Je=zl.EmergencyContactName)||void 0===Je?void 0:Je.Label,name:"EmergencyContactName",className:"col-span-6 mb-0",rules:[{required:null===(Ke=zl.EmergencyContactName)||void 0===Ke?void 0:Ke.FieldRequired,message:"".concat(null===($e=zl.EmergencyContactName)||void 0===$e?void 0:$e.Label," is required")}]},{label:null===(Xe=zl.EmergencyContactMobile)||void 0===Xe?void 0:Xe.Label,name:"EmergencyContactMobile",className:"col-span-6 mb-0",rules:[{required:null===(Qe=zl.EmergencyContactMobile)||void 0===Qe?void 0:Qe.FieldRequired,message:"".concat(null===(el=zl.EmergencyContactMobile)||void 0===el?void 0:el.Label," is required")},{pattern:z,message:"Invalid phone number"}],inputprops:{className:"w-full",maxLength:15}},{label:null===(ll=zl.Mobile)||void 0===ll?void 0:ll.Label,name:"Mobile",className:"col-span-6 mb-0",type:"number",rules:[{required:null===(nl=zl.Mobile)||void 0===nl?void 0:nl.FieldRequired,message:"".concat(null===(tl=zl.Mobile)||void 0===tl?void 0:tl.Label," is required")},{pattern:O,message:"".concat(null===(al=zl.Mobile)||void 0===al?void 0:al.Label," must be 8 digit")}],inputprops:{prefix:"+976",className:"w-full",maxLength:8}},{label:null===(ol=zl.PersonalMobile)||void 0===ol?void 0:ol.Label,name:"PersonalMobile",className:"col-span-6 mb-0",type:"number",rules:[{required:null===(il=zl.PersonalMobile)||void 0===il?void 0:il.FieldRequired,message:"".concat(null===(sl=zl.PersonalMobile)||void 0===sl?void 0:sl.Label," is required")},{pattern:O,message:"".concat(null===(rl=zl.PersonalMobile)||void 0===rl?void 0:rl.Label," must be 8 digit")}],inputprops:{prefix:"+976",className:"w-full",maxLength:8}},{label:null===(dl=zl.PickUpAddress)||void 0===dl?void 0:dl.Label,name:"PickUpAddress",className:"col-span-6 mb-0",type:"textarea",rules:[{required:null===(ul=zl.PickUpAddress)||void 0===ul?void 0:ul.FieldRequired,message:"".concat(null===(cl=zl.PickUpAddress)||void 0===cl?void 0:cl.Label," is required")}]},{label:null===(ml=zl.FrequentFlyer)||void 0===ml?void 0:ml.Label,name:"FrequentFlyer",className:"col-span-6 mb-0",rules:[{required:null===(pl=zl.FrequentFlyer)||void 0===pl?void 0:pl.FieldRequired,message:"".concat(null===(vl=zl.FrequentFlyer)||void 0===vl?void 0:vl.Label," is required")}]}],on=[{type:"component",component:(0,x.jsx)(x.Fragment,{children:null===(fl=Kl.referData)||void 0===fl||null===(hl=fl.fieldsOfGroups)||void 0===hl?void 0:hl.map((function(e,l){return(0,x.jsx)(r.Z.Item,{name:e.Id,label:e.Description,className:"col-span-12 lg:col-span-7 mb-0",children:(0,x.jsx)(c.Z,{fieldNames:{value:"Id",label:"Description"},filterOption:function(e,l){var n;return(null!==(n=null===l||void 0===l?void 0:l.Description)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0,options:e.details})},"g-fields-".concat(l))}))})}],sn=[{type:"component",component:(0,x.jsx)(r.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.NationalityId!==l.NationalityId},children:function(e){e.getFieldValue;var l,n,t,a,o,i,s,d,c,m,v,f=null===(l=Kl.referData)||void 0===l||null===(n=l.nationalities)||void 0===n?void 0:n.find((function(e){return e.value===xl.getFieldValue("NationalityId")}));return"MN"!==(null===f||void 0===f?void 0:f.Code)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(r.Z.Item,{label:null===(t=zl.PassportNumber)||void 0===t?void 0:t.Label,name:"PassportNumber",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(a=zl.PassportExpiry)||void 0===a?void 0:a.FieldRequired,message:"".concat(null===(o=zl.PassportNumber)||void 0===o?void 0:o.Label," is required")}],children:(0,x.jsx)(u.Z,{})}),(0,x.jsx)(r.Z.Item,{label:null===(i=zl.PassportName)||void 0===i?void 0:i.Label,name:"PassportName",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(s=zl.PassportExpiry)||void 0===s?void 0:s.FieldRequired,message:"".concat(null===(d=zl.PassportName)||void 0===d?void 0:d.Label," is required")},{pattern:U,message:"The input is not valid name!"}],children:(0,x.jsx)(u.Z,{})}),(0,x.jsx)(r.Z.Item,{label:null===(c=zl.PassportExpiry)||void 0===c?void 0:c.Label,name:"PassportExpiry",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(m=zl.PassportExpiry)||void 0===m?void 0:m.FieldRequired,message:"".concat(null===(v=zl.PassportExpiry)||void 0===v?void 0:v.Label," is required")}],children:(0,x.jsx)(p.Z,{})})]})}})},{label:"Passport Image",name:"PassportRawImage",className:"col-span-12 lg:col-span-7 mb-0",type:"image"}],rn=[{name:"PassportNumber",type:"image"},{name:"PassportName",type:"image"},{name:"PassportExpiry",type:"date"},{name:"PassportImage",type:"image"}],dn=[{label:"",name:"FullName",alignment:"left",wrap:!0,cellRender:function(e){var l,n;return(0,x.jsx)("div",{className:"flex items-center",children:(0,x.jsx)(B.Link,{to:"/tas/people/search/".concat(null===(l=e.data)||void 0===l?void 0:l.EmployeeId),children:(0,x.jsxs)("button",{type:"button",className:"text-blue-500 hover:underline whitespace-normal",children:[e.value," (",null===(n=e.data)||void 0===n?void 0:n.EmployeeId,")"]})})})}},{label:"ADAccount",name:"ADAccount",alignment:"left",cellRender:function(e){return(0,x.jsx)("div",{children:"boolean"===typeof e.value?e.value?"":(0,x.jsx)(E.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})}},{label:"SAP ID",name:"SAPID",alignment:"center",width:"60px",cellRender:function(e){return(0,x.jsx)("div",{children:"boolean"===typeof e.value?e.value?"":(0,x.jsx)(E.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})}},{label:"Mobile",name:"Mobile",alignment:"center",width:"60px",cellRender:function(e){return(0,x.jsx)("div",{children:"boolean"===typeof e.value?e.value?"":(0,x.jsx)(E.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})}}],un=function(e){var l=0;return Gl&&Gl.map((function(n,t){null!==e&&void 0!==e&&e.find((function(e){return e.name===n.name[0]}))&&l++})),l>0&&(0,x.jsx)(m.ErrorTabElement,{children:l})},cn=[{label:(0,x.jsxs)("div",{className:"font-normal",children:["Personal ",un([].concat(nn))]}),key:0,forceRender:!0,children:(0,x.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,x.jsx)(m.FormItemRender,{fields:nn,form:xl,editData:Kl.userProfileData},"t-item-1c")},"t-item-0")},{label:(0,x.jsxs)("div",{children:["On Site ",un(tn)]}),key:1,forceRender:!0,children:(0,x.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,x.jsx)(m.FormItemRender,{fields:tn,form:xl,editData:Kl.userProfileData},"t-item-2c")},"t-item-1")},{label:(0,x.jsxs)("div",{children:["Off Site ",un([].concat(an,[{name:"PersonalMobile"}]))]}),key:2,forceRender:!0,children:(0,x.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,x.jsx)(m.FormItemRender,{fields:an,form:xl,editData:Kl.userProfileData},"t-item-3c")},"t-item-2")},{label:(0,x.jsx)("div",{children:"Group"}),key:3,forceRender:!0,children:(0,x.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,x.jsx)(m.FormItemRender,{fields:on,form:xl,editData:Kl.userProfileData},"t-item-4c")},"t-item-3")},{label:(0,x.jsxs)("div",{children:["Citizenship ",un(function(){if(null!==xl&&void 0!==xl&&xl.getFieldValue("NationalityId")){var e,l,n=null===(e=Kl.referData)||void 0===e||null===(l=e.nationalities)||void 0===l?void 0:l.find((function(e){return e.value===xl.getFieldValue("NationalityId")}));return"MN"!==(null===n||void 0===n?void 0:n.Code)?[{label:"Passport Number",name:"PassportNumber",rules:[{required:!0,message:"Passport Number is required"}]},{label:"Name On Passport",name:"PassportName",rules:[{required:!0,message:"Name on password is required"}]},{label:"Passport Expiry Date",name:"PassportExpiry",rules:[{required:!0,message:"Password expiry date is required"}]}]:[]}return[]}())]}),key:4,forceRender:!0,children:(0,x.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,x.jsx)(m.FormItemRender,{fields:sn,form:xl,editData:Kl.userProfileData},"t-item-5c")},"t-item-4")}];return(0,x.jsxs)(x.Fragment,{children:[Kl.customLoading?(0,x.jsx)("div",{className:"animate-skeleton h-[400px] flex rounded-ot shadow-md col-span-12"}):(0,x.jsxs)("div",{className:"bg-white rounded-ot p-4 col-span-12 shadow-md mb-1 ".concat(gl),children:[(0,x.jsx)(r.Z,(0,y.Z)((0,y.Z)({form:xl},Y),{},{labelAlign:"left",onFinish:function(e){var l,n,o;Ll(null),wl(!0);var i=[],r=new FormData;Object.keys(e).map((function(l){if(isNaN(l)){if("PassportRawImage"!==l&&"SiteContactEmployeeId"!==l)"Gender"===l?r.append(l,e[l]?1:0):"CommenceDate"===l||"CompletionDate"===l?r.append(l,e[l]?h()(e[l]).format("YYYY-MM-DD"):""):r.append(l,e[l]?e[l]:"");else if("SiteContactEmployeeId"===l){var n,t;if("string"===typeof e[l])r.append(l,null!==(n=Kl.userProfileData)&&void 0!==n&&n.SiteContactEmployeeId?null===(t=Kl.userProfileData)||void 0===t?void 0:t.SiteContactEmployeeId:"");else r.append(l,e[l]?e[l]:"")}}else i.push({GroupMasterId:parseInt(l),GroupDetailId:e[l]?e[l]:""})})),r.append("PassportRawImage",null!==(l=e.PassportRawImage)&&void 0!==l&&l.file?null===(n=e.PassportRawImage)||void 0===n?void 0:n.file:""),r.append("id",null===(o=Kl.userProfileData)||void 0===o?void 0:o.Id),(0,s.Z)({method:"patch",url:"tas/employee",data:r}).then(function(){var e=(0,a.Z)((0,t.Z)().mark((function e(l){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,s.Z)({method:"post",url:"tas/groupmembers/".concat(null===(n=Kl.userProfileData)||void 0===n?void 0:n.Id),data:i}).then((function(e){var l;Vl(!1),bl(null===(l=Kl.userProfileData)||void 0===l?void 0:l.Id)})).catch((function(e){})).then((function(){wl(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(l){return e.apply(this,arguments)}}()).catch((function(e){var l=JSON.parse(e.response.data.message);l&&l.length>0&&(Ql.error({message:"Validation Warning",duration:0,description:(0,x.jsx)("div",{children:(0,x.jsx)(m.Table,{data:l,columns:dn,containerClass:"shadow-none border",pager:!1})})}),wl(!1))}))},className:"bg-white rounded-lg",onFinishFailed:function(e){e&&Ll(e.errorFields)},disabled:!kl,children:(0,x.jsx)(P.Z,{defaultActiveKey:"1",type:"card",size:"middle",items:cn,activeKey:Nl,onTabClick:function(e){return Dl(e)}})})),(0,x.jsx)("div",{className:"mt-3 flex justify-end",children:jl?null:kl?(0,x.jsxs)("div",{className:"flex items-center gap-3",children:[(0,x.jsx)(m.Button,{type:"primary",loading:Zl,onClick:function(){return xl.submit()},icon:(0,x.jsx)(R.Z,{}),children:"Save"}),(0,x.jsx)(m.Button,{onClick:function(){return Vl(!1)},disabled:Zl,children:"Cancel"})]}):(0,x.jsx)(m.Button,{onClick:function(){return Vl(!0)},children:"Edit"})})]}),en]})};var H=function(){var e,l,n,p=(0,i.useState)(null),f=(0,o.Z)(p,2),h=f[0],b=f[1],y=(0,i.useState)(null),D=(0,o.Z)(y,2),F=D[0],C=D[1],E=(0,i.useState)(!1),R=(0,o.Z)(E,2),G=R[0],L=R[1],P=(0,i.useState)(!1),A=(0,o.Z)(P,2),k=(A[0],A[1]),V=(0,i.useState)(null),M=(0,o.Z)(V,2),B=M[0],O=M[1],U=(0,i.useState)(null),z=(0,o.Z)(U,2),Y=z[0],H=z[1],W=(0,i.useState)(null),J=(0,o.Z)(W,2),K=J[0],$=J[1],X=(0,i.useState)(!1),Q=(0,o.Z)(X,2),ee=Q[0],le=Q[1],ne=(0,i.useState)([]),te=(0,o.Z)(ne,2),ae=te[0],oe=te[1],ie=(0,i.useState)(null),se=(0,o.Z)(ie,2),re=se[0],de=se[1],ue=(0,i.useState)(!1),ce=(0,o.Z)(ue,2),me=ce[0],pe=ce[1],ve=(0,i.useState)(null),fe=(0,o.Z)(ve,2),he=fe[0],xe=fe[1],ge=(0,I.f_)().data,be=(0,i.useContext)(v.V),je=be.state,Ie=be.action,ye=r.Z.useForm(),Ne=(0,o.Z)(ye,1)[0],De=r.Z.useForm(),Fe=((0,o.Z)(De,1)[0],r.Z.useForm()),Ce=(0,o.Z)(Fe,1)[0],Se=r.Z.useForm(),qe=(0,o.Z)(Se,1)[0],Te=r.Z.useForm(),Ze=(0,o.Z)(Te,1)[0],we=(0,I.s0)(),Ee=(0,I.UO)(),Re=(Ee.empId,Ee.documentId),Ge=Ee.documentTag,Le=(0,w.Z)(),Pe="requestDocumentDetail_".concat(Re),Ae=d.ZP.useNotification(),ke=(0,o.Z)(Ae,2),Ve=(ke[0],ke[1]);(0,i.useEffect)((function(){ge.Id&&b(ge)}),[ge]),(0,i.useEffect)((function(){Re&&ge.Id&&(L(!0),Ie.changeMenuKey("/request/task"),s.Z.all(["tas/employee/profile/".concat(ge.EmployeeId),"tas/requestdocumenthistory/".concat(Re),"tas/requestdocument/myinfo"].map((function(e){return s.Z.get(e)}))).then(s.Z.spread((function(e,l,n){Ie.saveUserProfileData(e.data),xe(e.data),oe(l.data),de(n.data)}))).catch((function(){})).then((function(){return L(!1)})))}),[Re]),(0,i.useEffect)((function(){return je.connectionMultiViewer&&je.userInfo&&(Me(),je.connectionMultiViewer.on("UsersInScreen",(function(e,l){var n=l.map((function(e){return{name:e.userName.split("_")[0],role:e.userName.split("_")[1],color:(0,Z.Z)()}}));Ie.setMultiViewers(n.filter((function(e){var l,n;return e.name!=="".concat(null===(l=je.userInfo)||void 0===l?void 0:l.Firstname," ").concat(null===(n=je.userInfo)||void 0===n?void 0:n.Lastname)})))}))),function(){je.connectionMultiViewer&&Be()}}),[je.connectionMultiViewer,je.userInfo]),(0,i.useEffect)((function(){h&&Ue()}),[h]),(0,i.useEffect)((function(){F&&ze()}),[F]);var Me=function(){try{var e,l,n,t;null===(e=je.connectionMultiViewer)||void 0===e||e.invoke("JoinScreen","".concat(null===(l=je.userInfo)||void 0===l?void 0:l.Firstname," ").concat(null===(n=je.userInfo)||void 0===n?void 0:n.Lastname,"_").concat(null===(t=je.userInfo)||void 0===t?void 0:t.Role),Pe)}catch(a){}},Be=function(){var e,l,n,t;Ie.setMultiViewers([]),null===(e=je.connectionMultiViewer)||void 0===e||e.invoke("LeaveScreen","".concat(null===(l=je.userInfo)||void 0===l?void 0:l.Firstname," ").concat(null===(n=je.userInfo)||void 0===n?void 0:n.Lastname,"_").concat(null===(t=je.userInfo)||void 0===t?void 0:t.Role),Pe)},Oe=function(){(0,s.Z)({method:"get",url:"tas/requestsitetravel/".concat(Ge,"/").concat(Re)}).then(function(){var e=(0,a.Z)((0,t.Z)().mark((function e(l){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.data.Id?b(l.data):k(!0);case 1:case"end":return e.stop()}}),e)})));return function(l){return e.apply(this,arguments)}}()).catch((function(e){}))},Ue=function(e){(0,s.Z)({method:"get",url:"/tas/requestgroupconfig/groupandmembers/".concat(Re)}).then((function(e){C(e.data)}))},ze=function(){(0,s.Z)({method:"get",url:"/tas/requestgroupconfig/documentroute/".concat(Re)}).then((function(e){Ye(e.data)})).catch((function(e){})).then((function(){return L(!1)}))},Ye=function(e){if("reschedule"===Ge){var l=e.find((function(e){return 1===e.CurrentPosition}));if($(l),"linemanager"===(null===l||void 0===l?void 0:l.GroupTag))if(1===h.EmployeeActive){var n=F.find((function(e){return"travelsite"===(null===e||void 0===e?void 0:e.GroupTag)}));if(n){var t=[];n.groupMembers.map((function(e){t.push({value:e.employeeId,label:e.fullName})})),Ne.setFieldValue("nextGroupName",null===n||void 0===n?void 0:n.GroupName),Ne.setFieldValue("nextGroupId",null===n||void 0===n?void 0:n.id),Ne.setFieldValue("assignEmployeeOptions",t)}H(n)}else{var a=F.find((function(e){return"dataapproval"===(null===e||void 0===e?void 0:e.GroupTag)}));if(a){var o=[];a.groupMembers.map((function(e){o.push({value:e.employeeId,label:e.fullName})})),Ne.setFieldValue("nextGroupName",null===a||void 0===a?void 0:a.GroupName),Ne.setFieldValue("nextGroupId",null===a||void 0===a?void 0:a.id),Ne.setFieldValue("assignEmployeeOptions",o),H(a)}}else if("dataapproval"===(null===l||void 0===l?void 0:l.GroupTag)){var i=F.find((function(e){return"travelsite"===(null===e||void 0===e?void 0:e.GroupTag)}));if(i){var s=[];i.groupMembers.map((function(e){s.push({value:e.employeeId,label:e.fullName})})),Ne.setFieldValue("nextGroupName",null===i||void 0===i?void 0:i.GroupName),Ne.setFieldValue("nextGroupId",null===i||void 0===i?void 0:i.id),Ne.setFieldValue("assignEmployeeOptions",s)}H(i)}else if("travelsite"===(null===l||void 0===l?void 0:l.GroupTag))H({GroupTag:"complete"});else if("Requester"===(null===l||void 0===l?void 0:l.GroupTag))if(h.DaysAway>=7)H(null);else{var r=F.find((function(e){return"linemanager"===(null===e||void 0===e?void 0:e.GroupTag)}));if(r){var d=[];r.groupMembers.map((function(e){d.push({value:e.employeeId,label:e.fullName})})),Ne.setFieldValue("nextGroupName",null===r||void 0===r?void 0:r.GroupName),Ne.setFieldValue("nextGroupId",null===r||void 0===r?void 0:r.id),Ne.setFieldValue("assignEmployeeOptions",d)}H(r)}}else if("addtravel"===Ge){var u=e.find((function(e){return 1===e.CurrentPosition}));if($(u),"linemanager"===(null===u||void 0===u?void 0:u.GroupTag))if(1===h.EmployeeActive){var c=F.find((function(e){return"travelsite"===(null===e||void 0===e?void 0:e.GroupTag)}));if(c){var m=[];c.groupMembers.map((function(e){m.push({value:e.employeeId,label:e.fullName})})),Ne.setFieldValue("nextGroupName",null===c||void 0===c?void 0:c.GroupName),Ne.setFieldValue("nextGroupId",null===c||void 0===c?void 0:c.id),Ne.setFieldValue("assignEmployeeOptions",m),H(c)}}else{var p=F.find((function(e){return"dataapproval"===(null===e||void 0===e?void 0:e.GroupTag)}));if(p){var v=[];p.groupMembers.map((function(e){v.push({value:e.employeeId,label:e.fullName})})),Ne.setFieldValue("nextGroupName",null===p||void 0===p?void 0:p.GroupName),Ne.setFieldValue("nextGroupId",null===p||void 0===p?void 0:p.id),Ne.setFieldValue("assignEmployeeOptions",v),H(p)}}else if("dataapproval"===(null===u||void 0===u?void 0:u.GroupTag)){var f=F.find((function(e){return"travelsite"===(null===e||void 0===e?void 0:e.GroupTag)}));if(f){var x=[];f.groupMembers.map((function(e){x.push({value:e.employeeId,label:e.fullName})})),Ne.setFieldValue("nextGroupName",null===f||void 0===f?void 0:f.GroupName),Ne.setFieldValue("nextGroupId",null===f||void 0===f?void 0:f.id),Ne.setFieldValue("assignEmployeeOptions",x),H(f)}}else if("travelsite"===(null===u||void 0===u?void 0:u.GroupTag))H({GroupTag:"complete"});else if("Requester"===(null===u||void 0===u?void 0:u.GroupTag)){var g=F.find((function(e){return"linemanager"===(null===e||void 0===e?void 0:e.GroupTag)}));if(g){var b=[];g.groupMembers.map((function(e){b.push({value:e.employeeId,label:e.fullName})})),Ne.setFieldValue("nextGroupName",null===g||void 0===g?void 0:g.GroupName),Ne.setFieldValue("nextGroupId",null===g||void 0===g?void 0:g.id),Ne.setFieldValue("assignEmployeeOptions",b)}H(g)}}else{var j=e.find((function(e){return 1===e.CurrentPosition}));if($(j),"linemanager"===(null===j||void 0===j?void 0:j.GroupTag)){var I=F.find((function(e){return"travelsite"===(null===e||void 0===e?void 0:e.GroupTag)}));if(I){var y=[];I.groupMembers.map((function(e){y.push({value:e.employeeId,label:e.fullName})})),Ne.setFieldValue("nextGroupName",null===I||void 0===I?void 0:I.GroupName),Ne.setFieldValue("nextGroupId",null===I||void 0===I?void 0:I.id),Ne.setFieldValue("assignEmployeeOptions",y)}H(I)}else if("Requester"===(null===j||void 0===j?void 0:j.GroupTag)){var N=F.find((function(e){return"linemanager"===(null===e||void 0===e?void 0:e.GroupTag)}));if(N){var D=[];N.groupMembers.map((function(e){D.push({value:e.employeeId,label:e.fullName})})),Ne.setFieldValue("nextGroupName",null===N||void 0===N?void 0:N.GroupName),Ne.setFieldValue("nextGroupId",null===N||void 0===N?void 0:N.id),Ne.setFieldValue("assignEmployeeOptions",D)}H(N)}else H({GroupTag:"complete"})}},_e=function(){var e=Ne.getFieldsValue();pe(!0),"Complete"===B?(0,s.Z)({method:"put",url:"tas/requestexternaltravel/".concat(Ge,"/").concat(B,"/").concat(Re),data:{comment:e.comment,documentId:Re,impersonateUserId:Le.get("impersonateuser")}}).then((function(e){le(!1),Le.get("impersonateuser")?we("/request/impersonateuser/".concat(Le.get("impersonateuser"))):we("/request/task")})).catch((function(e){})).then((function(){return pe(!1)})):"dataapproval"===(null===K||void 0===K?void 0:K.GroupTag)?(0,s.Z)({method:"put",url:"tas/requestdocument/".concat(B),data:{nextGroupId:e.nextGroupId,comment:e.comment,assignEmployeeId:e.assignedEmployeeId,id:Re,impersonateUserId:Le.get("impersonateuser")}}).then((function(e){le(!1),pe(!1),Le.get("impersonateuser")?we("/request/impersonateuser/".concat(Le.get("impersonateuser"))):we("/request/task")})).catch((function(e){pe(!1)})):(0,s.Z)({method:"put",url:"tas/requestdocument/".concat(B),data:{nextGroupId:e.nextGroupId,comment:e.comment,assignEmployeeId:e.assignedEmployeeId,id:Re,impersonateUserId:Le.get("impersonateuser")}}).then((function(e){le(!1),Le.get("impersonateuser")?we("/request/impersonateuser/".concat(Le.get("impersonateuser"))):we("/request/task")})).catch((function(e){})).then((function(){return pe(!1)}))},He=function(e){O(e),"Approve"===e||"Complete"===e||"Decline"===e?Ne.submit():le(!0)};return ge.Id?(0,x.jsxs)("div",{children:[G?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"animate-skeleton h-[230px] flex rounded-ot mb-5 shadow-md"}),(0,x.jsx)("div",{className:"animate-skeleton h-[400px] flex rounded-ot shadow-md"})]}):(0,x.jsxs)("div",{className:"relative",children:[(0,x.jsx)(m.RequestDocumentHeader,{profileData:he,documentDetail:h}),(0,x.jsx)(m.Accordion,{title:"Travel Calendar",className:"border mt-3",children:(0,x.jsx)("div",{className:"p-3",children:(0,x.jsx)(m.ProfileCalendar,{profile:he})})}),(0,x.jsxs)(r.Z.Provider,{onFormFinish:function(e,l){l.values,l.forms},children:["dataapproval"!==(null===K||void 0===K?void 0:K.GroupTag)||T.Z.getDisabledStatus({documentData:h,userData:re,groupTag:null===K||void 0===K?void 0:K.GroupTag})?null:(0,x.jsx)(m.Accordion,{className:"col-span-12 shadow-md rounded-ot overflow-hidden mt-3",title:"Profile",children:(0,x.jsx)("div",{className:"p-4 flex flex-col gap-5",children:(0,x.jsx)(_,{data:he,form:Ze,currentGroup:K,className:"shadow-none border",refreshData:function(e){(0,s.Z)({method:"get",url:"tas/employee/profile/".concat(e)}).then((function(e){Ie.saveUserProfileData(e.data),xe(e.data)})).catch((function(e){}))},disabled:T.Z.getDisabledStatus({documentData:h,userData:re,groupTag:null===K||void 0===K?void 0:K.GroupTag})})})}),(0,x.jsxs)("div",{className:"grid grid-cols-12 gap-3 mt-3",children:["dataapproval"===(null===K||void 0===K?void 0:K.GroupTag)?null:function(){switch(Ge){case"addtravel":return(0,x.jsx)(m.Accordion,{title:"New Travel Request",className:"border col-span-12 xl:col-span-7 2xl:col-span-6",children:(0,x.jsx)("div",{className:"p-4",children:(0,x.jsx)(q,{documentDetail:h,refreshData:Oe,disabled:T.Z.getDisabledStatus({documentData:h,userData:re,groupTag:null===K||void 0===K?void 0:K.GroupTag,userGroupIds:null===re||void 0===re?void 0:re.ApprovalGroupIds})})})});case"reschedule":return(0,x.jsx)(m.Accordion,{title:"Reschedule Existing Travel",className:"border col-span-12 xl:col-span-7 2xl:col-span-6",children:(0,x.jsx)("div",{className:"p-4",children:(0,x.jsx)(g,{form:Ce,documentDetail:h,data:null===h||void 0===h?void 0:h.TravelData,refreshData:Oe,disabled:T.Z.getDisabledStatus({documentData:h,userData:re,userGroupIds:null===re||void 0===re?void 0:re.ApprovalGroupIds,groupTag:null===K||void 0===K?void 0:K.GroupTag}),currentGroup:K})})});case"remove":return(0,x.jsx)(m.Accordion,{title:"Remove Existing Travel",className:"border col-span-12 xl:col-span-7 2xl:col-span-6",children:(0,x.jsx)("div",{className:"p-4",children:(0,x.jsx)(j,{form:qe,editData:null===h||void 0===h?void 0:h.TravelData,currentGroup:K,disabled:T.Z.getDisabledStatus({documentData:h,userData:re,groupTag:null===K||void 0===K?void 0:K.GroupTag,userGroupIds:null===re||void 0===re?void 0:re.ApprovalGroupIds})})})})}}(),T.Z.getActionPermission({documentData:h,userData:re,groupTag:null===K||void 0===K?void 0:K.GroupTag,userGroupIds:null===re||void 0===re?void 0:re.ApprovalGroupIds})?(0,x.jsx)(m.Accordion,{title:"Request Document",className:"border col-span-12 xl:col-span-5 2xl:col-span-6",children:(0,x.jsx)(m.Form,{className:"grid grid-cols-12 ",form:Ne,onFinish:_e,children:(0,x.jsxs)("div",{className:"flex flex-col gap-1 px-4 pb-2 pt-4 col-span-12",children:[null!==h&&void 0!==h&&null!==(e=h.TravelData)&&void 0!==e&&e.Reason?(0,x.jsxs)("div",{className:"border border-[#ffe58f] bg-[#fffbe6] rounded-md px-3 py-2",children:[(0,x.jsx)("div",{className:"font-medium leading-none mb-1",children:"Reason"}),(0,x.jsx)("div",{children:h.TravelData.Reason})]}):null,(0,x.jsxs)("div",{className:"mt-2",children:["Comments:",(0,x.jsx)(m.Form.Item,{className:"mb-0",name:"comment",children:(0,x.jsx)(u.Z.TextArea,{autoSize:{minRows:3,maxRows:5}})})]}),(0,x.jsx)("div",{className:"flex mt-2 mb-2 gap-5",children:Y&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.nextGroupName!==l.nextGroupName},children:function(e){var l=e.getFieldValue;return(0,x.jsxs)(m.Form.Item,{name:"nextGroupId",className:"mb-0 leading-none",children:["Next Approval: ",(0,x.jsx)("span",{className:"font-bold",children:l("nextGroupName")})]})}}),"linemanager"===(null===Y||void 0===Y?void 0:Y.GroupTag)&&(0,x.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.assignEmployeeOptions!==l.assignEmployeeOptions},children:function(e){var l=e.getFieldValue;return(0,x.jsx)(m.Form.Item,{name:"assignedEmployeeId",label:"Send to:",rules:[{required:!0,message:"Assign Employee is required"}],className:"w-[300px] mb-0",children:(0,x.jsx)(c.Z,{options:l("assignEmployeeOptions"),className:"w-[200px]",filterOption:function(e,l){var n;return(null!==(n=null===l||void 0===l?void 0:l.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0})})}})]})}),(0,x.jsx)("div",{className:"flex justify-end gap-4",children:(0,x.jsx)("div",{className:"flex items-center gap-3 justify-end",children:(0,x.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.comment!==l.comment},children:function(e){var l=e.getFieldValue,n=!Boolean(l("comment"));return function(e,l){return e?"complete"!==e?(0,x.jsx)(x.Fragment,{children:"Requester"===K.GroupTag?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.Button,{htmlType:"button",type:"primary",onClick:function(){return He("Approve")},disabled:me,loading:me&&"Approve"===B,children:"Submit"}),(0,x.jsx)(m.Button,{htmlType:"button",type:"danger",onClick:function(){return He("Cancel")},disabled:me,children:"Cancel Request"})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.Button,{htmlType:"button",type:"success",onClick:function(){return He("Approve")},disabled:me,loading:me&&"Approve"===B,children:"Approve"}),(0,x.jsx)(m.Button,{htmlType:"button",type:"danger",onClick:function(){return He("Cancel")},disabled:me,children:"Cancel Request"}),(0,x.jsx)(m.Tooltip,{title:l?"Please fill comment field!":"",children:(0,x.jsx)("div",{children:(0,x.jsx)(m.Button,{htmlType:"button",onClick:function(){return He("Decline")},disabled:l||me,loading:me&&"Decline"===B,children:"Decline"})})})]})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.Button,{htmlType:"button",type:"success",onClick:function(){return He("Complete")},disabled:me,loading:me&&"Complete"===B,children:"Complete"}),(0,x.jsx)(m.Button,{htmlType:"button",type:"danger",onClick:function(){return He("Cancel")},disabled:me,children:"Cancel Request"}),(0,x.jsx)(m.Tooltip,{title:l?"Please fill comment field!":"",children:(0,x.jsx)("div",{children:(0,x.jsx)(m.Button,{htmlType:"button",onClick:function(){return He("Decline")},disabled:l||me,loading:me&&"Decline"===B,children:"Decline"})})})]}):null}(null===Y||void 0===Y?void 0:Y.GroupTag,n)}})})})]})})}):(null===re||void 0===re?void 0:re.EmployeeId)===(null===h||void 0===h?void 0:h.RequestUserId)&&"Submitted"===(null===h||void 0===h?void 0:h.CurrentStatus)?(0,x.jsx)(m.Accordion,{title:"Request Document",className:"border col-span-12 xl:col-span-5 2xl:col-span-6",children:(0,x.jsx)(m.Form,{className:"grid grid-cols-12 ",form:Ne,initValues:{},onFinish:_e,children:(0,x.jsxs)("div",{className:"flex flex-col gap-1 px-4 pt-4 pb-2 col-span-12",children:[null!==h&&void 0!==h&&null!==(l=h.TravelData)&&void 0!==l&&l.Reason?(0,x.jsxs)("div",{className:"border border-[#ffe58f] bg-[#fffbe6] rounded-xl p-3",children:[(0,x.jsx)("div",{className:"font-medium",children:"Reason"}),(0,x.jsx)("div",{children:h.TravelData.Reason})]}):null,(0,x.jsxs)("div",{className:"mt-2",children:["Comments:",(0,x.jsx)(m.Form.Item,{className:"mb-0",name:"comment",children:(0,x.jsx)(u.Z.TextArea,{autoSize:{minRows:3,maxRows:5}})})]}),(0,x.jsx)("div",{className:"flex mt-2 mb-2 gap-5",children:Y&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.nextGroupName!==l.nextGroupName},children:function(e){var l=e.getFieldValue;return(0,x.jsxs)(m.Form.Item,{name:"nextGroupId",className:"mb-0 leading-none",children:["Next Approval: ",(0,x.jsx)("span",{className:"font-bold",children:l("nextGroupName")})]})}}),"linemanager"===(null===Y||void 0===Y?void 0:Y.GroupTag)&&(0,x.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.assignEmployeeOptions!==l.assignEmployeeOptions},children:function(e){var l=e.getFieldValue;return(0,x.jsx)(m.Form.Item,{name:"assignedEmployeeId",label:"Send to:",rules:[{required:!0,message:"Assign Employee is required"}],className:"w-[300px] mb-0",children:(0,x.jsx)(c.Z,{options:l("assignEmployeeOptions"),className:"w-[200px]"})})}})]})}),(0,x.jsx)("div",{className:"flex justify-end gap-4",children:(0,x.jsx)("div",{className:"flex items-center gap-3 justify-end",children:(0,x.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.comment!==l.comment},children:function(e){var l=e.getFieldValue;Boolean(l("comment"));return(0,x.jsx)(m.Button,{htmlType:"button",type:"danger",onClick:function(){return He("Cancel")},disabled:me,children:"Cancel Request"})}})})})]})})}):null!==h&&void 0!==h&&null!==(n=h.TravelData)&&void 0!==n&&n.Reason?(0,x.jsx)("div",{className:"col-span-12 xl:col-span-5 2xl:col-span-6 self-start",children:(0,x.jsxs)("div",{className:"border border-[#ffe58f] bg-[#fffbe6] rounded-xl p-3",children:[(0,x.jsx)("div",{children:"Reason"}),(0,x.jsx)("div",{children:h.TravelData.Reason})]})}):null,(0,x.jsx)(m.Accordion,{defaultOpen:!1,title:"Attachments",className:"border col-span-12",children:(0,x.jsx)("div",{className:"p-4",children:(0,x.jsx)(S,{showTitle:!1,disabled:T.Z.getDisabledStatus({documentData:h,userData:re,groupTag:null===K||void 0===K?void 0:K.GroupTag,userGroupIds:null===re||void 0===re?void 0:re.ApprovalGroupIds})})})}),(0,x.jsx)(m.Accordion,{defaultOpen:!1,title:"Document History & Comments, Document Route",className:"col-span-12 shadow-md rounded-ot overflow-hidden",children:(0,x.jsx)("div",{className:"grid grid-cols-12 items-start gap-4 p-4",children:(0,x.jsx)(m.DocumentTimeline,{data:ae})})})]})]})]}),(0,x.jsx)(N.GI,{visible:ee,showTitle:!1,height:120,width:350,children:(0,x.jsx)("div",{children:function(e){switch(e){case"Approve":return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{children:"Are you sure you want to approve this request?"}),(0,x.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,x.jsx)(m.Button,{type:"success",onClick:function(){return Ne.submit()},loading:me,children:"Yes"}),(0,x.jsx)(m.Button,{onClick:function(){return le(!1)},disabled:me,children:"No"})]})]});case"Cancel":return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{children:"Are you sure you want to cancel this request?"}),(0,x.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,x.jsx)(m.Button,{type:"danger",onClick:_e,loading:me,children:"Yes"}),(0,x.jsx)(m.Button,{onClick:function(){return le(!1)},disabled:me,children:"No"})]})]});case"Save":return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{children:"Are you sure you want to save this request?"}),(0,x.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,x.jsx)(m.Button,{type:"primary",onClick:_e,loading:me,children:"Yes"}),(0,x.jsx)(m.Button,{onClick:function(){return le(!1)},disabled:me,children:"No"})]})]});case"Decline":return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{children:"Are you sure you want to decline this request?"}),(0,x.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,x.jsx)(m.Button,{onClick:_e,loading:me,children:"Yes"}),(0,x.jsx)(m.Button,{onClick:function(){return le(!1)},disabled:me,children:"No"})]})]});case"Complete":return(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{children:"Are you sure you want to complete this request?"}),(0,x.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,x.jsx)(m.Button,{type:"success",onClick:function(){return Ne.submit()},loading:me,children:"Yes"}),(0,x.jsx)(m.Button,{onClick:function(){return le(!1)},disabled:me,children:"No"})]})]})}}(B)})}),Ve]}):(0,x.jsxs)("div",{className:"bg-white rounded-ot px-4 py-3 min-h-[300px] flex flex-col justify-center items-center",children:[(0,x.jsx)("div",{className:"text-xl",children:"Not Found Document"}),(0,x.jsx)(m.Button,{htmlType:"button",type:"primary",className:"mt-5",onClick:function(){return we("/request/task")},children:"Back to List"})]})}},8251:function(e,l){var n={getDisabledStatus:function(e){var l,n,t=e.documentData,a=e.userData,o=e.groupTag;e.userGroupIds;return console.log("hello",t,a,o),"Completed"===o||"Cancelled"===o||(null!==t&&void 0!==t&&t.AssignedEmployeeId?!(null!==a&&void 0!==a&&null!==(l=a.LineManagerIds)&&void 0!==l&&l.includes(null===t||void 0===t?void 0:t.AssignedEmployeeId)||(null===t||void 0===t?void 0:t.AssignedEmployeeId)===(null===a||void 0===a?void 0:a.EmployeeId)||"Data Approval"===(null===a||void 0===a?void 0:a.Rolename)&&"linemanager"===o||"SystemAdministrator"===(null===a||void 0===a?void 0:a.Rolename)):!("SystemAdministrator"===(null===a||void 0===a?void 0:a.Rolename)||null!==a&&void 0!==a&&null!==(n=a.ApprovalGroupIds)&&void 0!==n&&n.includes(null===t||void 0===t?void 0:t.AssignedRouteConfigId)))},getActionPermission:function(e){var l,n,t=e.documentData,a=e.userData,o=e.groupTag,i=(e.userGroupIds,null);"Completed"===(null===t||void 0===t?void 0:t.CurrentStatus)||"Cancelled"===(null===t||void 0===t?void 0:t.CurrentStatus)?i=!1:i=null!==t&&void 0!==t&&t.AssignedEmployeeId?!!(null!==a&&void 0!==a&&null!==(l=a.LineManagerIds)&&void 0!==l&&l.includes(null===t||void 0===t?void 0:t.AssignedEmployeeId)||(null===t||void 0===t?void 0:t.AssignedEmployeeId)===(null===a||void 0===a?void 0:a.EmployeeId)||"Data Approval"===(null===a||void 0===a?void 0:a.Rolename)&&"linemanager"===o||"SystemAdministrator"===(null===a||void 0===a?void 0:a.Rolename)):!!("SystemAdministrator"===(null===a||void 0===a?void 0:a.Rolename)||null!==a&&void 0!==a&&null!==(n=a.ApprovalGroupIds)&&void 0!==n&&n.includes(null===t||void 0===t?void 0:t.AssignedRouteConfigId));return i},checkUpdateItinerary:function(e){var l,n=e.groupAndMembers,t=e.userData,a=!1,o=null===n||void 0===n?void 0:n.find((function(e){return"travelflight"===e.GroupTag}));return null!==t&&void 0!==t&&null!==(l=t.GroupIds)&&void 0!==l&&l.includes(null===o||void 0===o?void 0:o.GroupId)&&(a=!0),a}};l.Z=n},24957:function(e,l,n){n.d(l,{Z:function(){return r}});var t=n(87462),a=n(47313),o={icon:function(e,l){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:l}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:e}}]}},name:"close-circle",theme:"twotone"},i=n(17469),s=function(e,l){return a.createElement(i.Z,(0,t.Z)({},e,{ref:l,icon:o}))};var r=a.forwardRef(s)},53979:function(e,l,n){n.d(l,{Z:function(){return r}});var t=n(87462),a=n(47313),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-12-12-28.3-18.7-45.3-18.7H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 176h256v112H384V176zm128 554c-79.5 0-144-64.5-144-144s64.5-144 144-144 144 64.5 144 144-64.5 144-144 144zm0-224c-44.2 0-80 35.8-80 80s35.8 80 80 80 80-35.8 80-80-35.8-80-80-80z"}}]},name:"save",theme:"filled"},i=n(17469),s=function(e,l){return a.createElement(i.Z,(0,t.Z)({},e,{ref:l,icon:o}))};var r=a.forwardRef(s)}}]);