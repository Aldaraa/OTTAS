"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[5381],{5381:function(e,t,n){n.r(t),n.d(t,{default:function(){return ue}});var a=n(1413),l=n(29439),o=n(56573),i=n(47313),s=n(58467),r=n(10658),c=n.n(r),d=n(21975),u=n(74294),m=n(2880),p=n(42614),h=n(14261),f=n(65040),x=n(76047),v=n(82138),g=n(43773),j=n(69888),y=n(92350),N=n(16430),b=n(55768),C=n(31741),I=n(12019),D=n(47515),F=n(73030),Z=n(82508),T=n(83313),w=n(29074),k=n(15413),S="style_duration__d-llG",A=n(46417),E=n(76446);c().extend(E);var q=function(e){var t=e.duration,n=Math.floor(t/60),a=t%60;return"".concat(n?"".concat(n,"h"):""," ").concat(a?"".concat(a,"m"):"")},R=function(e){var t=e.flight,n=e.direction,a=e.date,l=e.time,o=c()(t.ArrivalDate).format("YYYY-MM-DD")===c()(t.TransportDate).format("YYYY-MM-DD");return(0,A.jsx)(m.Tooltip,{title:"Timezome: ".concat("arr"===n?t.ArrivalTimeZone:t.DepartureTimeZone),children:(0,A.jsxs)("div",{className:"flex flex-col items-center w-[45px] mr-[52px] cursor-default",children:[o?null:(0,A.jsx)("div",{className:"text-xs text-blue-400",children:c()(a).format("MMM DD")}),(0,A.jsxs)("div",{className:"font-semibold leading-none",children:[l.split(":")[0],":",l.split(":")[1]]})]})})};var O=function(e){var t=e.data,n=e.open,s=e.onClose,r=(0,i.useState)(null),d=(0,l.Z)(r,2),u=d[0],m=d[1],p=(0,i.useState)(!0),h=(0,l.Z)(p,2),f=h[0],x=h[1];(0,i.useEffect)((function(){t&&v()}),[t]);var v=function(){x(!0),(0,o.Z)({method:"post",url:"tas/requestnonsiteticketconfig/extractoption",data:{optionData:null===t||void 0===t?void 0:t.OptionData}}).then((function(e){var t=c().duration(e.data.TotalMinute,"minutes"),n=Math.floor(t.asHours()),l=String(t.minutes()).padStart(2,"0");m((0,a.Z)((0,a.Z)({},e.data),{},{TotalDuration:"".concat(n,"h ").concat(l,"m")}))})).catch((function(e){})).finally((function(){return x(!1)}))};return(0,A.jsx)(T.Z,{open:n,onClose:s,width:600,title:(0,A.jsxs)("div",{className:"flex justify-between items-center",children:[(0,A.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,A.jsxs)("div",{children:[Intl.NumberFormat().format(null===t||void 0===t?void 0:t.Cost)," \u20ae"]}),(0,A.jsx)(w.Z,{className:"text-xs font-normal",color:"RT"===(null===u||void 0===u?void 0:u.BookIngType)?"blue":"purple",children:(0,A.jsx)("span",{className:"uppercase leading-none",children:"RT"===(null===u||void 0===u?void 0:u.BookIngType)?"Round Trip":"One way"})})]}),(0,A.jsx)("div",{className:"flex flex-col gap-4",children:(0,A.jsx)("div",{className:"text-gray-400 font-normal",children:null===u||void 0===u?void 0:u.TotalDuration})})]}),children:(0,A.jsx)("div",{children:f?(0,A.jsx)(Z.Z,{}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"flex flex-col border-y",children:null===u||void 0===u?void 0:u.FlightData.map((function(e,t){return(0,A.jsx)(k.Z.Ribbon,{text:(0,A.jsx)("span",{className:"text-xs",children:e.TicketStatus}),children:(0,A.jsxs)("div",{className:"pl-16 flex flex-col gap-2 text-sm border-x py-4 relative hover:bg-blue-100 transition-all ".concat(t%2===0?"bg-gray-100":""),children:[(0,A.jsx)("div",{className:"absolute inset-y-0 left-2 flex items-center",children:e.TransportDate?(0,A.jsxs)("div",{className:"p-1 rounded bg-blue-500 text-white w-[40px] flex flex-col items-center leading-none",children:[(0,A.jsx)("div",{className:"text-xs",children:c()(e.TransportDate).format("MMM")}),(0,A.jsx)("div",{children:c()(e.TransportDate).format("DD")})]}):null}),(0,A.jsxs)("div",{className:"flex gap-3 items-end",children:[(0,A.jsx)(R,{flight:e,date:e.TransportDate,time:e.ETD,direction:"dep"}),(0,A.jsxs)("div",{className:"font-semibold leading-none",children:[e.FromAirportCode," ",e.FromAirportName]})]}),(0,A.jsxs)("div",{className:"flex gap-3 items-end leading-none py-2",children:[(0,A.jsx)("div",{className:(0,F.m6)("w-[55px] -ml-[5px] mr-[47px] h-4 text-xs text-secondary2 flex justify-center duration",S),children:(0,A.jsx)(q,{duration:e.TravelDurationMinutes})}),(0,A.jsxs)("div",{className:"flex gap-2 text-xs leading-none",children:[(0,A.jsx)("span",{className:"text-secondary2",children:e.AirlineName}),(0,A.jsxs)("span",{className:"text-secondary2",children:[e.AirlineCode,e.TransportNumber]}),(0,A.jsx)("span",{className:"text-secondary2",children:e.ClassOfSeat})]})]}),(0,A.jsxs)("div",{className:"flex gap-3 items-end leading-none",children:[(0,A.jsx)(R,{flight:e,date:e.ArrivalDate,time:e.ETA,direction:"arr"}),(0,A.jsxs)("div",{className:"font-semibold leading-none",children:[e.ToAirportCode," ",e.ToAirportName]})]})]},t)})}))}),(0,A.jsxs)("div",{className:"mt-5",children:[(0,A.jsx)("div",{className:"font-semibold py-2 border-b",children:"Ticket Rule"}),(0,A.jsx)("div",{className:"flex flex-wrap gap-10 pt-4",children:null===u||void 0===u?void 0:u.TicketRules.map((function(e){return e.AirlineCode&&(0,A.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,A.jsx)("div",{children:e.AirlineCode}),(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:"font-semibold",children:"Baggage"}),(0,A.jsxs)("div",{children:["Carry-on Baggage: ",(0,A.jsx)("span",{className:"font-semibold",children:e.CarryOnAllowance})]}),(0,A.jsxs)("div",{children:["Checked Baggage: ",(0,A.jsx)("span",{className:"font-semibold",children:e.LuggageAllowance})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:"font-semibold",children:"Fare Rules"}),(0,A.jsxs)("div",{children:["Refund: ",(0,A.jsx)("span",{className:"font-semibold",children:e.RefundCost})]}),(0,A.jsxs)("div",{children:["Change: ",(0,A.jsx)("span",{className:"font-semibold",children:e.Changes})]}),(0,A.jsxs)("div",{children:["No show: ",(0,A.jsx)("span",{className:"font-semibold",children:e.NoShowCost})]})]})]})}))})]})]})})})},Y=n(76298),M=function(e){var t=e.data,n=e.onClickViewBtn,a=e.onClickEditBtn,l=e.onClickDeleteBtn,o=e.isEditable;return(0,A.jsx)("div",{className:(0,F.m6)("flex flex-col gap-4 group cursor-pointer transition-all"),children:(0,A.jsxs)("div",{className:"flex flex-col relative rounded-ot border overflow-hidden",children:[(0,A.jsxs)("div",{className:(0,F.m6)("flex justify-between items-center p-2 border-b","ISSUED"===t.Status?"bg-green-50":"bg-orange-50"),children:[(0,A.jsx)(m.Tooltip,{title:"".concat(t.SelectedUserName," ").concat(t.SelectedUserTeam),children:(0,A.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,A.jsx)("div",{className:"text-base",children:"ISSUED"===t.Status?(0,A.jsx)(N.Z,{className:"text-green-700"}):(0,A.jsx)(b.Z,{className:"text-primary"})}),(0,A.jsxs)("div",{children:["Option #",t.OptionIndex]})]})}),(0,A.jsx)("div",{className:"text-right text-[12px]",children:(0,A.jsxs)("span",{className:"",children:[Intl.NumberFormat().format(t.Cost)," \u20ae"]})})]}),(0,A.jsxs)("div",{className:"absolute bottom-3 right-3 flex gap-1 items-center opacity-0 group-hover:opacity-100",children:[(0,A.jsx)(m.Tooltip,{title:"View Detail",children:(0,A.jsx)(m.Button,{className:"px-2 shadow-option1",onClick:function(){return n(t)},icon:(0,A.jsx)(C.Z,{})})}),o?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(m.Tooltip,{title:"Edit",children:(0,A.jsx)(m.Button,{className:"px-2 shadow-option1",onClick:function(){return a(t)},icon:(0,A.jsx)(I.Z,{})})}),(0,A.jsx)(m.Tooltip,{title:"Delete Option",children:(0,A.jsx)(m.Button,{type:"danger",className:"px-2 shadow-option1",onClick:function(){return l(t)},icon:(0,A.jsx)(D.Z,{})})})]}):null]}),(0,A.jsx)("pre",{className:"p-2 text-left text-gray-500 w-full overflow-ellipsis overflow-hidden",style:{fontSize:11},children:t.OptionData}),t.Comment?(0,A.jsx)("div",{className:"px-2 pb-2",children:(0,A.jsx)(w.Z,{children:t.Comment})}):null]})})};var L=function(e){e.flightData;var t,n,s=e.data,r=e.getFinalOptionsData,u=e.isDeletable,f=(0,i.useState)(!1),x=(0,l.Z)(f,2),v=(x[0],x[1],(0,i.useState)(!1)),g=(0,l.Z)(v,2),j=g[0],N=g[1],b=(0,i.useState)(null),C=(0,l.Z)(b,2),I=C[0],D=C[1],F=(0,i.useState)(null),Z=(0,l.Z)(F,2),T=Z[0],w=Z[1],k=(0,i.useState)(!1),S=(0,l.Z)(k,2),E=S[0],q=S[1],R=(0,i.useState)(!1),L=(0,l.Z)(R,2),B=L[0],H=L[1],V=(0,i.useState)(!1),G=(0,l.Z)(V,2),P=G[0],U=G[1],z=m.Form.useForm(),_=(0,l.Z)(z,1)[0],J=(0,i.useContext)(p.V).state;(0,i.useEffect)((function(){r()}),[]);var W=function(e){w((0,a.Z)((0,a.Z)({},e),{},{DueDate:e.DueDate?c()(e.DueDate):null})),_.setFieldsValue((0,a.Z)((0,a.Z)({},e),{},{DueDate:e.DueDate?c()(e.DueDate):null})),q(!0)},K=function(e){D(e),N(!0)},X=function(e){w(e),U(!0)},Q="TravelAdmin"===(null===(t=J.userInfo)||void 0===t?void 0:t.Role)||"SystemAdmin"===(null===(n=J.userInfo)||void 0===n?void 0:n.Role);return(0,A.jsxs)("div",{className:"p-2 rounded-bl-ot rounded-br-ot border border-gray-300 flex divide-x gap-3",children:[Q?(0,A.jsx)(A.Fragment,{children:(0,A.jsx)("div",{className:"flex-1 pr-5 overflow-x-auto",children:(0,A.jsx)("div",{className:"flex items-start gap-4",children:s.map((function(e,t){return(0,A.jsx)(M,{data:e,onClickViewBtn:K,onClickEditBtn:W,onClickDeleteBtn:X,isEditable:u},"final-option-".concat(t))}))})})}):(0,A.jsx)("div",{children:"Travel Admin only can view"}),(0,A.jsx)(O,{open:j,onClose:function(){return N(!1)},data:I}),(0,A.jsx)(m.Modal,{open:E,onCancel:function(){return q(!1)},title:"Edit Option",children:(0,A.jsxs)(m.Form,{form:_,editData:T,size:"small",disabled:!1,className:"grid grid-cols-12 gap-x-4 gap-y-3",onFinish:function(e){H(!0),(0,o.Z)({method:"put",url:"tas/requestnonsitetraveloption/fulldata",data:(0,a.Z)((0,a.Z)({},e),{},{id:T.Id,dueDate:c()(e.DueDate).format("YYYY-MM-DD HH:mm")})}).then((function(e){_.resetFields(),q(!1),r()})).catch((function(e){})).then((function(){return H(!1)}))},layout:"vertical",children:[(0,A.jsx)(m.Form.Item,{label:"Cost",name:"Cost",className:"col-span-6 mb-0",children:(0,A.jsx)(Y.Z,{className:"w-full",controls:!1,formatter:function(e){return"".concat((new Intl.NumberFormat).format(e))}})}),(0,A.jsx)(m.Form.Item,{label:"Itinerary",name:"OptionData",className:"col-span-12 mb-2",children:(0,A.jsx)(d.Z.TextArea,{autoSize:{minRows:3,maxRows:10}})}),(0,A.jsxs)("div",{className:"col-span-12 flex justify-end gap-3",children:[(0,A.jsx)(m.Button,{htmlType:"submit",loading:B,type:"primary",icon:(0,A.jsx)(y.Z,{}),children:"Save"}),(0,A.jsx)(m.Button,{htmlType:"button",onClick:function(){_.resetFields(),q(!1)},children:"Cancel"})]})]})}),(0,A.jsxs)(h.GI,{visible:P,showTitle:!1,height:"auto",width:350,children:[(0,A.jsx)("div",{children:"Are you sure you want to delete this option?"}),(0,A.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,A.jsx)(m.Button,{type:"danger",onClick:function(){H(!0),(0,o.Z)({method:"delete",url:"tas/requestnonsitetraveloption/".concat(null===T||void 0===T?void 0:T.Id)}).then((function(e){r(),U(!1)})).catch((function(){})).finally((function(){H(!1)}))},loading:B,children:"Yes"}),(0,A.jsx)(m.Button,{onClick:function(){return U(!1)},disabled:B,children:"No"})]})]})]})},B=n(45987),H=n(60020),V=n(93031),G=["key","name"];var P=function(e){var t=e.getOptionsData,n=e.onCancel,r=e.maxOptionIndex,u=(0,i.useState)(!1),p=(0,l.Z)(u,2),h=p[0],f=p[1],x=m.Form.useForm(),g=(0,l.Z)(x,1)[0],j=(0,s.UO)().documentId;return(0,A.jsxs)(m.Form,{form:g,onFinish:function(e){f(!0),(0,o.Z)({method:"post",url:"tas/requestnonsitetraveloption",data:{documentId:j,optionData:e.options.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{selected:!1,dueDate:c()(e.dueDate).format("YYYY-MM-DD HH:mm")})})),newcost:null}}).then((function(e){t(),n()})).catch((function(e){})).then((function(){return f(!1)}))},noLayoutConfig:!0,layout:"vertical",children:[(0,A.jsx)(m.Form.List,{name:"options",className:"col-span-12",children:function(e,t){var n=t.add,l=t.remove;return(0,A.jsxs)("div",{className:"col-span-12 grid grid-cols-12 gap-x-2 gap-y-2 items-center",children:[e.map((function(e){var t=e.key,n=e.name,o=(0,B.Z)(e,G);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(m.Form.Item,(0,a.Z)((0,a.Z)({},o),{},{className:"col-span-10 mb-0",name:[n,"optiontext"],label:(0,A.jsxs)("span",{className:"font-bold",children:["Option#",r+t+1]}),children:(0,A.jsx)(d.Z.TextArea,{autoSize:{minRows:3,maxRows:10}})})),(0,A.jsx)("button",{type:"button",className:"bg-[#FFE2E5] text-[#F64E60] hover:bg-red-200 rounded-md py-1 disabled:bg-gray-100  transition-all",onClick:function(){return l(n)},children:(0,A.jsx)(H.Z,{})}),(0,A.jsx)(m.Form.Item,{className:"col-span-6 mb-0",name:[n,"dueDate"],label:"Deadline",rules:[{required:!0,message:"Deadline is required !"}],children:(0,A.jsx)(V.Z,{className:"w-full",showTime:!0,showSecond:!1,format:"YYYY-MM-DD HH:mm"})})]})})),(0,A.jsx)(m.Form.Item,{className:"col-span-12",children:(0,A.jsx)(m.Button,{className:"w-full flex justify-center",onClick:function(){return n()},icon:(0,A.jsx)(v.Z,{}),children:"Add Option"})})]})}}),(0,A.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2",children:[(0,A.jsx)(m.Button,{type:"primary",onClick:function(){return g.submit()},loading:h,icon:(0,A.jsx)(y.Z,{}),children:"Save"}),(0,A.jsx)(m.Button,{onClick:function(){n(),g.resetFields()},disabled:h,children:"Cancel"})]})]})};var U=function(e){var t=e.editData,n=void 0===t?null:t,s=e.onCancel,r=e.getOptionsData,u=e.getData,p=(0,i.useState)(!1),h=(0,l.Z)(p,2),f=h[0],x=h[1],v=m.Form.useForm(),g=(0,l.Z)(v,1)[0];return(0,A.jsx)("div",{children:(0,A.jsxs)(m.Form,{form:g,editData:n,size:"small",className:"grid grid-cols-12 gap-x-4 gap-y-3",onFinish:function(e){x(!0),(0,o.Z)({method:"put",url:"tas/requestnonsitetraveloption/fulldata",data:(0,a.Z)((0,a.Z)({},e),{},{id:n.Id,DueDate:c()(e.DueDate).format("YYYY-MM-DD HH:mm")})}).then((function(e){s&&s(),r(),u(),g.resetFields()})).catch((function(e){})).then((function(){return x(!1)}))},disabled:!1,layout:"vertical",children:[(0,A.jsx)(m.Form.Item,{className:"col-span-6 mb-0",name:"DueDate",label:"Deadline",rules:[{required:!0,message:"Due Date is required !"}],children:(0,A.jsx)(V.Z,{className:"w-full",showTime:!0,showSecond:!1,format:"YYYY-MM-DD HH:mm"})}),(0,A.jsx)(m.Form.Item,{label:"Cost",name:"Cost",className:"col-span-6 mb-0",children:(0,A.jsx)(Y.Z,{className:"w-full",controls:!1,formatter:function(e){return"".concat((new Intl.NumberFormat).format(e))}})}),(0,A.jsx)(m.Form.Item,{label:"Itinerary",name:"OptionData",className:"col-span-12 mb-2",children:(0,A.jsx)(d.Z.TextArea,{autoSize:{minRows:3,maxRows:10}})}),(0,A.jsxs)("div",{className:"col-span-12 flex justify-end gap-3",children:[(0,A.jsx)(m.Button,{htmlType:"submit",loading:f,type:"primary",icon:(0,A.jsx)(y.Z,{}),children:"Save"}),(0,A.jsx)(m.Button,{htmlType:"button",onClick:s,disabled:f,children:"Cancel"})]})]})})};var z=function(e){var t=e.hasActionPermission,n=e.currentGroup,r=e.isEditable,d=e.getData,u=(e.documentData,e.isDeletable),f=(0,i.useState)([]),x=(0,l.Z)(f,2),v=x[0],g=x[1],j=(0,i.useState)(!0),y=(0,l.Z)(j,2),N=y[0],b=y[1],C=(0,i.useState)(null),I=(0,l.Z)(C,2),D=I[0],F=I[1],Z=(0,i.useState)(null),T=(0,l.Z)(Z,2),w=T[0],k=T[1],S=(0,i.useState)(null),E=(0,l.Z)(S,2),q=E[0],R=E[1],Y=(0,i.useState)(null),M=(0,l.Z)(Y,2),L=M[0],B=M[1],H=(0,i.useState)(!1),V=(0,l.Z)(H,2),G=V[0],z=V[1],_=(0,i.useState)(!1),J=(0,l.Z)(_,2),W=J[0],K=J[1],X=(0,i.useState)(0),Q=(0,l.Z)(X,2),$=Q[0],ee=Q[1],te=(0,i.useState)(!1),ne=(0,l.Z)(te,2),ae=ne[0],le=ne[1],oe=(0,s.UO)().documentId,ie=(0,i.useState)(!1),se=(0,l.Z)(ie,2),re=se[0],ce=se[1],de=m.Form.useForm(),ue=(0,l.Z)(de,1)[0],me=(0,i.useContext)(p.V),pe=me.action;me.state,(0,i.useEffect)((function(){he()}),[]);var he=function(){b(!0),(0,o.Z)({method:"get",url:"tas/requestnonsitetraveloption/".concat(oe)}).then((function(e){g(e.data);var t=e.data.map((function(e){return e.OptionIndex})),n=Math.max.apply(null,t);ee(n),pe.setTravelOptions(e.data)})).catch((function(e){})).finally((function(){b(!1)}))},fe=function(e,a){("linemanager"===(null===n||void 0===n?void 0:n.GroupTag)||"requester"===(null===n||void 0===n?void 0:n.GroupTag)&&2===(null===n||void 0===n?void 0:n.OrderIndex)&&c()(a).diff(c()())>0)&&t&&(k(e.Id),K(!0))},xe=function(e){F((0,a.Z)((0,a.Z)({},e),{},{DueDate:e.DueDate?c()(e.DueDate):null})),ue.setFieldsValue((0,a.Z)((0,a.Z)({},e),{},{DueDate:e.DueDate?c()(e.DueDate):null})),z(!0)},ve=function(e){R(e),B(!0)},ge=function(e){F(e),le(!0)};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"p-2 rounded-bl-ot rounded-br-ot border border-gray-300",children:[N?(0,A.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,A.jsx)(m.Skeleton,{className:"h-[200px]"}),(0,A.jsx)(m.Skeleton,{className:"h-[200px]"}),(0,A.jsx)(m.Skeleton,{className:"h-[200px]"})]}):(0,A.jsxs)(A.Fragment,{children:["travelflight"===(null===n||void 0===n?void 0:n.GroupTag)&&1===(null===n||void 0===n?void 0:n.OrderIndex)?(0,A.jsxs)("div",{className:"flex justify-between items-center gap-2 mb-4 pl-2",children:[(0,A.jsxs)("div",{className:"font-bold",children:["Options ",(0,A.jsxs)("span",{className:"font-normal",children:["(",v.length,")"]})]}),(0,A.jsx)(m.Button,{htmlType:"button",type:"primary",onClick:function(){F(null),z(!0)},className:"text-xs",children:"Add Options"})]}):null,(0,A.jsx)("div",{className:"overflow-x-auto",children:(0,A.jsx)("div",{className:"flex items-start gap-4 pb-2",children:v.map((function(e,t){return(0,A.jsx)(m.ItineraryOptionCard,{data:e,selectedOption:w,onClickDeleteBtn:ge,onClickEditBtn:xe,onClickViewBtn:ve,onSelect:fe,isDeletable:u,isEditable:r},"itinerary-option-".concat(t))}))})})]}),W?(0,A.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[(0,A.jsx)(m.Button,{type:"primary",className:"text-xs",onClick:function(){ce(!0),(0,o.Z)({method:"put",url:"tas/requestnonsitetraveloption",data:{selected:1,id:w}}).then((function(e){he(),K(!1),d()})).catch((function(e){})).then((function(){return ce(!1)}))},children:"Save"}),(0,A.jsx)(m.Button,{type:"danger",className:"text-xs",onClick:function(e){e.stopPropagation(),K(!1),k(null)},children:"Cancel"})]}):null]}),(0,A.jsx)(O,{open:L,onClose:function(){return B(!1)},data:q}),(0,A.jsx)(m.Modal,{width:700,title:D?"Edit Option":"Add Options",open:G,onCancel:function(){return z(!1)},children:D?(0,A.jsx)(U,{editData:D,getOptionsData:he,onCancel:function(){z(!1),F(null)}}):(0,A.jsx)(P,{maxOptionIndex:$,onCancel:function(){return z(!1)},getOptionsData:he})}),(0,A.jsxs)(h.GI,{visible:ae,showTitle:!1,height:110,width:350,children:[(0,A.jsx)("div",{children:"Are you sure you want to delete this option?"}),(0,A.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,A.jsx)(m.Button,{type:"danger",onClick:function(){ce(!0),(0,o.Z)({method:"delete",url:"tas/requestnonsitetraveloption/".concat(null===D||void 0===D?void 0:D.Id)}).then((function(e){he(),le(!1)})).catch((function(){})).finally((function(){ce(!1)}))},loading:re,children:"Yes"}),(0,A.jsx)(m.Button,{onClick:function(){return le(!1)},disabled:re,children:"No"})]})]})]})},_=n(85403);var J=function(e){var t,n,a=e.getData,r=e.setTabKey,c=e.getFinalOptionsData,h=(0,i.useState)(!1),f=(0,l.Z)(h,2),x=f[0],v=f[1],g=m.Form.useForm(),j=(0,l.Z)(g,1)[0],y=(0,s.UO)().documentId,N=(0,i.useContext)(p.V).state;return(0,A.jsx)("div",{className:"p-2 rounded-bl-ot rounded-br-ot border border-gray-300",children:(0,A.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,A.jsxs)("div",{className:"w-full my-2 text-gray-400",children:[(0,A.jsx)(_.Z,{className:"mr-3"}),"To enter the final itinerary travel option set, enter the option before [ok] in the format"]}),(0,A.jsxs)(m.Form,{form:j,onFinish:function(e){v(!0),(0,o.Z)({method:"post",url:"tas/requestnonsitetraveloption/updateitinerary",data:{documentId:y,optionText:e.optionText,additionalCost:e.additionalCost,comment:e.Comment}}).then((function(e){a(),c(),j.resetFields(),r(2)})).catch((function(e){})).then((function(){return v(!1)}))},noLayoutConfig:!0,layout:"vertical",disabled:"TravelAdmin"!==(null===(t=N.userInfo)||void 0===t?void 0:t.Role),className:"max-w-[600px]",children:[(0,A.jsx)(m.Form.Item,{label:"Itinerary",name:"optionText",className:"col-span-12 mb-2",rules:[{required:!0,message:"Itinerary is required"}],children:(0,A.jsx)(d.Z.TextArea,{autoSize:{minRows:3,maxRows:10}})}),(0,A.jsxs)("div",{className:"flex gap-5 col-span-12",children:[(0,A.jsx)(m.Form.Item,{label:"Additional Cost",name:"additionalCost",className:"w-[200px]",rules:[{required:!0,message:"Additional Cost is required"}],children:(0,A.jsx)(Y.Z,{className:"w-full",controls:!1,formatter:function(e){return"".concat((new Intl.NumberFormat).format(e))}})}),(0,A.jsx)(m.Form.Item,{label:"Comment",name:"Comment",className:"w-[200px]",rules:[{required:!0,message:"Comment is required"}],children:(0,A.jsx)(u.Z,{options:[{value:"AB-Car rent",label:"AB-Car rent"},{value:"AB-Train",label:"AB-Train"},{value:"Date changed",label:"Date changed"},{value:"Fully refunded",label:"Fully refunded"},{value:"International hotel",label:"International hotel"},{value:"Refunded ARR",label:"Refunded ARR"},{value:"Refunded DEP",label:"Refunded DEP"},{value:"Route Added",label:"Route Added"},{value:"Route changed",label:"Route changed"}]})})]}),"TravelAdmin"===(null===(n=N.userInfo)||void 0===n?void 0:n.Role)&&(0,A.jsx)("div",{className:"col-span-12 flex justify-end items-center gap-2",children:(0,A.jsx)(m.Button,{htmlType:"button",type:"primary",onClick:function(){return j.submit()},loading:x,className:"text-xs",children:"Save"})})]})]})})};var W=function(e){var t,n,r,d,u,N,b,C=e.disabled,I=e.documentDetail,D=e.currentGroup,F=e.getData,Z=e.data,T=e.ref,w=e.hasActionPermission,k=e.userInfo,S=(0,i.useState)(!1),E=(0,l.Z)(S,2),q=E[0],R=(E[1],(0,i.useState)(!1)),O=(0,l.Z)(R,2),Y=O[0],M=O[1],B=(0,i.useState)([]),H=(0,l.Z)(B,2),V=H[0],G=H[1],P=(0,i.useState)(!1),U=(0,l.Z)(P,2),_=U[0],W=U[1],K=(0,i.useState)(null),X=(0,l.Z)(K,2),Q=X[0],$=X[1],ee=(0,i.useState)(!1),te=(0,l.Z)(ee,2),ne=te[0],ae=te[1],le=(0,i.useState)("Submitted"===(null===I||void 0===I?void 0:I.CurrentStatus)?1:2),oe=(0,l.Z)(le,2),ie=oe[0],se=oe[1],re=(0,i.useState)([]),ce=(0,l.Z)(re,2),de=ce[0],ue=ce[1],me=(0,i.useRef)(null),pe=(0,i.useContext)(p.V).state,he=f.Z.useForm(),fe=(0,l.Z)(he,1)[0],xe=f.Z.useForm(),ve=(0,l.Z)(xe,1)[0],ge=(0,s.UO)().documentId;(0,i.useEffect)((function(){je()}),[]),(0,i.useEffect)((function(){Z&&ve.setFieldsValue(Z)}),[Z]),(0,i.useEffect)((function(){"Completed"===(null===I||void 0===I?void 0:I.CurrentStatus)&&se(3)}),[D]);var je=function(){(0,o.Z)({method:"get",url:"tas/requestairport"}).then((function(e){var t=[];e.data.map((function(e){t.push({value:e.Id,label:"".concat(e.Code," (").concat(e.Country,")")})})),G(t)})).catch((function(e){}))},ye=[{label:"Travel Date",name:"TravelDate",className:"col-span-12 mb-2",type:"date",inputprops:{showWeek:!0}},{label:"Favor Time",name:"FavorTime",className:"col-span-12 mb-2",type:"select",inputprops:{options:null===(t=pe.referData)||void 0===t||null===(n=t.master)||void 0===n?void 0:n.favorTimes}},{label:"Depart Location",name:"DepartLocationId",className:"col-span-12 mb-2",type:"select",inputprops:{options:V}},{label:"Arrive Location",name:"ArriveLocationId",className:"col-span-12 mb-2",type:"select",inputprops:{options:V}},{label:"Comment",name:"Comment",className:"col-span-12 mb-2",type:"textarea"},{label:"ETD",name:"ETD",className:"col-span-12 mb-2",type:"check"}],Ne=[{label:"Travel Date",name:"TravelDate",cellRender:function(e){return(0,A.jsx)("div",{children:c()(e.value).format("YYYY-MM-DD ddd ")})}},{label:"Favor Time",name:"FavorTime"},{label:"Depart Location",name:"DepartLocationName",alignment:"left"},{label:"Arrive Location",name:"ArriveLocationName",alignment:"left"},{label:"Comment",name:"Comment"},{label:"ETD",name:"ETD",alignment:"left",cellRender:function(e){return(0,A.jsx)(h.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})}},{label:"",name:"action",width:"".concat(C?"0px":"220px"),cellRender:function(e){return!C&&(0,A.jsxs)("div",{className:"flex gap-4",children:[(0,A.jsx)("button",{type:"button",className:"edit-button",onClick:function(){return be(e.data)},children:"Edit"}),(0,A.jsx)("button",{type:"button",className:"dlt-button",onClick:function(){return Ce(e.data)},children:"Delete"})]})}}],be=function(e){$(e),W(!0)},Ce=function(e){$(e),ae(!0)},Ie=function(){fe.resetFields(),W(!1)},De=(0,i.useMemo)((function(){var e=!1;return("TravelAdmin"===pe.userInfo.Role||"requester"===(null===D||void 0===D?void 0:D.GroupTag)&&(null===I||void 0===I?void 0:I.AssignedEmployeeId)===(null===k||void 0===k?void 0:k.EmployeeId))&&(e=!0),e}),[D,I,k,pe.userInfo]),Fe=(0,i.useMemo)((function(){return"TravelAdmin"===pe.userInfo.Role}),[pe.userInfo]),Ze=function(){(0,o.Z)({method:"get",url:"tas/requestnonsitetraveloption/final/".concat(ge)}).then((function(e){ue(e.data)})).catch((function(e){})).finally((function(){}))};return(0,A.jsxs)("div",{className:"col-span-1",id:"flight",ref:T,children:[(0,A.jsx)(x.Z,{type:"card",activeKey:ie,destroyInactiveTabPane:!1,defaultActiveKey:"Submitted"===(null===I||void 0===I?void 0:I.CurrentStatus)?1:2,onChange:function(e){return se(e)},items:[{label:"Request",key:1,children:(0,A.jsx)("div",{className:"px-0 py-1 rounded-bl-ot rounded-br-ot border border-gray-300",children:(0,A.jsx)(m.Table,{tableRef:me,data:null===Z||void 0===Z?void 0:Z.FlightData,columns:Ne,allowColumnReordering:!1,id:"room",className:"overflow-hidden ".concat(!(null!==(r=pe.userInfo)&&void 0!==r&&r.ReadonlyAccess)&&"border-t"),showRowLines:!0,rowAlternationEnabled:!1,loading:q,pager:(null===Z||void 0===Z||null===(d=Z.FlightData)||void 0===d?void 0:d.length)>20,containerClass:"shadow-none",title:(0,A.jsxs)("div",{className:"flex justify-between items-center py-2 gap-3",children:[(0,A.jsx)("div",{className:"text-md font-bold pl-2",children:"Flight"}),(0,A.jsxs)("div",{className:"flex gap-4 items-center",children:[!C&&0===(null===Z||void 0===Z||null===(u=Z.FlightData)||void 0===u?void 0:u.length)&&(0,A.jsx)(m.Button,{icon:(0,A.jsx)(v.Z,{}),onClick:function(){$(null),W(!0)},className:"text-xs",htmlType:"button",children:"Add Flight"}),(0,A.jsx)(m.Button,{icon:(0,A.jsx)(g.Z,{}),onClick:F,loading:q,className:"text-xs",htmlType:"button",children:"Refresh"})]})]})})})},(null===Z||void 0===Z||null===(N=Z.FlightData)||void 0===N?void 0:N.length)>0&&{label:(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[(0,A.jsx)("div",{children:"Completed"===(null===I||void 0===I?void 0:I.CurrentStatus)?"Final Itinerary":"Process Itinerary"}),!C&&(null!==I&&void 0!==I&&null!==(b=I.RuleAction)&&void 0!==b&&b.split(",").includes("Create Flight Option")?(0,A.jsx)(m.Tooltip,{title:"This tab has a required field",titleClass:"bottom-full",children:(0,A.jsx)(j.Z,{className:"text-gray-400 hover:text-gray-500 hover:cursor-help"})}):null)]}),key:2,children:"Completed"===(null===I||void 0===I?void 0:I.CurrentStatus)?(0,A.jsx)(L,{flightData:Z,data:de,getFinalOptionsData:Ze,isDeletable:Fe}):(0,A.jsx)(z,{getData:F,flightData:Z,currentGroup:D,isEditable:De,documentData:I,userData:k,hasActionPermission:w})},"Completed"===(null===I||void 0===I?void 0:I.CurrentStatus)?{label:"Update Itinerary",key:3,children:(0,A.jsx)(J,{getData:F,setTabKey:se,getFinalOptionsData:Ze,isDeletable:Fe})}:null]}),(0,A.jsx)(m.Modal,{title:Q?"Update Itinerary":"Add Itinerary",open:_,onCancel:Ie,children:(0,A.jsx)(m.Form,{form:fe,fields:ye,editData:Q,size:"small",className:"grid grid-cols-12 gap-x-8",onFinish:function(e){Q?(M(!0),(0,o.Z)({method:"put",url:"tas/requestnonsitetravelflight",data:(0,a.Z)((0,a.Z)({},e),{},{Id:Q.Id,TravelDate:e.TravelDate?c()(e.TravelDate).format("YYYY-MM-DD"):null,DocumentId:ge})}).then((function(e){F(),$(null),Ie()})).catch((function(e){})).then((function(){return M(!1)}))):(M(!0),(0,o.Z)({method:"post",url:"tas/requestnonsitetravelflight",data:(0,a.Z)((0,a.Z)({},e),{},{TravelDate:e.TravelDate?c()(e.TravelDate).format("YYYY-MM-DD"):null,DocumentId:ge})}).then((function(e){F(),Ie()})).catch((function(e){})).then((function(){return M(!1)})))},children:(0,A.jsxs)("div",{className:"col-span-12 flex justify-end gap-3",children:[(0,A.jsx)(m.Button,{htmlType:"submit",loading:Y,type:"primary",icon:(0,A.jsx)(y.Z,{}),children:"Save"}),(0,A.jsx)(m.Button,{htmlType:"button",onClick:Ie,children:"Cancel"})]})})}),(0,A.jsxs)(h.GI,{visible:ne,showTitle:!1,height:110,width:350,children:[(0,A.jsx)("div",{children:"Are you sure you want to delete this record?"}),(0,A.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,A.jsx)(m.Button,{htmlType:"button",type:"danger",onClick:function(){(0,o.Z)({method:"delete",url:"tas/requestnonsitetravelflight/".concat(Q.Id)}).then((function(){F(),ae(!1)})).catch((function(e){}))},children:"Yes"}),(0,A.jsx)(m.Button,{htmlType:"button",onClick:function(){return ae(!1)},children:"No"})]})]})]})},K=n(74165),X=n(15861),Q=n(3489),$=n(66736),ee=n(6986),te=Q.Z.Dragger;var ne=function(e){var t,n,r=e.disabled,d=e.documentDetail,u=e.hasUpdatePermission,x=(0,i.useState)([]),N=(0,l.Z)(x,2),b=N[0],C=N[1],I=(0,i.useState)(!1),D=(0,l.Z)(I,2),F=D[0],Z=D[1],T=(0,i.useState)(!1),w=(0,l.Z)(T,2),k=w[0],S=w[1],E=(0,i.useState)(!1),q=(0,l.Z)(E,2),R=q[0],O=q[1],Y=(0,i.useState)(null),M=(0,l.Z)(Y,2),L=M[0],B=M[1],H=(0,i.useState)(!1),V=(0,l.Z)(H,2),G=V[0],P=V[1],U=(0,i.useState)([]),z=(0,l.Z)(U,2),_=z[0],J=z[1],W=(0,i.useState)(!1),Q=(0,l.Z)(W,2),ne=Q[0],ae=Q[1],le=(0,i.useRef)(null),oe=(0,i.useContext)(p.V),ie=oe.state,se=(oe.action,f.Z.useForm()),re=(0,l.Z)(se,1)[0],ce=(0,s.UO)().documentId,de=(0,i.useMemo)((function(){var e,t;return("Completed"!==(null===d||void 0===d?void 0:d.CurrentStatus)||"TravelAdmin"!==(null===(e=ie.userInfo)||void 0===e?void 0:e.Role)&&"SystemAdmin"!==(null===(t=ie.userInfo)||void 0===t?void 0:t.Role))&&r}),[d,ie]);(0,i.useEffect)((function(){ue()}),[]);var ue=function(){Z(!0),(0,o.Z)({method:"get",url:"tas/requestdocumentattachment/".concat(ce)}).then((function(e){C(e.data)})).catch((function(e){})).then((function(e){Z(!1)}))},me=[{type:"component",component:(0,A.jsx)(m.Form.Item,{name:"files",valuePropName:"file",label:"File",className:"col-span-12 mb-2",children:(0,A.jsxs)(te,{beforeUpload:!0,multiple:!0,maxCount:5,onChange:function(e){return function(e){var t=[];e.fileList.map((function(e){t.push(e.originFileObj)})),J(t)}(e)},accept:".doc, .docx, .pdf, .txt, .rtf, .ppt, .pptx, .xls, .xlsx, .jpg, .jpeg, .png, .gif, .bmp, .tiff, .svg, .eml, .msg",children:[(0,A.jsx)($.Z,{color:"blue",style:{fontSize:32,marginBottom:8}}),(0,A.jsx)("p",{className:"text-sm pb-1",children:"Click or drag file to this area to upload"}),(0,A.jsx)("p",{className:"opacity-50 text-sm",children:"Support for a single or bulk upload."})]})},"form-item-c file-1")},{label:"Comment",name:"Description",className:"col-span-12 mb-2",type:"textarea"},{label:"Include E-Mail",name:"IncludeEmail",className:"col-span-12 mb-2",type:"check"}],pe=[{label:"File",name:"FileAddress",alignment:"left",cellRender:function(e){return(0,A.jsx)(m.Tooltip,{title:"".concat("https://ottas-api").concat(e.value),children:(0,A.jsx)("a",{className:"edit-button",href:"".concat("https://ottas-api").concat(e.value),target:"_blank",children:"View File"})})}},{label:"Uploader name",name:"FullName",alignment:"left"},{label:"Created Date",name:"CreatedDate",alignment:"left",cellRender:function(e){return(0,A.jsx)("div",{children:c()(e.value).format("YYYY-MM-DD HH:mm")})}},{label:"Include E-Mail",name:"IncludeEmail",alignment:"left",cellRender:function(e){return(0,A.jsx)(h.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})}},{label:"Comment",name:"Description",alignment:"left"},{label:"",name:"action",width:"".concat(de?"0px":"150px"),cellRender:function(e){return!de||u?(0,A.jsx)("div",{className:"flex gap-4",children:0!==e.data.Id&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("button",{type:"button",className:"edit-button",onClick:function(){return t=e.data,B(t),void O(!0);var t},children:"Edit"}),(0,A.jsx)("button",{type:"button",className:"dlt-button",onClick:function(){return fe(e.data)},children:"Delete"})]})}):null}}],he=function(){re.resetFields(),O(!1)},fe=function(e){B(e),P(!0)},xe=(0,i.useCallback)((function(){ae(!0),(0,o.Z)({method:"get",url:"tas/requestdocumentattachment/download/".concat(ce),responseType:"blob"}).then(function(){var e=(0,X.Z)((0,K.Z)().mark((function e(t){var n,a,l;return(0,K.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.headers["content-disposition"].split("; ")[1].replace("filename=",""),e.next=3,window.URL.createObjectURL(new Blob([t.data]));case 3:return a=e.sent,e.next=6,document.createElement("a");case 6:return(l=e.sent).href=a,e.next=10,l.setAttribute("download",n);case 10:return e.next=12,document.body.appendChild(l);case 12:return e.next=14,l.click();case 14:return e.next=16,ae(!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ae(!1)}))}),[]);return(0,A.jsxs)("div",{className:"col-span-12",children:[(0,A.jsx)(m.Table,{ref:le,data:b,columns:pe,allowColumnReordering:!1,id:"room",className:"overflow-hidden ".concat(!(null!==(t=ie.userInfo)&&void 0!==t&&t.ReadonlyAccess)&&"border-t"),showRowLines:!0,rowAlternationEnabled:!1,loading:F,pager:b.length>20,containerClass:"shadow-none",title:(0,A.jsxs)("div",{className:"flex justify-between items-center py-2 gap-3",children:[(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[!de&&b.length>1?(0,A.jsx)(m.Button,{className:"text-xs",loading:ne,onClick:xe,icon:(0,A.jsx)(ee.Z,{}),children:"Download All"}):null,!de&&(null!==d&&void 0!==d&&null!==(n=d.RuleAction)&&void 0!==n&&n.split(",").includes("Create Flight Option")?(0,A.jsx)(m.Tooltip,{title:"Attachment is a required",children:(0,A.jsx)(j.Z,{className:"text-gray-400 hover:text-gray-500 hover:cursor-help"})}):null)]}),(0,A.jsx)("div",{className:"flex gap-4 items-center",children:!de||u?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(m.Button,{icon:(0,A.jsx)(v.Z,{}),onClick:function(){B(null),O(!0),re.setFieldsValue({IncludeEmail:1,Description:"Flight and Hotel"})},className:"text-xs",htmlType:"button",children:"Add Attachment"}),(0,A.jsx)(m.Button,{icon:(0,A.jsx)(g.Z,{}),onClick:ue,loading:F,className:"text-xs",htmlType:"button",children:"Refresh"})]}):null})]})}),(0,A.jsx)(m.Modal,{title:"Add Attachment",open:R,onCancel:he,children:(0,A.jsx)(m.Form,{form:re,fields:L?[{label:"Comment",name:"Description",className:"col-span-12 mb-2",type:"textarea"},{label:"Include E-Mail",name:"IncludeEmail",className:"col-span-12 mb-2",type:"check"}]:me,editData:L,size:"small",className:"grid grid-cols-12 gap-x-8",onFinish:function(e){if(S(!0),L)(0,o.Z)({method:"put",url:"tas/requestdocumentattachment",data:(0,a.Z)((0,a.Z)({},e),{},{id:L.Id})}).then((function(e){ue(),he()})).catch((function(e){})).then((function(){return S(!1)}));else{var t=new FormData;_.map((function(e){t.append("files",e)})),(0,o.Z)({method:"post",url:"/tas/SysFile/multi",data:t}).then((function(t){(0,o.Z)({method:"post",url:"tas/requestdocumentattachment",data:(0,a.Z)((0,a.Z)({},e),{},{fileAddressIds:t.data.map((function(e){return e.Id})),DocumentId:ce})}).then((function(e){ue(),he()})).catch((function(e){})).then((function(){return S(!1)}))})).catch((function(e){})).then((function(){return S(!1)}))}},disabled:de,noLayoutConfig:!0,layout:"vertical",children:(0,A.jsxs)("div",{className:"col-span-12 flex justify-end gap-3",children:[(0,A.jsx)(m.Button,{htmlType:"submit",loading:k,type:"primary",icon:(0,A.jsx)(y.Z,{}),children:"Save"}),(0,A.jsx)(m.Button,{htmlType:"button",onClick:he,children:"Cancel"})]})})}),(0,A.jsxs)(h.GI,{visible:G,showTitle:!1,height:110,width:350,children:[(0,A.jsx)("div",{children:"Are you sure you want to delete this record?"}),(0,A.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,A.jsx)(m.Button,{htmlType:"button",type:"danger",onClick:function(){(0,o.Z)({method:"delete",url:"tas/requestdocumentattachment/".concat(L.Id)}).then((function(){ue(),P(!1)})).catch((function(e){}))},children:"Yes"}),(0,A.jsx)(m.Button,{htmlType:"button",onClick:function(){return P(!1)},children:"No"})]})]})]})},ae=n(31283),le=n(11114);var oe=function(e){var t,n,r,u,x,j,N,b,C=e.disabled,I=e.data,D=e.getData,F=e.documentDetail,Z=(0,i.useState)(!1),T=(0,l.Z)(Z,2),w=T[0],k=(T[1],(0,i.useState)(!1)),S=(0,l.Z)(k,2),E=S[0],q=S[1],R=(0,i.useState)(!1),O=(0,l.Z)(R,2),M=O[0],L=O[1],B=(0,i.useState)(null),H=(0,l.Z)(B,2),G=H[0],P=H[1],U=(0,i.useState)(!1),z=(0,l.Z)(U,2),_=z[0],J=z[1],W=(0,i.useState)([]),K=(0,l.Z)(W,2),X=K[0],Q=K[1],$=(0,i.useRef)(null),ee=(0,i.useContext)(p.V).state,te=f.Z.useForm(),ne=(0,l.Z)(te,1)[0],oe=f.Z.useWatch("Hotel",ne),ie=(0,s.UO)().documentId;(0,i.useEffect)((function(){se()}),[]);var se=function(){(0,o.Z)({method:"get",url:"tas/requestlocalhotel?Active=1"}).then((function(e){Q(e.data)})).catch((function(e){}))},re=(0,i.useMemo)((function(){return X.filter((function(e){var t;return(null!==(t=null===e||void 0===e?void 0:e.Description)&&void 0!==t?t:"").toLowerCase().includes((null===oe||void 0===oe?void 0:oe.toLowerCase())||"")}))}),[oe]),ce=[{type:"component",component:(0,A.jsx)(m.Form.Item,{label:"Check In",className:"col-span-12 mb-2",children:(0,A.jsxs)("div",{className:"flex gap-5 items-start",children:[(0,A.jsx)(m.Form.Item,{name:"FirstNight",className:"mb-0",children:(0,A.jsx)(V.Z,{})}),(0,A.jsx)(m.Form.Item,{name:"FirstTime",className:"mb-0",rules:[{required:!0,message:"Time is required"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&"00:00"===t("FirstTime").format("HH:mm")?Promise.reject(new Error("00:00 is not allowed!")):Promise.resolve()}}}],children:(0,A.jsx)(V.Z.TimePicker,{needConfirm:!1,format:"HH:mm"})}),(0,A.jsx)(m.Form.Item,{name:"EarlyCheckIn",className:"mb-0",getValueFromEvent:function(e){return e.target.checked?1:0},valuePropName:"checked",children:(0,A.jsx)(ae.Z,{children:"Early Check In"})})]})})},{type:"component",component:(0,A.jsx)(m.Form.Item,{label:"Check Out",className:"col-span-12 mb-2",children:(0,A.jsxs)("div",{className:"flex gap-5 items-start",children:[(0,A.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.FirstNight!==t.LastNight},children:function(e){var t=e.getFieldValue,n=!1;return t("LastNight")||(n=t("FirstNight")),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(m.Form.Item,{name:"LastNight",className:"mb-0",children:(0,A.jsx)(V.Z,{defaultPickerValue:n})}),(0,A.jsx)(m.Form.Item,{name:"LastTime",className:"mb-0",rules:[{required:!0,message:"Time is required"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&"00:00"===t("LastTime").format("HH:mm")?Promise.reject(new Error("00:00 is not allowed!")):Promise.resolve()}}}],children:(0,A.jsx)(V.Z.TimePicker,{needConfirm:!1,format:"HH:mm"})})]})}}),(0,A.jsx)(m.Form.Item,{name:"LateCheckOut",className:"mb-0",getValueFromEvent:function(e){return e.target.checked?1:0},valuePropName:"checked",children:(0,A.jsx)(ae.Z,{children:"Late Check Out"})})]})})},{type:"component",names:["Hotel"],component:(0,A.jsx)(m.Form.Item,{label:"Hotel",name:"Hotel",className:"col-span-12 mb-2",required:[{required:!0,message:"Hotel is required"}],children:(0,A.jsx)(le.Z,{options:re,fieldNames:{value:"Description"},onSelect:function(e,t){ne.getFieldValue("EarlyCheckIn")?ne.setFieldValue("EarlyCheckInCost",t.EarlyCheckInCost):ne.setFieldValue("EarlyCheckInCost",0),ne.getFieldValue("LateCheckOut")?ne.setFieldValue("LateCheckOutCost",t.LateCheckOutCost):ne.setFieldValue("LateCheckOutCost",0),ne.setFieldValue("DayCost",t.DayCost||0)}})})},{type:"component",component:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(m.Form.Item,{name:"EarlyCheckInCost",noStyle:!0}),(0,A.jsx)(m.Form.Item,{name:"LateCheckOutCost",noStyle:!0}),(0,A.jsx)(m.Form.Item,{name:"DayCost",noStyle:!0})]})},{label:"City",name:"City",className:"col-span-12 mb-2",rules:[{required:!0,message:"City is required"}]},{label:"Payment Condition",name:"PaymentCondition",className:"col-span-12 mb-2",type:"select",inputprops:{options:null===(t=ee.referData)||void 0===t||null===(n=t.master)||void 0===n?void 0:n.paymentConditions,showSearch:!1}},{type:"component",component:(0,A.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.FirstNight!==t.FirstNight||e.LastNight!==t.LastNight},children:function(e){var t=e.getFieldValue,n=c()(t("LastNight"))>c()(t("FirstNight")).add(1,"day");return(0,A.jsx)(m.Form.Item,{name:"Comment",label:"Comment",className:"col-span-12 mb-5",rules:[{required:n,message:"Comment is required"}],children:(0,A.jsx)(d.Z.TextArea,{maxLength:300,showCount:!0})})}})}],de=[{type:"component",component:(0,A.jsx)(m.Form.Item,{label:"Check In",className:"col-span-12 mb-2",children:(0,A.jsxs)("div",{className:"flex gap-5 items-start",children:[(0,A.jsx)(m.Form.Item,{name:"FirstNight",className:"mb-0",children:(0,A.jsx)(V.Z,{})}),(0,A.jsx)(m.Form.Item,{name:"FirstTime",className:"mb-0",rules:[{required:!0,message:"Time is required"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&"00:00"===t("FirstTime").format("HH:mm")?Promise.reject(new Error("00:00 is not allowed!")):Promise.resolve()}}}],children:(0,A.jsx)(V.Z.TimePicker,{needConfirm:!1,format:"HH:mm"})}),(0,A.jsx)(m.Form.Item,{name:"EarlyCheckIn",className:"mb-0",getValueFromEvent:function(e){return e.target.checked?1:0},valuePropName:"checked",children:(0,A.jsx)(ae.Z,{children:"Early Check In"})})]})})},{type:"component",component:(0,A.jsx)(m.Form.Item,{label:"Check Out",className:"col-span-12 mb-2",children:(0,A.jsxs)("div",{className:"flex gap-5 items-start",children:[(0,A.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.FirstNight!==t.LastNight},children:function(e){var t=e.getFieldValue,n=!1;return t("LastNight")||(n=t("FirstNight")),(0,A.jsx)(m.Form.Item,{name:"LastNight",className:"mb-0",children:(0,A.jsx)(V.Z,{defaultPickerValue:n,showTime:!0,format:"YYYY-MM-DD HH:mm"})})}}),(0,A.jsx)(m.Form.Item,{name:"LastTime",className:"mb-0",rules:[{required:!0,message:"Time is required"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&"00:00"===t("LastTime").format("HH:mm")?Promise.reject(new Error("00:00 is not allowed!")):Promise.resolve()}}}],children:(0,A.jsx)(V.Z.TimePicker,{needConfirm:!1,format:"HH:mm"})}),(0,A.jsx)(m.Form.Item,{name:"LateCheckOut",className:"mb-0",getValueFromEvent:function(e){return e.target.checked?1:0},valuePropName:"checked",children:(0,A.jsx)(ae.Z,{children:"Late Check Out"})})]})})},{label:"City",name:"City",className:"col-span-12 mb-2",rules:[{required:!0,message:"City is required"}]},{type:"component",names:["Hotel"],component:(0,A.jsx)(m.Form.Item,{label:"Hotel",name:"Hotel",className:"col-span-12 mb-2",required:[{required:!0,message:"Hotel is required"}],children:(0,A.jsx)(le.Z,{options:re,fieldNames:{value:"Description"},onSelect:function(e,t){ne.getFieldValue("EarlyCheckIn")&&ne.setFieldValue("EarlyCheckInCost",t.EarlyCheckInCost),ne.getFieldValue("LateCheckOut")&&ne.setFieldValue("LateCheckOutCost",t.LateCheckOutCost)}})})},{label:"Day Cost",name:"DayCost",className:"col-span-12 mb-2",type:"price",inputprops:{min:0}},{type:"component",names:["EarlyCheckInCost"],component:(0,A.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.EarlyCheckIn!==t.EarlyCheckIn},children:function(e){return(0,e.getFieldValue)("EarlyCheckIn")?(0,A.jsx)(m.Form.Item,{label:"Early Check In Cost",name:"EarlyCheckInCost",className:"col-span-12 mb-2",children:(0,A.jsx)(Y.Z,{controls:!1,formatter:function(e){return"".concat((new Intl.NumberFormat).format(e))},min:0})}):null}})},{type:"component",names:["LateCheckOutCost"],component:(0,A.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.LateCheckOut!==t.LateCheckOut},children:function(e){return(0,e.getFieldValue)("LateCheckOut")?(0,A.jsx)(m.Form.Item,{label:"Late Check Out Cost",name:"LateCheckOutCost",className:"col-span-12 mb-2",children:(0,A.jsx)(Y.Z,{controls:!1,formatter:function(e){return"".concat((new Intl.NumberFormat).format(e))},min:0})}):null}})},{label:"Add Cost",name:"AddCost",className:"col-span-12 mb-2",type:"price"},{label:"Payment Condition",name:"PaymentCondition",className:"col-span-12 mb-2",type:"select",inputprops:{options:null===(r=ee.referData)||void 0===r||null===(u=r.master)||void 0===u?void 0:u.paymentConditions,showSearch:!1}},{label:"Comment",name:"Comment",className:"col-span-12 mb-2",type:"textarea"}],ue=[{label:"Check In",name:"FirstNight",cellRender:function(e){return(0,A.jsx)("div",{children:c()(e.value).format("YYYY-MM-DD ddd HH:mm")})}},{label:"ECI",name:"EarlyCheckIn",alignment:"center",cellRender:function(e){return(0,A.jsx)(h.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})}},{label:"Check Out",name:"LastNight",cellRender:function(e){return(0,A.jsx)("div",{children:c()(e.value).format("YYYY-MM-DD ddd HH:mm")})}},{label:"LCO",name:"LateCheckOut",alignment:"center",cellRender:function(e){return(0,A.jsx)(h.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})}},{label:"Night of Numbers",name:"NightOfNumbers",alignment:"left"},{label:"City",name:"City"},{label:"Hotel",name:"Hotel"},{label:"Payment Condition",name:"PaymentCondition",inputprops:{options:null===(x=ee.referData)||void 0===x||null===(j=x.master)||void 0===j?void 0:j.paymentConditions}},{label:"Comment",name:"Comment"},{label:"",name:"action",width:170,cellRender:function(e){return!C||fe()?(0,A.jsxs)("div",{className:"flex gap-4",children:[(0,A.jsx)("button",{type:"button",className:"edit-button",onClick:function(){return pe(e.data)},children:"Edit"}),!C&&(0,A.jsx)("button",{type:"button",className:"dlt-button",onClick:function(){return he(e.data)},children:"Delete"})]}):null}}],me=function(){ne.resetFields(),L(!1)},pe=function(e){var t=(0,a.Z)({},e);P(t),ne.setFieldsValue((0,a.Z)((0,a.Z)({},e),{},{FirstNight:e.FirstNight?c()(e.FirstNight):null,LastNight:e.LastNight?c()(e.LastNight):null,FirstTime:e.FirstNight?c()(e.FirstNight):null,LastTime:e.LastNight?c()(e.LastNight):null})),L(!0)},he=function(e){P(e),J(!0)},fe=function(){var e,t,n=!1;return"SystemAdmin"!==(null===(e=ee.userInfo)||void 0===e?void 0:e.Role)&&"TravelAdmin"!==(null===(t=ee.userInfo)||void 0===t?void 0:t.Role)||"Completed"!==(null===F||void 0===F?void 0:F.CurrentStatus)||(n=!0),n};return(0,A.jsxs)("div",{className:"col-span-12",children:[(0,A.jsx)(m.Table,{ref:$,data:I,columns:ue,allowColumnReordering:!1,id:"room",className:"overflow-hidden ".concat(!(null!==(N=ee.userInfo)&&void 0!==N&&N.ReadonlyAccess)&&"border-t"),showRowLines:!0,rowAlternationEnabled:!1,loading:w,pager:I.length>20,containerClass:"shadow-none border border-gray-300",title:(0,A.jsxs)("div",{className:"flex justify-between items-center py-2 gap-3",children:[(0,A.jsx)("div",{className:"text-md font-bold pl-2",children:"Accommodations"}),(0,A.jsx)("div",{className:"flex gap-4 items-center",children:!C&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(m.Button,{icon:(0,A.jsx)(v.Z,{}),onClick:function(){P(null),L(!0)},className:"text-xs",htmlType:"button",children:"Add Accommodation"}),(0,A.jsx)(m.Button,{icon:(0,A.jsx)(g.Z,{}),onClick:D,loading:w,className:"text-xs",htmlType:"button",children:"Refresh"})]})})]})}),(0,A.jsx)(m.Modal,{title:G?"Edit Accommodation":"Add Accommodation",open:M,onCancel:function(){return L(!1)},width:650,children:(0,A.jsx)(m.Form,{form:ne,fields:"TravelAdmin"===(null===(b=ee.userInfo)||void 0===b?void 0:b.Role)?de:ce,disabled:C&&!fe(),className:"grid grid-cols-12 gap-x-8",onFinish:function(e){G?(q(!0),(0,o.Z)({method:"put",url:"tas/requestnonsitetravelaccommodation",data:(0,a.Z)((0,a.Z)({},e),{},{EarlyCheckInCost:e.EarlyCheckIn?e.EarlyCheckInCost:0,LateCheckOutCost:e.LateCheckOut?e.LateCheckOutCost:0,FirstNight:e.FirstNight?c()("".concat(e.FirstNight.format("YYYY-MM-DD")," ").concat(e.FirstTime.format("HH:mm"))).format("YYYY-MM-DD HH:mm"):null,LastNight:e.LastNight?c()("".concat(e.LastNight.format("YYYY-MM-DD")," ").concat(e.LastTime.format("HH:mm"))).format("YYYY-MM-DD HH:mm"):null,Id:G.Id,HotelLocation:JSON.stringify(e.HotelLocation),DocumentId:ie})}).then((function(e){D(),P(null),me()})).catch((function(e){})).then((function(){return q(!1)}))):(q(!0),(0,o.Z)({method:"post",url:"tas/requestnonsitetravelaccommodation",data:(0,a.Z)((0,a.Z)({},e),{},{EarlyCheckInCost:e.EarlyCheckIn?e.EarlyCheckInCost:0,LateCheckOutCost:e.LateCheckOut?e.LateCheckOutCost:0,FirstNight:e.FirstNight?c()("".concat(e.FirstNight.format("YYYY-MM-DD")," ").concat(e.FirstTime.format("HH:mm"))).format("YYYY-MM-DD HH:mm"):null,LastNight:e.LastNight?c()("".concat(e.LastNight.format("YYYY-MM-DD")," ").concat(e.LastTime.format("HH:mm"))).format("YYYY-MM-DD HH:mm"):null,DocumentId:ie,HotelLocation:JSON.stringify(e.HotelLocation)})}).then((function(e){D(),me()})).catch((function(e){})).then((function(){return q(!1)})))},onCancel:me,labelCol:{flex:"130px"},children:(0,A.jsxs)("div",{className:"col-span-12 flex justify-end gap-3",children:[(0,A.jsx)(m.Button,{htmlType:"submit",loading:E,type:"primary",icon:(0,A.jsx)(y.Z,{}),children:"Save"}),G?(0,A.jsx)(m.Button,{htmlType:"button",loading:E,icon:(0,A.jsx)(v.Z,{}),onClick:function(){ne.validateFields().then((function(e){q(!0),(0,o.Z)({method:"post",url:"tas/requestnonsitetravelaccommodation",data:(0,a.Z)((0,a.Z)({},e),{},{FirstNight:e.FirstNight?c()(e.FirstNight).format("YYYY-MM-DD"):null,LastNight:e.LastNight?c()(e.LastNight).format("YYYY-MM-DD"):null,DocumentId:ie,HotelLocation:JSON.stringify(e.HotelLocation)})}).then((function(e){D(),me()})).catch((function(e){})).then((function(){return q(!1)}))}))},children:"Save & Add new"}):null,(0,A.jsx)(m.Button,{htmlType:"button",onClick:me,children:"Cancel"})]})})}),(0,A.jsxs)(h.GI,{visible:_,showTitle:!1,height:110,width:350,children:[(0,A.jsx)("div",{children:"Are you sure you want to delete this record?"}),(0,A.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,A.jsx)(m.Button,{htmlType:"button",type:"danger",onClick:function(){(0,o.Z)({method:"delete",url:"tas/requestnonsitetravelaccommodation/".concat(G.Id)}).then((function(){D(),J(!1)})).catch((function(e){}))},children:"Yes"}),(0,A.jsx)(m.Button,{htmlType:"button",onClick:function(){return J(!1)},children:"No"})]})]})]})},ie=(n(29816),n(49959)),se=n(8251),re=n(10202),ce=n(82241);var de=function(e){var t=e.flightData,n=e.getData,r=e.documentDetail,c=e.form,d=(0,i.useState)(!1),u=(0,l.Z)(d,2),p=u[0],h=u[1],f=(0,i.useState)(!1),x=(0,l.Z)(f,2),v=x[0],g=x[1],j=(0,i.useState)([]),y=(0,l.Z)(j,2),N=y[0],b=y[1],C=(0,i.useState)([]),I=(0,l.Z)(C,2),D=I[0],F=I[1],Z=(0,s.UO)().documentId;(0,i.useEffect)((function(){T(),w()}),[]);var T=function(){(0,o.Z)({method:"get",url:"tas/requesttravelpurpose?Active=1"}).then((function(e){var t=[];e.data.map((function(e){t.push({value:e.Id,label:e.Description})})),F(t)})).catch((function(e){}))},w=function(){(0,o.Z)({method:"get",url:"tas/requesttravelagent?Active=1"}).then((function(e){var t,n=[];null===(t=e.data)||void 0===t||t.map((function(e){n.push({value:e.Id,label:e.Description})})),b(n)})).catch((function(e){}))},k=[{label:"Travel Purpose",name:"RequestTravelPurposeId",className:"col-span-4 mb-0",rules:[{required:!0,message:"Travel Purpose is required"}],type:"select",inputprops:{options:D}},{label:"Cost",name:"Cost",className:"col-span-4 mb-0",rules:[{required:!0,message:"Cost is required"}],type:"price",inputprops:{className:"w-full"}},{label:"Highest Cost",name:"HighestCost",className:"col-span-4 mb-0",rules:[{required:!0,message:"Cost is required"}],type:"price",inputprops:{className:"w-full"}},{label:"Updated Cost",name:"Cost2",className:"col-span-4 mb-0",type:"price",inputprops:{}},{label:"Ticket Agent",name:"RequestTravelAgentId",className:"col-span-4 mb-0",type:"select",rules:[{required:!0,message:"Ticket Agent is required"}],inputprops:{options:N}},{label:"Issuer name",name:"RequestTravelAgentSureName",className:"col-span-4 mb-0",rules:[{required:!0,message:"Issuer name is required"}]}];return(0,A.jsx)("div",{className:"px-4 pb-4",children:(0,A.jsx)(m.Form,{form:c,editData:t,fields:k,onFinish:function(e){h(!0),(0,o.Z)({method:"put",url:"tas/requestnonsitetravel/traveldata",data:(0,a.Z)((0,a.Z)({},e),{},{documentId:Z})}).then((function(e){n(null===r||void 0===r?void 0:r.EmployeeId),g(!1)})).catch((function(e){})).then((function(){return h(!1)}))},disabled:!v,className:"gap-y-3 gap-x-4 w-full",noLayoutConfig:!0,layout:"vertical",size:"small",children:(0,A.jsx)("div",{className:"flex justify-end gap-2 text-xs col-span-12",children:v?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(m.Button,{type:"primary",loading:p,onClick:function(){return null===c||void 0===c?void 0:c.submit()},htmlType:"button",children:"Save"}),(0,A.jsx)(m.Button,{disabled:p,onClick:function(){return g(!1)},htmlType:"button",children:"Cancel"})]}):(0,A.jsx)(m.Button,{onClick:function(){return g(!0)},htmlType:"button",children:"Edit"})})})})};var ue=function(){var e,t,n,r,f,x,v,g,j=(0,i.useState)(null),y=(0,l.Z)(j,2),N=y[0],b=y[1],C=(0,i.useState)(null),I=(0,l.Z)(C,2),D=I[0],F=I[1],Z=(0,i.useState)([]),T=(0,l.Z)(Z,2),w=T[0],k=T[1],S=(0,i.useState)([]),E=(0,l.Z)(S,2),q=E[0],R=E[1],O=(0,i.useState)(!1),Y=(0,l.Z)(O,2),M=Y[0],L=Y[1],B=(0,i.useState)(null),H=(0,l.Z)(B,2),V=H[0],G=H[1],P=(0,i.useState)(!1),U=(0,l.Z)(P,2),z=U[0],_=U[1],J=(0,i.useState)(!1),K=(0,l.Z)(J,2),X=K[0],Q=K[1],$=(0,i.useState)([]),ee=(0,l.Z)($,2),te=ee[0],ae=ee[1],le=(0,i.useState)(null),ue=(0,l.Z)(le,2),me=ue[0],pe=ue[1],he=(0,i.useState)(null),fe=(0,l.Z)(he,2),xe=fe[0],ve=fe[1],ge=(0,i.useState)([]),je=(0,l.Z)(ge,2),ye=je[0],Ne=je[1],be=(0,i.useState)(null),Ce=(0,l.Z)(be,2),Ie=Ce[0],De=Ce[1],Fe=(0,i.useState)(!1),Ze=(0,l.Z)(Fe,2),Te=Ze[0],we=Ze[1],ke=(0,i.useState)(null),Se=(0,l.Z)(ke,2),Ae=Se[0],Ee=Se[1],qe=(0,i.useState)(!1),Re=(0,l.Z)(qe,2),Oe=Re[0],Ye=Re[1],Me=(0,s.s0)(),Le=(0,i.useContext)(p.V),Be=Le.state,He=Le.action,Ve=(0,s.UO)().documentId,Ge=(0,ce.Z)(),Pe=m.Form.useForm(),Ue=(0,l.Z)(Pe,1)[0],ze=m.Form.useForm(),_e=(0,l.Z)(ze,1)[0],Je=(0,i.useRef)(null),We="requestDocumentDetail_".concat(Ve),Ke=(0,i.useMemo)((function(){return se.Z.getDisabledStatus({documentData:D,userData:Ie,groupTag:null===xe||void 0===xe?void 0:xe.GroupTag,userGroupIds:null===Ie||void 0===Ie?void 0:Ie.ApprovalGroupIds})}),[D,Ie,xe]),Xe=(0,i.useMemo)((function(){return se.Z.checkUpdateItinerary({groupAndMembers:te,userData:Ie})}),[te,Ie]);(0,i.useEffect)((function(){return Be.connectionMultiViewer&&Be.userInfo&&(Qe(),Be.connectionMultiViewer.on("UsersInScreen",(function(e,t){var n=t.map((function(e){return{name:e.userName.split("_")[0],role:e.userName.split("_")[1],color:(0,re.Z)()}}));He.setMultiViewers(n.filter((function(e){var t,n;return e.name!=="".concat(null===(t=Be.userInfo)||void 0===t?void 0:t.Firstname," ").concat(null===(n=Be.userInfo)||void 0===n?void 0:n.Lastname)})))}))),function(){Be.connectionMultiViewer&&$e()}}),[Be.connectionMultiViewer,Be.userInfo]),(0,i.useEffect)((function(){Ve&&(He.changeMenuKey("/request/task"),o.Z.all(["tas/requestnonsitetravel/".concat(Ve),"tas/requestdocumenthistory/".concat(Ve),"tas/requestdocument/myinfo"].map((function(e){return o.Z.get(e)}))).then(o.Z.spread((function(e,t,n,a){e.data&&(et(e.data.EmployeeId),F(e.data)),R(e.data.Accommodations),k(e.data.FlightInfo),Ne(t.data),De(n.data)}))).catch((function(){})).then((function(){return L(!0)})))}),[Ve]),(0,i.useEffect)((function(){te&&at()}),[te]),(0,i.useEffect)((function(){D&&(nt(D.EmployeeId),lt())}),[D]),(0,i.useEffect)((function(){V&&("Approve"===V||"Complete"===V||"Decline"===V?it():_(!0))}),[V]);var Qe=function(){try{var e,t,n,a;null===(e=Be.connectionMultiViewer)||void 0===e||e.invoke("JoinScreen","".concat(null===(t=Be.userInfo)||void 0===t?void 0:t.Firstname," ").concat(null===(n=Be.userInfo)||void 0===n?void 0:n.Lastname,"_").concat(null===(a=Be.userInfo)||void 0===a?void 0:a.Role),We)}catch(l){}},$e=function(){var e,t,n,a;He.setMultiViewers([]),null===(e=Be.connectionMultiViewer)||void 0===e||e.invoke("LeaveScreen","".concat(null===(t=Be.userInfo)||void 0===t?void 0:t.Firstname," ").concat(null===(n=Be.userInfo)||void 0===n?void 0:n.Lastname,"_").concat(null===(a=Be.userInfo)||void 0===a?void 0:a.Role),We)},et=function(e){(0,o.Z)({method:"get",url:"tas/employee/profile/".concat(e)}).then((function(e){He.saveUserProfileData(e.data),Ue.setFieldsValue((0,a.Z)((0,a.Z)({},e.data),{},{PassportExpiry:e.data.PassportExpiry?c()(e.data.PassportExpiry):null})),Ee(e.data);var t=Be.referData.nationalities.find((function(t){return t.Id===e.data.NationalityId}));t&&"MN"!==t.Code&&Ye(!0)})).catch((function(e){}))},tt=function(){(0,o.Z)({method:"get",url:"tas/requestnonsitetravel/".concat(Ve)}).then((function(e){e.data.Id?(F(e.data),R(e.data.Accommodations),k(e.data.FlightInfo)):Q(!0)})).catch((function(e){}))},nt=function(e){(0,o.Z)({method:"get",url:"tas/employee/".concat(e)}).then((function(e){b(e.data)})).catch((function(e){}))},at=function(){(0,o.Z)({method:"get",url:"tas/requestgroupconfig/documentroute/".concat(Ve)}).then((function(e){ot(e.data)})).catch((function(e){}))},lt=function(e){(0,o.Z)({method:"get",url:"/tas/requestgroupconfig/groupandmembers/".concat(Ve)}).then((function(e){ae(e.data)}))},ot=function(e){var t=e.find((function(e){return 1===e.CurrentPosition}));if(ve(t),"travelflight"===(null===t||void 0===t?void 0:t.GroupTag)&&1===t.OrderIndex){var n=e.find((function(e){return"requester"===e.GroupTag}));n&&(Ue.setFieldValue("nextGroupName","".concat(null===n||void 0===n?void 0:n.GroupName," - ").concat(null===D||void 0===D?void 0:D.RequesterFullName)),Ue.setFieldValue("nextGroupId",null===n||void 0===n?void 0:n.Id),Ue.setFieldValue("assignedEmployeeId",D.RequestUserId),pe(n))}else if("requester"===(null===t||void 0===t?void 0:t.GroupTag)&&2===t.OrderIndex){var a=e.find((function(e){return"linemanager"===e.GroupTag})),l=te.find((function(e){return"linemanager"===e.GroupTag}));if(a){var o=[];l.groupMembers.map((function(e){o.push({value:e.employeeId,label:e.fullName})})),Ue.setFieldValue("nextGroupName",null===a||void 0===a?void 0:a.GroupName),Ue.setFieldValue("nextGroupId",null===a||void 0===a?void 0:a.Id),Ue.setFieldValue("assignEmployeeOptions",o),pe(a)}}else if("linemanager"===(null===t||void 0===t?void 0:t.GroupTag)){var i,s;if((null===D||void 0===D||null===(i=D.FlightInfo)||void 0===i||null===(s=i.FlightData)||void 0===s?void 0:s.length)>0){var r=e.find((function(e){return"travelflight"===e.GroupTag&&4===e.OrderIndex}));r&&(Ue.setFieldValue("nextGroupName",null===r||void 0===r?void 0:r.GroupName),Ue.setFieldValue("nextGroupId",null===r||void 0===r?void 0:r.Id),pe(r))}else if((null===D||void 0===D?void 0:D.Accommodations.length)>0){var c=e.find((function(e){return"travelhotel"===e.GroupTag}));c&&(Ue.setFieldValue("nextGroupName",null===c||void 0===c?void 0:c.GroupName),Ue.setFieldValue("nextGroupId",null===c||void 0===c?void 0:c.Id),pe(c))}}else if("travelflight"===(null===t||void 0===t?void 0:t.GroupTag)&&4===t.OrderIndex)if((null===D||void 0===D?void 0:D.Accommodations.length)>0){var d=e.find((function(e){return"travelhotel"===e.GroupTag}));d&&(Ue.setFieldValue("nextGroupName",null===d||void 0===d?void 0:d.GroupName),Ue.setFieldValue("nextGroupId",null===d||void 0===d?void 0:d.Id),pe(d))}else pe({GroupTag:"complete"});else if("travelhotel"===(null===t||void 0===t?void 0:t.GroupTag))pe({GroupTag:"complete"});else if("Requester"===(null===t||void 0===t?void 0:t.GroupTag)&&0===t.OrderIndex){var u=e.find((function(e){return"travelflight"===e.GroupTag})),m=te.find((function(e){return"travelflight"===e.GroupTag}));if(u){var p=[];m.groupMembers.map((function(e){p.push({value:e.employeeId,label:e.fullName})})),Ue.setFieldValue("nextGroupName",null===u||void 0===u?void 0:u.GroupName),Ue.setFieldValue("nextGroupId",null===u||void 0===u?void 0:u.Id),Ue.setFieldValue("assignEmployeeOptions",p),pe(u)}}},it=function(){var e=Ue.getFieldsValue();we(!0),"Approve"===V?(0,o.Z)({method:"put",url:"tas/requestdocument/approve",data:{id:Ve,assignEmployeeId:Ue.getFieldValue("assignedEmployeeId"),comment:e.comment,nextGroupId:e.nextGroupId,impersonateUserId:Ge.get("impersonateuser")}}).then((function(e){_(!1),Ge.get("impersonateuser")?Me("/request/impersonateuser/".concat(Ge.get("impersonateuser"))):Me("/request/task")})).catch((function(e){})).then((function(){return we(!1)})):"Cancel"===V?(0,o.Z)({method:"put",url:"tas/requestdocument/cancel",data:{id:Ve,nextGroupId:D.NextGroupId,comment:e.comment,impersonateUserId:Ge.get("impersonateuser")}}).then((function(e){_(!1),Ge.get("impersonateuser")?Me("/request/impersonateuser/".concat(Ge.get("impersonateuser"))):Me("/request/task")})).catch((function(e){})).then((function(){return we(!1)})):"Save"===V?(0,o.Z)({method:"put",url:"tas/requestdocument/save",data:{id:Ve,assignEmployeeId:Ue.getFieldValue("assignedEmployeeId"),nextGroupId:D.NextGroupId,comment:e.comment,impersonateUserId:Ge.get("impersonateuser")}}).then((function(e){_(!1),Ge.get("impersonateuser")?Me("/request/impersonateuser/".concat(Ge.get("impersonateuser"))):Me("/request/task")})).catch((function(e){})).then((function(){return we(!1)})):"Decline"===V?(0,o.Z)({method:"put",url:"tas/requestdocument/decline",data:{id:Ve,comment:e.comment,impersonateUserId:Ge.get("impersonateuser")}}).then((function(e){_(!1),Ge.get("impersonateuser")?Me("/request/impersonateuser/".concat(Ge.get("impersonateuser"))):Me("/request/task")})).catch((function(e){})).then((function(){return we(!1)})):"Complete"===V&&(0,o.Z)({method:"put",url:"tas/requestnonsitetravel/complete/".concat(Ve),data:{documentId:Ve,comment:e.comment,impersonateUserId:Ge.get("impersonateuser")}}).then((function(e){_(!1),Ge.get("impersonateuser")?Me("/request/impersonateuser/".concat(Ge.get("impersonateuser"))):Me("/request/task")})).catch((function(e){})).then((function(){return we(!1)}))},st=(0,i.useCallback)((function(){G(null),_(!1)}),[]),rt=function(e){"Cancel"===e?G(e):Ue.validateFields().then((function(t){var n,a;"Complete"===e&&(null===D||void 0===D||null===(n=D.FlightInfo)||void 0===n||null===(a=n.FlightData)||void 0===a?void 0:a.length)>0?_e.validateFields().then((function(){G(e)})).catch((function(e){_e.scrollToField("RequestTravelPurposeId")})):G(e)})).catch((function(e){}))},ct=(0,i.useMemo)((function(){var e,t=!1;return(null===D||void 0===D||null===(e=D.FlightInfo)||void 0===e?void 0:e.FlightData.length)>0&&(t=0===Be.travelOptions.length),t}),[D,Be.travelOptions]),dt=(0,i.useMemo)((function(){var e,t=!1;return(null===D||void 0===D||null===(e=D.FlightInfo)||void 0===e?void 0:e.FlightData.length)>0&&(t=null===D||void 0===D||!D.IssuedoptionId),t}),[D,Be.travelOptions]),ut=function(e,t){if(e)return"complete"!==e?(0,A.jsx)(A.Fragment,{children:"Requester"===(null===xe||void 0===xe?void 0:xe.GroupTag)&&0===(null===xe||void 0===xe?void 0:xe.OrderIndex)?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(m.Button,{htmlType:"button",type:"primary",onClick:function(){return rt("Approve")},disabled:Te,loading:Te&&"Approve"===V,children:"Submit"}),(0,A.jsx)(m.Button,{htmlType:"button",type:"danger",onClick:function(){return rt("Cancel")},disabled:Te,children:"Cancel Request"})]}):(0,A.jsxs)(A.Fragment,{children:["travelflight"===(null===xe||void 0===xe?void 0:xe.GroupTag)&&1===(null===xe||void 0===xe?void 0:xe.OrderIndex)?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(m.Button,{htmlType:"button",disabled:"Waiting Agent"===(null===D||void 0===D?void 0:D.CurrentStatus)||Te,type:"primary",onClick:function(){return function(){var e=Ue.getFieldsValue();we(!0),(0,o.Z)({method:"put",url:"tas/requestnonsitetravel/waitingagent/".concat(Ve,"?comment=").concat(e.comment)}).then((function(e){Me("/request/task")})).finally((function(){return we(!1)}))}()},loading:Te&&!V,children:"Wait for Agent"}),(0,A.jsx)(m.Button,{htmlType:"button",type:"success",onClick:function(){return rt("Approve")},disabled:Te||ct,loading:Te&&"Approve"===V,children:"Back to Requester"})]}):"requester"===(null===xe||void 0===xe?void 0:xe.GroupTag)&&2===(null===xe||void 0===xe?void 0:xe.OrderIndex)?(0,A.jsx)(m.Button,{htmlType:"button",type:"primary",onClick:function(){return rt("Approve")},disabled:dt,loading:Te&&"Approve"===V,children:"Submit"}):(0,A.jsx)(m.Button,{htmlType:"button",type:"success",onClick:function(){return rt("Approve")},disabled:Te,loading:Te&&"Approve"===V,children:"Approve"}),(0,A.jsx)(m.Button,{htmlType:"button",type:"danger",onClick:function(){return rt("Cancel")},disabled:Te,children:"Cancel Request"}),(0,A.jsx)(m.Tooltip,{title:t?"Please fill comment field!":"",children:(0,A.jsx)("div",{children:(0,A.jsx)(m.Button,{htmlType:"button",onClick:function(){return rt("Decline")},disabled:t||Te,loading:Te&&"Decline"===V,children:"Decline"})})})]})}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(m.Button,{htmlType:"button",type:"success",onClick:function(){return rt("Complete")},disabled:Te,loading:Te&&"Complete"===V,children:"Complete"}),(0,A.jsx)(m.Button,{htmlType:"button",type:"danger",onClick:function(){return rt("Cancel")},disabled:Te,children:"Cancel Request"}),(0,A.jsx)(m.Tooltip,{title:t?"Please fill comment field!":"",children:(0,A.jsx)("div",{children:(0,A.jsx)(m.Button,{htmlType:"button",onClick:function(){return rt("Decline")},disabled:t||Te,loading:Te&&"Decline"===V,children:"Decline"})})})]})},mt=function(){tt(),(0,o.Z)({method:"get",url:"tas/requestdocumenthistory/".concat(Ve)}).then((function(e){Ne(e.data)})).catch((function(e){}))},pt=(0,i.useMemo)((function(){return se.Z.getActionPermission({documentData:D,userData:Ie,groupTag:null===xe||void 0===xe?void 0:xe.GroupTag,userGroupIds:null===Ie||void 0===Ie?void 0:Ie.ApprovalGroupIds})}),[D,Ie,xe]);return(0,A.jsxs)("div",{children:[M?X?(0,A.jsxs)("div",{className:"bg-white rounded-ot px-4 py-3 min-h-[300px] flex flex-col justify-center items-center",children:[(0,A.jsx)("div",{className:"text-xl",children:"Not Found Document"}),(0,A.jsx)(m.Button,{htmlType:"button",type:"primary",className:"mt-5",onClick:function(){return Me("/request/task")},children:"Back to List"})]}):(0,A.jsxs)(m.Form,{className:"grid grid-cols-12 gap-4 relative",form:Ue,editData:(0,a.Z)((0,a.Z)({},N),{},{PassportExpiry:null!==N&&void 0!==N&&N.PassportExpiry?c()(null===N||void 0===N?void 0:N.PassportExpiry):null}),labelWrap:!0,disabled:Ke,onFinish:function(){return _(!0)},children:[(0,A.jsx)(m.RequestDocumentHeader,{profileData:Ae,documentDetail:D}),(0,A.jsx)(m.Accordion,{className:"col-span-12 shadow-md rounded-ot overflow-hidden",title:"Travel Calendar",children:(0,A.jsx)("div",{className:"p-4",children:(0,A.jsx)(m.ProfileCalendar,{profile:Ae})})}),(0,A.jsx)(m.Accordion,{title:"Traveller Information",className:"shadow-md border col-span-6",children:(0,A.jsxs)("div",{className:"flex gap-x-8 gap-y-8 p-4 text-xs flex-wrap",children:[(0,A.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,A.jsxs)("div",{className:"flex gap-4",children:[(0,A.jsx)("div",{className:"w-[110px] text-secondary leading-snug",children:"Travel Purpose :"}),(0,A.jsx)("div",{className:"flex-1",children:null!==(e=null===D||void 0===D||null===(t=D.FlightInfo)||void 0===t?void 0:t.RequestTravelPurposeDescription)&&void 0!==e?e:(0,A.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]}),(0,A.jsxs)("div",{className:"flex gap-3",children:[(0,A.jsx)("div",{className:"w-[110px] text-secondary leading-snug",children:"Passport Name :"}),(0,A.jsx)("div",{className:"flex-1",children:null!==Ae&&void 0!==Ae&&Ae.PassportName?null===Ae||void 0===Ae?void 0:Ae.PassportName:(0,A.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]}),(0,A.jsxs)("div",{className:"flex gap-3",children:[(0,A.jsx)("div",{className:"w-[110px] text-secondary leading-snug",children:"Passport Number :"}),(0,A.jsx)("div",{className:"flex-1",children:null!==Ae&&void 0!==Ae&&Ae.PassportNumber?null===Ae||void 0===Ae?void 0:Ae.PassportNumber:(0,A.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]}),(0,A.jsxs)("div",{className:"flex gap-4",children:[(0,A.jsx)("div",{className:"w-[110px] text-secondary leading-snug",children:"Passport Expiry :"}),(0,A.jsx)("div",{className:"flex-1",children:null!==Ae&&void 0!==Ae&&Ae.PassportExpiry?c()(null===Ae||void 0===Ae?void 0:Ae.PassportExpiry).format("YYYY-MM-DD"):(0,A.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]}),(0,A.jsxs)("div",{className:"flex gap-4",children:[(0,A.jsx)("div",{className:"w-[110px] text-secondary leading-snug",children:"Pick Up Address:"}),(0,A.jsx)("div",{className:"flex-1",children:null===Ae||void 0===Ae?void 0:Ae.PickUpAddress})]})]}),(0,A.jsxs)("div",{className:"flex flex-col gap-3",children:[null!==Oe&&void 0!==Oe?Oe:(0,A.jsxs)("div",{className:"flex gap-3",children:[(0,A.jsx)("div",{className:"w-[110px] text-secondary leading-snug",children:"Hometown :"}),(0,A.jsx)("div",{className:"flex-1",children:null!==(n=null===Ae||void 0===Ae?void 0:Ae.Hometown)&&void 0!==n?n:(0,A.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]}),(0,A.jsxs)("div",{className:"flex gap-3",children:[(0,A.jsx)("div",{className:"w-[150px] text-secondary leading-snug",children:"Frequent Flyer :"}),(0,A.jsx)("div",{className:"flex-1 ",children:null!==(r=null===Ae||void 0===Ae?void 0:Ae.FrequentFlyer)&&void 0!==r?r:(0,A.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]}),(0,A.jsxs)("div",{className:"flex gap-3",children:[(0,A.jsx)("div",{className:"w-[150px] text-secondary leading-snug",children:"Emergency Contact Name :"}),(0,A.jsx)("div",{className:"flex-1",children:null!==(f=null===Ae||void 0===Ae?void 0:Ae.EmergencyContactName)&&void 0!==f?f:(0,A.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]}),(0,A.jsxs)("div",{className:"flex gap-3",children:[(0,A.jsxs)("div",{className:"w-[150px] text-secondary leading-snug",children:[(0,A.jsx)(m.Tooltip,{title:"Number for this Travel",children:(0,A.jsx)(ie.Z,{className:"text-sm text-gray-700 cursor-pointer"})}),(0,A.jsx)("span",{className:"ml-2",children:"Emergency Contact :"})]}),(0,A.jsx)("div",{className:"flex-1",children:null!==(x=null===Ae||void 0===Ae?void 0:Ae.EmergencyContactMobile)&&void 0!==x?x:(0,A.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]}),(0,A.jsxs)("div",{className:"flex gap-3",children:[(0,A.jsx)("div",{className:"w-[150px] text-secondary leading-snug",children:"Email :"}),(0,A.jsx)("div",{className:"flex-1",children:null!==(v=null===Ae||void 0===Ae?void 0:Ae.Email)&&void 0!==v?v:(0,A.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]}),(0,A.jsxs)("div",{className:"flex gap-3",children:[(0,A.jsx)("div",{className:"w-[150px] text-secondary leading-snug",children:"Hometown:"}),(0,A.jsx)("div",{className:"flex-1",children:null!==(g=null===Ae||void 0===Ae?void 0:Ae.Hometown)&&void 0!==g?g:(0,A.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})]})]})}),(0,A.jsx)(m.Accordion,{className:"col-span-6 shadow-md rounded-ot overflow-hidden",title:"Travel Info",children:(0,A.jsx)(de,{form:_e,documentDetail:D,getData:mt,flightData:w})}),(0,A.jsx)(m.Accordion,{className:"col-span-12 shadow-md rounded-ot overflow-hidden",title:"Travel Detail",children:(0,A.jsxs)("div",{className:"p-4 flex flex-col gap-5",children:[(0,A.jsx)(W,{ref:Je,disabled:Ke,documentDetail:D,data:w,getData:mt,hasUpdatePermission:Xe,currentGroup:xe,userInfo:Ie,groupAndMembers:te,parentForm:Ue,hasActionPermission:pt}),(0,A.jsx)(oe,{disabled:Ke,getData:tt,data:q,currentGroup:xe,documentDetail:D,userInfo:Ie,groupAndMembers:te})]})}),(0,A.jsx)(m.Accordion,{defaultOpen:!0,title:"Attachments",className:"col-span-12 shadow-md rounded-ot overflow-hidden",children:(0,A.jsx)(ne,{disabled:Ke,documentDetail:D,hasUpdatePermission:Xe})}),pt?(0,A.jsx)(m.Accordion,{title:"Request Document",className:"col-span-12 shadow-md rounded-ot overflow-hidden",children:(0,A.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,A.jsxs)("div",{children:["Comments:",(0,A.jsx)(m.Form.Item,{className:"m-0",name:"comment",children:(0,A.jsx)(d.Z.TextArea,{autoSize:{minRows:3,maxRows:5},maxLength:300,showCount:!0})})]}),(0,A.jsxs)("div",{className:"flex gap-10",children:[(0,A.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.nextGroupName!==t.nextGroupName},children:function(e){var t=e.getFieldValue;return(0,A.jsxs)(m.Form.Item,{name:"nextGroupId",className:"mb-0",children:["Next Approval: ",(0,A.jsx)("span",{className:"font-bold",children:t("nextGroupName")})]})}}),"linemanager"===(null===me||void 0===me?void 0:me.GroupTag)&&(0,A.jsx)("div",{children:"Requester"===(null===me||void 0===me?void 0:me.GroupTag)?(0,A.jsxs)("div",{children:["Send to: ",(0,A.jsx)("span",{className:"font-bold",children:null===D||void 0===D?void 0:D.RequesterFullName})]}):(0,A.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.assignEmployeeOptions!==t.assignEmployeeOptions},children:function(e){var t=e.getFieldValue;return(0,A.jsx)(m.Form.Item,{name:"assignedEmployeeId",label:"Send to:",rules:[{required:!0,message:"Assign Employee is required"}],className:"w-[300px] mb-0",children:(0,A.jsx)(u.Z,{size:"small",options:t("assignEmployeeOptions"),className:"w-[150px]",filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0})})}})})]}),"Completed"!==(null===xe||void 0===xe?void 0:xe.GroupTag)&&(0,A.jsx)("div",{className:"flex items-center gap-3 justify-end",children:(0,A.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.comment!==t.comment},children:function(e){var t=e.getFieldValue,n=!Boolean(t("comment"));return ut(null===me||void 0===me?void 0:me.GroupTag,n)}})})]})}):(null===Ie||void 0===Ie?void 0:Ie.EmployeeId)===(null===D||void 0===D?void 0:D.RequestUserId)&&"Completed"!==(null===D||void 0===D?void 0:D.CurrentStatus)?(0,A.jsx)(m.Accordion,{title:"Request Document",className:"col-span-12 shadow-md rounded-ot overflow-hidden",children:(0,A.jsx)("div",{className:"flex flex-col gap-4 p-4",children:(0,A.jsx)("div",{className:"flex items-center gap-3 justify-end",children:(0,A.jsx)(m.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.comment!==t.comment},children:function(e){e.getFieldValue;return(0,A.jsx)(m.Button,{htmlType:"button",type:"danger",onClick:function(){return rt("Cancel")},disabled:Te,children:"Cancel Request"})}})})})}):null,(0,A.jsx)(m.Accordion,{defaultOpen:!Ke,title:"Document History & Comments, Document Route",className:"col-span-12 shadow-md rounded-ot overflow-hidden",children:(0,A.jsx)("div",{className:"grid grid-cols-12 items-start gap-4 p-4 pl-10",children:(0,A.jsx)(m.DocumentTimeline,{data:ye})})})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"animate-skeleton h-[230px] flex rounded-ot mb-5 shadow-md"}),(0,A.jsx)("div",{className:"animate-skeleton h-[400px] flex rounded-ot shadow-md"})]}),(0,A.jsx)(h.GI,{visible:z,showTitle:!1,height:120,width:350,children:(0,A.jsx)("div",{children:function(e){switch(e){case"Approve":return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{children:"Are you sure you want to approve this request?"}),(0,A.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,A.jsx)(m.Button,{type:"success",onClick:it,loading:Te,children:"Yes"}),(0,A.jsx)(m.Button,{onClick:st,disabled:Te,children:"No"})]})]});case"Cancel":return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{children:"Are you sure you want to cancel this request?"}),(0,A.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,A.jsx)(m.Button,{type:"danger",onClick:it,loading:Te,children:"Yes"}),(0,A.jsx)(m.Button,{onClick:st,disabled:Te,children:"No"})]})]});case"Save":return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{children:"Are you sure you want to save this request?"}),(0,A.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,A.jsx)(m.Button,{type:"primary",onClick:it,loading:Te,children:"Yes"}),(0,A.jsx)(m.Button,{onClick:st,disabled:Te,children:"No"})]})]});case"Decline":return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{children:"Are you sure you want to decline this request?"}),(0,A.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,A.jsx)(m.Button,{onClick:it,loading:Te,children:"Yes"}),(0,A.jsx)(m.Button,{onClick:st,disabled:Te,children:"No"})]})]});case"Complete":return(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{children:"Are you sure you want to complete this request?"}),(0,A.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,A.jsx)(m.Button,{type:"success",onClick:it,loading:Te,children:"Yes"}),(0,A.jsx)(m.Button,{onClick:st,disabled:Te,children:"No"})]})]})}}(V)})})]})}},8251:function(e,t){var n={getDisabledStatus:function(e){var t,n,a=e.documentData,l=e.userData,o=e.groupTag;e.userGroupIds;return console.log("hello",a,l,o),"Completed"===o||"Cancelled"===o||(null!==a&&void 0!==a&&a.AssignedEmployeeId?!(null!==l&&void 0!==l&&null!==(t=l.LineManagerIds)&&void 0!==t&&t.includes(null===a||void 0===a?void 0:a.AssignedEmployeeId)||(null===a||void 0===a?void 0:a.AssignedEmployeeId)===(null===l||void 0===l?void 0:l.EmployeeId)||"Data Approval"===(null===l||void 0===l?void 0:l.Rolename)&&"linemanager"===o||"SystemAdministrator"===(null===l||void 0===l?void 0:l.Rolename)):!("SystemAdministrator"===(null===l||void 0===l?void 0:l.Rolename)||null!==l&&void 0!==l&&null!==(n=l.ApprovalGroupIds)&&void 0!==n&&n.includes(null===a||void 0===a?void 0:a.AssignedRouteConfigId)))},getActionPermission:function(e){var t,n,a=e.documentData,l=e.userData,o=e.groupTag,i=(e.userGroupIds,null);"Completed"===(null===a||void 0===a?void 0:a.CurrentStatus)||"Cancelled"===(null===a||void 0===a?void 0:a.CurrentStatus)?i=!1:i=null!==a&&void 0!==a&&a.AssignedEmployeeId?!!(null!==l&&void 0!==l&&null!==(t=l.LineManagerIds)&&void 0!==t&&t.includes(null===a||void 0===a?void 0:a.AssignedEmployeeId)||(null===a||void 0===a?void 0:a.AssignedEmployeeId)===(null===l||void 0===l?void 0:l.EmployeeId)||"Data Approval"===(null===l||void 0===l?void 0:l.Rolename)&&"linemanager"===o||"SystemAdministrator"===(null===l||void 0===l?void 0:l.Rolename)):!!("SystemAdministrator"===(null===l||void 0===l?void 0:l.Rolename)||null!==l&&void 0!==l&&null!==(n=l.ApprovalGroupIds)&&void 0!==n&&n.includes(null===a||void 0===a?void 0:a.AssignedRouteConfigId));return i},checkUpdateItinerary:function(e){var t,n=e.groupAndMembers,a=e.userData,l=!1,o=null===n||void 0===n?void 0:n.find((function(e){return"travelflight"===e.GroupTag}));return null!==a&&void 0!==a&&null!==(t=a.GroupIds)&&void 0!==t&&t.includes(null===o||void 0===o?void 0:o.GroupId)&&(l=!0),l}};t.Z=n},16430:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(87462),l=n(47313),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},i=n(17469),s=function(e,t){return l.createElement(i.Z,(0,a.Z)({},e,{ref:t,icon:o}))};var r=l.forwardRef(s)},66736:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(87462),l=n(47313),o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},i=n(17469),s=function(e,t){return l.createElement(i.Z,(0,a.Z)({},e,{ref:t,icon:o}))};var r=l.forwardRef(s)},60020:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(87462),l=n(47313),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},i=n(17469),s=function(e,t){return l.createElement(i.Z,(0,a.Z)({},e,{ref:t,icon:o}))};var r=l.forwardRef(s)},55768:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(87462),l=n(47313),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},i=n(17469),s=function(e,t){return l.createElement(i.Z,(0,a.Z)({},e,{ref:t,icon:o}))};var r=l.forwardRef(s)},29816:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(87462),l=n(47313),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},i=n(17469),s=function(e,t){return l.createElement(i.Z,(0,a.Z)({},e,{ref:t,icon:o}))};var r=l.forwardRef(s)},43773:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(87462),l=n(47313),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},i=n(17469),s=function(e,t){return l.createElement(i.Z,(0,a.Z)({},e,{ref:t,icon:o}))};var r=l.forwardRef(s)},11114:function(e,t,n){var a=n(29439),l=n(47313),o=n(72884),i=n.n(o),s=n(14903),r=n(205),c=n(19323),d=n(42824),u=n(74714),m=n(74294),p=m.Z.Option;function h(e){return(null===e||void 0===e?void 0:e.type)&&(e.type.isSelectOption||e.type.isSelectOptGroup)}var f=function(e,t){var n,o,d=e.prefixCls,f=e.className,x=e.popupClassName,v=e.dropdownClassName,g=e.children,j=e.dataSource,y=(0,s.Z)(g);if(1===y.length&&l.isValidElement(y[0])&&!h(y[0])){var N=(0,a.Z)(y,1);o=N[0]}var b,C=o?function(){return o}:void 0;b=y.length&&h(y[0])?g:j?j.map((function(e){if(l.isValidElement(e))return e;switch(typeof e){case"string":return l.createElement(p,{key:e,value:e},e);case"object":var t=e.value;return l.createElement(p,{key:t,value:t},e.text);default:return}})):[];var I=(0,l.useContext(u.E_).getPrefixCls)("select",d),D=(0,c.Cn)("SelectLike",null===(n=e.dropdownStyle)||void 0===n?void 0:n.zIndex),F=(0,a.Z)(D,1)[0];return l.createElement(m.Z,Object.assign({ref:t,suffixIcon:null},(0,r.Z)(e,["dataSource","dropdownClassName"]),{prefixCls:I,popupClassName:x||v,dropdownStyle:Object.assign(Object.assign({},e.dropdownStyle),{zIndex:F}),className:i()("".concat(I,"-auto-complete"),f),mode:m.Z.SECRET_COMBOBOX_MODE_DO_NOT_USE,getInputElement:C}),b)},x=l.forwardRef(f),v=(0,d.Z)(x);x.Option=p,x._InternalPanelDoNotUseOrYouWillBeFired=v,t.Z=x}}]);