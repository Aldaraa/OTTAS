"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[6318],{66318:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var n=a(29439),o=a(47313),r=a(42614),i=a(56573),s=a(1413),d=a(93433),u=a(2880),c=a(46417),l={chart:{type:"column"},title:{text:"Total Request"},colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"],yAxis:{min:0,title:{text:"Count"}},xAxis:{type:"category"},tooltip:{pointFormat:"<b>{point.y}</b> {series.name}<br/>"},plotOptions:{column:{pointPadding:.2,borderWidth:0,centerInCategory:!0},series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y}"}}}},m=["#fe6a35","#2caffe","#fa4b42","#00e272","gray"],h=function(e,t){var a=(0,d.Z)(e);return a.find((function(e){return e.name===t.CurrentStatus}))?a.map((function(e){return e.name===t.CurrentStatus&&t.count>0?e.data.push({name:t.documentType,y:t.count}):e})):t.count>0&&a.push({name:t.CurrentStatus,data:[{name:t.documentType,y:t.count}],color:m[e.length]}),a};var p=function(e){var t=e.data,a=void 0===t?[]:t,n=(0,o.useMemo)((function(){var e=[];return a.length>0&&(e=a.reduce(h,[])),e}),[a]);return(0,c.jsx)("div",{children:(0,c.jsx)(u.MHighchart,{options:(0,s.Z)((0,s.Z)({},l),{},{series:n})})})},v={chart:{type:"column"},title:{text:"Total Request"},subtitle:{text:"By Month",align:"center"},yAxis:{min:0,title:{text:"Count"}},xAxis:{type:"category"},tooltip:{pointFormat:"<b>{point.y}</b> {series.name}<br/>"},plotOptions:{column:{centerInCategory:!0},series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y}"}}}},f=function(e,t){var a=(0,d.Z)(e);return a.find((function(e){return e.name===t.documentType}))?a.map((function(e){return e.name===t.documentType&&t.value>0?e.data.push({name:t.day,y:t.value}):e})):t.value>0&&a.push({name:t.documentType,data:[{name:t.day,y:t.value}]}),a};var y=function(e){var t=e.data,a=void 0===t?[]:t,n=(0,o.useMemo)((function(){var e=[];return a.length>0&&(e=a.reduce(f,[])),e}),[a]);return(0,c.jsx)("div",{children:(0,c.jsx)(u.MHighchart,{options:(0,s.Z)((0,s.Z)({},v),{},{series:n})})})},x=a(93031),g=a(11372),b=a(40765),j=a(10658),w=a.n(j),D={chart:{type:"column"},title:{text:"Document Type Distribution over Days Away Count"},xAxis:{type:"category",title:{text:"Days Away"}},yAxis:{min:0,title:{text:"Count of Request"}},legend:{align:"right",verticalAlign:"bottom"},tooltip:{headerFormat:"<b>{point.name}</b><br/>",pointFormat:"{series.name}: {point.y}<br/>Total: {point.stackTotal}"},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0}}}},C=function(e,t){var a=(0,d.Z)(e);return a.find((function(e){return e.name===t.DocumentType}))?a.map((function(e){return e.name===t.DocumentType&&t.Count>0?e.data.push({name:t.DaysAway,y:t.Count}):e})):t.Count>0&&a.push({name:t.DocumentType,data:[{name:t.DaysAway,y:t.Count}]}),a};var M=function(e){var t=e.data,a=void 0===t?[]:t,n=(0,o.useMemo)((function(){var e=[],t=a.sort((function(e,t){return e.DaysAway-t.DaysAway}));return(null===a||void 0===a?void 0:a.length)>0&&(e=t.reduce(C,[])),{data:e,categories:t.map((function(e){return e.DaysAway}))}}),[a]);return(0,c.jsx)("div",{children:(0,c.jsx)(u.MHighchart,{options:(0,s.Z)((0,s.Z)({},D),{},{series:null===n||void 0===n?void 0:n.data})})})},Z={accessibility:{screenReaderSection:{beforeChartFormat:"<h5>{chartTitle}</h5><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{viewTableButton}</div>"}},title:{text:"Declined Site Travel Requests",align:"left"}};var T=function(e){var t=e.data;return(0,c.jsx)("div",{children:(0,c.jsx)(u.MHighchart,{options:(0,s.Z)((0,s.Z)({},Z),{},{series:[{type:"wordcloud",name:"Request",data:null===t||void 0===t?void 0:t.map((function(e){return{name:e.Comment,weight:e.Count}}))}]})})})};var A=function(){var e=(0,o.useContext)(r.V).action,t=(0,o.useState)(null),a=(0,n.Z)(t,2),s=a[0],d=a[1],l=(0,o.useState)(w()().subtract(1,"M")),m=(0,n.Z)(l,2),h=m[0],v=m[1],f=(0,o.useState)(w()()),j=(0,n.Z)(f,2),D=j[0],C=j[1];(0,o.useEffect)((function(){e.changeMenuKey("/request/dashboard"),Z()}),[]);var Z=function(){(0,i.Z)({method:"get",url:"tas/dashboardrequest/documentdata?startDate=".concat(h.format("YYYY-MM-DD"),"&endDate=").concat(D.format("YYYY-MM-DD"))}).then((function(e){d(e.data)}))};return(0,c.jsxs)("div",{className:"grid grid-cols-12 gap-5",children:[(0,c.jsx)("div",{className:"col-span-12 flex",children:(0,c.jsxs)("div",{className:"flex items-center gap-5 py-2 px-4 bg-white rounded-ot",children:[(0,c.jsxs)("div",{className:"text-secondary2",children:[(0,c.jsx)("span",{className:"mr-1",children:h.format("MMM DD")}),"\u2014",(0,c.jsx)("span",{className:"ml-1",children:D.format("MMM DD")})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)(x.Z.WeekPicker,{placeholder:"Start Week",value:h,onChange:function(e){return v(e)},allowClear:!1}),(0,c.jsx)(g.Z,{}),(0,c.jsx)(x.Z.WeekPicker,{placeholder:"End Week",value:D,onChange:function(e){return C(e)},allowClear:!1}),(0,c.jsx)(u.Button,{type:"primary",className:"py-[7px]",icon:(0,c.jsx)(b.Z,{}),onClick:Z})]})]})}),(0,c.jsx)("div",{className:"bg-white rounded-ot col-span-6 overflow-hidden shadow-lg",children:(0,c.jsx)(p,{data:null===s||void 0===s?void 0:s.totalRequests})}),(0,c.jsx)("div",{className:"bg-white rounded-ot col-span-6 overflow-hidden shadow-lg",children:(0,c.jsx)(y,{data:null===s||void 0===s?void 0:s.monthData})}),(0,c.jsx)("div",{className:"bg-white rounded-ot col-span-6 overflow-hidden shadow-lg",children:(0,c.jsx)(T,{data:null===s||void 0===s?void 0:s.SiteTravelDeclined})}),(0,c.jsx)("div",{className:"bg-white rounded-ot col-span-6 overflow-hidden shadow-lg",children:(0,c.jsx)(M,{data:null===s||void 0===s?void 0:s.PendingDocumentDaysAway})})]})}}}]);