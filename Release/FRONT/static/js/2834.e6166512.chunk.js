"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[2834],{72834:function(e,t,n){n.r(t);var i=n(1413),a=n(29439),l=n(2880),s=n(14261),c=n(47313),o=n(65040),r=n(56573),u=n(40765),d=n(82138),f=n(92350),p=n(81514),m=n(58467),h=n(42614),v=n(46417),x="Group Master Detail";t.default=function(){var e=(0,c.useState)([]),t=(0,a.Z)(e,2),n=t[0],b=t[1],g=(0,c.useState)([]),j=(0,a.Z)(g,2),Z=j[0],C=j[1],y=(0,c.useState)(null),N=(0,a.Z)(y,2),A=N[0],k=N[1],w=(0,c.useState)(!1),D=(0,a.Z)(w,2),S=D[0],I=D[1],F=(0,c.useState)(!1),L=(0,a.Z)(F,2),B=L[0],M=L[1],R=(0,c.useState)(!1),E=(0,a.Z)(R,2),V=E[0],O=E[1],z=(0,c.useState)(!1),G=(0,a.Z)(z,2),J=G[0],T=G[1],_=o.Z.useForm(),K=(0,a.Z)(_,1)[0],P=o.Z.useForm(),U=(0,a.Z)(P,1)[0],Y=(0,m.UO)().groupMasterId,q=((0,m.s0)(),(0,c.useContext)(h.V).action);(0,c.useEffect)((function(){q.changeMenuKey("/tas/groupmaster"),H()}),[]);var H=function(){I(!0),(0,r.Z)({method:"get",url:"tas/groupdetail/".concat(Y)}).then((function(e){if(b(e.data),1===U.getFieldValue("Active")){var t=e.data.details.filter((function(e){return 1===e.Active}));C(t)}else if(0===U.getFieldValue("Active")){var n=e.data.details.filter((function(e){return 0===e.Active}));C(n)}else C(e.data.details)})).catch((function(e){})).then((function(){return I(!1)}))},Q=function(e){k(e),M(!0)},W=[{label:"Description",name:"Description"},{label:"# Resource",name:"EmployeeCount",alignment:"left"},{label:"Is Default",name:"isDefault",width:"120px",alignment:"center",cellRender:function(e){return(0,v.jsx)(s.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})}},{label:"Active",name:"Active",width:"120px",alignment:"center",cellRender:function(e){return(0,v.jsx)(s.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})}},{label:"",name:"action",width:"170px",cellRender:function(e){return(0,v.jsxs)("div",{className:"flex gap-4",children:[(0,v.jsx)("button",{type:"button",className:"edit-button",onClick:function(){return t=e.data,k(t),void T(!0);var t},children:"Edit"}),1===e.data.Active?(0,v.jsx)("button",{type:"button",className:"dlt-button",onClick:function(){return Q(e.data)},children:"Deactivate"}):(0,v.jsx)("button",{type:"button",className:"scs-button",onClick:function(){return Q(e.data)},children:"Reactivate"})]})}}],X=function(){T(!1)};return(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-3 shadow-md",children:[(0,v.jsxs)("div",{className:"text-lg font-bold mb-2",children:[n.Name," - ",x]}),(0,v.jsx)(l.Form,{initValues:{Code:"",Description:"",Active:null},form:U,fields:[{label:"Code",name:"Code",className:"col-span-2 mb-2",inputprops:{maxLength:10}},{label:"Description",name:"Description",className:"col-span-3 mb-2"},{label:"Active",name:"Active",className:"col-span-3 lg:col-span-1 mb-2",type:"check",inputprops:{indeterminatewith:!0}}],className:"grid grid-cols-12 gap-x-8",onFinish:function(e){I(!0),(0,p.Z)(e,n.details).then((function(e){C(e),I(!1)}))},noLayoutConfig:!0,children:(0,v.jsx)("div",{className:"flex gap-4 items-baseline col-span-3",children:(0,v.jsx)(l.Button,{onClick:function(){return K.submit()},loading:S,icon:(0,v.jsx)(u.Z,{}),children:"Search"})})})]}),(0,v.jsx)(l.Table,{data:Z,columns:W,allowColumnReordering:!1,loading:S,keyExpr:"Id",tableClass:"border-t max-h-[calc(100vh-250px)]",title:(0,v.jsxs)("div",{className:"flex justify-between py-2 px-1",children:[(0,v.jsxs)("div",{className:"flex items-center gap-1",children:[(0,v.jsx)("span",{className:"font-bold",children:Z.length}),(0,v.jsx)("span",{className:" text-gray-400",children:"results"})]}),(0,v.jsxs)(l.Button,{icon:(0,v.jsx)(d.Z,{}),onClick:function(){k(null),K.resetFields(),T(!0)},children:["Add ",x]})]})}),(0,v.jsx)(l.Modal,{open:J,onCancel:function(){return T(!1)},title:A?"Edit ".concat(x):"Add ".concat(x),children:(0,v.jsx)(l.Form,{form:K,fields:[{label:"Code",name:"Code",className:"col-span-12 mb-2",inputprops:{maxLength:10}},{label:"Description",name:"Description",className:"col-span-12 mb-2"},{label:"Is Default",name:"isDefault",className:"col-span-12 mb-2",type:"check",inputprops:{}}],editData:A,onFinish:function(e){O(!0),A?(0,r.Z)({method:"put",url:"tas/groupdetail",data:(0,i.Z)((0,i.Z)({},e),{},{Active:e.Active?1:0,groupMasterId:Y,Id:A.Id})}).then((function(e){H(),X()})).catch((function(e){})).then((function(){return O(!1)})):(0,r.Z)({method:"post",url:"tas/groupdetail",data:(0,i.Z)((0,i.Z)({},e),{},{Active:e.Active?1:0,groupMasterId:Y})}).then((function(e){H(),X()})).catch((function(e){})).then((function(){return O(!1)}))},children:(0,v.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2",children:[(0,v.jsx)(l.Button,{type:"primary",onClick:function(){return K.submit()},loading:V,icon:(0,v.jsx)(f.Z,{}),children:"Save"}),(0,v.jsx)(l.Button,{onClick:X,disabled:V,children:"Cancel"})]})})}),(0,v.jsxs)(s.GI,{visible:B,showTitle:!1,height:110,width:350,children:[(0,v.jsxs)("div",{children:["Are you sure you want to ",1===(null===A||void 0===A?void 0:A.Active)?"deactivate":"reactivate"," this record?"]}),(0,v.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,v.jsx)(l.Button,{type:1===(null===A||void 0===A?void 0:A.Active)?"danger":"success",onClick:function(){O(!0),(0,r.Z)({method:"delete",url:"tas/groupdetail",data:{id:A.Id}}).then((function(){H(),M(!1)})).catch((function(e){})).then((function(){return O(!1)}))},children:"Yes"}),(0,v.jsx)(l.Button,{onClick:function(){return M(!1)},children:"No"})]})]})]})}},81514:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(93433),a=n(4942),l=n(1413);var s=function e(t,n,i){var s=[],c=Object.keys(n);return t.map((function(t){if(t[i].length>0)s.push((0,l.Z)((0,l.Z)({},t),{},(0,a.Z)({},i,e(t[i],n,i))));else{var o=!1;c.map((function(e){var i,a;""!==n[e]&&"undefined"!==typeof n[e]&&null!==n[e]?o="string"===typeof n[e]?o||(null===(i=t[e])||void 0===i?void 0:i.toLowerCase().includes(null===(a=n[e])||void 0===a?void 0:a.toLowerCase())):o||t[e]===n[e]:o=!0})),o&&s.push(t)}})),s};function c(e,t,n,a){return"tree"===n?s(t,e,a):new Promise((function(n,a){var l=Object.keys(e),s=(0,i.Z)(t);l.map((function(t){""!==e[t]&&"undefined"!==typeof e[t]&&null!==e[t]&&(s="string"===typeof e[t]?s.filter((function(n){var i,a;return null===(i=n[t])||void 0===i?void 0:i.toLowerCase().includes(null===(a=e[t])||void 0===a?void 0:a.toLowerCase())})):s.filter((function(n){return n[t]===e[t]})))})),n(s)}))}}}]);