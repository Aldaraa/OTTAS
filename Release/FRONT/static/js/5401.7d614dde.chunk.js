"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[5401],{75401:function(e,n,t){t.r(n);var a=t(93433),c=t(1413),s=t(29439),i=t(2880),l=t(47313),o=t(65040),r=t(56573),d=t(23495),u=t(82138),m=t(92350),h=t(74134),f=t(11829),p=t(58467),v=t(42614),x=t(14261),b=t(46417);n.default=function(){var e,n,t,j=(0,l.useState)(null),g=(0,s.Z)(j,2),Z=g[0],N=g[1],C=(0,l.useState)([]),y=(0,s.Z)(C,2),I=y[0],w=y[1],k=(0,l.useState)([]),D=(0,s.Z)(k,2),S=D[0],T=D[1],A=(0,l.useState)(!1),B=(0,s.Z)(A,2),R=B[0],z=B[1],E=(0,l.useState)(!1),F=(0,s.Z)(E,2),V=F[0],q=F[1],H=(0,l.useState)(!1),M=(0,s.Z)(H,2),G=M[0],O=M[1],_=(0,l.useState)(!1),U=(0,s.Z)(_,2),Y=U[0],J=U[1],K=(0,l.useState)(null),L=(0,s.Z)(K,2),P=L[0],Q=L[1],W=(0,l.useState)(!1),X=(0,s.Z)(W,2),$=X[0],ee=X[1],ne=o.Z.useForm(),te=(0,s.Z)(ne,1)[0],ae=o.Z.useForm(),ce=(0,s.Z)(ae,1)[0],se=(0,p.UO)().clusterId,ie=(0,l.useContext)(v.V).state,le=(0,p.s0)();(0,l.useEffect)((function(){oe(),re()}),[]);var oe=function(){z(!0),(0,r.Z)({method:"get",url:"tas/cluster/".concat(se)}).then((function(e){var n;N(e.data),w((null===(n=e.data)||void 0===n?void 0:n.data)||[])})).catch((function(e){})).then((function(){return z(!1)}))},re=function(){z(!0),(0,r.Z)({method:"get",url:"tas/cluster/activetransports/".concat(se)}).then((function(e){var n=[];e.data.map((function(e){n.push((0,c.Z)({value:e.Id,label:"#".concat(e.Id," \u2022 ").concat(e.Code," \u2022 ").concat(e.Description)},e))})),T(n)})).catch((function(e){})).then((function(){return z(!1)}))},de=[{label:"# Seq",name:"SeqNumber",width:"130px",alignment:"left",allowEditing:!1},{label:"Transport #",name:"ActiveTransportId",allowEditing:!1,alignment:"left"},{label:"Transportation Type",name:"ActiveTransportDescription",allowEditing:!1},{label:"Transport Code",name:"ActiveTransportCode",allowEditing:!1},{label:"",name:"action",width:80,cellRender:function(e){return(0,b.jsx)("button",{className:"dlt-button",onClick:function(){return n=e.data,Q(n),void J(!0);var n},children:"Delete"})}}],ue=[{label:"Transportation Type",name:"activeTransportId",className:"col-span-12 mb-2",type:"select",inputprops:{options:S}},{label:"Sequence Number",name:"seqNumber",className:"col-span-12 mb-2",type:"number",inputprops:{min:0}}],me=function(){ce.resetFields(),q(!1)};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-3 shadow-md",children:[(0,b.jsx)("div",{className:"text-lg font-bold mb-2",children:"Cluster Detail"}),(0,b.jsxs)("div",{className:"max-w-[800px]",children:[(0,b.jsx)(i.Form,{form:te,fields:[{label:"Code",name:"Code",className:"col-span-6 mb-2"},{label:"Description",name:"Description",className:"col-span-6 mb-2"},{label:"Direction",name:"Direction",className:"col-span-6 mb-2"},{label:"Day",name:"DayNum",className:"col-span-6 mb-2"},{label:"Active",name:"Active",className:"col-span-12 mb-2",type:"check",hide:!0,inputprops:{indeterminatewith:!0}}],editData:Z,className:"grid grid-cols-12 gap-x-8",size:"small",onFinish:function(e){},disabled:!0}),(0,b.jsx)("div",{className:"flex gap-4 justify-end",children:(0,b.jsx)(i.Button,{onClick:function(){return le(-1)},icon:(0,b.jsx)(d.Z,{}),children:"Back"})})]})]}),(0,b.jsx)(i.Table,{data:I,columns:de,isGrouping:!1,allowColumnReordering:!1,loading:R,containerClass:!(null!==(e=ie.userInfo)&&void 0!==e&&e.ReadonlyAccess)&&"pt-2",tableClass:!(null!==(n=ie.userInfo)&&void 0!==n&&n.ReadonlyAccess)&&"border-t",keyExpr:"Id",title:null!==(t=ie.userInfo)&&void 0!==t&&t.ReadonlyAccess?null:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)(i.Button,{className:"mb-2",icon:(0,b.jsx)(u.Z,{}),onClick:function(){q(!0)},children:"Add Record"}),G?(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(i.Button,{className:"mb-2",type:"primary",icon:(0,b.jsx)(m.Z,{}),onClick:function(){var e=[];I.map((function(n){e.push(n.Id)})),(0,r.Z)({method:"post",url:"tas/clusterdetail/reorder",data:{clusterDetailIds:e,clusterId:se}}).then((function(e){oe(),O(!1)})).catch((function(e){}))},children:"Save Reorder"}),(0,b.jsx)(i.Button,{className:"mb-2",onClick:function(){w(Z.data),O(!1)},children:"Cancel"})]}):(0,b.jsx)(i.Button,{className:"mb-2",icon:(0,b.jsx)(h.Z,{}),onClick:function(){return O(!0)},children:"Change Seq"})]}),rowDragging:!!G&&{onReorder:function(e){return function(e){var n=e.component.getVisibleRows(),t=(0,a.Z)(I),c=null===t||void 0===t?void 0:t.findIndex((function(t){return t.Id===n[e.toIndex].data.Id})),s=null===t||void 0===t?void 0:t.findIndex((function(n){return n.Id===e.itemData.Id}));t.splice(s,1),t.splice(c,0,e.itemData),w(t)}(e)}}}),(0,b.jsxs)(i.Modal,{open:V,title:"Add Record",closeIcon:(0,b.jsx)("div",{className:"flex items-center justify-center",children:(0,b.jsx)(f.Z,{})}),onCancel:me,width:600,destroyOnClose:!0,children:[(0,b.jsx)(i.Form,{form:ce,fields:ue,editData:{seqNumber:I.length+1},className:"grid grid-cols-12 gap-x-8 mt-5",onFinish:function(e){z(!0),(0,r.Z)({method:"post",url:"tas/clusterdetail",data:(0,c.Z)((0,c.Z)({},e),{},{clusterId:se})}).then((function(e){oe(),re(),q(!1)})).catch((function(e){})).then((function(){return z(!1)}))}}),(0,b.jsxs)("div",{className:"flex gap-4 justify-end",children:[(0,b.jsx)(i.Button,{onClick:me,disablde:R,children:"Cancel"}),(0,b.jsx)(i.Button,{onClick:function(){return ce.submit()},type:"primary",loading:R,icon:(0,b.jsx)(m.Z,{}),children:"Save"})]})]}),(0,b.jsxs)(x.GI,{visible:Y,showTitle:!1,height:110,width:350,children:[(0,b.jsx)("div",{children:"Are you sure you want to `delete this record?"}),(0,b.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,b.jsx)(i.Button,{type:"danger",onClick:function(){ee(!0),(0,r.Z)({method:"delete",url:"tas/clusterdetail/".concat(null===P||void 0===P?void 0:P.Id)}).then((function(){oe(),re(),J(!1)})).catch((function(e){})).then((function(){return ee(!1)}))},loading:$,children:"Yes"}),(0,b.jsx)(i.Button,{onClick:function(){return J(!1)},disabled:$,children:"No"})]})]})]})}},74134:function(e,n,t){t.d(n,{Z:function(){return o}});var a=t(87462),c=t(47313),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},i=t(17469),l=function(e,n){return c.createElement(i.Z,(0,a.Z)({},e,{ref:n,icon:s}))};var o=c.forwardRef(l)}}]);