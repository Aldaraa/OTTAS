"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[3230],{63230:function(e,n,t){t.r(n);var a=t(29439),l=t(36459),o=t(47313),i=t(2880),r=t(56573),s=t(83313),u=t(21975),c=t(74294),d=t(58467),m=t(2135),p=t(42614),h=t(14261),f=t(40765),v=t(81514),x=t(46417);n.default=function(e){Object.assign({},((0,l.Z)(e),e));var n=(0,o.useState)(!1),t=(0,a.Z)(n,2),g=t[0],y=t[1],b=(0,o.useState)(null),j=(0,a.Z)(b,2),N=j[0],Z=j[1],w=(0,o.useState)(null),C=(0,a.Z)(w,2),L=C[0],k=C[1],S=(0,o.useState)([]),F=(0,a.Z)(S,2),E=F[0],I=F[1],M=(0,o.useState)(!1),T=(0,a.Z)(M,2),B=T[0],q=T[1],R=(0,o.useState)(!1),O=(0,a.Z)(R,2),_=O[0],A=O[1],D=(0,o.useState)([]),P=(0,a.Z)(D,2),G=P[0],H=P[1],K=(0,o.useState)(!1),U=(0,a.Z)(K,2),V=U[0],Y=U[1],z=(0,o.useState)(!1),J=(0,a.Z)(z,2),Q=J[0],W=J[1],X=(0,o.useState)(null),$=(0,a.Z)(X,2),ee=$[0],ne=$[1],te=(0,o.useState)([]),ae=(0,a.Z)(te,2),le=ae[0],oe=ae[1],ie=(0,d.s0)(),re=(0,o.useContext)(p.V).action,se=i.Form.useForm(),ue=(0,a.Z)(se,1)[0];(0,o.useEffect)((function(){re.changeMenuKey("/request/hierarchicaluser"),de(),ce()}),[]);var ce=function(){q(!0),(0,r.Z)({method:"get",url:"/tas/requestlinemanageremployee"}).then((function(e){H(e.data),oe(e.data)})).catch((function(e){})).then((function(){return q(!1)}))},de=function(){(0,r.Z)({method:"get",url:"/tas/requestgroupemployee/linemanageremployees"}).then((function(e){var n,t=[];null===(n=e.data.Employees)||void 0===n||n.map((function(e){t.push({value:e.EmployeeId,label:e.FullName})})),I(t)}))},me=[{label:"#",name:"EmployeeId",dataType:"string",width:"80px",cellRender:function(e){return(0,x.jsx)("div",{className:"flex items-center text-blue-500 hover:underline",children:(0,x.jsx)(m.Link,{to:"/tas/people/search/".concat(e.value),target:"_blank",children:e.value})})}},{label:"Employee Name",name:"EmployeeFullName",dataType:"string"},{label:"#",name:"LineManagerEmployeeId",dataType:"string",width:"100px",cellRender:function(e){return(0,x.jsx)("div",{className:"flex items-center text-blue-500 hover:underline",children:(0,x.jsx)(m.Link,{to:"/tas/people/search/".concat(e.value),target:"_blank",children:e.value})})}},{label:"Line Manager Name",name:"LineManagerFullName",dataType:"string"},{label:"",name:"action",dataType:"string",width:100,cellRender:function(e){return(0,x.jsx)("button",{type:"button",className:"dlt-button",onClick:function(){return n=e.data,ne(n),void W(!0);var n},children:"Delete"})}}];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-5",children:[(0,x.jsx)("div",{className:"text-lg font-bold mb-2",children:"Hierarchical User"}),(0,x.jsx)(i.Form,{form:ue,fields:[{label:"Employee Name",name:"EmployeeFullName",className:"col-span-6 mb-0 ",inputprops:{className:"w-[200px]"}},{label:"Line Manager Name",name:"LineManagerFullName",className:"col-span-6 mb-0",inputprops:{className:"w-[200px]"}}],className:"flex gap-x-5",onFinish:function(e){q(!0),(0,v.Z)(e,G).then((function(e){oe(e),q(!1)}))},wrapperCol:{flex:1},noLayoutConfig:!0,children:(0,x.jsx)("div",{children:(0,x.jsx)(i.Button,{htmlType:"submit",className:"flex items-center",icon:(0,x.jsx)(f.Z,{}),children:"Search"})})})]}),(0,x.jsx)(i.Table,{columns:me,data:le,keyExpr:"Id",pager:le.length>20,loading:B,containerClass:"shadow-none px-0 border rounded-ot overflow-hidden",title:(0,x.jsx)("div",{className:"flex justify-end items-center border-b py-1 px-2",children:(0,x.jsx)(i.Button,{onClick:function(){return A(!0)},children:"Add"})})}),(0,x.jsx)(s.Z,{open:_,width:1e3,onClose:function(){return A(!1)},children:(0,x.jsx)(i.PeopleSearch,{onSelect:function(e){Z(e),y(!0)},onRowDblClick:function(e){return ie("/tas/people/search/".concat(e.data.Id))},defaultColumns:["Id","Active","Lastname","Firstname","DepartmentName","EmployerName","RosterName"]})}),(0,x.jsxs)(i.Modal,{open:g,title:"Line Manager on ".concat(null===N||void 0===N?void 0:N.Firstname," ").concat(null===N||void 0===N?void 0:N.Lastname),children:[(0,x.jsx)("label",{children:"Selected Person:"}),(0,x.jsx)(u.Z,{value:"".concat(null===N||void 0===N?void 0:N.Firstname," ").concat(null===N||void 0===N?void 0:N.Lastname),disabled:!0,className:"mb-4"}),(0,x.jsx)("label",{children:"Line Manager:"}),(0,x.jsx)(c.Z,{options:E,onChange:function(e){return k(e)},placeholder:"Select Line Manager",className:"w-full",allowClear:!0,showSearch:!0,filterOption:function(e,n){var t;return(null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())}}),(0,x.jsxs)("div",{className:"flex justify-end gap-4 mt-4",children:[(0,x.jsx)(i.Button,{type:"primary",disabled:!L,onClick:function(){Y(!0),(0,r.Z)({method:"post",url:"/tas/requestlinemanageremployee",data:{employeeId:N.Id,lineManagerEmployeeId:L}}).then((function(e){ce(),Z(null),k(null),y(!1),A(!1)})).catch((function(e){})).then((function(){return Y(!1)}))},loading:V,children:"Save"}),(0,x.jsx)(i.Button,{onClick:function(){Z(null),y(!1)},disabled:V,children:"Cancel"})]})]}),(0,x.jsxs)(h.GI,{visible:Q,showTitle:!1,height:110,width:350,children:[(0,x.jsx)("div",{children:"Are you sure you want to delete this record?"}),(0,x.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,x.jsx)(i.Button,{type:"danger",onClick:function(){Y(!0),(0,r.Z)({method:"delete",url:"tas/requestlinemanageremployee/".concat(ee.Id)}).then((function(){ce(),W(!1)})).catch((function(e){})).then((function(){return Y(!1)}))},children:"Yes"}),(0,x.jsx)(i.Button,{onClick:function(){return W(!1)},children:"No"})]})]})]})}},81514:function(e,n,t){t.d(n,{Z:function(){return r}});var a=t(93433),l=t(4942),o=t(1413);var i=function e(n,t,a){var i=[],r=Object.keys(t);return n.map((function(n){if(n[a].length>0)i.push((0,o.Z)((0,o.Z)({},n),{},(0,l.Z)({},a,e(n[a],t,a))));else{var s=!1;r.map((function(e){var a,l;""!==t[e]&&"undefined"!==typeof t[e]&&null!==t[e]?s="string"===typeof t[e]?s||(null===(a=n[e])||void 0===a?void 0:a.toLowerCase().includes(null===(l=t[e])||void 0===l?void 0:l.toLowerCase())):s||n[e]===t[e]:s=!0})),s&&i.push(n)}})),i};function r(e,n,t,l){return"tree"===t?i(n,e,l):new Promise((function(t,l){var o=Object.keys(e),i=(0,a.Z)(n);o.map((function(n){""!==e[n]&&"undefined"!==typeof e[n]&&null!==e[n]&&(i="string"===typeof e[n]?i.filter((function(t){var a,l;return null===(a=t[n])||void 0===a?void 0:a.toLowerCase().includes(null===(l=e[n])||void 0===l?void 0:l.toLowerCase())})):i.filter((function(t){return t[n]===e[n]})))})),t(i)}))}}}]);