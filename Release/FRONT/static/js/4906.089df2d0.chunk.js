"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[4906],{76270:function(e,l,a){var i=a(29439),o=a(56573),t=a(47313),n=a(2135),r=a(26672),s=a(22539),d=a(63733),u=a(10658),c=a.n(u),m=a(42614),p=a(2880),v=a(1522),f=a(41612),x=a(21521),b=a(18637),h=a(29074),g=a(15413),D=a(58821),j=a(82508),N=a(59748),F=a(14261),y=a(43295),C=a(46417),I=function(e){if("Non Site Travel"===e.data.DocumentType)return"/request/task/nonsitetravel/".concat(e.data.Id);if("Profile Changes"===e.data.DocumentType)return"/request/task/profilechanges/".concat(e.data.Id);if("De Mobilisation"===e.data.DocumentType)return"/request/task/de-mobilisation/".concat(e.data.Id);if("Site Travel"===e.data.DocumentType){if("ADD"===e.data.DocumentTag)return"/request/task/sitetravel/addtravel/".concat(e.data.Id);if("RESCHEDULE"===e.data.DocumentTag)return"/request/task/sitetravel/reschedule/".concat(e.data.Id);if("REMOVE"===e.data.DocumentTag)return"/request/task/sitetravel/remove/".concat(e.data.Id)}},q=[{label:"Travel Date",name:"TravelDate",cellRender:function(e){return(0,C.jsx)("div",{children:c()(e.value).format("YYYY-MM-DD ddd ")})}},{label:"Favor Time",name:"FavorTime"},{label:"Depart Location",name:"DepartLocationName",alignment:"left"},{label:"Arrive Location",name:"ArriveLocationName",alignment:"left"},{label:"Comment",name:"Comment"},{label:"ETD",name:"ETD",alignment:"left",cellRender:function(e){return(0,C.jsx)(F.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})}}],L=[{label:"",name:"Direction"},{label:"Date",name:"EventDate",cellRender:function(e){return(0,C.jsx)("div",{children:c()(e.value).format("YYYY-MM-DD ddd HH:mm")})}},{label:"Description",name:"Description"},{label:"Status",name:"Status",cellRender:function(e){return(0,C.jsx)(h.Z,{color:R(e.value),children:e.value})}}],P=[{label:"Type",name:"DocumentType"},{label:"Date",name:"RequestedDate",cellRender:function(e){return(0,C.jsx)("div",{children:c()(e.value).format("YYYY-MM-DD ddd HH:mm")})}},{label:"Description",name:"Description"},{label:"#",name:"Id",alignment:"left",cellRender:function(e){return(0,C.jsx)("div",{className:"flex items-center text-blue-500 hover:underline",children:(0,C.jsx)(n.Link,{to:I(e),target:"_blank",children:e.value})})}},{label:"Status",name:"CurrentStatus",cellRender:function(e){return(0,C.jsx)(h.Z,{color:R(e.value),children:e.value})}}],R=function(e){switch(e){case"Confirmed":case"Waiting":return"green";case"Submitted":return"orange"}};l.Z=function(e){var l,a,u,h,F,I=e.employeeId,R=e.profileData,Z=e.pendingInfo,S=(0,t.useState)(null),E=(0,i.Z)(S,2),T=E[0],w=E[1],M=(0,t.useState)(!0),k=(0,i.Z)(M,2),A=k[0],Y=k[1],G=(0,t.useState)(!1),V=(0,i.Z)(G,2),z=V[0],O=V[1],U=(0,t.useState)(null),B=(0,i.Z)(U,2),H=B[0],$=B[1],_=(0,t.useState)(!1),W=(0,i.Z)(_,2),K=W[0],J=W[1],X=(0,t.useState)(null),Q=(0,i.Z)(X,2),ee=Q[0],le=Q[1],ae=(0,t.useContext)(m.V),ie=ae.state,oe=ae.action,te=(0,t.useRef)(null);(0,t.useEffect)((function(){R?(oe.saveUserProfileData(R),w(R),le(R.Id),Y(!1)):I&&(le(I),ne())}),[I,R]),(0,t.useEffect)((function(){0!==ie.ChangedFlight&&ne()}),[ie.ChangedFlight]);var ne=function(){(0,o.Z)({method:"get",url:"tas/employee/profile/".concat(I)}).then((function(e){oe.saveUserProfileData(e.data),w(e.data)})).catch((function(e){})).then((function(){return Y(!1)}))},re=(0,t.useMemo)((function(){if(T){if(null!==T&&void 0!==T&&T.Gender&&T.Active)return v;if(null!==T&&void 0!==T&&T.Gender&&!T.Active)return f;if((null===T||void 0===T||!T.Gender)&&T.Active)return x;if((null===T||void 0===T||!T.Gender)&&!T.Active)return b}}),[T]),se=(0,y.useReactToPrint)({contentRef:te,bodyClass:"w-[".concat(null===(l=te.current)||void 0===l?void 0:l.clientWidth,"]")});return(0,C.jsxs)("div",{children:[A?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"animate-skeleton h-[130px] flex rounded-ot mb-5 border"}),(0,C.jsx)("div",{className:"animate-skeleton h-[300px] flex rounded-ot border"})]}):(0,C.jsxs)("div",{className:"grid grid-cols-12 gap-5 relative",children:[(0,C.jsx)("div",{className:"col-span-12",children:(0,C.jsx)(g.Z.Ribbon,{className:"z-20",text:"New Employee",color:"blue",style:{display:null!==T&&void 0!==T&&T.DateCreated&&c()(null===T||void 0===T?void 0:T.DateCreated).diff(c()().subtract(2,"d"))>0?"block":"none"},children:(0,C.jsxs)("div",{className:"rounded-ot p-4 flex justify-between col-span-12 border border-gray-300 sticky top-0 z-10 shadow-md ".concat(1===(null===T||void 0===T?void 0:T.Active)?"bg-white":"bg-[#d9d9d9]"),children:[(0,C.jsxs)("div",{className:"flex gap-5",children:[(0,C.jsx)(n.Link,{className:"bg-gray-100 h-[80px] w-[80px] flex items-center justify-center rounded-ot border overflow-hidden cursor-pointer",to:"/tas/people/search/".concat(null===T||void 0===T?void 0:T.Id),children:(0,C.jsx)("img",{src:re})}),(0,C.jsxs)("div",{children:[(0,C.jsxs)("span",{className:"text-start lg:text-lg font-bold flex gap-1 items-center",children:[null===T||void 0===T?void 0:T.Firstname," ",null===T||void 0===T?void 0:T.Lastname," (",null===T||void 0===T?void 0:T.Id,")",T.OnSiteStatus?(0,C.jsx)(p.Tooltip,{title:"Today on Site",children:(0,C.jsx)("span",{children:(0,C.jsx)("div",{className:"ml-2 h-3 w-3 bg-green-400 rounded-full relative z-0",children:(0,C.jsx)("div",{className:"absolute animate-ping inset-0 bg-green-400 rounded-full z-10"})})})}):null]}),(0,C.jsxs)("div",{className:"flex gap-5 divide-x mt-2",children:[(0,C.jsxs)("div",{className:"text-[#718096] text-xs flex flex-col gap-1",children:[(0,C.jsx)(p.Tooltip,{Tooltip:!0,title:"Nationality",children:(0,C.jsxs)("div",{className:"flex gap-3 items-center cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(r.FaPassport,{size:15})}),(0,C.jsx)("div",{children:null!==T&&void 0!==T&&T.NationalityName?null===T||void 0===T?void 0:T.NationalityName:(0,C.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})}),(0,C.jsx)(p.Tooltip,{Tooltip:!0,title:"".concat(T.EmployerCurrentStatus?"Temporary":"Permanent"," Employer name"),children:(0,C.jsxs)("div",{className:"flex gap-3 items-center cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(r.FaRegBuilding,{size:15})}),(0,C.jsxs)("div",{children:[(0,C.jsx)(g.Z,{className:"mr-1",status:T.EmployerCurrentStatus?"warning":"success"}),null!==T&&void 0!==T&&T.EmployerName?null===T||void 0===T?void 0:T.EmployerName:(0,C.jsx)("span",{className:"text-gray-400",children:"Not registered"})]})]})}),(0,C.jsx)(p.Tooltip,{title:(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{className:"text-secondary2",children:"Cost Code: "}),T.CostCodeDescription?T.CostCodeDescription:null]}),className:"flex items-center gap-3 cursor-default",children:(0,C.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(s.c85,{size:15})}),(0,C.jsxs)("div",{children:[(0,C.jsx)(g.Z,{className:"mr-1",status:T.CostCodeCurrentStatus?"warning":"success"}),null!==T&&void 0!==T&&T.CostCodeNumber?null===T||void 0===T?void 0:T.CostCodeNumber:(0,C.jsx)("span",{className:"text-gray-400",children:"Not registered"})]})]})}),(0,C.jsx)(p.Tooltip,{title:"Mobile",className:"flex items-center gap-3 cursor-default",children:(0,C.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(s.IXo,{size:15})}),(0,C.jsx)("div",{children:null!==T&&void 0!==T&&T.PersonalMobile?null===T||void 0===T?void 0:T.PersonalMobile:(0,C.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})})]}),(0,C.jsxs)("div",{className:"pl-5 text-[#718096] text-xs flex flex-col gap-1",children:[(0,C.jsx)(p.Tooltip,{title:"".concat(T.PositionCurrentStatus?"Temporary":"Permanent"," Position name"),className:"flex items-center gap-3 cursor-default",children:(0,C.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(r.FaBriefcase,{size:15})}),(0,C.jsxs)("div",{children:[(0,C.jsx)(g.Z,{className:"mr-1",status:T.PositionCurrentStatus?"warning":"success"}),null!==T&&void 0!==T&&T.PositionName?null===T||void 0===T?void 0:T.PositionName:(0,C.jsx)("span",{className:"text-gray-400",children:"Not registered"})]})]})}),(0,C.jsx)(p.Tooltip,{title:"SAP ID #",className:"flex items-center gap-3 cursor-default",children:(0,C.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(d.Lhg,{size:15})}),(0,C.jsx)("div",{children:null===T||void 0===T?void 0:T.SAPID})]})}),(0,C.jsxs)(p.Tooltip,{title:"Camp & Room Type",className:"flex items-start gap-3 cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(D.hh$,{size:15})}),(0,C.jsx)("div",{children:null===T||void 0===T?void 0:T.CampRoomType})]}),(0,C.jsx)(p.Tooltip,{title:"Own Room",className:"flex items-center gap-3 cursor-default",children:(0,C.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(r.FaHouseUser,{size:15})}),null!==T&&void 0!==T&&T.RoomNumber?"AccomAdmin"===(null===(a=ie.userInfo)||void 0===a?void 0:a.Role)||"SystemAdmin"===(null===(u=ie.userInfo)||void 0===u?void 0:u.Role)?(0,C.jsx)(n.Link,{target:"_blank",to:"/tas/roomcalendar/".concat(T.RoomId,"/").concat(c()().format("YYYY-MM-DD")),children:null===T||void 0===T?void 0:T.RoomNumber}):(0,C.jsx)("div",{children:null===T||void 0===T?void 0:T.RoomNumber}):(0,C.jsx)("div",{className:"text-gray-400",children:"Not registered"})]})}),null!==T&&void 0!==T&&T.CurrentRoomNumber?(0,C.jsx)(p.Tooltip,{title:"Current Room",className:"flex items-center gap-3 cursor-default",children:(0,C.jsxs)("div",{className:"flex items-center gap-3 cursor-default text-success",children:[(0,C.jsx)("div",{children:(0,C.jsx)(r.FaHouseUser,{size:15})}),"AccomAdmin"===(null===(h=ie.userInfo)||void 0===h?void 0:h.Role)||"SystemAdmin"===(null===(F=ie.userInfo)||void 0===F?void 0:F.Role)?(0,C.jsx)(n.Link,{target:"_blank",to:"/tas/roomcalendar/".concat(T.CurrentRoomId,"/").concat(c()().format("YYYY-MM-DD")),children:null===T||void 0===T?void 0:T.CurrentRoomNumber}):(0,C.jsx)("div",{children:null===T||void 0===T?void 0:T.CurrentRoomNumber})]})}):null]}),(0,C.jsxs)("div",{className:"pl-5 text-[#718096] text-xs flex flex-col gap-1",children:[(0,C.jsx)(p.Tooltip,{title:"Location",className:"flex items-center gap-3 cursor-default",children:(0,C.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(r.FaLocationArrow,{size:15})}),(0,C.jsx)("div",{children:null!==T&&void 0!==T&&T.LocationName?null===T||void 0===T?void 0:T.LocationName:(0,C.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})}),(0,C.jsx)(p.Tooltip,{title:"Resource Type",className:"flex items-center gap-3 cursor-default",children:(0,C.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(r.FaUserAlt,{size:14})}),(0,C.jsx)("div",{children:null!==T&&void 0!==T&&T.PeopleTypeName?null===T||void 0===T?void 0:T.PeopleTypeName:(0,C.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})})]}),(0,C.jsx)("div",{className:"pl-4 text-[#718096] text-xs flex flex-col gap-1",children:(0,C.jsx)(p.DepartmentList,{data:T,id:null===T||void 0===T?void 0:T.DepartmentId})})]})]})]}),(0,C.jsx)("div",{className:"px-5 py-2 mt-8",children:(0,C.jsx)(g.Z,{count:null===Z||void 0===Z?void 0:Z.PendingRequests,children:(0,C.jsx)("button",{type:"button",onClick:function(){O(!0),J(!0),(0,o.Z)({method:"get",url:"tas/requestdocument/existingbooking/".concat(ee)}).then((function(e){$(e.data)})).catch((function(e){})).then((function(){return J(!1)}))},children:(0,C.jsx)(D.$W1,{size:26})})})})]})})}),(0,C.jsx)("div",{className:"w-full col-span-12",children:(0,C.jsxs)("div",{className:"flex items-start gap-5",children:[(0,C.jsx)(p.VerticalCalendar,{employeeId:ee}),(0,C.jsx)(p.FlightList,{profileData:ie.userProfileData,employeeId:ee})]})})]}),(0,C.jsx)(p.Modal,{open:z,title:"Existing Bookings",width:800,onCancel:function(){return O(!1)},children:K?(0,C.jsx)("div",{className:"p-8 flex justify-center items-center",children:(0,C.jsx)(j.Z,{style:{fontSize:24}})}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{ref:te,className:"flex flex-col gap-5",children:[(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{className:"text-gray-500 ",children:"Name:"})," ",null===H||void 0===H?void 0:H.FullName," (",null===H||void 0===H?void 0:H.SAPID,")"]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{className:"text-gray-500",children:"Department:"})," ",null===H||void 0===H?void 0:H.Department]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{className:"text-gray-500",children:"Employer:"})," ",null===H||void 0===H?void 0:H.Employer]})]}),(0,C.jsx)(p.Table,{data:null===H||void 0===H?void 0:H.SiteTravel,columns:L,pager:!1,containerClass:"shadow-none border border-gray-300",title:(0,C.jsx)("div",{className:"border-b py-1 font-bold",children:"Site Travel Requests"})}),(0,C.jsx)(p.Table,{data:null===H||void 0===H?void 0:H.NonSiteTravel,columns:q,pager:!1,containerClass:"shadow-none border border-gray-300",title:(0,C.jsx)("div",{className:"border-b py-1 font-bold",children:"Non Site Travel Requests"})}),(0,C.jsx)(p.Table,{data:null===H||void 0===H?void 0:H.PendingRequest,columns:P,pager:!1,containerClass:"shadow-none border border-gray-300",title:(0,C.jsx)("div",{className:"border-b py-1 font-bold",children:"Pending Requests"})}),(0,C.jsx)(p.Table,{data:null===H||void 0===H?void 0:H.OtherRequest,columns:P,pager:!1,containerClass:"shadow-none border border-gray-300",tableClass:"max-h-full",title:(0,C.jsx)("div",{className:"border-b py-1 font-bold",children:"Other Requests"})})]}),(0,C.jsx)("div",{className:"flex justify-end mt-5",children:(0,C.jsx)(p.Button,{onClick:se,type:"primary",icon:(0,C.jsx)(N.Z,{}),children:"Print"})})]})})]})}},64906:function(e,l,a){a.r(l),a.d(l,{default:function(){return V}});var i=a(1413),o=a(29439),t=a(47313),n=a(56573),r=a(65040),s=a(79036),d=a(14576),u=a(55333),c=a(21975),m=a(29816),p=a(23495),v=a(2880),f=a(12998),x=a(93031),b=a(68197),h=a(59624),g=a(22834),D=a(76298),j=a(74294),N=a(76047),F=a(10658),y=a.n(F),C=a(46146),I=a.n(C),q=a(69226),L=a.n(q),P=a(58467),R=a(2135),Z=a(42614),S=(a(63462),a(46417));y().extend(I()),y().extend(L());var E=new RegExp(/^[0-9]{8}$/),T=new RegExp(/^[A-Za-z -]+$/g),w=new RegExp(/^[0-9 +]+$/),M={labelCol:{xs:{span:24},sm:{span:12},md:{span:8},lg:{span:12},xl:{span:8},xxl:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}};var k=function(e){var l,a,s,d,u,m,p,F,C,I,q,L,k,A,Y,G,V,z,O,U,B,H,$,_,W,K,J,X,Q,ee,le,ae,ie,oe,te,ne,re,se,de,ue,ce,me,pe,ve,fe,xe,be,he,ge,De,je,Ne,Fe,ye,Ce,Ie,qe,Le,Pe,Re,Ze,Se,Ee,Te,we,Me,ke,Ae,Ye,Ge,Ve,ze,Oe,Ue,Be,He,$e,_e,We,Ke,Je,Xe,Qe,el,ll,al,il,ol,tl,nl,rl,sl,dl,ul,cl,ml,pl,vl,fl,xl,bl,hl,gl,Dl,jl,Nl,Fl,yl,Cl,Il,ql,Ll,Pl,Rl,Zl,Sl,El,Tl,wl,Ml,kl,Al,Yl,Gl,Vl,zl,Ol,Ul,Bl,Hl,$l,_l,Wl,Kl,Jl,Xl,Ql,ea,la,aa,ia,oa,ta,na,ra,sa,da,ua,ca,ma,pa,va,fa,xa,ba,ha,ga,Da,ja,Na,Fa,ya,Ca,Ia,qa,La,Pa,Ra,Za,Sa,Ea,Ta,wa,Ma,ka=e.form,Aa=(0,t.useState)(0),Ya=(0,o.Z)(Aa,2),Ga=Ya[0],Va=Ya[1],za=(0,t.useState)(!1),Oa=(0,o.Z)(za,2),Ua=Oa[0],Ba=(Oa[1],(0,t.useState)(null)),Ha=(0,o.Z)(Ba,2),$a=Ha[0],_a=Ha[1],Wa=(0,t.useState)(!1),Ka=(0,o.Z)(Wa,2),Ja=Ka[0],Xa=Ka[1],Qa=(0,t.useState)([]),ei=(0,o.Z)(Qa,2),li=(ei[0],ei[1],(0,t.useState)(0)),ai=(0,o.Z)(li,2),ii=(ai[0],ai[1]),oi=(0,t.useState)(null),ti=(0,o.Z)(oi,2),ni=ti[0],ri=ti[1],si=(0,P.UO)().employeeId,di=(0,t.useContext)(Z.V),ui=di.state,ci=(di.action,f.ZP.useNotification()),mi=(0,o.Z)(ci,2),pi=mi[0],vi=mi[1];(0,P.s0)(),(0,P.UO)().empId,(0,t.useEffect)((function(){ka.resetFields(),Xa(!1)}),[]),(0,t.useEffect)((function(){if(ui.userProfileData){var e,l,a,o,t,n,r,s,d,u,c,m=(0,i.Z)((0,i.Z)({},ui.userProfileData),{},{Dob:null!==(e=ui.userProfileData)&&void 0!==e&&e.Dob?y()(null===(l=ui.userProfileData)||void 0===l?void 0:l.Dob):null,CommenceDate:null!==(a=ui.userProfileData)&&void 0!==a&&a.CommenceDate?y()(null===(o=ui.userProfileData)||void 0===o?void 0:o.CommenceDate):null,CompletionDate:null!==(t=ui.userProfileData)&&void 0!==t&&t.CompletionDate?y()(null===(n=ui.userProfileData)||void 0===n?void 0:n.CompletionDate):null,NextRosterDate:null!==(r=ui.userProfileData)&&void 0!==r&&r.NextRosterDate?y()(null===(s=ui.userProfileData)||void 0===s?void 0:s.NextRosterDate):null,PassportExpiry:null!==(d=ui.userProfileData)&&void 0!==d&&d.PassportExpiry?y()(null===(u=ui.userProfileData)||void 0===u?void 0:u.PassportExpiry):null});null===(c=m.GroupData)||void 0===c||c.map((function(e){m[e.GroupMasterId]=e.GroupDetailId})),ri(m),ka.setFieldsValue(m)}}),[ui.userProfileData]);var fi=[{label:null===(l=ui.referData)||void 0===l||null===(a=l.profileFields.NationalityId)||void 0===a?void 0:a.Label,name:"NationalityId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(s=ui.referData)||void 0===s||null===(d=s.profileFields.NationalityId)||void 0===d?void 0:d.FieldRequired,message:"".concat(null===(u=ui.referData)||void 0===u||null===(m=u.profileFields.NationalityId)||void 0===m?void 0:m.Label," is required")}],inputprops:{options:ui.referData.nationalities}},{label:null===(p=ui.referData)||void 0===p||null===(F=p.profileFields.Email)||void 0===F?void 0:F.Label,name:"Email",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(C=ui.referData)||void 0===C||null===(I=C.profileFields.Email)||void 0===I?void 0:I.FieldRequired,message:"".concat(null===(q=ui.referData)||void 0===q||null===(L=q.profileFields.Email)||void 0===L?void 0:L.Label," is required")},{type:"email",message:"The input is not valid E-mail!"}]},{label:null===(k=ui.referData)||void 0===k||null===(A=k.profileFields.Gender)||void 0===A?void 0:A.Label,name:"Gender",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Y=ui.referData)||void 0===Y||null===(G=Y.profileFields.Gender)||void 0===G?void 0:G.FieldRequired,message:"".concat(null===(V=ui.referData)||void 0===V||null===(z=V.profileFields.Gender)||void 0===z?void 0:z.Label," is required")}],inputprops:{options:[{value:1,label:"Male"},{value:0,label:"Female"}]}},{type:"component",component:(0,S.jsx)(r.Z.Item,{label:null===(O=ui.referData)||void 0===O||null===(U=O.profileFields.Dob)||void 0===U?void 0:U.Label,name:"Dob",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(B=ui.referData)||void 0===B||null===(H=B.profileFields.Dob)||void 0===H?void 0:H.FieldRequired,message:"".concat(null===($=ui.referData)||void 0===$||null===(_=$.profileFields.Dob)||void 0===_?void 0:_.Label," is required")}],children:(0,S.jsx)(x.Z,{})})},{label:null===(W=ui.referData)||void 0===W||null===(K=W.profileFields.Firstname)||void 0===K?void 0:K.Label,name:"Firstname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(J=ui.referData)||void 0===J||null===(X=J.profileFields.Firstname)||void 0===X?void 0:X.FieldRequired,message:"".concat(null===(Q=ui.referData)||void 0===Q||null===(ee=Q.profileFields.Firstname)||void 0===ee?void 0:ee.Label," is required")}]},{label:null===(le=ui.referData)||void 0===le||null===(ae=le.profileFields.Lastname)||void 0===ae?void 0:ae.Label,name:"Lastname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(ie=ui.referData)||void 0===ie||null===(oe=ie.profileFields.Lastname)||void 0===oe?void 0:oe.FieldRequired,message:"".concat(null===(te=ui.referData)||void 0===te||null===(ne=te.profileFields.Lastname)||void 0===ne?void 0:ne.Label," is required")}]},{label:null===(re=ui.referData)||void 0===re||null===(se=re.profileFields.MFirstname)||void 0===se?void 0:se.Label,name:"MFirstname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(de=ui.referData)||void 0===de||null===(ue=de.profileFields.MFirstname)||void 0===ue?void 0:ue.FieldRequired,message:"".concat(null===(ce=ui.referData)||void 0===ce||null===(me=ce.profileFields.MFirstname)||void 0===me?void 0:me.Label," is required")}]},{label:null===(pe=ui.referData)||void 0===pe||null===(ve=pe.profileFields.MLastname)||void 0===ve?void 0:ve.Label,name:"MLastname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(fe=ui.referData)||void 0===fe||null===(xe=fe.profileFields.MLastname)||void 0===xe?void 0:xe.FieldRequired,message:"".concat(null===(be=ui.referData)||void 0===be||null===(he=be.profileFields.MLastname)||void 0===he?void 0:he.Label," is required")}]},{label:null===(ge=ui.referData)||void 0===ge||null===(De=ge.profileFields.CommenceDate)||void 0===De?void 0:De.Label,name:"CommenceDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date",rules:[{required:null===(je=ui.referData)||void 0===je||null===(Ne=je.profileFields.CommenceDate)||void 0===Ne?void 0:Ne.FieldRequired,message:"".concat(null===(Fe=ui.referData)||void 0===Fe||null===(ye=Fe.profileFields.CommenceDate)||void 0===ye?void 0:ye.Label," is required")}],inputprops:{format:"M/D/YYYY"}},{label:"Completion Date",name:"CompletionDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date",inputprops:{format:"M/D/YYYY"}},{label:null===(Ce=ui.referData)||void 0===Ce||null===(Ie=Ce.profileFields.DepartmentId)||void 0===Ie?void 0:Ie.Label,name:"DepartmentId",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(qe=ui.referData)||void 0===qe||null===(Le=qe.profileFields.DepartmentId)||void 0===Le?void 0:Le.FieldRequired,message:"".concat(null===(Pe=ui.referData)||void 0===Pe||null===(Re=Pe.profileFields.DepartmentId)||void 0===Re?void 0:Re.Label," is required")}],type:"treeSelect",inputprops:{treeData:ui.referData.departments,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},allowClear:!0,showSearch:!0,filterTreeNode:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.Name)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())}}},{label:null===(Ze=ui.referData)||void 0===Ze||null===(Se=Ze.profileFields.CostCodeId)||void 0===Se?void 0:Se.Label,name:"CostCodeId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Ee=ui.referData)||void 0===Ee||null===(Te=Ee.profileFields.CostCodeId)||void 0===Te?void 0:Te.FieldRequired,message:"".concat(null===(we=ui.referData)||void 0===we||null===(Me=we.profileFields.CostCodeId)||void 0===Me?void 0:Me.Label," is required")}],inputprops:{options:ui.referData.costCodes}},{label:null===(ke=ui.referData)||void 0===ke||null===(Ae=ke.profileFields.StateId)||void 0===Ae?void 0:Ae.Label,name:"StateId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Ye=ui.referData)||void 0===Ye||null===(Ge=Ye.profileFields.StateId)||void 0===Ge?void 0:Ge.FieldRequired,message:"".concat(null===(Ve=ui.referData)||void 0===Ve||null===(ze=Ve.profileFields.StateId)||void 0===ze?void 0:ze.Label," is required")}],inputprops:{options:ui.referData.states}},{type:"component",component:(0,S.jsx)(r.Z.Item,{className:"col-span-12 lg:col-span-6 mb-0",label:"AD Account",children:(0,S.jsxs)(b.Z,{gutter:8,children:[(0,S.jsx)(h.Z,{span:12,children:(0,S.jsx)(r.Z.Item,{name:"ADAccount",className:"mb-0",children:(0,S.jsx)(c.Z,{})})}),(0,S.jsx)(h.Z,{span:12,children:(0,S.jsx)(g.ZP,{htmlType:"button",disabled:!Ja,onClick:function(){(0,n.Z)({method:"post",url:"tas/employee/checkadaccount",data:{employeeId:si,adAccount:ka.getFieldValue("ADAccount")}}).then((function(e){e.data.AdAccountValidationStatus?pi.success({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1,description:(0,S.jsx)("div",{})}):pi.error({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1,description:(0,S.jsx)("div",{children:e.data.EmployeeId&&(0,S.jsxs)(R.Link,{to:"/tas/people/search/".concat(e.data.EmployeeId),className:"text-blue-500 hover:underline",children:[e.data.Firstname," ",e.data.Lastname]})})})})).catch((function(e){}))},children:"Account Check"})})]})},"component-ADAccount")}],xi=[{label:null===(Oe=ui.referData)||void 0===Oe||null===(Ue=Oe.profileFields.EmployerId)||void 0===Ue?void 0:Ue.Label,name:"EmployerId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Be=ui.referData)||void 0===Be||null===(He=Be.profileFields.EmployerId)||void 0===He?void 0:He.FieldRequired,message:"".concat(null===($e=ui.referData)||void 0===$e||null===(_e=$e.profileFields.EmployerId)||void 0===_e?void 0:_e.Label," is required")}],inputprops:{options:null===(We=ui.referData)||void 0===We?void 0:We.employers}},{label:null===(Ke=ui.referData)||void 0===Ke||null===(Je=Ke.profileFields.PeopleTypeId)||void 0===Je?void 0:Je.Label,name:"PeopleTypeId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Xe=ui.referData)||void 0===Xe||null===(Qe=Xe.profileFields.PeopleTypeId)||void 0===Qe?void 0:Qe.FieldRequired,message:"".concat(null===(el=ui.referData)||void 0===el||null===(ll=el.profileFields.PeopleTypeId)||void 0===ll?void 0:ll.Label," is required")}],inputprops:{options:null===(al=ui.referData)||void 0===al?void 0:al.peopleTypes,disabled:!(Ja&&(null===(il=ui.userProfileData)||void 0===il||!il.PeopleTypeId))}},{label:null===(ol=ui.referData)||void 0===ol||null===(tl=ol.profileFields.SAPID)||void 0===tl?void 0:tl.Label,name:"SAPID",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(nl=ui.referData)||void 0===nl||null===(rl=nl.profileFields.SAPID)||void 0===rl?void 0:rl.FieldRequired,message:"".concat(null===(sl=ui.referData)||void 0===sl||null===(dl=sl.profileFields.SAPID)||void 0===dl?void 0:dl.Label," is required")}]},{label:null===(ul=ui.referData)||void 0===ul||null===(cl=ul.profileFields.ContractNumber)||void 0===cl?void 0:cl.Label,name:"ContractNumber",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(ml=ui.referData)||void 0===ml||null===(pl=ml.profileFields.ContractNumber)||void 0===pl?void 0:pl.FieldRequired,message:"".concat(null===(vl=ui.referData)||void 0===vl||null===(fl=vl.profileFields.ContractNumber)||void 0===fl?void 0:fl.Label," is required")}]},{label:"Person #",name:"Id",className:"col-span-12 lg:col-span-6 mb-0",inputprops:{disabled:!0}},{label:null===(xl=ui.referData)||void 0===xl||null===(bl=xl.profileFields.PositionId)||void 0===bl?void 0:bl.Label,name:"PositionId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(hl=ui.referData)||void 0===hl||null===(gl=hl.profileFields.PositionId)||void 0===gl?void 0:gl.FieldRequired,message:"".concat(null===(Dl=ui.referData)||void 0===Dl||null===(jl=Dl.profileFields.PositionId)||void 0===jl?void 0:jl.Label," is required")}],inputprops:{options:null===(Nl=ui.referData)||void 0===Nl?void 0:Nl.positions}},{label:"Active",name:"Active",className:"col-span-12 lg:col-span-6 mb-0",type:"check"},{label:null===(Fl=ui.referData)||void 0===Fl||null===(yl=Fl.profileFields.HotelCheck)||void 0===yl?void 0:yl.Label,name:"HotelCheck",className:"col-span-12 lg:col-span-6 mb-0",type:"check",rules:[{required:null===(Cl=ui.referData)||void 0===Cl||null===(Il=Cl.profileFields.HotelCheck)||void 0===Il?void 0:Il.FieldRequired,message:"".concat(null===(ql=ui.referData)||void 0===ql||null===(Ll=ql.profileFields.HotelCheck)||void 0===Ll?void 0:Ll.Label," is required")}]},{label:null===(Pl=ui.referData)||void 0===Pl||null===(Rl=Pl.profileFields.RosterId)||void 0===Rl?void 0:Rl.Label,name:"RosterId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Zl=ui.referData)||void 0===Zl||null===(Sl=Zl.profileFields.RosterId)||void 0===Sl?void 0:Sl.FieldRequired,message:"".concat(null===(El=ui.referData)||void 0===El||null===(Tl=El.profileFields.RosterId)||void 0===Tl?void 0:Tl.Label," is required")}],inputprops:{options:null===(wl=ui.referData)||void 0===wl?void 0:wl.rosters}},{label:"Next Roster Start",name:"NextRosterDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date"},{label:null===(Ml=ui.referData)||void 0===Ml||null===(kl=Ml.profileFields.LocationId)||void 0===kl?void 0:kl.Label,name:"LocationId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Al=ui.referData)||void 0===Al||null===(Yl=Al.profileFields.LocationId)||void 0===Yl?void 0:Yl.FieldRequired,message:"".concat(null===(Gl=ui.referData)||void 0===Gl||null===(Vl=Gl.profileFields.LocationId)||void 0===Vl?void 0:Vl.Label," is required")}],inputprops:{options:null===(zl=ui.referData)||void 0===zl?void 0:zl.locations.filter((function(e){return 1!==e.onSite}))}},{label:null===(Ol=ui.referData)||void 0===Ol||null===(Ul=Ol.profileFields.FlightGroupMasterId)||void 0===Ul?void 0:Ul.Label,name:"FlightGroupMasterId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Bl=ui.referData)||void 0===Bl||null===(Hl=Bl.profileFields.FlightGroupMasterId)||void 0===Hl?void 0:Hl.FieldRequired,message:"".concat(null===($l=ui.referData)||void 0===$l||null===(_l=$l.profileFields.FlightGroupMasterId)||void 0===_l?void 0:_l.Label," is required")}],inputprops:{options:null===(Wl=ui.referData)||void 0===Wl?void 0:Wl.transportGroups}},{label:null===(Kl=ui.referData)||void 0===Kl||null===(Jl=Kl.profileFields.SiteContactEmployeeId)||void 0===Jl?void 0:Jl.Label,name:"SiteContactEmployeeId",className:"col-span-12 lg:col-span-6 mb-0",type:"searchSelect",rules:[{required:null===(Xl=ui.referData)||void 0===Xl||null===(Ql=Xl.profileFields.SiteContactEmployeeId)||void 0===Ql?void 0:Ql.FieldRequired,message:"".concat(null===(ea=ui.referData)||void 0===ea||null===(la=ea.profileFields.SiteContactEmployeeId)||void 0===la?void 0:la.Label," is required")}],inputprops:{fetchOptions:function(e){return(0,n.Z)({method:"post",url:"tas/employee/searchshort",data:{model:{keyWord:e},pageIndex:0,pageSize:100}}).then((function(e){return e.data.data.map((function(e){return{label:"".concat(e.Firstname," ").concat(e.Lastname," /").concat(e.Mobile,"/"),value:e.Id}}))}))},showSearch:!0,editName:["SiteContactEmployeeFirstname","SiteContactEmployeeLastname"],placeholder:"Select user",allowClear:!0}}],bi=[{label:null===(aa=ui.referData)||void 0===aa||null===(ia=aa.profileFields.EmergencyContactName)||void 0===ia?void 0:ia.Label,name:"EmergencyContactName",className:"col-span-6 mb-0",rules:[{required:null===(oa=ui.referData)||void 0===oa||null===(ta=oa.profileFields.EmergencyContactName)||void 0===ta?void 0:ta.FieldRequired,message:"".concat(null===(na=ui.referData)||void 0===na||null===(ra=na.profileFields.EmergencyContactName)||void 0===ra?void 0:ra.Label," is required")}]},{label:null===(sa=ui.referData)||void 0===sa||null===(da=sa.profileFields.EmergencyContactMobile)||void 0===da?void 0:da.Label,name:"EmergencyContactMobile",className:"col-span-6 mb-0",rules:[{required:null===(ua=ui.referData)||void 0===ua||null===(ca=ua.profileFields.EmergencyContactMobile)||void 0===ca?void 0:ca.FieldRequired,message:"".concat(null===(ma=ui.referData)||void 0===ma||null===(pa=ma.profileFields.EmergencyContactMobile)||void 0===pa?void 0:pa.Label," is required")},{pattern:w,message:"Invalid phone number"}],inputprops:{className:"w-full",maxLength:15}},{label:null===(va=ui.referData)||void 0===va||null===(fa=va.profileFields.Mobile)||void 0===fa?void 0:fa.Label,name:"Mobile",className:"col-span-6 mb-0",type:"number",rules:[{required:null===(xa=ui.referData)||void 0===xa||null===(ba=xa.profileFields.Mobile)||void 0===ba?void 0:ba.FieldRequired,message:"".concat(null===(ha=ui.referData)||void 0===ha||null===(ga=ha.profileFields.Mobile)||void 0===ga?void 0:ga.Label," is required")},{pattern:E,message:"".concat(null===(Da=ui.referData)||void 0===Da||null===(ja=Da.profileFields.Mobile)||void 0===ja?void 0:ja.Label," must be 8 digit")}],inputprops:{prefix:"+976",className:"w-full",maxLength:8}},{type:"component",component:(0,S.jsx)(r.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.PeopleTypeId!==l.PeopleTypeId},children:function(e){var l,a,i,o,t,n,s,d,u,c,m=(0,e.getFieldValue)("PeopleTypeId"),p="Visitor"===(null===(l=ui.referData.peopleTypes)||void 0===l||null===(a=l.find((function(e){return e.value===m})))||void 0===a?void 0:a.Code);return(0,S.jsx)(r.Z.Item,{className:"col-span-6 mb-0",name:"PersonalMobile",label:null===(i=ui.referData)||void 0===i||null===(o=i.profileFields.PersonalMobile)||void 0===o?void 0:o.Label,rules:[{required:!p&&(null===(t=ui.referData)||void 0===t||null===(n=t.profileFields.PersonalMobile)||void 0===n?void 0:n.FieldRequired),message:"".concat(null===(s=ui.referData)||void 0===s||null===(d=s.profileFields.PersonalMobile)||void 0===d?void 0:d.Label," is required")},{pattern:E,message:"".concat(null===(u=ui.referData)||void 0===u||null===(c=u.profileFields.PersonalMobile)||void 0===c?void 0:c.Label," must be 8 digit")}],children:(0,S.jsx)(D.Z,{controls:!1,prefix:"+976",className:"w-full",maxLength:8})})}})},{label:null===(Na=ui.referData)||void 0===Na||null===(Fa=Na.profileFields.PickUpAddress)||void 0===Fa?void 0:Fa.Label,name:"PickUpAddress",className:"col-span-6 mb-0",type:"textarea",rules:[{required:null===(ya=ui.referData)||void 0===ya||null===(Ca=ya.profileFields.PickUpAddress)||void 0===Ca?void 0:Ca.FieldRequired,message:"".concat(null===(Ia=ui.referData)||void 0===Ia||null===(qa=Ia.profileFields.PickUpAddress)||void 0===qa?void 0:qa.Label," is required")}]},{label:null===(La=ui.referData)||void 0===La||null===(Pa=La.profileFields.FrequentFlyer)||void 0===Pa?void 0:Pa.Label,name:"FrequentFlyer",className:"col-span-6 mb-0",rules:[{required:null===(Ra=ui.referData)||void 0===Ra||null===(Za=Ra.profileFields.FrequentFlyer)||void 0===Za?void 0:Za.FieldRequired,message:"".concat(null===(Sa=ui.referData)||void 0===Sa||null===(Ea=Sa.profileFields.FrequentFlyer)||void 0===Ea?void 0:Ea.Label," is required")}]}],hi=(S.Fragment,null===(Ta=ui.referData)||void 0===Ta||null===(wa=Ta.fieldsOfGroups)||void 0===wa||wa.map((function(e,l){return(0,S.jsx)(r.Z.Item,{name:e.Id,label:e.Description,className:"col-span-12 lg:col-span-6 mb-0",children:(0,S.jsx)(j.Z,{showSearch:!0,allowClear:!0,options:e.details,filterOption:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.Description)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},fieldNames:{value:"Id",label:"Description"}})},"g-fields-".concat(l))})),[{type:"component",component:(0,S.jsx)(r.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.NationalityId!==l.NationalityId},children:function(e){e.getFieldValue;var l,a,i,o,t,n,s,d,u,m,p,v,f,b,h,g,D,j,N,F,y=null===(l=ui.referData)||void 0===l||null===(a=l.nationalities)||void 0===a?void 0:a.find((function(e){return e.value===ka.getFieldValue("NationalityId")}));return"MN"!==(null===y||void 0===y?void 0:y.Code)&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(r.Z.Item,{label:null===(i=ui.referData)||void 0===i||null===(o=i.profileFields.PassportNumber)||void 0===o?void 0:o.Label,name:"PassportNumber",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(t=ui.referData)||void 0===t||null===(n=t.profileFields.PassportExpiry)||void 0===n?void 0:n.FieldRequired,message:"".concat(null===(s=ui.referData)||void 0===s||null===(d=s.profileFields.PassportNumber)||void 0===d?void 0:d.Label," is required")}],children:(0,S.jsx)(c.Z,{})}),(0,S.jsx)(r.Z.Item,{label:null===(u=ui.referData)||void 0===u||null===(m=u.profileFields.PassportName)||void 0===m?void 0:m.Label,name:"PassportName",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(p=ui.referData)||void 0===p||null===(v=p.profileFields.PassportExpiry)||void 0===v?void 0:v.FieldRequired,message:"".concat(null===(f=ui.referData)||void 0===f||null===(b=f.profileFields.PassportName)||void 0===b?void 0:b.Label," is required")},{pattern:T,message:"The input is not valid name!"}],children:(0,S.jsx)(c.Z,{})}),(0,S.jsx)(r.Z.Item,{label:null===(h=ui.referData)||void 0===h||null===(g=h.profileFields.PassportExpiry)||void 0===g?void 0:g.Label,name:"PassportExpiry",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(D=ui.referData)||void 0===D||null===(j=D.profileFields.PassportExpiry)||void 0===j?void 0:j.FieldRequired,message:"".concat(null===(N=ui.referData)||void 0===N||null===(F=N.profileFields.PassportExpiry)||void 0===F?void 0:F.Label," is required")}],children:(0,S.jsx)(x.Z,{})})]})}})}]),gi=function(e){var l=0;return $a&&$a.map((function(a,i){null!==e&&void 0!==e&&e.find((function(e){return e.name===a.name[0]}))&&l++})),l>0&&(0,S.jsx)(v.ErrorTabElement,{children:l})},Di=[{label:(0,S.jsxs)("div",{className:"font-normal",children:["Personal ",gi([].concat(fi))]}),key:0,forceRender:!0,children:(0,S.jsx)("div",{className:"pt-4 grid grid-cols-12 gap-x-5 gap-y-2",children:(0,S.jsx)(v.FormItemRender,{fields:fi,form:ka,handleInitStatus:ii},"t-item-1c")},"t-item-0")},{label:(0,S.jsxs)("div",{children:["On Site ",gi(xi)]}),key:1,forceRender:!0,children:(0,S.jsx)("div",{className:"pt-4 grid grid-cols-12 gap-x-5 gap-y-2",children:(0,S.jsx)(v.FormItemRender,{fields:xi,form:ka,handleInitStatus:ii},"t-item-2c")},"t-item-1")},{label:(0,S.jsxs)("div",{children:["Off Site ",gi([].concat(bi,[{name:"PersonalMobile"}]))]}),key:2,forceRender:!0,children:(0,S.jsx)("div",{className:"pt-4 grid grid-cols-12 gap-x-5 gap-y-2",children:(0,S.jsx)(v.FormItemRender,{fields:bi,form:ka,handleInitStatus:ii},"t-item-3c")},"t-item-2")},{label:(0,S.jsxs)("div",{children:["Citizenship ",gi(function(){if(ka.getFieldValue("NationalityId")){var e,l,a=null===(e=ui.referData)||void 0===e||null===(l=e.nationalities)||void 0===l?void 0:l.find((function(e){return e.value===ka.getFieldValue("NationalityId")}));return"MN"!==(null===a||void 0===a?void 0:a.Code)?[{label:"Passport Number",name:"PassportNumber",rules:[{required:!0,message:"Passport Number is required"}]},{label:"Name On Passport",name:"PassportName",rules:[{required:!0,message:"Name on password is required"},{pattern:T,message:"The input is not valid name!"}]},{label:"Passport Expiry Date",name:"PassportExpiry",rules:[{required:!0,message:"Password expiry date is required"}]}]:[]}return[]}())]}),key:4,forceRender:!0,children:(0,S.jsx)("div",{className:"pt-4 grid grid-cols-12 gap-x-5 gap-y-2",children:(0,S.jsx)(v.FormItemRender,{fields:hi,form:ka,handleInitStatus:ii},"t-item-5c")},"t-item-4")}];return(0,S.jsxs)(S.Fragment,{children:[ui.customLoading?(0,S.jsx)("div",{className:"animate-skeleton h-[400px] flex rounded-ot shadow-md col-span-12"}):(0,S.jsxs)("div",{className:"bg-white rounded-ot p-4 col-span-12 mb-1",children:[(0,S.jsx)(r.Z,(0,i.Z)((0,i.Z)({form:ka},M),{},{labelAlign:"left",onFinish:function(e){_a(null),Xa(!1)},className:"bg-white rounded-lg",onFinishFailed:function(e){e&&_a(e.errorFields)},disabled:!Ja,size:"middle",children:(0,S.jsx)(N.Z,{defaultActiveKey:"1",type:"card",size:"middle",items:Di,activeKey:Ga,onTabClick:function(e){return Va(e)}})})),(0,S.jsx)("div",{className:"mt-3 flex justify-end",children:null!==(Ma=ui.userInfo)&&void 0!==Ma&&Ma.ReadonlyAccess?null:Ja?(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[(0,S.jsx)(v.Button,{type:"primary",loading:Ua,onClick:function(){return ka.submit()},children:"Done"}),(0,S.jsx)(v.Button,{onClick:function(){Xa(!1),ka.setFieldsValue(ni)},disabled:Ua,children:"Cancel"})]}):(0,S.jsx)(v.Button,{onClick:function(){return Xa(!0)},children:"Edit"})})]}),vi]})},A=a(76270),Y=a(52957);var G=function(e){var l,a,i,o,n=e.form,r=e.disabled,s=(0,t.useContext)(Z.V).state;return(0,t.useEffect)((function(){s.userProfileData&&n.setFieldsValue(s.userProfileData)}),[s.userProfileData]),(0,S.jsxs)(v.Form,{form:n,className:"max-w-[600px] p-4",size:"medium",disabled:r,children:[(0,S.jsx)(v.Form.Item,{name:"EmployerId",label:"Employer",className:"col-span-12 mb-2",children:(0,S.jsx)(j.Z,{options:null===(l=s.referData)||void 0===l?void 0:l.employers,filterOption:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}),(0,S.jsx)(v.Form.Item,{name:"DepartmentId",label:"Department",className:"col-span-12 mb-2",children:(0,S.jsx)(Y.Z,{treeData:null===(a=s.referData)||void 0===a?void 0:a.departments,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},onSelect:function(e,l){return n.setFieldValue("CostCodeId",l.CostCodeId)},filterTreeNode:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.Name)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}),(0,S.jsx)(v.Form.Item,{name:"CostCodeId",label:"Cost Code",className:"col-span-12 mb-2",children:(0,S.jsx)(j.Z,{options:null===(i=s.referData)||void 0===i?void 0:i.costCodes,filterOption:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}),(0,S.jsx)(v.Form.Item,{name:"PositionId",label:"Position",className:"col-span-12 mb-2",children:(0,S.jsx)(j.Z,{options:null===(o=s.referData)||void 0===o?void 0:o.positions,filterOption:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}),(0,S.jsx)(v.Form.Item,{name:"StartDate",label:"Start Date",className:"col-span-12 mb-2",rules:[{required:!0,message:"Start Date is required"}],children:(0,S.jsx)(x.Z,{})}),(0,S.jsx)(v.Form.Item,{name:"EndDate",label:"End Date",className:"col-span-12 mb-2",rules:[{required:!0,message:"End Date is required"}],children:(0,S.jsx)(x.Z,{})})]})};var V=function(e){e.onSubmit;var l,a,f=(0,t.useState)(null),x=(0,o.Z)(f,2),b=x[0],h=x[1],g=(0,t.useState)([]),D=(0,o.Z)(g,2),j=D[0],N=D[1],F=(0,t.useState)(!1),C=(0,o.Z)(F,2),I=C[0],q=C[1],L=(0,t.useState)(null),R=(0,o.Z)(L,2),E=(R[0],R[1]),T=(0,t.useState)(!1),w=(0,o.Z)(T,2),M=w[0],Y=w[1],V=(0,t.useState)(null),z=(0,o.Z)(V,2),O=z[0],U=z[1],B=(0,t.useState)(null),H=(0,o.Z)(B,2),$=H[0],_=H[1],W=(0,t.useState)(0),K=(0,o.Z)(W,2),J=K[0],X=K[1],Q=(0,t.useContext)(Z.V),ee=Q.action,le=Q.state,ae=r.Z.useForm(),ie=(0,o.Z)(ae,1)[0],oe=r.Z.useForm(),te=(0,o.Z)(oe,1)[0],ne=r.Z.useForm(),re=(0,o.Z)(ne,1)[0],se=(0,P.s0)(),de=(0,P.UO)().empId;(0,t.useEffect)((function(){ue(),ce()}),[]);var ue=function(e){(0,n.Z)({method:"get",url:"/tas/requestgroupconfig/groupandmembers/bytype/Profile Changes?empId=".concat(de)}).then((function(e){var l=e.data.groups[0];U(e.data),E(l);var a=[];l.groupMembers.map((function(e){a.push({value:e.employeeId,label:e.fullName})})),ie.setFieldValue("assignEmployeeOptions",a),ie.setFieldValue("nextGroupName",null===l||void 0===l?void 0:l.GroupName),ie.setFieldValue("nextGroupId",null===l||void 0===l?void 0:l.id);var i=e.data.groups;i.unshift({GroupName:"Requester",id:0}),i.push({GroupName:"Completed",id:99999}),h(i)}))},ce=function(){(0,n.Z)({method:"get",url:"tas/employee/profile/".concat(de)}).then((function(e){ee.saveUserProfileData(e.data)})).catch((function(e){}))},me=[{label:"Group",name:"GroupName"},{label:"Current Position",name:"CurrentPosition",alignment:"left",cellRender:function(e){return(0,S.jsx)("div",{children:0==e.rowIndex?(0,S.jsx)(m.Z,{style:{color:"#e57200"}}):""})}}],pe=(0,t.useCallback)((function(e){var l=te.getFieldsValue();(0,n.Z)({method:"post",url:"tas/requestdocumentprofilechange",data:{employee:(0,i.Z)((0,i.Z)({},l),{},{Dob:null!==l&&void 0!==l&&l.Dob?y()(null===l||void 0===l?void 0:l.Dob).format("YYYY-MM-DD"):null,CommenceDate:null!==l&&void 0!==l&&l.CommenceDate?y()(null===l||void 0===l?void 0:l.CommenceDate).format("YYYY-MM-DD"):null,CompletionDate:null!==l&&void 0!==l&&l.CompletionDate?y()(null===l||void 0===l?void 0:l.CompletionDate).format("YYYY-MM-DD"):null,NextRosterDate:null!==l&&void 0!==l&&l.NextRosterDate?y()(null===l||void 0===l?void 0:l.NextRosterDate).format("YYYY-MM-DD"):null,PassportExpiry:null!==l&&void 0!==l&&l.PassportExpiry?y()(null===l||void 0===l?void 0:l.PassportExpiry).format("YYYY-MM-DD"):null,EmployeeId:de}),changeRequestData:(0,i.Z)((0,i.Z)({},e),{},{action:"Submitted"})}}).then((function(e){se("/request/task")})).catch((function(e){})).then((function(){Y(!1)}))}),[te,de]),ve=(0,t.useCallback)((function(e){var l=re.getFieldsValue();(0,n.Z)({method:"post",url:"tas/requestdocumentprofilechange/temp",data:{employee:(0,i.Z)((0,i.Z)({},re.getFieldsValue()),{},{StartDate:l.StartDate?y()(l.StartDate).format("YYYY-MM-DD"):null,EndDate:l.EndDate?y()(l.EndDate).format("YYYY-MM-DD"):null,EmployeeId:de}),changeRequestData:(0,i.Z)((0,i.Z)({},e),{},{action:"Submitted"})}}).then((function(e){se("/request/task")})).catch((function(e){})).then((function(){Y(!1)}))}),[re,de]),fe=(0,t.useCallback)((function(e){Y(!0),(0,n.Z)({method:"get",url:"tas/requestdocument/checkduplicate/samprofilechanges/".concat(de)}).then((function(l){N(l.data),0===l.data.length?1===$?pe(e):2===$&&ve(e):(q(!0),Y(!1))})).catch((function(){}))}),[$,de]),xe=[{title:"Choose Request Type",content:(0,S.jsx)("div",{className:"flex flex-col items-start gap-4 p-4",children:(0,S.jsx)(s.ZP.Group,{onChange:function(e){_(e.target.value),X(J+1)},children:(0,S.jsxs)(d.Z,{direction:"vertical",children:[(0,S.jsx)(s.ZP,{value:1,children:"Permanent Change"}),(0,S.jsx)(d.Z,{className:"ml-6",children:"\u2022 Add a new site travel request"}),(0,S.jsx)(s.ZP,{disabled:!(null!==(l=le.userProfileData)&&void 0!==l&&l.Active),value:2,children:"Temporary Change"}),(0,S.jsx)(d.Z,{className:"ml-6",children:"\u2022 Change the details of an existing travel request"})]})})})},{title:"Form",content:(0,S.jsx)("div",{children:$?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:1===$?"block":"hidden",children:(0,S.jsx)(k,{form:te})}),(0,S.jsx)("div",{className:2===$?"block":"hidden",children:(0,S.jsx)(G,{form:re})})]}):null})}],be=xe.map((function(e){return{key:e.title,title:e.title}}));return(0,S.jsxs)("div",{className:"px-6 py-5 rounded-ot shadow-card bg-white",children:[(0,S.jsx)(v.Button,{className:"mb-3",onClick:function(){return se("/request/tasprofilechanges")},icon:(0,S.jsx)(p.Z,{}),children:"Back"}),(0,S.jsx)(v.Accordion,{title:"Profile",className:"border",children:(0,S.jsx)("div",{className:"p-3",children:(0,S.jsx)(A.Z,{employeeId:de,pendingInfo:O})})}),(0,S.jsx)("div",{className:"flex flex-col gap-4 mt-4",children:(0,S.jsxs)(v.Form,{className:"grid grid-cols-12 gap-y-5",size:"small",form:ie,initValues:{comment:"",assignedEmployeeId:null},onFinish:fe,children:[(0,S.jsx)(v.Accordion,{title:"Detail",className:"border col-span-12",children:(0,S.jsxs)("div",{className:"p-4",children:[(0,S.jsx)(u.Z,{items:be,current:J,size:"small"}),(0,S.jsx)("div",{style:{marginTop:16},children:null===(a=xe[J])||void 0===a?void 0:a.content}),(0,S.jsx)("div",{className:"mt-6 flex justify-between items-center",children:J>0&&(0,S.jsx)(v.Button,{style:{margin:"0 8px"},onClick:function(){X(J-1)},children:"Previous"})})]})}),(0,S.jsx)(v.Accordion,{title:"Request Document",className:"border col-span-12",children:(0,S.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,S.jsxs)("div",{children:["Comments:",(0,S.jsx)(v.Form.Item,{className:"m-0",name:"comment",children:(0,S.jsx)(c.Z.TextArea,{autoSize:{minRows:3,maxRows:5},maxLength:300,showCount:!0})})]}),(0,S.jsx)("div",{className:"flex gap-10",children:(0,S.jsx)(v.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.nextGroupName!==l.nextGroupName},children:function(e){var l=e.getFieldValue;return(0,S.jsxs)(v.Form.Item,{name:"nextGroupId",className:"mb-0",children:["Next Approval: ",(0,S.jsx)("span",{className:"font-bold",children:l("nextGroupName")})]})}})})]})}),(0,S.jsx)(v.Accordion,{title:"Document Route",className:"border col-span-12",children:(0,S.jsx)("div",{className:"flex flex-col gap-4 p-4",children:(0,S.jsx)(v.Table,{data:b,columns:me,pager:!1,containerClass:"shadow-none border border-gray-300"})})})]})}),(0,S.jsxs)("div",{className:"flex justify-end mt-4 gap-4",children:[(0,S.jsx)(v.Button,{type:"primary",htmlType:"button",onClick:function(){return ie.submit()},loading:M,children:"Submit"}),(0,S.jsx)(v.Button,{disabled:M,onClick:function(){return se(-1)},children:"Cancel"})]}),(0,S.jsx)(v.DuplicatedDocument,{open:I,onCancel:function(){return q(!1)},data:j})]})}}}]);