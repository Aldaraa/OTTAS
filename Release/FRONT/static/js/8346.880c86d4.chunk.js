"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[8346],{76270:function(e,t,a){var n=a(29439),l=a(56573),s=a(47313),r=a(2135),i=a(26672),o=a(22539),c=a(63733),d=a(10658),m=a.n(d),u=a(42614),p=a(2880),x=a(1522),f=a(41612),h=a(21521),v=a(18637),g=a(29074),j=a(15413),N=a(58821),b=a(82508),y=a(59748),D=a(14261),F=a(43295),C=a(46417),Z=function(e){if("Non Site Travel"===e.data.DocumentType)return"/request/task/nonsitetravel/".concat(e.data.Id);if("Profile Changes"===e.data.DocumentType)return"/request/task/profilechanges/".concat(e.data.Id);if("De Mobilisation"===e.data.DocumentType)return"/request/task/de-mobilisation/".concat(e.data.Id);if("Site Travel"===e.data.DocumentType){if("ADD"===e.data.DocumentTag)return"/request/task/sitetravel/addtravel/".concat(e.data.Id);if("RESCHEDULE"===e.data.DocumentTag)return"/request/task/sitetravel/reschedule/".concat(e.data.Id);if("REMOVE"===e.data.DocumentTag)return"/request/task/sitetravel/remove/".concat(e.data.Id)}},I=[{label:"Travel Date",name:"TravelDate",cellRender:function(e){return(0,C.jsx)("div",{children:m()(e.value).format("YYYY-MM-DD ddd ")})}},{label:"Favor Time",name:"FavorTime"},{label:"Depart Location",name:"DepartLocationName",alignment:"left"},{label:"Arrive Location",name:"ArriveLocationName",alignment:"left"},{label:"Comment",name:"Comment"},{label:"ETD",name:"ETD",alignment:"left",cellRender:function(e){return(0,C.jsx)(D.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})}}],E=[{label:"",name:"Direction"},{label:"Date",name:"EventDate",cellRender:function(e){return(0,C.jsx)("div",{children:m()(e.value).format("YYYY-MM-DD ddd HH:mm")})}},{label:"Description",name:"Description"},{label:"Status",name:"Status",cellRender:function(e){return(0,C.jsx)(g.Z,{color:w(e.value),children:e.value})}}],T=[{label:"Type",name:"DocumentType"},{label:"Date",name:"RequestedDate",cellRender:function(e){return(0,C.jsx)("div",{children:m()(e.value).format("YYYY-MM-DD ddd HH:mm")})}},{label:"Description",name:"Description"},{label:"#",name:"Id",alignment:"left",cellRender:function(e){return(0,C.jsx)("div",{className:"flex items-center text-blue-500 hover:underline",children:(0,C.jsx)(r.Link,{to:Z(e),target:"_blank",children:e.value})})}},{label:"Status",name:"CurrentStatus",cellRender:function(e){return(0,C.jsx)(g.Z,{color:w(e.value),children:e.value})}}],w=function(e){switch(e){case"Confirmed":case"Waiting":return"green";case"Submitted":return"orange"}};t.Z=function(e){var t,a,d,g,D,Z=e.employeeId,w=e.profileData,S=e.pendingInfo,P=(0,s.useState)(null),Y=(0,n.Z)(P,2),q=Y[0],k=Y[1],L=(0,s.useState)(!0),M=(0,n.Z)(L,2),R=M[0],A=M[1],V=(0,s.useState)(!1),H=(0,n.Z)(V,2),O=H[0],z=H[1],G=(0,s.useState)(null),B=(0,n.Z)(G,2),U=B[0],_=B[1],W=(0,s.useState)(!1),$=(0,n.Z)(W,2),J=$[0],X=$[1],K=(0,s.useState)(null),Q=(0,n.Z)(K,2),ee=Q[0],te=Q[1],ae=(0,s.useContext)(u.V),ne=ae.state,le=ae.action,se=(0,s.useRef)(null);(0,s.useEffect)((function(){w?(le.saveUserProfileData(w),k(w),te(w.Id),A(!1)):Z&&(te(Z),re())}),[Z,w]),(0,s.useEffect)((function(){0!==ne.ChangedFlight&&re()}),[ne.ChangedFlight]);var re=function(){(0,l.Z)({method:"get",url:"tas/employee/profile/".concat(Z)}).then((function(e){le.saveUserProfileData(e.data),k(e.data)})).catch((function(e){})).then((function(){return A(!1)}))},ie=(0,s.useMemo)((function(){if(q){if(null!==q&&void 0!==q&&q.Gender&&q.Active)return x;if(null!==q&&void 0!==q&&q.Gender&&!q.Active)return f;if((null===q||void 0===q||!q.Gender)&&q.Active)return h;if((null===q||void 0===q||!q.Gender)&&!q.Active)return v}}),[q]),oe=(0,F.useReactToPrint)({contentRef:se,bodyClass:"w-[".concat(null===(t=se.current)||void 0===t?void 0:t.clientWidth,"]")});return(0,C.jsxs)("div",{children:[R?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"animate-skeleton h-[130px] flex rounded-ot mb-5 border"}),(0,C.jsx)("div",{className:"animate-skeleton h-[300px] flex rounded-ot border"})]}):(0,C.jsxs)("div",{className:"grid grid-cols-12 gap-5 relative",children:[(0,C.jsx)("div",{className:"col-span-12",children:(0,C.jsx)(j.Z.Ribbon,{className:"z-20",text:"New Employee",color:"blue",style:{display:null!==q&&void 0!==q&&q.DateCreated&&m()(null===q||void 0===q?void 0:q.DateCreated).diff(m()().subtract(2,"d"))>0?"block":"none"},children:(0,C.jsxs)("div",{className:"rounded-ot p-4 flex justify-between col-span-12 border border-gray-300 sticky top-0 z-10 shadow-md ".concat(1===(null===q||void 0===q?void 0:q.Active)?"bg-white":"bg-[#d9d9d9]"),children:[(0,C.jsxs)("div",{className:"flex gap-5",children:[(0,C.jsx)(r.Link,{className:"bg-gray-100 h-[80px] w-[80px] flex items-center justify-center rounded-ot border overflow-hidden cursor-pointer",to:"/tas/people/search/".concat(null===q||void 0===q?void 0:q.Id),children:(0,C.jsx)("img",{src:ie})}),(0,C.jsxs)("div",{children:[(0,C.jsxs)("span",{className:"text-start lg:text-lg font-bold flex gap-1 items-center",children:[null===q||void 0===q?void 0:q.Firstname," ",null===q||void 0===q?void 0:q.Lastname," (",null===q||void 0===q?void 0:q.Id,")",q.OnSiteStatus?(0,C.jsx)(p.Tooltip,{title:"Today on Site",children:(0,C.jsx)("span",{children:(0,C.jsx)("div",{className:"ml-2 h-3 w-3 bg-green-400 rounded-full relative z-0",children:(0,C.jsx)("div",{className:"absolute animate-ping inset-0 bg-green-400 rounded-full z-10"})})})}):null]}),(0,C.jsxs)("div",{className:"flex gap-5 divide-x mt-2",children:[(0,C.jsxs)("div",{className:"text-[#718096] text-xs flex flex-col gap-1",children:[(0,C.jsx)(p.Tooltip,{Tooltip:!0,title:"Nationality",children:(0,C.jsxs)("div",{className:"flex gap-3 items-center cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(i.FaPassport,{size:15})}),(0,C.jsx)("div",{children:null!==q&&void 0!==q&&q.NationalityName?null===q||void 0===q?void 0:q.NationalityName:(0,C.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})}),(0,C.jsx)(p.Tooltip,{Tooltip:!0,title:"".concat(q.EmployerCurrentStatus?"Temporary":"Permanent"," Employer name"),children:(0,C.jsxs)("div",{className:"flex gap-3 items-center cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(i.FaRegBuilding,{size:15})}),(0,C.jsxs)("div",{children:[(0,C.jsx)(j.Z,{className:"mr-1",status:q.EmployerCurrentStatus?"warning":"success"}),null!==q&&void 0!==q&&q.EmployerName?null===q||void 0===q?void 0:q.EmployerName:(0,C.jsx)("span",{className:"text-gray-400",children:"Not registered"})]})]})}),(0,C.jsx)(p.Tooltip,{title:(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{className:"text-secondary2",children:"Cost Code: "}),q.CostCodeDescription?q.CostCodeDescription:null]}),className:"flex items-center gap-3 cursor-default",children:(0,C.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(o.c85,{size:15})}),(0,C.jsxs)("div",{children:[(0,C.jsx)(j.Z,{className:"mr-1",status:q.CostCodeCurrentStatus?"warning":"success"}),null!==q&&void 0!==q&&q.CostCodeNumber?null===q||void 0===q?void 0:q.CostCodeNumber:(0,C.jsx)("span",{className:"text-gray-400",children:"Not registered"})]})]})}),(0,C.jsx)(p.Tooltip,{title:"Mobile",className:"flex items-center gap-3 cursor-default",children:(0,C.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(o.IXo,{size:15})}),(0,C.jsx)("div",{children:null!==q&&void 0!==q&&q.PersonalMobile?null===q||void 0===q?void 0:q.PersonalMobile:(0,C.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})})]}),(0,C.jsxs)("div",{className:"pl-5 text-[#718096] text-xs flex flex-col gap-1",children:[(0,C.jsx)(p.Tooltip,{title:"".concat(q.PositionCurrentStatus?"Temporary":"Permanent"," Position name"),className:"flex items-center gap-3 cursor-default",children:(0,C.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(i.FaBriefcase,{size:15})}),(0,C.jsxs)("div",{children:[(0,C.jsx)(j.Z,{className:"mr-1",status:q.PositionCurrentStatus?"warning":"success"}),null!==q&&void 0!==q&&q.PositionName?null===q||void 0===q?void 0:q.PositionName:(0,C.jsx)("span",{className:"text-gray-400",children:"Not registered"})]})]})}),(0,C.jsx)(p.Tooltip,{title:"SAP ID #",className:"flex items-center gap-3 cursor-default",children:(0,C.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(c.Lhg,{size:15})}),(0,C.jsx)("div",{children:null===q||void 0===q?void 0:q.SAPID})]})}),(0,C.jsxs)(p.Tooltip,{title:"Camp & Room Type",className:"flex items-start gap-3 cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(N.hh$,{size:15})}),(0,C.jsx)("div",{children:null===q||void 0===q?void 0:q.CampRoomType})]}),(0,C.jsx)(p.Tooltip,{title:"Own Room",className:"flex items-center gap-3 cursor-default",children:(0,C.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(i.FaHouseUser,{size:15})}),null!==q&&void 0!==q&&q.RoomNumber?"AccomAdmin"===(null===(a=ne.userInfo)||void 0===a?void 0:a.Role)||"SystemAdmin"===(null===(d=ne.userInfo)||void 0===d?void 0:d.Role)?(0,C.jsx)(r.Link,{target:"_blank",to:"/tas/roomcalendar/".concat(q.RoomId,"/").concat(m()().format("YYYY-MM-DD")),children:null===q||void 0===q?void 0:q.RoomNumber}):(0,C.jsx)("div",{children:null===q||void 0===q?void 0:q.RoomNumber}):(0,C.jsx)("div",{className:"text-gray-400",children:"Not registered"})]})}),null!==q&&void 0!==q&&q.CurrentRoomNumber?(0,C.jsx)(p.Tooltip,{title:"Current Room",className:"flex items-center gap-3 cursor-default",children:(0,C.jsxs)("div",{className:"flex items-center gap-3 cursor-default text-success",children:[(0,C.jsx)("div",{children:(0,C.jsx)(i.FaHouseUser,{size:15})}),"AccomAdmin"===(null===(g=ne.userInfo)||void 0===g?void 0:g.Role)||"SystemAdmin"===(null===(D=ne.userInfo)||void 0===D?void 0:D.Role)?(0,C.jsx)(r.Link,{target:"_blank",to:"/tas/roomcalendar/".concat(q.CurrentRoomId,"/").concat(m()().format("YYYY-MM-DD")),children:null===q||void 0===q?void 0:q.CurrentRoomNumber}):(0,C.jsx)("div",{children:null===q||void 0===q?void 0:q.CurrentRoomNumber})]})}):null]}),(0,C.jsxs)("div",{className:"pl-5 text-[#718096] text-xs flex flex-col gap-1",children:[(0,C.jsx)(p.Tooltip,{title:"Location",className:"flex items-center gap-3 cursor-default",children:(0,C.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(i.FaLocationArrow,{size:15})}),(0,C.jsx)("div",{children:null!==q&&void 0!==q&&q.LocationName?null===q||void 0===q?void 0:q.LocationName:(0,C.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})}),(0,C.jsx)(p.Tooltip,{title:"Resource Type",className:"flex items-center gap-3 cursor-default",children:(0,C.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,C.jsx)("div",{children:(0,C.jsx)(i.FaUserAlt,{size:14})}),(0,C.jsx)("div",{children:null!==q&&void 0!==q&&q.PeopleTypeName?null===q||void 0===q?void 0:q.PeopleTypeName:(0,C.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})})]}),(0,C.jsx)("div",{className:"pl-4 text-[#718096] text-xs flex flex-col gap-1",children:(0,C.jsx)(p.DepartmentList,{data:q,id:null===q||void 0===q?void 0:q.DepartmentId})})]})]})]}),(0,C.jsx)("div",{className:"px-5 py-2 mt-8",children:(0,C.jsx)(j.Z,{count:null===S||void 0===S?void 0:S.PendingRequests,children:(0,C.jsx)("button",{type:"button",onClick:function(){z(!0),X(!0),(0,l.Z)({method:"get",url:"tas/requestdocument/existingbooking/".concat(ee)}).then((function(e){_(e.data)})).catch((function(e){})).then((function(){return X(!1)}))},children:(0,C.jsx)(N.$W1,{size:26})})})})]})})}),(0,C.jsx)("div",{className:"w-full col-span-12",children:(0,C.jsxs)("div",{className:"flex items-start gap-5",children:[(0,C.jsx)(p.VerticalCalendar,{employeeId:ee}),(0,C.jsx)(p.FlightList,{profileData:ne.userProfileData,employeeId:ee})]})})]}),(0,C.jsx)(p.Modal,{open:O,title:"Existing Bookings",width:800,onCancel:function(){return z(!1)},children:J?(0,C.jsx)("div",{className:"p-8 flex justify-center items-center",children:(0,C.jsx)(b.Z,{style:{fontSize:24}})}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{ref:se,className:"flex flex-col gap-5",children:[(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{className:"text-gray-500 ",children:"Name:"})," ",null===U||void 0===U?void 0:U.FullName," (",null===U||void 0===U?void 0:U.SAPID,")"]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{className:"text-gray-500",children:"Department:"})," ",null===U||void 0===U?void 0:U.Department]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{className:"text-gray-500",children:"Employer:"})," ",null===U||void 0===U?void 0:U.Employer]})]}),(0,C.jsx)(p.Table,{data:null===U||void 0===U?void 0:U.SiteTravel,columns:E,pager:!1,containerClass:"shadow-none border border-gray-300",title:(0,C.jsx)("div",{className:"border-b py-1 font-bold",children:"Site Travel Requests"})}),(0,C.jsx)(p.Table,{data:null===U||void 0===U?void 0:U.NonSiteTravel,columns:I,pager:!1,containerClass:"shadow-none border border-gray-300",title:(0,C.jsx)("div",{className:"border-b py-1 font-bold",children:"Non Site Travel Requests"})}),(0,C.jsx)(p.Table,{data:null===U||void 0===U?void 0:U.PendingRequest,columns:T,pager:!1,containerClass:"shadow-none border border-gray-300",title:(0,C.jsx)("div",{className:"border-b py-1 font-bold",children:"Pending Requests"})}),(0,C.jsx)(p.Table,{data:null===U||void 0===U?void 0:U.OtherRequest,columns:T,pager:!1,containerClass:"shadow-none border border-gray-300",tableClass:"max-h-full",title:(0,C.jsx)("div",{className:"border-b py-1 font-bold",children:"Other Requests"})})]}),(0,C.jsx)("div",{className:"flex justify-end mt-5",children:(0,C.jsx)(p.Button,{onClick:oe,type:"primary",icon:(0,C.jsx)(y.Z,{}),children:"Print"})})]})})]})}},68346:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});var n=a(1413),l=a(93433),s=a(29439),r=a(47313),i=a(56573),o=a(2880),c=a(42614),d=a(14261),m=a(82138),u=a(10658),p=a.n(u),x=a(46417);var f=function(e){var t,a,u=e.mainForm,f=e.getMaster,h=(0,r.useState)([]),v=(0,s.Z)(h,2),g=v[0],j=v[1],N=(0,r.useState)(!1),b=(0,s.Z)(N,2),y=b[0],D=b[1],F=(0,r.useState)(!1),C=(0,s.Z)(F,2),Z=C[0],I=C[1],E=(0,r.useState)(null),T=(0,s.Z)(E,2),w=T[0],S=T[1],P=(0,r.useContext)(c.V).state,Y=o.Form.useForm(),q=(0,s.Z)(Y,1)[0];function k(e){return(0,i.Z)({method:"get",url:"tas/requestairport/search/".concat(e)}).then((function(e){return e.data.map((function(e){return{value:e.Id,label:"".concat(e.Code," (").concat(e.Country,")")}}))}))}(0,r.useEffect)((function(){(0,i.Z)({method:"get",url:"tas/requestairport"}).then((function(e){var t=[];e.data.map((function(e){t.push({value:e.Id,label:"".concat(e.Code," (").concat(e.Country,")")})})),j(t)})).catch((function(e){})).then((function(){return D(!1)}))}),[]);var L=[{label:"Travel Date",name:"travelDate",className:"col-span-12 mb-2",type:"date",inputprops:{showWeek:!0}},{label:"Favor Time",name:"FavorTime",className:"col-span-12 mb-2",type:"select",inputprops:{options:null===(t=P.referData)||void 0===t||null===(a=t.master)||void 0===a?void 0:a.favorTimes}},{label:"Depart Location",name:"departLocationId",className:"col-span-12 mb-2",type:"searchSelect",inputprops:{fetchOptions:k,showSearch:!0,placeholder:"Search location",allowClear:!0}},{label:"Arrive Location",name:"arriveLocationId",className:"col-span-12 mb-2",type:"searchSelect",inputprops:{fetchOptions:k,showSearch:!0,placeholder:"Search location",allowClear:!0}},{label:"Comment",name:"comment",className:"col-span-12 mb-2",type:"textarea",inputprops:{maxLength:300,showCount:!0}},{label:"ETD",name:"etd",className:"col-span-12 mb-2",type:"check"}],M=[{label:"Travel Date",name:"travelDate",cellRender:function(e){return(0,x.jsx)("div",{children:p()(e.value).format("YYYY-MM-DD ddd ")})}},{label:"Favor Time",name:"FavorTime"},{label:"Depart Location",name:"departLocationId",alignment:"left",cellRender:function(e){var t;return(0,x.jsx)("div",{children:null===g||void 0===g||null===(t=g.find((function(t){return e.value===t.value})))||void 0===t?void 0:t.label})}},{label:"Arrive Location",name:"arriveLocationId",alignment:"left",cellRender:function(e){var t;return(0,x.jsx)("div",{children:null===g||void 0===g||null===(t=g.find((function(t){return e.value===t.value})))||void 0===t?void 0:t.label})}},{label:"Comment",name:"comment"},{label:"ETD",name:"etd",cellRender:function(e){return(0,x.jsx)(d.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})}},{label:"",name:"action",width:"150px",alignment:"center",cellRender:function(e){return(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("button",{type:"button",className:"edit-button",onClick:function(t){return function(e,t){t.stopPropagation(),S((0,n.Z)((0,n.Z)({},e.data),{},{travelData:e.data.travelData?p()(e.data.travelData):null,index:e.rowIndex})),I(!0)}(e,t)},children:"Edit"}),(0,x.jsx)("button",{type:"button",className:"dlt-button",onClick:function(t){return function(e,t){t.stopPropagation();var a=(0,l.Z)(u.getFieldValue("flightData"));a.splice(e.rowIndex,1),u.setFieldValue("flightData",a),f()}(e,t)},children:"Delete"})]})}}],R=function(){q.resetFields(),I(!1)};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.flightData!==t.flightData},className:"col-span-12",children:function(e){var t;e.getFieldValue;return(0,x.jsx)(o.Table,{data:u.getFieldValue("flightData"),columns:M,allowColumnReordering:!1,loading:y,containerClass:"shadow-none border border-gray-300",keyExpr:"Id",pager:(null===(t=u.getFieldValue("flightData"))||void 0===t?void 0:t.length)>20,title:(0,x.jsxs)("div",{className:"flex justify-between items-center py-2 gap-3 border-b",children:[(0,x.jsx)("div",{className:"text-md font-bold pl-2",children:"Flight"}),(0,x.jsx)("div",{className:"flex gap-4 items-center",children:(0,x.jsx)(o.Button,{htmlType:"button",icon:(0,x.jsx)(m.Z,{}),onClick:function(){return I(!0)},className:"text-xs",children:"Add Flight"})})]})})}}),(0,x.jsx)(o.Modal,{title:"Add Filght",open:Z,onCancel:R,children:(0,x.jsx)(o.Form,{form:q,fields:L,size:"small",editData:w,className:"grid grid-cols-12 gap-x-8",onFinish:function(e){if(w){var t=(0,l.Z)(u.getFieldValue("flightData"));t[w.index]=(0,n.Z)((0,n.Z)({},e),{},{travelDate:e.travelDate?p()(e.travelDate).format("YYYY-MM-DD"):null}),u.setFieldValue("flightData",(0,l.Z)(t))}else u.setFieldValue("flightData",[].concat((0,l.Z)(u.getFieldValue("flightData")),[(0,n.Z)((0,n.Z)({},e),{},{travelDate:e.travelDate?p()(e.travelDate).format("YYYY-MM-DD"):null})]));f(),R(!1)},children:(0,x.jsxs)("div",{className:"col-span-12 flex justify-end gap-3",children:[(0,x.jsx)(o.Button,{htmlType:"button",onClick:function(){return q.submit()},type:"primary",icon:(0,x.jsx)(m.Z,{}),children:"Add"}),(0,x.jsx)(o.Button,{htmlType:"button",onClick:R,children:"Cancel"})]})})})]})},h=a(65040),v=a(93031),g=a(31283),j=a(11114),N=a(21975);var b=function(e){var t,a,d=e.mainForm,u=e.getMaster,f=(0,r.useState)(!1),b=(0,s.Z)(f,2),y=b[0],D=(b[1],(0,r.useState)(!1)),F=(0,s.Z)(D,2),C=F[0],Z=F[1],I=(0,r.useState)([]),E=(0,s.Z)(I,2),T=E[0],w=E[1],S=h.Z.useForm(),P=(0,s.Z)(S,1)[0],Y=(0,r.useContext)(c.V).state,q=(0,r.useState)(null),k=(0,s.Z)(q,2),L=k[0],M=k[1],R=h.Z.useWatch("Hotel",P);(0,r.useEffect)((function(){A()}),[]);var A=function(){(0,i.Z)({method:"get",url:"tas/requestlocalhotel?Active=1"}).then((function(e){w(e.data)})).catch((function(e){}))},V=(0,r.useMemo)((function(){return T.filter((function(e){var t;return(null!==(t=null===e||void 0===e?void 0:e.Description)&&void 0!==t?t:"").toLowerCase().includes((null===R||void 0===R?void 0:R.toLowerCase())||"")}))}),[R]),H=[{type:"component",component:(0,x.jsx)(o.Form.Item,{label:"Check In",className:"col-span-12 mb-2",children:(0,x.jsxs)("div",{className:"flex gap-5 items-start",children:[(0,x.jsx)(o.Form.Item,{name:"FirstNight",className:"mb-0",rules:[{required:!0,message:"First night is required"}],children:(0,x.jsx)(v.Z,{})}),(0,x.jsx)(o.Form.Item,{name:"FirstTime",className:"mb-0",rules:[{required:!0,message:"Time is required"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&"00:00"===t("FirstTime").format("HH:mm")?Promise.reject(new Error("00:00 is not allowed!")):Promise.resolve()}}}],children:(0,x.jsx)(v.Z.TimePicker,{needConfirm:!1,format:"HH:mm"})}),(0,x.jsx)(o.Form.Item,{name:"EarlyCheckIn",className:"mb-0",getValueFromEvent:function(e){return e.target.checked?1:0},valuePropName:"checked",children:(0,x.jsx)(g.Z,{children:"Early Check In"})})]})})},{type:"component",component:(0,x.jsx)(o.Form.Item,{label:"Check Out",className:"col-span-12 mb-2",children:(0,x.jsxs)("div",{className:"flex gap-5 items-start",children:[(0,x.jsx)(o.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.FirstNight!==t.LastNight},children:function(e){var t=e.getFieldValue,a=!1;return t("LastNight")||(a=t("FirstNight")),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.Form.Item,{name:"LastNight",className:"mb-0",rules:[{required:!0,message:"Last night is required"}],children:(0,x.jsx)(v.Z,{defaultPickerValue:a})}),(0,x.jsx)(o.Form.Item,{name:"LastTime",className:"mb-0",rules:[{required:!0,message:"Time is required"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&"00:00"===t("LastTime").format("HH:mm")?Promise.reject(new Error("00:00 is not allowed!")):Promise.resolve()}}}],children:(0,x.jsx)(v.Z.TimePicker,{needConfirm:!1,format:"HH:mm"})})]})}}),(0,x.jsx)(o.Form.Item,{name:"LateCheckOut",className:"mb-0",getValueFromEvent:function(e){return e.target.checked?1:0},valuePropName:"checked",children:(0,x.jsx)(g.Z,{children:"Late Check Out"})})]})})},{type:"component",component:(0,x.jsx)(o.Form.Item,{name:"Hotel",required:[{required:!0,message:"Hotel is required"}],label:"Hotel",className:"col-span-12 mb-2",children:(0,x.jsx)(j.Z,{options:V,fieldNames:{value:"Description"}})})},{label:"City",name:"City",className:"col-span-12 mb-2",rules:[{required:!0,message:"City is required"}]},{label:"Payment Condition",name:"PaymentCondition",className:"col-span-12 mb-2",type:"select",rules:[{required:!0,message:"Payment Condition is required"}],inputprops:{options:null===(t=Y.referData)||void 0===t||null===(a=t.master)||void 0===a?void 0:a.paymentConditions,showSearch:!1}},{type:"component",component:(0,x.jsx)(o.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.FirstNight!==t.FirstNight||e.LastNight!==t.LastNight},children:function(e){var t=e.getFieldValue,a=p()(t("LastNight"))>p()(t("FirstNight")).add(1,"day");return(0,x.jsx)(o.Form.Item,{name:"Comment",label:"Comment",className:"col-span-12 mb-8",rules:[{required:a,message:"Comment is required"}],children:(0,x.jsx)(N.Z.TextArea,{maxLength:300,showCount:!0})})}})}],O=[{label:"Check In",name:"FirstNight",cellRender:function(e){return(0,x.jsx)("div",{children:p()(e.value).format("YYYY-MM-DD ddd HH:mm")})}},{label:"Check Out",name:"LastNight",cellRender:function(e){return(0,x.jsx)("div",{children:p()(e.value).format("YYYY-MM-DD ddd HH:mm")})}},{label:"Night of Numbers",name:"LastNight",cellRender:function(e){return(0,x.jsx)("div",{children:p()(p()(e.value)-p()(e.data.FirstNight)).get("D")-1})}},{label:"City",name:"City"},{label:"Hotel",name:"Hotel"},{label:"Payment Condition",name:"PaymentCondition"},{label:"Comment",name:"Comment"},{label:"",name:"action",width:"150px",alignment:"center",cellRender:function(e){return(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("button",{type:"button",className:"edit-button",onClick:function(t){return function(e,t){t.stopPropagation(),M((0,n.Z)((0,n.Z)({},e.data),{},{FirstTime:p()(e.data.FirstNight),LastTime:p()(e.data.LastNight),index:e.rowIndex})),Z(!0)}(e,t)},children:"Edit"}),(0,x.jsx)("button",{type:"button",className:"dlt-button",onClick:function(t){return function(e,t){t.stopPropagation();var a=(0,l.Z)(d.getFieldValue("accommodationData"));a.splice(e.rowIndex,1),d.setFieldValue("accommodationData",a),u()}(e,t)},children:"Delete"})]})}}],z=function(){P.resetFields(),Z(!1)},G=function(){M(null),Z(!0)};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.Form.Item,{name:"accommodationData",noStyle:!0}),(0,x.jsx)(o.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.accommodationData!==t.accommodationData},className:"col-span-12",children:function(e){e.getFieldValue;return(0,x.jsx)(o.Table,{data:d.getFieldValue("accommodationData"),columns:O,allowColumnReordering:!1,loading:y,containerClass:"shadow-none border border-gray-300",keyExpr:"Id",pager:d.getFieldValue("accommodationData").length>20,title:(0,x.jsxs)("div",{className:"flex justify-between items-center py-2 gap-3 border-b",children:[(0,x.jsx)("div",{className:"text-md font-bold pl-2",children:"Accommodation"}),(0,x.jsx)("div",{className:"flex gap-4 items-center",children:(0,x.jsx)(o.Button,{icon:(0,x.jsx)(m.Z,{}),onClick:G,className:"text-xs",htmlType:"button",children:"Add Accommodation"})})]})})}}),(0,x.jsx)(o.Modal,{title:"Add Accommodation",width:650,open:C,onCancel:function(){return Z(!1)},children:(0,x.jsx)(o.Form,{form:P,fields:H,editData:L,className:"grid grid-cols-12 gap-x-8",onFinish:function(e){if(L){var t=(0,l.Z)(d.getFieldValue("accommodationData"));t[L.index]=(0,n.Z)((0,n.Z)({},e),{},{HotelLocation:"".concat(e.HotelLocation),FirstNight:p()("".concat(e.FirstNight.format("YYYY-MM-DD")," ").concat(e.FirstTime.format("HH:mm"))),LastNight:p()("".concat(e.LastNight.format("YYYY-MM-DD")," ").concat(e.LastTime.format("HH:mm")))}),d.setFieldValue("accommodationData",(0,l.Z)(t))}else d.setFieldValue("accommodationData",[].concat((0,l.Z)(d.getFieldValue("accommodationData")),[(0,n.Z)((0,n.Z)({},e),{},{HotelLocation:"".concat(e.HotelLocation),FirstNight:p()("".concat(e.FirstNight.format("YYYY-MM-DD")," ").concat(e.FirstTime.format("HH:mm"))),LastNight:p()("".concat(e.LastNight.format("YYYY-MM-DD")," ").concat(e.LastTime.format("HH:mm")))})]));P.resetFields(),u(),z()},labelCol:{flex:"130px"},children:(0,x.jsxs)("div",{className:"col-span-12 flex justify-end gap-3",children:[(0,x.jsx)(o.Button,{htmlType:"submit",type:"primary",icon:(0,x.jsx)(m.Z,{}),children:"Add"}),(0,x.jsx)(o.Button,{htmlType:"button",onClick:z,children:"Cancel"})]})})})]})},y=a(74294),D=a(52957),F=a(76298),C=a(29816),Z=a(23495),I=a(85403),E=a(36459),T=a(3489),w=a(66736),S=T.Z.Dragger;var P=function(e){var t=e.mainForm,a=(e.getMaster,(0,r.useState)(!1)),n=(0,s.Z)(a,2),c=n[0],u=n[1],p=(0,r.useState)([]),f=(0,s.Z)(p,2),v=f[0],g=f[1],j=h.Z.useForm(),N=(0,s.Z)(j,1)[0],b=[{type:"component",component:(0,x.jsx)(o.Form.Item,{name:"files",valuePropName:"file",label:"File",className:"col-span-12 mb-2",children:(0,x.jsxs)(S,{beforeUpload:!0,multiple:!0,maxCount:5,onChange:function(e){return function(e){var t=[];e.fileList.map((function(e){t.push(e.originFileObj)})),g(t)}(e)},accept:".doc, .docx, .pdf, .txt, .rtf, .ppt, .pptx, .xls, .xlsx, .jpg, .jpeg, .png, .gif, .bmp, .tiff, .svg, .eml, .msg",children:[(0,x.jsx)(w.Z,{color:"blue",style:{fontSize:32,marginBottom:8}}),(0,x.jsx)("p",{className:"text-sm pb-1",children:"Click or drag file to this area to upload"}),(0,x.jsx)("p",{className:"opacity-50 text-sm",children:"Support for a single or bulk upload."})]})},"form-item-c file-1")},{label:"Comment",name:"comment",className:"col-span-12 mb-2",type:"textarea",inputprops:{maxLength:300,showCount:!0}},{label:"Include E-Mail",name:"includeEmail",className:"col-span-12 mb-2",type:"check"}],y=[{label:"File",name:"file",alignment:"left",cellRender:function(e){return(0,x.jsx)("div",{children:"File"})}},{label:"Comment",name:"comment",alignment:"left"},{label:"Full name",name:"FullName",alignment:"left"},{label:"Created Date",name:"CreatedDate",alignment:"left"},{label:"Include E-Mail",name:"includeEmail",alignment:"left",cellRender:function(e){return(0,x.jsx)(d.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})}},{label:"",name:"action",width:"100px",alignment:"center",cellRender:function(e){return(0,x.jsx)("button",{type:"button",className:"dlt-button",onClick:function(a){return function(e,a){var n;a.stopPropagation();var l=null===(n=t.getFieldValue("files"))||void 0===n?void 0:n.filter((function(t){return e.data.fileAddressId!==t.fileAddressId}));t.setFieldValue("files",l)}(e,a)},children:"Delete"})}}],D=function(){N.resetFields(),u(!1)};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.files!==t.files},className:"col-span-12",children:function(e){var a;return(0,E.Z)(e),(0,x.jsx)(o.Table,{data:t.getFieldValue("files"),columns:y,allowColumnReordering:!1,containerClass:"shadow-none border border-gray-300",keyExpr:"Id",pager:(null===(a=t.getFieldValue("files"))||void 0===a?void 0:a.length)>20,title:(0,x.jsxs)("div",{className:"flex justify-between items-center py-2 gap-3 border-b",children:[(0,x.jsx)("div",{className:"text-md font-bold pl-2",children:"Attachments"}),(0,x.jsx)("div",{className:"flex gap-4 items-center",children:(0,x.jsx)(o.Button,{icon:(0,x.jsx)(m.Z,{}),onClick:function(){return u(!0)},className:"text-xs",htmlType:"button",children:"Add Attachment"})})]})})}}),(0,x.jsx)(o.Modal,{title:"Add Attachment",open:c,onCancel:function(){return u(!1)},children:(0,x.jsx)(o.Form,{form:N,fields:b,size:"small",initValues:{includeEmail:1,comment:"Flight and Hotel"},className:"grid grid-cols-12 gap-x-8",onFinish:function(e){var a=new FormData;v.map((function(e){a.append("files",e)})),(0,i.Z)({method:"post",url:"/tas/SysFile/multi",data:a}).then((function(a){var n=[];n=t.getFieldValue("files")?[].concat((0,l.Z)(t.getFieldValue("files")),(0,l.Z)(a.data.map((function(t){return{fileAddressId:t.Id,comment:e.comment,includeEmail:e.includeEmail}})))):a.data.map((function(t){return{fileAddressId:t.Id,comment:e.comment,includeEmail:e.includeEmail}})),t.setFieldValue("files",n),N.resetFields(),D(!1)})).catch((function(e){}))},noLayoutConfig:!0,layout:"vertical",children:(0,x.jsxs)("div",{className:"col-span-12 flex justify-end gap-3",children:[(0,x.jsx)(o.Button,{htmlType:"submit",type:"primary",icon:(0,x.jsx)(m.Z,{}),children:"Add"}),(0,x.jsx)(o.Button,{htmlType:"button",onClick:D,children:"Cancel"})]})})})]})},Y=a(58467),q=a(76270),k=a(95585),L=a.n(k),M=a(14446),R=new RegExp(/^[A-Za-z -]+$/g),A=new RegExp(/^[0-9 +]+$/);var V=function(){var e,t=(0,r.useState)([]),a=(0,s.Z)(t,2),d=a[0],m=a[1],u=(0,r.useState)(null),g=(0,s.Z)(u,2),j=g[0],E=g[1],T=(0,r.useState)(!1),w=(0,s.Z)(T,2),S=(w[0],w[1]),k=(0,r.useState)(!1),V=(0,s.Z)(k,2),H=V[0],O=V[1],z=(0,r.useState)([]),G=(0,s.Z)(z,2),B=G[0],U=G[1],_=(0,r.useState)([]),W=(0,s.Z)(_,2),$=W[0],J=W[1],X=(0,r.useState)(null),K=(0,s.Z)(X,2),Q=K[0],ee=K[1],te=(0,r.useState)(!1),ae=(0,s.Z)(te,2),ne=ae[0],le=ae[1],se=(0,r.useState)(!1),re=(0,s.Z)(se,2),ie=re[0],oe=re[1],ce=(0,r.useState)(null),de=(0,s.Z)(ce,2),me=de[0],ue=de[1],pe=(0,r.useState)(!1),xe=(0,s.Z)(pe,2),fe=xe[0],he=xe[1],ve=(0,r.useContext)(c.V).state,ge=h.Z.useForm(),je=(0,s.Z)(ge,1)[0],Ne=h.Z.useForm(),be=(0,s.Z)(Ne,1)[0],ye=(0,Y.s0)(),De=(0,Y.UO)().empId,Fe=(0,r.useRef)(null);(0,r.useEffect)((function(){Ie(),Ce()}),[]),(0,r.useEffect)((function(){Ze()}),[]);var Ce=function(e){(0,i.Z)({method:"get",url:"/tas/requestgroupconfig/groupandmembers/bytype/Non Site Travel?empId=".concat(De)}).then((function(e){ue(e.data),je.setFieldValue("nextGroupName","");var t=e.data.groups[0],a=(0,l.Z)(e.data.groups);a.unshift({GroupName:"Requester",id:0}),a.push({GroupName:"Completed",id:99999}),J(a),ee(t)}))},Ze=function(){S(!0),(0,i.Z)({method:"get",url:"tas/employee/profile/".concat(De)}).then((function(e){E(e.data);var t=ve.referData.nationalities.find((function(t){return t.Id===e.data.NationalityId}));t&&"MN"!==t.Code&&he(!0)})).catch((function(e){})).then((function(){return S(!1)}))},Ie=function(){(0,i.Z)({method:"get",url:"tas/requesttravelpurpose?Active=1"}).then((function(e){var t=[];e.data.map((function(e){t.push({value:e.Id,label:e.Description})})),m(t)})).catch((function(e){}))},Ee=[{label:"Group",name:"GroupName"},{label:"Current Position",name:"CurrentPosition",alignment:"left",cellRender:function(e){return(0,x.jsx)("div",{children:0==e.rowIndex?(0,x.jsx)(C.Z,{style:{color:"#e57200"}}):""})}}];return(0,x.jsxs)("div",{className:"px-6 py-5 rounded-ot shadow-card bg-white",children:[(0,x.jsx)(o.Button,{className:"mb-3",onClick:function(){return ye("/request/nonsitetravel")},icon:(0,x.jsx)(Z.Z,{}),children:"Back"}),(0,x.jsx)(o.Accordion,{title:"Profile",className:"border",children:(0,x.jsx)("div",{className:"p-3",children:(0,x.jsx)(q.Z,{employeeId:De,pendingInfo:me})})}),j?(0,x.jsx)("div",{className:"flex flex-col gap-4 mt-4",children:(0,x.jsxs)(o.Form,{className:"grid grid-cols-12 gap-y-5",form:je,scrollToFirstError:!0,initValues:(0,n.Z)((0,n.Z)({EmergencyContactMobile:"",EmergencyContactName:"",FrequentFlyer:null,PassportExpiry:null,PassportName:"",PassportNumber:"",assignedEmployeeId:null,nextGroupId:null,nextGroupName:"null",flightData:[],accommodationData:[],files:[],assignEmployeeOptions:[],DocumentRoute:[]},j),{},{PassportExpiry:null!==j&&void 0!==j&&j.PassportExpiry?p()(null===j||void 0===j?void 0:j.PassportExpiry):null}),onFinish:function(e){var t=je.getFieldValue("flightData"),a=L()(t)&&t.length>0?t[0]:null,l=je.getFieldValue("accommodationData"),s=je.getFieldValue("files");0===(null===j||void 0===j?void 0:j.Active)?be.validateFields().then((function(){t.length>0||l.length>0?(oe(!1),le(!0),(0,i.Z)({method:"get",url:"tas/requestdocument/checkduplicate/non site travel/".concat(De).concat(a?"?startdate=".concat(p()(a.travelDate).format("YYYY-MM-DD")):"")}).then((function(r){U(r.data),0===r.data.length?(0,i.Z)({method:"post",url:"tas/requestnonsitetravel",data:{flightData:a?t:[],accommodationData:l?l.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{FirstNight:p()(e.FirstNight).format("YYYY-MM-DD HH:mm"),LastNight:p()(e.LastNight).format("YYYY-MM-DD HH:mm")})})):[],files:s||[],requestInfo:{comment:e.comment},travelData:{nextGroupId:e.nextGroupId,assignedEmployeeId:e.assignedEmployeeId,requestTravelPurposeId:e.requestTravelPurposeId,employeeId:De,action:"Submitted"}}}).then((function(t){(0,i.Z)({method:"put",url:"tas/requestnonsitetravel/employee",data:{EmergencyContactName:e.EmergencyContactName,EmergencyContactMobile:e.EmergencyContactMobile,PassportExpiry:e.PassportExpiry,EmployeeId:De,DocumentId:0,FrequentFlyer:e.FrequentFlyer,PassportNumber:e.PassportNumber,PassportName:e.PassportName,Email:e.Email}}).then((function(e){le(!1),ye("/request/task")})).catch((function(e){}))})).catch((function(e){le(!1)})):(O(!0),le(!1))})).catch((function(){le(!1)}))):oe(!0)})).catch((function(){var e;null===(e=Fe.current)||void 0===e||e.scrollIntoView()})):t.length>0||l.length>0?(oe(!1),le(!0),(0,i.Z)({method:"get",url:"tas/requestdocument/checkduplicate/non site travel/".concat(De).concat(a?"?startdate=".concat(p()(a.travelDate).format("YYYY-MM-DD")):"")}).then((function(r){U(r.data),0===r.data.length?(0,i.Z)({method:"post",url:"tas/requestnonsitetravel",data:{flightData:a?t:[],accommodationData:l?l.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{FirstNight:p()(e.FirstNight).format("YYYY-MM-DD HH:mm"),LastNight:p()(e.LastNight).format("YYYY-MM-DD HH:mm")})})):[],files:s||[],requestInfo:{comment:e.comment},travelData:{nextGroupId:e.nextGroupId,assignedEmployeeId:e.assignedEmployeeId,requestTravelPurposeId:e.requestTravelPurposeId,employeeId:De,action:"Submitted"}}}).then((function(t){(0,i.Z)({method:"put",url:"tas/requestnonsitetravel/employee",data:{EmergencyContactName:e.EmergencyContactName,EmergencyContactMobile:e.EmergencyContactMobile,PassportExpiry:e.PassportExpiry,EmployeeId:De,DocumentId:0,FrequentFlyer:e.FrequentFlyer,PassportNumber:e.PassportNumber,PassportName:e.PassportName,Email:e.Email}}).then((function(e){le(!1),ye("/request/task")})).catch((function(e){}))})).catch((function(e){le(!1)})):(O(!0),le(!1))})).catch((function(){le(!1)}))):oe(!0)},children:[0===(null===j||void 0===j?void 0:j.Active)?(0,x.jsx)(o.Accordion,{className:"col-span-12 border rounded-ot overflow-hidden mt-3",title:"Profile",children:(0,x.jsx)("div",{className:"p-4 flex flex-col gap-5",ref:Fe,children:(0,x.jsx)(M.Z,{data:j,form:be,refreshData:Ze,className:"shadow-none border"})})}):null,(0,x.jsx)(o.Accordion,{title:"Traveller Details",className:"border col-span-12",children:(0,x.jsxs)("div",{className:"grid grid-cols-12 gap-y-0 gap-x-4 p-4",children:[(0,x.jsx)(o.Form.Item,{name:"requestTravelPurposeId",label:"Travel Purpose",className:"col-span-6 mb-2",rules:[{required:!0,message:"Travel Purpose"}],children:(0,x.jsx)(y.Z,{className:"w-[200px]",options:d,showSearch:!0,filterOption:function(e,t){var a;return(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())}})}),(0,x.jsx)(o.Form.Item,{name:"DepartmentId",label:"Department",className:"col-span-6 mb-2",children:(0,x.jsx)(D.Z,{treeData:[null===(e=ve.referData)||void 0===e?void 0:e.departments],fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},disabled:!0})}),(0,x.jsx)(o.Form.Item,{name:"EmployerId",label:"Employer",className:"col-span-6 mb-2",children:(0,x.jsx)(y.Z,{className:"w-[200px]",options:ve.referData.employers,disabled:!0})}),(0,x.jsx)(o.Form.Item,{name:"CostCodeId",label:"Cost code",className:"col-span-6 mb-2",children:(0,x.jsx)(y.Z,{className:"w-[200px]",options:ve.referData.costCodes,disabled:!0})}),fe?(0,x.jsx)(o.Form.Item,{name:"Hometown",label:"Hometown",className:"col-span-6 mb-2",children:(0,x.jsx)(N.Z.TextArea,{})}):null,(0,x.jsx)(o.Form.Item,{name:"PassportNumber",label:"Passport Number",className:"col-span-6 mb-2",rules:[{required:!0,message:"Passport Number is required"}],children:(0,x.jsx)(N.Z,{})}),(0,x.jsx)(o.Form.Item,{name:"PassportName",label:"Passport Name",className:"col-span-6 mb-2",rules:[{required:!0,message:"Passport Name is required"},{pattern:R,message:"The input is not valid name!"}],children:(0,x.jsx)(N.Z,{})}),(0,x.jsx)(o.Form.Item,{name:"PassportExpiry",label:"Passport Expiry",className:"col-span-6 mb-2",rules:[{required:!0,message:"Passport Expiry is required"}],children:(0,x.jsx)(v.Z,{})}),(0,x.jsx)(o.Form.Item,{name:"FrequentFlyer",label:"Frequent Flyer",className:"col-span-6 mb-2",children:(0,x.jsx)(F.Z,{min:0,controls:!1})}),(0,x.jsx)(o.Form.Item,{name:"EmergencyContactName",label:"Emergency Contact Name",className:"col-span-6 mb-2",rules:[{required:!0,message:"Emergency Contact Name is required"}],children:(0,x.jsx)(N.Z,{})}),(0,x.jsx)(o.Form.Item,{name:"EmergencyContactMobile",label:"Emergency Contact (Number for this Travel)",className:"col-span-6 mb-2",rules:[{required:!0,message:"Emergency Contact Mobile is required"},{pattern:A,message:"Invalid phone number"}],children:(0,x.jsx)(N.Z,{className:"w-full",maxLength:15,controls:!1})}),(0,x.jsx)(o.Form.Item,{name:"Email",label:"E-Mail",className:"col-span-6 mb-2",rules:[{required:!0,message:"E-Mail is required"},{type:"email",message:"The input is not valid E-mail!"}],children:(0,x.jsx)(N.Z,{className:"w-full",maxLength:100})})]})}),(0,x.jsx)(o.Accordion,{title:"Detail",className:"border col-span-12",children:(0,x.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,x.jsxs)("div",{className:"w-full my-2 text-gray-400",children:[(0,x.jsx)(I.Z,{className:"mr-3"}),"Enter in the details for flights, select the travel class, for an international trip your password details must be entered. Click the Add new record link to enter in the details,"]}),(0,x.jsx)(f,{getMaster:Ce,mainForm:je}),(0,x.jsx)(b,{getMaster:Ce,mainForm:je}),(0,x.jsx)(P,{getMaster:Ce,mainForm:je})]})}),(0,x.jsx)(o.Accordion,{title:"Request Document",className:"border col-span-12",children:(0,x.jsxs)("div",{className:"flex flex-col gap-2 p-4",children:[(0,x.jsxs)("div",{children:["Comments:",(0,x.jsx)(o.Form.Item,{className:"m-0",name:"comment",children:(0,x.jsx)(N.Z.TextArea,{maxLength:300,showCount:!0,autoSize:{minRows:3,maxRows:5}})})]}),(0,x.jsxs)("div",{className:"flex gap-10",children:[(0,x.jsx)(o.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.nextGroupName!==t.nextGroupName||e.accommodationData!==t.accommodationData||e.flightData!==t.flightData},children:function(e){var t=e.getFieldValue,a=e.setFieldValue,n=$.find((function(e){return"travelflight"===e.GroupTag}));return a("nextGroupId",null===n||void 0===n?void 0:n.id),a("nextGroupName",null===n||void 0===n?void 0:n.GroupName),ee(n),(0,x.jsxs)(o.Form.Item,{name:"nextGroupId",className:"mb-0",children:["Next Approval: ",(0,x.jsx)("span",{className:"font-bold",children:t("nextGroupName")})]})}}),"linemanager"===(null===Q||void 0===Q?void 0:Q.GroupTag)&&(0,x.jsx)(o.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.assignEmployeeOptions!==t.assignEmployeeOptions},children:function(e){var t=e.getFieldValue;return(0,x.jsx)(o.Form.Item,{name:"assignedEmployeeId",label:"Send to:",rules:[{required:!0,message:"Assign Employee is required"}],className:"w-[300px] mb-0",children:(0,x.jsx)(y.Z,{options:t("assignEmployeeOptions"),className:"w-[200px]",filterOption:function(e,t){var a;return(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0})})}})]})]})}),(0,x.jsx)(o.Accordion,{title:"Document Route",className:"border col-span-12",children:(0,x.jsx)("div",{className:"flex flex-col gap-4 p-4",children:(0,x.jsx)(o.Table,{data:$,columns:Ee,pager:!1,containerClass:"shadow-none border border-gray-300"})})})]})}):null,(0,x.jsxs)("div",{className:"flex justify-end items-center mt-4 gap-4",children:[ie?(0,x.jsx)("span",{className:"text-red-400",children:"Flight Data or Accommidation Data is empty"}):"",(0,x.jsx)(o.Button,{type:"primary",onClick:function(){return je.submit()},loading:ne,children:"Submit"}),(0,x.jsx)(o.Button,{disabled:ne,onClick:function(){return ye(-1)},children:"Cancel"})]}),(0,x.jsx)(o.DuplicatedDocument,{open:H,onCancel:function(){return O(!1)},data:B})]})}},29816:function(e,t,a){a.d(t,{Z:function(){return o}});var n=a(87462),l=a(47313),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},r=a(17469),i=function(e,t){return l.createElement(r.Z,(0,n.Z)({},e,{ref:t,icon:s}))};var o=l.forwardRef(i)},11114:function(e,t,a){var n=a(29439),l=a(47313),s=a(72884),r=a.n(s),i=a(14903),o=a(205),c=a(19323),d=a(42824),m=a(74714),u=a(74294),p=u.Z.Option;function x(e){return(null===e||void 0===e?void 0:e.type)&&(e.type.isSelectOption||e.type.isSelectOptGroup)}var f=function(e,t){var a,s,d=e.prefixCls,f=e.className,h=e.popupClassName,v=e.dropdownClassName,g=e.children,j=e.dataSource,N=(0,i.Z)(g);if(1===N.length&&l.isValidElement(N[0])&&!x(N[0])){var b=(0,n.Z)(N,1);s=b[0]}var y,D=s?function(){return s}:void 0;y=N.length&&x(N[0])?g:j?j.map((function(e){if(l.isValidElement(e))return e;switch(typeof e){case"string":return l.createElement(p,{key:e,value:e},e);case"object":var t=e.value;return l.createElement(p,{key:t,value:t},e.text);default:return}})):[];var F=(0,l.useContext(m.E_).getPrefixCls)("select",d),C=(0,c.Cn)("SelectLike",null===(a=e.dropdownStyle)||void 0===a?void 0:a.zIndex),Z=(0,n.Z)(C,1)[0];return l.createElement(u.Z,Object.assign({ref:t,suffixIcon:null},(0,o.Z)(e,["dataSource","dropdownClassName"]),{prefixCls:F,popupClassName:h||v,dropdownStyle:Object.assign(Object.assign({},e.dropdownStyle),{zIndex:Z}),className:r()("".concat(F,"-auto-complete"),f),mode:u.Z.SECRET_COMBOBOX_MODE_DO_NOT_USE,getInputElement:D}),y)},h=l.forwardRef(f),v=(0,d.Z)(h);h.Option=p,h._InternalPanelDoNotUseOrYouWillBeFired=v,t.Z=h}}]);