"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[1147],{61147:function(e,t,n){n.r(t);var a=n(74165),l=n(15861),o=n(1413),s=n(29439),i=n(2880),u=n(14261),r=n(47313),c=n(65040),d=n(56573),m=n(40765),p=n(82138),f=n(92350),h=n(81514),x=n(42614),y=n(58467),v=n(2135),g=n(46417);t.default=function(){var e=(0,r.useState)([]),t=(0,s.Z)(e,2),n=t[0],b=t[1],j=(0,r.useState)([]),Z=(0,s.Z)(j,2),N=Z[0],C=Z[1],w=(0,r.useState)([]),k=(0,s.Z)(w,2),S=k[0],I=k[1],E=(0,r.useState)([]),F=(0,s.Z)(E,2),A=F[0],B=F[1],P=(0,r.useState)([]),q=(0,s.Z)(P,2),M=q[0],D=q[1],L=(0,r.useState)(null),R=(0,s.Z)(L,2),T=R[0],G=R[1],O=(0,r.useState)(!1),Y=(0,s.Z)(O,2),_=Y[0],z=Y[1],J=(0,r.useState)(!1),K=(0,s.Z)(J,2),U=K[0],V=K[1],W=(0,r.useState)(!1),H=(0,s.Z)(W,2),Q=H[0],X=H[1],$=(0,r.useState)(!1),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],ae=(0,r.useState)(!1),le=(0,s.Z)(ae,2),oe=le[0],se=le[1],ie=(0,r.useState)(!1),ue=(0,s.Z)(ie,2),re=ue[0],ce=ue[1],de=c.Z.useForm(),me=(0,s.Z)(de,1)[0],pe=c.Z.useForm(),fe=(0,s.Z)(pe,1)[0],he=(0,r.useContext)(x.V).action,xe=(0,y.UO)().groupId;(0,r.useEffect)((function(){he.changeMenuKey("/tas/approvalgroups"),ve(),ge()}),[]),(0,r.useEffect)((function(){ye()}),[xe]);var ye=function(){z(!0),(0,d.Z)({method:"get",url:"tas/requestgroupemployee/groupemployees/".concat(xe)}).then((function(e){b(e.data),I(e.data.Employees),C(e.data.Employees)})).catch((function(e){})).then((function(){return z(!1)}))},ve=function(){(0,d.Z)({method:"get",url:"tas/requestgroupemployee/activeemployees"}).then((function(e){var t=[];e.data.map((function(e){t.push({value:e.EmployeeId,label:"".concat(e.FullName," - ").concat(e.RoleName)})})),B(t)})).catch((function(e){}))},ge=function(){(0,d.Z)({method:"get",url:"tas/department/managers"}).then((function(e){var t=[];e.data.map((function(e){t.push((0,o.Z)({value:e.EmployeeId,label:"".concat(e.FullName," - ").concat(e.EmployeeId)},e))})),D(t)})).catch((function(e){}))},be=[{label:"Person #",name:"EmployeeId",width:80,alignment:"left"},{label:"SAPID#",name:"SAPID",width:80,alignment:"left"},{label:"Fullname",name:"FullName",cellRender:function(e){return(0,g.jsx)("div",{className:"text-blue-400 hover:underline",children:(0,g.jsx)(v.Link,{to:"/tas/people/search/".concat(e.data.EmployeeId),children:e.value})})}},{label:"AD Account",name:"ADAccount"},{label:"PrimaryContact",name:"PrimaryContact",alignment:"center",cellRender:function(e){return(0,g.jsx)(u.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})}},{label:"",name:"action",width:"220px",cellRender:function(e){return(0,g.jsxs)("div",{className:"flex gap-4",children:[(0,g.jsx)("button",{type:"button",className:"edit-button",onClick:function(){return t=e.data,G(t),void ne(!0);var t},children:"Change Primary"}),(0,g.jsx)("button",{type:"button",className:"dlt-button",onClick:function(){return t=e.data,G(t),void V(!0);var t},children:"Delete"})]})}}],je=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X(!0),(0,h.Z)(t,S).then((function(e){C(e),X(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=[{label:"Employee",name:"EmployeeId",className:"col-span-12 mb-2",type:"select",rules:[{required:!0,message:"Employee is required"}],inputprops:{options:"linemanager"===(null===n||void 0===n?void 0:n.GroupTag)?M:A,popupMatchSelectWidth:!1}}];return(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-3 shadow-md",children:[(0,g.jsxs)("div",{className:"text-lg font-bold mb-2",children:["Members of ",n.Name]}),(0,g.jsx)(i.Form,{form:fe,fields:[{label:"FullName",name:"FullName",className:"mb-0",inputprops:{style:{width:"250px"}}}],className:"flex items-center gap-x-5",onFinish:je,labelCol:{flex:"60px"},children:(0,g.jsx)("div",{className:"flex gap-4 justify-end col-span-12",children:(0,g.jsx)(i.Button,{htmlType:"submit",className:"flex items-center",loading:Q,icon:(0,g.jsx)(m.Z,{}),children:"Search"})})})]}),(0,g.jsx)(i.Table,{data:N,columns:be,allowColumnReordering:!1,loading:_,keyExpr:"Id",tableClass:"border-t max-h-[calc(100vh-240px)]",title:(0,g.jsxs)("div",{className:"flex justify-between py-2 px-1",children:[(0,g.jsxs)("div",{className:"flex items-center gap-1",children:[(0,g.jsx)("span",{className:"font-bold",children:N.length}),(0,g.jsx)("span",{className:" text-gray-400",children:"results"})]}),(0,g.jsx)(i.Button,{icon:(0,g.jsx)(p.Z,{}),onClick:function(){G(null),se(!0)},children:"Add Member"})]})}),(0,g.jsx)(i.Modal,{open:oe,onCancel:function(){return se(!1)},title:"Add Member",children:(0,g.jsx)(i.Form,{form:me,fields:Ze,onFinish:function(e){ce(!0),(0,d.Z)({method:"post",url:"tas/requestgroupemployee/groupemployees",data:(0,o.Z)((0,o.Z)({},e),{},{groupId:xe})}).then((function(e){ye(),me.resetFields(),se(!1)})).catch((function(e){})).then((function(){return ce(!1)}))},children:(0,g.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2",children:[(0,g.jsx)(i.Button,{type:"primary",onClick:function(){return me.submit()},loading:re,icon:(0,g.jsx)(f.Z,{}),children:"Save"}),(0,g.jsx)(i.Button,{onClick:function(){se(!1)},disabled:re,children:"Cancel"})]})})}),(0,g.jsxs)(u.GI,{visible:U,showTitle:!1,height:"auto",width:"auto",children:[(0,g.jsx)("div",{children:"Are you sure you want to delete this record?"}),(0,g.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,g.jsx)(i.Button,{type:"danger",onClick:function(){ce(!0),(0,d.Z)({method:"delete",url:"tas/requestgroupemployee/groupemployees",data:{id:T.Id}}).then((function(){ye(),V(!1)})).catch((function(e){})).then((function(){return ce(!1)}))},loading:re,children:"Yes"}),(0,g.jsx)(i.Button,{onClick:function(){return V(!1)},disabled:re,children:"No"})]})]}),(0,g.jsxs)(u.GI,{visible:te,showTitle:!1,height:"auto",width:"auto",children:[(0,g.jsx)("div",{children:"Are you sure you want to change Primary status this record?"}),(0,g.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,g.jsx)(i.Button,{type:"success",onClick:function(){ce(!0),(0,d.Z)({method:"put",url:"tas/requestgroupemployee/setprimary",data:{id:T.Id}}).then((function(){ye(),ne(!1)})).catch((function(e){})).then((function(){return ce(!1)}))},loading:re,children:"Yes"}),(0,g.jsx)(i.Button,{onClick:function(){return ne(!1)},disabled:re,children:"No"})]})]})]})}},81514:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(93433),l=n(4942),o=n(1413);var s=function e(t,n,a){var s=[],i=Object.keys(n);return t.map((function(t){if(t[a].length>0)s.push((0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},a,e(t[a],n,a))));else{var u=!1;i.map((function(e){var a,l;""!==n[e]&&"undefined"!==typeof n[e]&&null!==n[e]?u="string"===typeof n[e]?u||(null===(a=t[e])||void 0===a?void 0:a.toLowerCase().includes(null===(l=n[e])||void 0===l?void 0:l.toLowerCase())):u||t[e]===n[e]:u=!0})),u&&s.push(t)}})),s};function i(e,t,n,l){return"tree"===n?s(t,e,l):new Promise((function(n,l){var o=Object.keys(e),s=(0,a.Z)(t);o.map((function(t){""!==e[t]&&"undefined"!==typeof e[t]&&null!==e[t]&&(s="string"===typeof e[t]?s.filter((function(n){var a,l;return null===(a=n[t])||void 0===a?void 0:a.toLowerCase().includes(null===(l=e[t])||void 0===l?void 0:l.toLowerCase())})):s.filter((function(n){return n[t]===e[t]})))})),n(s)}))}}}]);