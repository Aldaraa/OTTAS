"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[7194],{37194:function(e,t,n){n.r(t);var o=n(93433),a=n(1413),u=n(29439),i=n(2880),c=n(14261),r=n(47313),s=n(65040),l=n(74294),d=n(56573),f=n(42614),p=n(46417);t.default=function(){var e=(0,r.useState)([]),t=(0,u.Z)(e,2),n=(t[0],t[1]),h=(0,r.useState)([]),m=(0,u.Z)(h,2),g=m[0],v=m[1],x=(0,r.useState)([]),Z=(0,u.Z)(x,2),b=Z[0],j=Z[1],I=(0,r.useState)(null),N=(0,u.Z)(I,2),S=N[0],y=(N[1],(0,r.useState)(!1)),w=(0,u.Z)(y,2),C=w[0],G=w[1],k=(0,r.useState)(!1),q=(0,u.Z)(k,2),D=q[0],A=q[1],F=(0,r.useState)(!1),R=(0,u.Z)(F,2),T=R[0],B=R[1],E=(0,r.useState)(!1),M=(0,u.Z)(E,2),V=M[0],_=M[1],K=(0,r.useState)([]),Y=(0,u.Z)(K,2),z=Y[0],H=Y[1],J=(0,r.useState)(null),L=(0,u.Z)(J,2),O=L[0],P=L[1],Q=(0,r.useState)(!1),U=(0,u.Z)(Q,2),W=U[0],X=(U[1],(0,r.useState)(!1)),$=(0,u.Z)(X,2),ee=$[0],te=$[1],ne=(0,r.useState)(!1),oe=(0,u.Z)(ne,2),ae=oe[0],ue=oe[1],ie=s.Z.useForm(),ce=(0,u.Z)(ie,1)[0],re=(0,r.useContext)(f.V).action;(0,r.useEffect)((function(){re.changeMenuKey("/tas/approvalconfig"),le(),fe()}),[]),(0,r.useEffect)((function(){de()}),[O]);var se,le=function(){G(!0),(0,d.Z)({method:"get",url:"tas/requestgroupconfig/documenttypes"}).then((function(e){H(e.data)})).catch((function(e){})).then((function(){return G(!1)}))},de=function(){_(!0),(0,d.Z)({method:"get",url:"tas/requestgroupconfig/documentapproval/".concat(O)}).then((function(e){v(e.data),n(e.data)})).catch((function(e){})).then((function(){return _(!1)}))},fe=function(){te(!0),(0,d.Z)({method:"get",url:"tas/requestgroup"}).then((function(e){j(e.data.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{label:e.Description,value:e.Id})})))})).catch((function(e){})).then((function(){return te(!1)}))},pe=[{label:"Group",name:"GroupId",className:"col-span-12 mb-2",type:"select",rules:[{required:!0,message:"Group is required"}],inputprops:{options:b,fieldNames:{value:"Id",label:"Description"},loading:ee}}];return(0,p.jsx)("div",{children:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-3 shadow-md",children:[(0,p.jsx)("div",{className:"text-lg font-bold mb-2",children:"Approval Configuration"}),(0,p.jsx)("div",{className:"w-1/3",children:(0,p.jsx)("div",{className:"flex gap-4 justify-start col-span-12",children:(0,p.jsx)(l.Z,{options:z,fieldNames:{value:"Name",label:"Name"},className:"w-[300px]",onChange:function(e){return P(e)},loading:C})})})]}),O&&(0,p.jsx)(i.Table,{data:g,columns:(se=O,"Non Site Travel"===se?[{label:"Group Name",name:"GroupName"},{label:"Rule Action",name:"RuleAction"}]:[{label:"Group Name",name:"GroupName"}]),allowColumnReordering:!1,loading:V,keyExpr:"Id",sorting:!1,pager:g.length>20,rowDragging:!!W&&{onReorder:function(e){return function(e){var t=e.component.getVisibleRows(),n=(0,o.Z)(g),a=n.findIndex((function(n){var o;return n.Id===(null===(o=t[e.toIndex])||void 0===o?void 0:o.data.Id)})),u=n.findIndex((function(t){return t.Id===e.itemData.Id}));n.splice(u,1),n.splice(a,0,e.itemData),v(n)}(e)},onDragEnd:function(e){return function(e){0!==e.toIndex&&e.toIndex!==g.length-1||(e.cancel=!0)}(e)},onDragStart:function(e){return function(e){0!==e.fromIndex&&e.fromIndex!==g.length-1||(e.cancel=!0)}(e)}}}),(0,p.jsx)(i.Modal,{title:"Add Group",open:T,onCancel:function(){return B(!1)},children:(0,p.jsx)(i.Form,{form:ce,fields:pe,editData:S,onFinish:function(e){S?(ue(!0),(0,d.Z)({method:"put",url:"tas/requestgroupconfig/documentapproval",data:(0,a.Z)((0,a.Z)({},e),{},{document:O,id:S.Id})}).then((function(e){B(!1),de()})).catch((function(e){})).then((function(){return ue(!1)}))):(ue(!0),(0,d.Z)({method:"post",url:"tas/requestgroupconfig/documentapproval",data:(0,a.Z)((0,a.Z)({},e),{},{document:O})}).then((function(e){B(!1),de()})).catch((function(e){})).then((function(){return ue(!1)})))},children:(0,p.jsxs)("div",{className:"col-span-12 flex justify-end gap-3 mt-5",children:[(0,p.jsx)(i.Button,{type:"primary",htmlType:"submit",loading:ae,children:"Save"}),(0,p.jsx)(i.Button,{htmlType:"button",onClick:function(){ce.resetFields(),B(!1)},disabled:ae,children:"Cancel"})]})})}),(0,p.jsxs)(c.GI,{visible:D,showTitle:!1,height:110,width:350,children:[(0,p.jsxs)("div",{children:["Are you sure you want to ",1===(null===S||void 0===S?void 0:S.Active)?"deactivate":"reactivate"," this record?"]}),(0,p.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,p.jsx)(i.Button,{type:1===(null===S||void 0===S?void 0:S.Active)?"danger":"success",onClick:function(){ue(!0),(0,d.Z)({method:"delete",url:"tas/requestgroupconfig/".concat(S.Id)}).then((function(){de(),A(!1)})).catch((function(e){})).then((function(){return ue(!1)}))},loading:ae,children:"Yes"}),(0,p.jsx)(i.Button,{onClick:function(){return A(!1)},disabled:ae,children:"No"})]})]})]})})}}}]);