"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[3638],{43638:function(e,t,n){n.r(t);var a=n(74165),l=n(15861),r=n(29439),s=n(2880),i=n(47313),o=n(65040),u=n(56573),c=n(40765),d=n(81514),m=n(42614),f=n(58467),p=n(2135),h=n(10658),x=n.n(h),v=n(73030),b=n(46417),g=function(e){var t="";return e<0?t="bg-orange-500 text-white":0===e||1===e?t="bg-red-500 text-white":2!==e&&3!==e||(t="bg-yellow-500 text-white"),t};t.default=function(){var e=(0,i.useState)([]),t=(0,r.Z)(e,2),n=t[0],h=t[1],w=(0,i.useState)([]),y=(0,r.Z)(w,2),j=y[0],N=y[1],k=(0,i.useState)(null),D=(0,r.Z)(k,2),Z=(D[0],D[1],(0,i.useState)(!1)),C=(0,r.Z)(Z,2),T=C[0],S=C[1],q=(0,i.useState)(!1),I=(0,r.Z)(q,2),R=(I[0],I[1],(0,i.useState)(!1)),E=(0,r.Z)(R,2),L=E[0],F=E[1],A=(0,i.useState)("search"),M=(0,r.Z)(A,2),U=(M[0],M[1],o.Z.useForm()),O=(0,r.Z)(U,1)[0],Y=(0,i.useContext)(m.V).action,H=(0,f.UO)().impersoniteId,V=(0,f.s0)();(0,i.useEffect)((function(){Y.changeMenuKey("/request/impersonateuser"),_()}),[]);var _=function(){S(!0),(0,u.Z)({method:"get",url:"tas/requestdocument/documentlistinpersonate/".concat(H)}).then((function(e){h(e.data),N(e.data)})).catch((function(e){})).then((function(){return S(!1)}))},P=function(e){if("Non Site Travel"===e.data.DocumentType)return"/request/task/nonsitetravel/".concat(e.data.Id,"?impersonateuser=").concat(H);if("Profile Changes"===e.data.DocumentType)return"/request/task/profilechanges/".concat(e.data.Id,"?impersonateuser=").concat(H);if("De Mobilisation"===e.data.DocumentType)return"/request/task/de-mobilisation/".concat(e.data.Id,"?impersonateuser=").concat(H);if("Site Travel"===e.data.DocumentType){if("ADD"===e.data.DocumentTag)return"/request/task/sitetravel/addtravel/".concat(e.data.Id,"?impersonateuser=").concat(H);if("RESCHEDULE"===e.data.DocumentTag)return"/request/task/sitetravel/reschedule/".concat(e.data.Id,"?impersonateuser=").concat(H);if("REMOVE"===e.data.DocumentTag)return"/request/task/sitetravel/remove/".concat(e.data.Id,"?impersonateuser=").concat(H)}},z=[{label:"",name:"DaysAway",width:"45px",alignment:"left",cellRender:function(e){var t=e.value;return(0,b.jsx)(s.Tooltip,{title:"Days Away",children:(0,b.jsx)("div",{className:(0,v.m6)("py-[1px] px-[3px] rounded inline-block text-xs min-w-[30px] text-center",g(t)),children:t})})}},{label:"#",name:"Id",dataType:"string",width:"65px",cellRender:function(e){return(0,b.jsx)("div",{className:"flex items-center text-blue-500 hover:underline",children:(0,b.jsx)(p.Link,{to:P(e),target:"_blank",children:e.value})})}},{label:"CurrentStatus",name:"CurrentStatusGroup",alignment:"left"},{label:"Document",name:"DocumentType",alignment:"left",width:"120px"},{label:"Employer",name:"EmployerName",alignment:"left"},{label:"Requester",name:"RequesterFullName",alignment:"left"},{label:"Assigned To",name:"AssignedEmployeeFullName",alignment:"left"},{label:"Date Requested",name:"RequestedDate",alignment:"left",cellRender:function(e){return(0,b.jsx)("div",{children:x()(e.value).format("YYYY-MM-DD ddd HH:mm")})}},{label:"Subject",name:"EmployeeFullName",alignment:"left"},{label:"Updated",name:"UpdateInfo",alignment:"left"},{label:"",name:"",width:"90px",alignment:"center",showInColumnChooser:!1,cellRender:function(e){return(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)(p.Link,{to:P(e),children:(0,b.jsx)("button",{type:"button",className:"edit-button",children:"View"})})})}}],B=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F(!0),(0,d.Z)(t,n).then((function(e){N(e),F(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"rounded-ot bg-white p-5 mb-5 shadow-md",children:[(0,b.jsx)("div",{className:"text-lg font-bold mb-3",children:"Impersonate User"}),(0,b.jsx)("div",{className:"w-[400px]",children:(0,b.jsx)(s.Form,{form:O,fields:[{label:"First Name",name:"FirstName",className:"col-span-12 mb-2",inputprops:{}},{label:"Last Name",name:"Lastname",className:"col-span-12 mb-2"},{label:"Active",name:"Active",className:"col-span-12 mb-2",type:"check",inputprops:{indeterminatewith:!0}}],size:"small",className:"grid grid-cols-12 gap-x-8",onFinish:B,wrapperCol:{flex:1},labelCol:{flex:"100px"},children:(0,b.jsx)("div",{className:"flex gap-4 justify-end col-span-12",children:(0,b.jsx)(s.Button,{htmlType:"submit",className:"flex items-center",loading:L,icon:(0,b.jsx)(c.Z,{}),children:"Search"})})})})]}),(0,b.jsx)(s.Table,{data:j,columns:z,allowColumnReordering:!1,loading:T,keyExpr:"Id",pager:j.length>20,onRowDblClick:function(e){return V(P(e))},tableClass:"max-h-[calc(100vh-325px)]"})]})}},81514:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(93433),l=n(4942),r=n(1413);var s=function e(t,n,a){var s=[],i=Object.keys(n);return t.map((function(t){if(t[a].length>0)s.push((0,r.Z)((0,r.Z)({},t),{},(0,l.Z)({},a,e(t[a],n,a))));else{var o=!1;i.map((function(e){var a,l;""!==n[e]&&"undefined"!==typeof n[e]&&null!==n[e]?o="string"===typeof n[e]?o||(null===(a=t[e])||void 0===a?void 0:a.toLowerCase().includes(null===(l=n[e])||void 0===l?void 0:l.toLowerCase())):o||t[e]===n[e]:o=!0})),o&&s.push(t)}})),s};function i(e,t,n,l){return"tree"===n?s(t,e,l):new Promise((function(n,l){var r=Object.keys(e),s=(0,a.Z)(t);r.map((function(t){""!==e[t]&&"undefined"!==typeof e[t]&&null!==e[t]&&(s="string"===typeof e[t]?s.filter((function(n){var a,l;return null===(a=n[t])||void 0===a?void 0:a.toLowerCase().includes(null===(l=e[t])||void 0===l?void 0:l.toLowerCase())})):s.filter((function(n){return n[t]===e[t]})))})),n(s)}))}}}]);