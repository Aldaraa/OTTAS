"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[5758],{35758:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var a=t(29439),l=t(47313),o=t(76047),s=t(93031),c=t(10658),i=t.n(c),r=t(76629),u=t(1413),d=t(56573),h=t(2880),m=t(58467),f=t(14261),p=t(82138),b=t(46417);var x=function(e){var n=e.selectedDate,t=e.fields,o=void 0===t?[]:t,s=(0,l.useState)([]),c=(0,a.Z)(s,2),r=c[0],x=c[1],j=(0,l.useState)(!1),v=(0,a.Z)(j,2),y=v[0],D=v[1],C=(0,l.useState)(!1),g=(0,a.Z)(C,2),w=g[0],k=g[1],N=(0,l.useState)(!1),Y=(0,a.Z)(N,2),Z=Y[0],S=Y[1],E=(0,l.useState)(null),I=(0,a.Z)(E,2),R=I[0],T=I[1],B=(0,m.UO)().employeeId,M=(0,l.useRef)(null);(0,l.useEffect)((function(){n&&F()}),[n]);var F=function(){M.current.instance.beginCustomLoading(),(0,d.Z)({method:"get",url:"tas/transport/noshow/".concat(B,"/").concat(i()(n).format("YYYY"))}).then((function(e){x(e.data)})).catch((function(e){})).then((function(){return M.current.instance.endCustomLoading()}))},A=[{label:"Date",name:"EventDateTime",cellRender:function(e){return(0,b.jsx)("div",{children:i()(e.value).format("YYYY-MM-DD ddd")})}},{label:"Direction",name:"Direction"},{label:"Description",name:"Description"},{label:"Reason",name:"Reason"},{label:"",name:"action",cellRender:function(e){return(0,b.jsx)("button",{className:"dlt-button",onClick:function(){return _(e.row.data)},children:"Delete"})}}],L=(0,l.useCallback)((function(e){D(!0),(0,d.Z)({method:"post",url:"tas/transport/nogoshow",data:(0,u.Z)((0,u.Z)({},e),{},{EventDate:e.EventDate?i()(e.EventDate).format("YYYY-MM-DD"):null,EmployeeId:B,NoShow:!0})}).then((function(){F(),G()})).catch((function(){})).finally((function(){D(!1)}))}),[B]),O=(0,l.useCallback)((function(){D(!0),(0,d.Z)({method:"delete",url:"tas/transport/noshow/".concat(R.Id)}).then((function(){F(),S(!1)})).catch((function(){})).finally((function(){D(!1)}))}),[R]),U=(0,l.useCallback)((function(){k(!0)}),[]),G=(0,l.useCallback)((function(){k(!1)}),[]),_=(0,l.useCallback)((function(e){T(e),S(!0)}),[]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex justify-end py-1",children:(0,b.jsx)(h.Button,{onClick:U,icon:(0,b.jsx)(p.Z,{}),children:"Add"})}),(0,b.jsx)(h.Table,{ref:M,data:r,columns:A,allowColumnReordering:!1,containerClass:"shadow-none border",keyExpr:"EventDate",pager:r.length>20}),(0,b.jsx)(h.Modal,{title:"Add No Show",open:w,onCancel:G,children:(0,b.jsx)(h.Form,{onFinish:L,fields:o,labelCol:{flex:"90px"},children:(0,b.jsxs)("div",{className:"col-span-12 flex justify-end gap-4",children:[(0,b.jsx)(h.Form.Item,{className:"mb-0",children:(0,b.jsx)(h.Button,{type:"primary",htmlType:"submit",loading:y,children:"Save"})}),(0,b.jsx)(h.Form.Item,{className:"mb-0",children:(0,b.jsx)(h.Button,{onClick:G,children:"Cancel"})})]})})}),(0,b.jsxs)(f.GI,{visible:Z,showTitle:!1,height:110,width:350,children:[(0,b.jsx)("div",{children:"Are you sure you want to delete this record?"}),(0,b.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,b.jsx)(h.Button,{htmlType:"button",type:"danger",onClick:O,children:"Yes"}),(0,b.jsx)(h.Button,{htmlType:"button",onClick:function(){return S(!1)},children:"No"})]})]})]})};var j=function(e){var n=e.selectedDate,t=e.fields,o=void 0===t?[]:t,s=(0,l.useState)([]),c=(0,a.Z)(s,2),r=c[0],x=c[1],j=(0,l.useState)(!1),v=(0,a.Z)(j,2),y=v[0],D=v[1],C=(0,l.useState)(!1),g=(0,a.Z)(C,2),w=g[0],k=g[1],N=(0,l.useState)(!1),Y=(0,a.Z)(N,2),Z=Y[0],S=Y[1],E=(0,l.useState)(null),I=(0,a.Z)(E,2),R=I[0],T=I[1],B=(0,m.UO)().employeeId,M=(0,l.useRef)(null);(0,l.useEffect)((function(){n&&F()}),[n]);var F=function(){M.current.instance.beginCustomLoading(),(0,d.Z)({method:"get",url:"tas/transport/goshow/".concat(B,"/").concat(i()(n).format("YYYY"))}).then((function(e){x(e.data)})).catch((function(e){})).then((function(){return M.current.instance.endCustomLoading()}))},A=[{label:"Date",name:"EventDateTime",cellRender:function(e){return(0,b.jsx)("div",{children:i()(e.value).format("YYYY-MM-DD ddd")})}},{label:"Direction",name:"Direction"},{label:"Description",name:"Description"},{label:"Reason",name:"Reason"},{label:"",name:"action",cellRender:function(e){return(0,b.jsx)("button",{className:"dlt-button",onClick:function(){return _(e.row.data)},children:"Delete"})}}],L=(0,l.useCallback)((function(e){D(!0),(0,d.Z)({method:"post",url:"tas/transport/nogoshow",data:(0,u.Z)((0,u.Z)({},e),{},{EventDate:e.EventDate?i()(e.EventDate).format("YYYY-MM-DD"):null,EmployeeId:B,NoShow:!1})}).then((function(){F(),G()})).catch((function(){})).finally((function(){D(!1)}))}),[B]),O=(0,l.useCallback)((function(){D(!0),(0,d.Z)({method:"delete",url:"tas/transport/goshow/".concat(R.Id)}).then((function(){F(),S(!1)})).catch((function(){})).finally((function(){D(!1)}))}),[R]),U=(0,l.useCallback)((function(){k(!0)}),[]),G=(0,l.useCallback)((function(){k(!1)}),[]),_=(0,l.useCallback)((function(e){T(e),S(!0)}),[]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex justify-end py-1",children:(0,b.jsx)(h.Button,{onClick:U,icon:(0,b.jsx)(p.Z,{}),children:"Add"})}),(0,b.jsx)(h.Table,{ref:M,data:r,columns:A,allowColumnReordering:!1,containerClass:"shadow-none border",keyExpr:"EventDate",pager:r.length>20}),(0,b.jsx)(h.Modal,{title:"Add No Show",open:w,onCancel:G,children:(0,b.jsx)(h.Form,{onFinish:L,fields:o,labelCol:{flex:"90px"},children:(0,b.jsxs)("div",{className:"col-span-12 flex justify-end gap-4",children:[(0,b.jsx)(h.Form.Item,{className:"mb-0",children:(0,b.jsx)(h.Button,{type:"primary",htmlType:"submit",loading:y,children:"Save"})}),(0,b.jsx)(h.Form.Item,{className:"mb-0",children:(0,b.jsx)(h.Button,{onClick:G,children:"Cancel"})})]})})}),(0,b.jsxs)(f.GI,{visible:Z,showTitle:!1,height:110,width:350,children:[(0,b.jsx)("div",{children:"Are you sure you want to delete this record?"}),(0,b.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,b.jsx)(h.Button,{htmlType:"button",type:"danger",onClick:O,children:"Yes"}),(0,b.jsx)(h.Button,{htmlType:"button",onClick:function(){return S(!1)},children:"No"})]})]})]})},v=[{name:"EventDate",label:"Event Date",type:"date",className:"col-span-12 mb-2"},{name:"Direction",label:"Direction",type:"select",className:"col-span-12 mb-2",inputprops:{options:[{value:"IN",label:"IN"},{value:"OUT",label:"OUT"}]}},{name:"Description",label:"Description",className:"col-span-12 mb-2"},{name:"Reason",label:"Reason",className:"col-span-12 mb-2",type:"textarea"}];var y=function(){var e=(0,l.useState)(i()()),n=(0,a.Z)(e,2),t=n[0],c=n[1];(0,l.useEffect)((function(){r.Z.set("pp_rt","noshow")}),[]);var u=(0,l.useMemo)((function(){return[{key:"noShow",label:"No Show",children:(0,b.jsx)(x,{selectedDate:t,fields:v})},{key:"goShow",label:"Go Show",children:(0,b.jsx)(j,{selectedDate:t,fields:v})}]}),[t]);return(0,b.jsx)("div",{className:"bg-white rounded-ot p-4 col-span-12 shadow-md",children:(0,b.jsx)(o.Z,{type:"card",items:u,tabBarExtraContent:(0,b.jsx)(s.Z,{value:t,onChange:function(e){return c(e)},picker:"year"})})})}}}]);