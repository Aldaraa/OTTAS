"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[2622],{92622:function(e,t,n){n.r(t);var i=n(29439),a=n(2880),c=n(14261),s=n(47313),o=n(65040),l=n(56573),r=n(58467),u=n(40765),d=n(82138),f=n(92350),m=n(81514),h=n(46417),p="Bed";t.default=function(){var e=(0,s.useState)([]),t=(0,i.Z)(e,2),n=t[0],v=t[1],b=(0,s.useState)([]),x=(0,i.Z)(b,2),j=(x[0],x[1]),g=(0,s.useState)([]),N=(0,i.Z)(g,2),Z=N[0],y=N[1],A=(0,s.useState)(null),C=(0,i.Z)(A,2),w=C[0],k=C[1],D=(0,s.useState)(!1),S=(0,i.Z)(D,2),I=S[0],F=S[1],R=(0,s.useState)(!1),B=(0,i.Z)(R,2),E=B[0],L=B[1],O=(0,s.useState)(!1),z=(0,i.Z)(O,2),T=z[0],V=z[1],_=(0,s.useState)(!1),G=(0,i.Z)(_,2),J=G[0],M=G[1],P=o.Z.useForm(),U=(0,i.Z)(P,1)[0],Y=o.Z.useForm(),q=(0,i.Z)(Y,1)[0],H=(0,r.UO)().roomId;(0,r.s0)(),(0,s.useEffect)((function(){K(),Q()}),[]);var K=function(){F(!0),(0,l.Z)({method:"get",url:"tas/bed?roomId=".concat(H)}).then((function(e){if(v(e.data),1===q.getFieldValue("Active")){var t=e.data.filter((function(e){return 1===e.Active}));y(t)}else if(0===q.getFieldValue("Active")){var n=e.data.filter((function(e){return 0===e.Active}));y(n)}else y(e.data)})).catch((function(e){})).then((function(){return F(!1)}))},Q=function(){(0,l.Z)({method:"get",url:"tas/room?Active=1"}).then((function(e){var t=[];e.data.map((function(e){return t.push({label:e.Number,value:e.Id})})),j(t)})).catch((function(e){}))},W=function(e){k(e),L(!0)},X=[{label:"Description",name:"Description",width:"150px"},{label:"RoomNumber",name:"RoomNumber",width:"150px"},{label:"CampName",name:"CampName"},{label:"Active",name:"Active",width:"90px",alignment:"center",cellRender:function(e){return(0,h.jsx)(c.Jg,{disabled:!0,iconSize:18,value:1===e.data.Active||0})}},{label:"",name:"action",width:"170px",cellRender:function(e){return(0,h.jsxs)("div",{className:"flex gap-4",children:[(0,h.jsx)("button",{type:"button",className:"edit-button",onClick:function(){return t=e.data,k(t),void M(!0);var t},children:"Edit"}),1===e.data.Active?(0,h.jsx)("button",{type:"button",className:"dlt-button",onClick:function(){return W(e.data)},children:"Deactivate"}):(0,h.jsx)("button",{type:"button",className:"scs-button",onClick:function(){return W(e.data)},children:"Reactivate"})]})}}],$=function(){M(!1)};return(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-3 shadow-md",children:[(0,h.jsx)("div",{className:"text-lg font-bold mb-2",children:p}),(0,h.jsxs)("div",{className:"w-1/3",children:[(0,h.jsx)(a.Form,{form:q,fields:[{label:"Description",name:"Description",className:"col-span-12 mb-2"},{label:"Active",name:"Active",className:"col-span-12 mb-2",type:"check",inputprops:{indeterminatewith:!0}}],size:"small",className:"grid grid-cols-12 gap-x-8",onFinish:function(e){(0,m.Z)(e,n).then((function(e){y(e)}))}}),(0,h.jsx)("div",{className:"flex gap-4 justify-end",children:(0,h.jsx)(a.Button,{onClick:function(){return q.submit()},icon:(0,h.jsx)(u.Z,{}),children:"Search"})})]})]}),(0,h.jsx)(a.Table,{data:Z,columns:X,allowColumnReordering:!1,loading:I,keyExpr:"Id",tableClass:"border-t max-h-[calc(100vh-260px)]",title:(0,h.jsxs)("div",{className:"flex justify-between py-2 px-1",children:[(0,h.jsxs)("div",{className:"flex items-center gap-1",children:[(0,h.jsx)("span",{className:"font-bold",children:Z.length}),(0,h.jsx)("span",{className:" text-gray-400",children:"results"})]}),(0,h.jsxs)(a.Button,{icon:(0,h.jsx)(d.Z,{}),onClick:function(){k(null),U.resetFields(),M(!0)},children:["Add ",p]})]})}),(0,h.jsx)(a.Modal,{open:J,onCancel:function(){return M(!1)},title:w?"Edit ".concat(p):"Add ".concat(p),children:(0,h.jsx)(a.Form,{form:U,fields:w?[{label:"Description",name:"Description",className:"col-span-12 mb-2"}]:[{label:"Description",name:"Description",className:"col-span-12 mb-2"},{label:"Active",name:"Active",className:"col-span-12 mb-2",type:"check"}],editData:w,onFinish:function(e){V(!0),w?(0,l.Z)({method:"put",url:"tas/bed",data:{Description:e.Description,RoomId:H,Active:e.Active?1:0,Id:w.Id}}).then((function(e){K(),$()})).catch((function(e){})).then((function(){return V(!1)})):(0,l.Z)({method:"post",url:"tas/bed",data:{Description:e.Description,RoomId:H,Active:e.Active?1:0}}).then((function(e){K(),$()})).catch((function(e){})).then((function(){return V(!1)}))},children:(0,h.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2",children:[(0,h.jsx)(a.Button,{type:"primary",onClick:function(){return U.submit()},loading:T,icon:(0,h.jsx)(f.Z,{}),children:"Save"}),(0,h.jsx)(a.Button,{onClick:$,disabled:T,children:"Cancel"})]})})}),(0,h.jsxs)(c.GI,{visible:E,showTitle:!1,height:110,width:350,children:[(0,h.jsxs)("div",{children:["Are you sure you want to ",1===(null===w||void 0===w?void 0:w.Active)?"deactivate":"reactivate"," this record?"]}),(0,h.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,h.jsx)(a.Button,{type:1===(null===w||void 0===w?void 0:w.Active)?"danger":"success",onClick:function(){V(!0),(0,l.Z)({method:"delete",url:"tas/bed",data:{id:w.Id}}).then((function(){K(),L(!1)})).catch((function(e){})).then((function(){return V(!1)}))},loading:T,children:"Yes"}),(0,h.jsx)(a.Button,{onClick:function(){return L(!1)},disabled:T,children:"No"})]})]})]})}},81514:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(93433),a=n(4942),c=n(1413);var s=function e(t,n,i){var s=[],o=Object.keys(n);return t.map((function(t){if(t[i].length>0)s.push((0,c.Z)((0,c.Z)({},t),{},(0,a.Z)({},i,e(t[i],n,i))));else{var l=!1;o.map((function(e){var i,a;""!==n[e]&&"undefined"!==typeof n[e]&&null!==n[e]?l="string"===typeof n[e]?l||(null===(i=t[e])||void 0===i?void 0:i.toLowerCase().includes(null===(a=n[e])||void 0===a?void 0:a.toLowerCase())):l||t[e]===n[e]:l=!0})),l&&s.push(t)}})),s};function o(e,t,n,a){return"tree"===n?s(t,e,a):new Promise((function(n,a){var c=Object.keys(e),s=(0,i.Z)(t);c.map((function(t){""!==e[t]&&"undefined"!==typeof e[t]&&null!==e[t]&&(s="string"===typeof e[t]?s.filter((function(n){var i,a;return null===(i=n[t])||void 0===i?void 0:i.toLowerCase().includes(null===(a=e[t])||void 0===a?void 0:a.toLowerCase())})):s.filter((function(n){return n[t]===e[t]})))})),n(s)}))}}}]);