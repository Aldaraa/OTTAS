"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[4702],{74702:function(e,l,a){a.r(l),a.d(l,{default:function(){return O}});var n=a(1413),o=a(29439),t=a(56573),i=a(47313),s=a(58467),r=a(65040),d=a(21975),u=a(2880),c=a(14261),m=a(74165),p=a(15861),v=a(24957),f=a(53979),b=a(12998),h=a(68197),g=a(59624),x=a(74294),y=a(93031),N=a(76047),I=a(10658),D=a.n(I),j=a(46146),C=a.n(j),q=a(69226),F=a.n(q),w=a(2135),L=a(42614),Z=a(46417);D().extend(C()),D().extend(F());var S=new RegExp(/^[0-9]{8}$/),P=new RegExp(/^[A-Za-z -]+$/g),R=new RegExp(/^[0-9 +]+$/),E={labelCol:{xs:{span:24},sm:{span:12},md:{span:8},lg:{span:12},xl:{span:8},xxl:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}};var A=function(e){var l,a,s,c,I,j,C,q,F,A,M,G,k,T,V,Y,O,U,z,B,H,W,_,K,J,$,Q,X,ee,le,ae,ne,oe,te,ie,se,re,de,ue,ce,me,pe,ve,fe,be,he,ge,xe,ye,Ne,Ie,De,je,Ce,qe,Fe,we,Le,Ze,Se,Pe,Re,Ee,Ae,Me,Ge,ke,Te,Ve,Ye,Oe,Ue,ze,Be,He,We,_e,Ke,Je,$e,Qe,Xe,el,ll,al,nl,ol,tl,il,sl,rl,dl,ul,cl,ml=e.data,pl=e.form,vl=e.documentData,fl=e.className,bl=e.refreshData,hl=e.disabled,gl=e.getProfile,xl=(0,i.useState)(0),yl=(0,o.Z)(xl,2),Nl=yl[0],Il=yl[1],Dl=(0,i.useState)(!0),jl=(0,o.Z)(Dl,2),Cl=(jl[0],jl[1]),ql=(0,i.useState)(!1),Fl=(0,o.Z)(ql,2),wl=Fl[0],Ll=Fl[1],Zl=(0,i.useState)(null),Sl=(0,o.Z)(Zl,2),Pl=Sl[0],Rl=Sl[1],El=(0,i.useState)(!1),Al=(0,o.Z)(El,2),Ml=Al[0],Gl=Al[1],kl=(0,i.useState)([]),Tl=(0,o.Z)(kl,2),Vl=Tl[0],Yl=Tl[1],Ol=(0,i.useContext)(L.V).state,Ul=b.ZP.useNotification(),zl=(0,o.Z)(Ul,2),Bl=zl[0],Hl=zl[1];(0,i.useEffect)((function(){Wl()}),[]),(0,i.useEffect)((function(){if("temp"!==(null===vl||void 0===vl?void 0:vl.DocumentTag)&&ml&&pl){var e,l=(0,n.Z)((0,n.Z)({},ml),{},{Dob:null!==ml&&void 0!==ml&&ml.Dob?D()(null===ml||void 0===ml?void 0:ml.Dob):null,CommenceDate:null!==ml&&void 0!==ml&&ml.CommenceDate?D()(null===ml||void 0===ml?void 0:ml.CommenceDate):null,CompletionDate:null!==ml&&void 0!==ml&&ml.CompletionDate?D()(null===ml||void 0===ml?void 0:ml.CompletionDate):null,NextRosterDate:null!==ml&&void 0!==ml&&ml.NextRosterDate?D()(null===ml||void 0===ml?void 0:ml.NextRosterDate):null,PassportExpiry:null!==ml&&void 0!==ml&&ml.PassportExpiry?D()(null===ml||void 0===ml?void 0:ml.PassportExpiry):null});null===pl||void 0===pl||pl.setFieldsValue(l),null===(e=l.GroupData)||void 0===e||e.map((function(e){null===pl||void 0===pl||pl.setFieldValue(e.GroupMasterId,e.GroupDetailId)}))}}),[ml,pl]),(0,i.useEffect)((function(){var e;"temp"===(null===vl||void 0===vl?void 0:vl.DocumentTag)&&Ol.userProfileData&&(null===pl||void 0===pl||pl.setFieldsValue(null===Ol||void 0===Ol?void 0:Ol.userProfileData),_l.map((function(e){"date"===e.type&&null!==Ol&&void 0!==Ol&&Ol.userProfileData[e.name]&&(null===pl||void 0===pl||pl.setFieldValue(e.name,D()(null===Ol||void 0===Ol?void 0:Ol.userProfileData[e.name])))})),Kl.map((function(e){"date"===e.type&&null!==Ol&&void 0!==Ol&&Ol.userProfileData[e.name]&&(null===pl||void 0===pl||pl.setFieldValue(e.name,D()(null===Ol||void 0===Ol?void 0:Ol.userProfileData[e.name])))})),Xl.map((function(e){"date"===e.type&&null!==Ol&&void 0!==Ol&&Ol.userProfileData[e.name]&&(null===pl||void 0===pl||pl.setFieldValue(e.name,D()(null===Ol||void 0===Ol?void 0:Ol.userProfileData[e.name])))})),null===Ol||void 0===Ol||null===(e=Ol.userProfileData.GroupData)||void 0===e||e.map((function(e){null===pl||void 0===pl||pl.setFieldValue(e.GroupMasterId,e.GroupDetailId)})))}),[vl,Ol.userProfileData]);var Wl=function(){(0,t.Z)({method:"get",url:"tas/profilefield"}).then((function(e){var l={};e.data.map((function(e){l[e.ColumnName]=e})),Yl(l)})).catch((function(){}))},_l=[{label:null===(l=Vl.NationalityId)||void 0===l?void 0:l.Label,name:"NationalityId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(a=Vl.NationalityId)||void 0===a?void 0:a.FieldRequired,message:"".concat(null===(s=Vl.NationalityId)||void 0===s?void 0:s.Label," is required")}],inputprops:{options:Ol.referData.nationalities}},{label:null===(c=Vl.Email)||void 0===c?void 0:c.Label,name:"Email",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(I=Vl.Email)||void 0===I?void 0:I.FieldRequired,message:"".concat(null===(j=Vl.Email)||void 0===j?void 0:j.Label," is required")},{type:"email",message:"The input is not valid E-mail!"}]},{label:null===(C=Vl.Gender)||void 0===C?void 0:C.Label,name:"Gender",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(q=Vl.Gender)||void 0===q?void 0:q.FieldRequired,message:"".concat(null===(F=Vl.Gender)||void 0===F?void 0:F.Label," is required")}],inputprops:{options:[{value:1,label:"Male"},{value:0,label:"Female"}]}},{label:null===(A=Vl.Dob)||void 0===A?void 0:A.Label,name:"Dob",className:"col-span-12 lg:col-span-6 mb-0",type:"date",rules:[{required:null===(M=Vl.Dob)||void 0===M?void 0:M.FieldRequired,message:"".concat(null===(G=Vl.Dob)||void 0===G?void 0:G.Label," is required")}]},{label:null===(k=Vl.Firstname)||void 0===k?void 0:k.Label,name:"Firstname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(T=Vl.Firstname)||void 0===T?void 0:T.FieldRequired,message:"".concat(null===(V=Vl.Firstname)||void 0===V?void 0:V.Label," is required")}]},{label:null===(Y=Vl.Lastname)||void 0===Y?void 0:Y.Label,name:"Lastname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(O=Vl.Lastname)||void 0===O?void 0:O.FieldRequired,message:"".concat(null===(U=Vl.Lastname)||void 0===U?void 0:U.Label," is required")}]},{label:null===(z=Vl.MFirstname)||void 0===z?void 0:z.Label,name:"MFirstname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(B=Vl.MFirstname)||void 0===B?void 0:B.FieldRequired,message:"".concat(null===(H=Vl.MFirstname)||void 0===H?void 0:H.Label," is required")}]},{label:null===(W=Vl.MLastname)||void 0===W?void 0:W.Label,name:"MLastname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(_=Vl.MLastname)||void 0===_?void 0:_.FieldRequired,message:"".concat(null===(K=Vl.MLastname)||void 0===K?void 0:K.Label," is required")}]},{label:null===(J=Vl.CommenceDate)||void 0===J?void 0:J.Label,name:"CommenceDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date",rules:[{required:null===($=Vl.CommenceDate)||void 0===$?void 0:$.FieldRequired,message:"".concat(null===(Q=Vl.CommenceDate)||void 0===Q?void 0:Q.Label," is required")}],inputprops:{format:"M/D/YYYY"}},{label:"Completion Date",name:"CompletionDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date",inputprops:{format:"M/D/YYYY"}},{label:null===(X=Vl.DepartmentId)||void 0===X?void 0:X.Label,name:"DepartmentId",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(ee=Vl.DepartmentId)||void 0===ee?void 0:ee.FieldRequired,message:"".concat(null===(le=Vl.DepartmentId)||void 0===le?void 0:le.Label," is required")}],type:"treeSelect",inputprops:{treeData:Ol.referData.departments,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},allowClear:!0,showSearch:!0,filterTreeNode:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.Name)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())}}},{label:null===(ae=Vl.CostCodeId)||void 0===ae?void 0:ae.Label,name:"CostCodeId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(ne=Vl.CostCodeId)||void 0===ne?void 0:ne.FieldRequired,message:"".concat(null===(oe=Vl.CostCodeId)||void 0===oe?void 0:oe.Label," is required")}],inputprops:{options:Ol.referData.costCodes}},{label:null===(te=Vl.StateId)||void 0===te?void 0:te.Label,name:"StateId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(ie=Vl.StateId)||void 0===ie?void 0:ie.FieldRequired,message:"".concat(null===(se=Vl.StateId)||void 0===se?void 0:se.Label," is required")}],inputprops:{options:Ol.referData.states}},{type:"component",component:(0,Z.jsx)(r.Z.Item,{className:"col-span-12 lg:col-span-6 mb-0",label:"AD Account",children:(0,Z.jsxs)(h.Z,{gutter:8,children:[(0,Z.jsx)(g.Z,{span:12,children:(0,Z.jsx)(r.Z.Item,{name:"ADAccount",className:"mb-0",children:(0,Z.jsx)(d.Z,{})})}),(0,Z.jsx)(g.Z,{span:12,children:(0,Z.jsx)(u.Button,{htmlType:"button",disabled:!Ml,onClick:function(){(0,t.Z)({method:"post",url:"tas/employee/checkadaccount",data:{employeeId:null===ml||void 0===ml?void 0:ml.Id,adAccount:null===pl||void 0===pl?void 0:pl.getFieldValue("ADAccount")}}).then((function(e){e.data.AdAccountValidationStatus?Bl.success({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1,description:(0,Z.jsx)("div",{})}):Bl.error({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1,description:(0,Z.jsx)("div",{children:e.data.EmployeeId&&(0,Z.jsxs)(w.Link,{to:"/tas/people/search/".concat(e.data.EmployeeId),className:"text-blue-500 hover:underline",children:[e.data.Firstname," ",e.data.Lastname]})})})})).catch((function(e){})).then((function(){return Cl(!1)}))},children:"Account Check"})})]})},"component-ADAccount")}],Kl=[{label:null===(re=Vl.EmployerId)||void 0===re?void 0:re.Label,name:"EmployerId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(de=Vl.EmployerId)||void 0===de?void 0:de.FieldRequired,message:"".concat(null===(ue=Vl.EmployerId)||void 0===ue?void 0:ue.Label," is required")}],inputprops:{options:null===(ce=Ol.referData)||void 0===ce?void 0:ce.employers}},{label:null===(me=Vl.PeopleTypeId)||void 0===me?void 0:me.Label,name:"PeopleTypeId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(pe=Vl.PeopleTypeId)||void 0===pe?void 0:pe.FieldRequired,message:"".concat(null===(ve=Vl.PeopleTypeId)||void 0===ve?void 0:ve.Label," is required")}],inputprops:{options:null===(fe=Ol.referData)||void 0===fe?void 0:fe.peopleTypes}},{label:null===(be=Vl.SAPID)||void 0===be?void 0:be.Label,name:"SAPID",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(he=Vl.SAPID)||void 0===he?void 0:he.FieldRequired,message:"".concat(null===(ge=Vl.SAPID)||void 0===ge?void 0:ge.Label," is required")}],inputprops:{maxLength:8}},{label:null===(xe=Vl.ContractNumber)||void 0===xe?void 0:xe.Label,name:"ContractNumber",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(ye=Vl.ContractNumber)||void 0===ye?void 0:ye.FieldRequired,message:"".concat(null===(Ne=Vl.ContractNumber)||void 0===Ne?void 0:Ne.Label," is required")}]},{label:"Person #",name:"Id",className:"col-span-12 lg:col-span-6 mb-0",inputprops:{disabled:!0}},{label:null===(Ie=Vl.PositionId)||void 0===Ie?void 0:Ie.Label,name:"PositionId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(De=Vl.PositionId)||void 0===De?void 0:De.FieldRequired,message:"".concat(null===(je=Vl.PositionId)||void 0===je?void 0:je.Label," is required")}],inputprops:{options:null===(Ce=Ol.referData)||void 0===Ce?void 0:Ce.positions}},{label:"Active",name:"Active",className:"col-span-12 lg:col-span-6 mb-0",type:"check"},{label:null===(qe=Vl.HotelCheck)||void 0===qe?void 0:qe.Label,name:"HotelCheck",className:"col-span-12 lg:col-span-6 mb-0",type:"check",rules:[{required:null===(Fe=Vl.HotelCheck)||void 0===Fe?void 0:Fe.FieldRequired,message:"".concat(null===(we=Vl.HotelCheck)||void 0===we?void 0:we.Label," is required")}]},{label:null===(Le=Vl.RosterId)||void 0===Le?void 0:Le.Label,name:"RosterId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Ze=Vl.RosterId)||void 0===Ze?void 0:Ze.FieldRequired,message:"".concat(null===(Se=Vl.RosterId)||void 0===Se?void 0:Se.Label," is required")}],inputprops:{options:null===(Pe=Ol.referData)||void 0===Pe?void 0:Pe.rosters}},{label:"Next Roster Start",name:"NextRosterDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date"},{label:null===(Re=Vl.LocationId)||void 0===Re?void 0:Re.Label,name:"LocationId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Ee=Vl.LocationId)||void 0===Ee?void 0:Ee.FieldRequired,message:"".concat(null===(Ae=Vl.LocationId)||void 0===Ae?void 0:Ae.Label," is required")}],inputprops:{options:null===(Me=Ol.referData)||void 0===Me?void 0:Me.locations.filter((function(e){return 1!==e.onSite}))}},{label:null===(Ge=Vl.FlightGroupMasterId)||void 0===Ge?void 0:Ge.Label,name:"FlightGroupMasterId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(ke=Vl.FlightGroupMasterId)||void 0===ke?void 0:ke.FieldRequired,message:"".concat(null===(Te=Vl.FlightGroupMasterId)||void 0===Te?void 0:Te.Label," is required")}],inputprops:{options:null===(Ve=Ol.referData)||void 0===Ve?void 0:Ve.transportGroups}},{label:null===(Ye=Vl.SiteContactEmployeeId)||void 0===Ye?void 0:Ye.Label,name:"SiteContactEmployeeId",className:"col-span-12 lg:col-span-6 mb-0",type:"searchSelect",rules:[{required:null===(Oe=Vl.SiteContactEmployeeId)||void 0===Oe?void 0:Oe.FieldRequired,message:"".concat(null===(Ue=Vl.SiteContactEmployeeId)||void 0===Ue?void 0:Ue.Label," is required")}],inputprops:{fetchOptions:function(e){return(0,t.Z)({method:"post",url:"tas/employee/searchshort",data:{model:{keyWord:e},pageIndex:0,pageSize:100}}).then((function(e){return e.data.data.map((function(e){return{label:"".concat(e.Firstname," ").concat(e.Lastname," /").concat(e.Mobile,"/"),value:e.Id}}))}))},showSearch:!0,editName:["SiteContactEmployeeFirstname","SiteContactEmployeeLastname"],placeholder:"Select user",allowClear:!0}}],Jl=[{label:null===(ze=Vl.EmergencyContactName)||void 0===ze?void 0:ze.Label,name:"EmergencyContactName",className:"col-span-6 mb-0",rules:[{required:null===(Be=Vl.EmergencyContactName)||void 0===Be?void 0:Be.FieldRequired,message:"".concat(null===(He=Vl.EmergencyContactName)||void 0===He?void 0:He.Label," is required")}]},{label:null===(We=Vl.EmergencyContactMobile)||void 0===We?void 0:We.Label,name:"EmergencyContactMobile",className:"col-span-6 mb-0",rules:[{required:null===(_e=Vl.EmergencyContactMobile)||void 0===_e?void 0:_e.FieldRequired,message:"".concat(null===(Ke=Vl.EmergencyContactMobile)||void 0===Ke?void 0:Ke.Label," is required")},{pattern:R,message:"Invalid phone number"}],inputprops:{className:"w-full",maxLength:15}},{label:null===(Je=Vl.Mobile)||void 0===Je?void 0:Je.Label,name:"Mobile",className:"col-span-6 mb-0",type:"number",rules:[{required:null===($e=Vl.Mobile)||void 0===$e?void 0:$e.FieldRequired,message:"".concat(null===(Qe=Vl.Mobile)||void 0===Qe?void 0:Qe.Label," is required")},{pattern:S,message:"".concat(null===(Xe=Vl.Mobile)||void 0===Xe?void 0:Xe.Label," must be 8 digit")}],inputprops:{prefix:"+976",className:"w-full",maxLength:8}},{label:null===(el=Vl.PersonalMobile)||void 0===el?void 0:el.Label,name:"PersonalMobile",className:"col-span-6 mb-0",type:"number",rules:[{required:null===(ll=Vl.PersonalMobile)||void 0===ll?void 0:ll.FieldRequired,message:"".concat(null===(al=Vl.PersonalMobile)||void 0===al?void 0:al.Label," is required")},{pattern:S,message:"".concat(null===(nl=Vl.PersonalMobile)||void 0===nl?void 0:nl.Label," must be 8 digit")}],inputprops:{prefix:"+976",className:"w-full",maxLength:8}},{label:null===(ol=Vl.PickUpAddress)||void 0===ol?void 0:ol.Label,name:"PickUpAddress",className:"col-span-6 mb-0",type:"textarea",rules:[{required:null===(tl=Vl.PickUpAddress)||void 0===tl?void 0:tl.FieldRequired,message:"".concat(null===(il=Vl.PickUpAddress)||void 0===il?void 0:il.Label," is required")}]},{label:null===(sl=Vl.FrequentFlyer)||void 0===sl?void 0:sl.Label,name:"FrequentFlyer",className:"col-span-6 mb-0",rules:[{required:null===(rl=Vl.FrequentFlyer)||void 0===rl?void 0:rl.FieldRequired,message:"".concat(null===(dl=Vl.FrequentFlyer)||void 0===dl?void 0:dl.Label," is required")}]}],$l=[{type:"component",component:(0,Z.jsx)(Z.Fragment,{children:null===(ul=Ol.referData)||void 0===ul||null===(cl=ul.fieldsOfGroups)||void 0===cl?void 0:cl.map((function(e,l){var a;return(0,Z.jsx)(r.Z.Item,{name:e.Id,label:e.Description,className:"col-span-12 lg:col-span-6 mb-0",children:(0,Z.jsx)(x.Z,{showSearch:!0,allowClear:!0,filterOption:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.children)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},children:null===(a=e.details)||void 0===a?void 0:a.map((function(e,l){return(0,Z.jsx)(x.Z.Option,{value:e.Id,children:e.Description},l)}))})},"g-fields-".concat(l))}))})}],Ql=[{type:"component",component:(0,Z.jsx)(r.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.NationalityId!==l.NationalityId},children:function(e){e.getFieldValue;var l,a,n,o,t,i,s,u,c,m,p,v=null===(l=Ol.referData)||void 0===l||null===(a=l.nationalities)||void 0===a?void 0:a.find((function(e){return e.value===pl.getFieldValue("NationalityId")}));return"MN"!==(null===v||void 0===v?void 0:v.Code)&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(r.Z.Item,{label:null===(n=Vl.PassportNumber)||void 0===n?void 0:n.Label,name:"PassportNumber",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(o=Vl.PassportExpiry)||void 0===o?void 0:o.FieldRequired,message:"".concat(null===(t=Vl.PassportNumber)||void 0===t?void 0:t.Label," is required")}],children:(0,Z.jsx)(d.Z,{})}),(0,Z.jsx)(r.Z.Item,{label:null===(i=Vl.PassportName)||void 0===i?void 0:i.Label,name:"PassportName",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(s=Vl.PassportExpiry)||void 0===s?void 0:s.FieldRequired,message:"".concat(null===(u=Vl.PassportName)||void 0===u?void 0:u.Label," is required")},{pattern:P,message:"The input is not valid name!"}],children:(0,Z.jsx)(d.Z,{})}),(0,Z.jsx)(r.Z.Item,{label:null===(c=Vl.PassportExpiry)||void 0===c?void 0:c.Label,name:"PassportExpiry",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(m=Vl.PassportExpiry)||void 0===m?void 0:m.FieldRequired,message:"".concat(null===(p=Vl.PassportExpiry)||void 0===p?void 0:p.Label," is required")}],children:(0,Z.jsx)(y.Z,{})})]})}})},{label:"Passport Image",name:"PassportRawImage",className:"col-span-12 lg:col-span-7 mb-0",type:"image"}],Xl=[{name:"PassportNumber",type:"text"},{name:"PassportName",type:"text"},{name:"PassportExpiry",type:"date"},{name:"PassportImage",type:"image"}],ea=[{label:"",name:"FullName",alignment:"left",wrap:!0,cellRender:function(e){var l,a;return(0,Z.jsx)("div",{className:"flex items-center",children:(0,Z.jsx)(w.Link,{to:"/tas/people/search/".concat(null===(l=e.data)||void 0===l?void 0:l.EmployeeId),children:(0,Z.jsxs)("button",{type:"button",className:"text-blue-500 hover:underline whitespace-normal",children:[e.value," (",null===(a=e.data)||void 0===a?void 0:a.EmployeeId,")"]})})})}},{label:"ADAccount",name:"ADAccount",alignment:"left",cellRender:function(e){return(0,Z.jsx)("div",{children:"boolean"===typeof e.value?e.value?"":(0,Z.jsx)(v.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})}},{label:"SAP ID",name:"SAPID",alignment:"center",width:"60px",cellRender:function(e){return(0,Z.jsx)("div",{children:"boolean"===typeof e.value?e.value?"":(0,Z.jsx)(v.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})}},{label:"Mobile",name:"Mobile",alignment:"center",width:"60px",cellRender:function(e){return(0,Z.jsx)("div",{children:"boolean"===typeof e.value?e.value?"":(0,Z.jsx)(v.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})}}],la=function(e){var l=0;return Pl&&Pl.map((function(a,n){null!==e&&void 0!==e&&e.find((function(e){return e.name===a.name[0]}))&&l++})),l>0&&(0,Z.jsx)(u.ErrorTabElement,{children:l})},aa=[{label:(0,Z.jsxs)("div",{className:"font-normal",children:["Personal ",la([].concat(_l))]}),key:0,forceRender:!0,children:(0,Z.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,Z.jsx)(u.FormItemRender,{fields:_l,form:pl,editData:ml},"t-item-1c")},"t-item-0")},{label:(0,Z.jsxs)("div",{children:["On Site ",la(Kl)]}),key:1,forceRender:!0,children:(0,Z.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,Z.jsx)(u.FormItemRender,{fields:Kl,form:pl,editData:ml},"t-item-2c")},"t-item-1")},{label:(0,Z.jsxs)("div",{children:["Off Site ",la([].concat(Jl,[{name:"PersonalMobile"}]))]}),key:2,forceRender:!0,children:(0,Z.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,Z.jsx)(u.FormItemRender,{fields:Jl,form:pl,editData:ml},"t-item-3c")},"t-item-2")},{label:(0,Z.jsxs)("div",{children:["Group ",la([{label:"UG Incident CT",name:"ugIncidentCt",className:"col-span-12 lg:col-span-6 mb-0",type:"select",inputprops:{options:[]}},{label:"OTUP Grouping",name:"otup",className:"col-span-12 lg:col-span-6 mb-0",type:"select",inputprops:{options:[]}},{label:"OTUP Grouping",name:"otup",className:"col-span-6 lg:col-span-6 mb-0",type:"select",inputprops:{options:[]}},{label:"OTUP Grouping",name:"otup",className:"col-span-12 lg:col-span-6 mb-0",type:"select",inputprops:{options:[]}},{label:"EmployeeGroup",name:"employeeGroup",className:"col-span-12 lg:col-span-6 mb-0",type:"select",inputprops:{options:[]}},{label:"Category",name:"category",className:"col-span-12 lg:col-span-6 mb-0",type:"select",inputprops:{options:[]}},{label:"UG Cage Users",name:"ugCageUsers",className:"col-span-12 lg:col-span-6 mb-0",type:"select",inputprops:{options:[]}},{label:"Pack Meal",name:"packMeal",className:"col-span-12 lg:col-span-6 mb-0",type:"select",inputprops:{options:[]}},{label:"Leaders Onsite",name:"leaderOnsite",className:"col-span-12 lg:col-span-6 mb-0",type:"select",inputprops:{options:[]}},{label:"UG Group",name:"uggroup",className:"col-span-12 lg:col-span-6 mb-0",type:"select",inputprops:{options:[]}},{label:"UG MOS",name:"ugMos",className:"col-span-12 lg:col-span-6 mb-0",type:"select",inputprops:{options:[]}},{label:"Work Hour",name:"workHour",className:"col-span-12 lg:col-span-6 mb-0",type:"select",inputprops:{options:[]}},{label:"Point of Origin",name:"PointofOrigin",className:"col-span-12 lg:col-span-6 mb-0",type:"select",inputprops:{options:[]}},{label:"PPE Issue Contract",name:"ppe",className:"col-span-12 lg:col-span-6 mb-0",type:"select",inputprops:{options:[]}},{label:"Vaccine",name:"vaccine",className:"col-span-12 lg:col-span-6 mb-0",type:"select",inputprops:{options:[]}},{label:"Workforce Kiosk Enrolment",name:"workforce",className:"col-span-12 lg:col-span-7 mb-0",type:"select",inputprops:{options:[]}}])]}),key:3,forceRender:!0,children:(0,Z.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,Z.jsx)(u.FormItemRender,{fields:$l,form:pl,editData:ml},"t-item-4c")},"t-item-3")},{label:(0,Z.jsxs)("div",{children:["Citizenship ",la(function(){if(null!==pl&&void 0!==pl&&pl.getFieldValue("NationalityId")){var e,l,a=null===(e=Ol.referData)||void 0===e||null===(l=e.nationalities)||void 0===l?void 0:l.find((function(e){return e.value===pl.getFieldValue("NationalityId")}));return"MN"!==(null===a||void 0===a?void 0:a.Code)?[{label:"Passport Number",name:"PassportNumber",rules:[{required:!0,message:"Passport Number is required"}]},{label:"Name On Passport",name:"PassportName",rules:[{required:!0,message:"Name on password is required"}]},{label:"Passport Expiry Date",name:"PassportExpiry",rules:[{required:!0,message:"Password expiry date is required"}]}]:[]}return[]}())]}),key:4,forceRender:!0,children:(0,Z.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,Z.jsx)(u.FormItemRender,{fields:Ql,form:pl,editData:ml},"t-item-5c")},"t-item-4")}];return(0,Z.jsxs)(Z.Fragment,{children:[Ol.customLoading?(0,Z.jsx)("div",{className:"animate-skeleton h-[400px] flex rounded-ot shadow-md col-span-12"}):(0,Z.jsxs)("div",{className:"bg-white rounded-ot p-4 col-span-12 shadow-md mb-1 ".concat(fl),children:[(0,Z.jsx)(r.Z,(0,n.Z)((0,n.Z)({form:pl},E),{},{labelAlign:"left",labelWrap:!0,onFinish:function(e){if(Rl(null),Ll(!0),"temp"===(null===vl||void 0===vl?void 0:vl.DocumentTag)){var l,a,o=[],i=new FormData;Object.keys(e).map((function(l){isNaN(l)||o.push({GroupMasterId:parseInt(l),GroupDetailId:e[l]?e[l]:""}),"PassportRawImage"!==l&&"SiteContactEmployeeId"!==l&&("Gender"===l&&i.append(l,e[l]?1:0),"CompletionDate"===l||"CommenceDate"===l||"Dob"===l?i.append(l,e[l]?D()(e[l]).format("YYYY-MM-DD"):""):i.append(l,e[l]?e[l]:"")),"SiteContactEmployeeId"===l&&("string"===typeof e[l]?i.append(l,null!==ml&&void 0!==ml&&ml.SiteContactEmployeeId?null===ml||void 0===ml?void 0:ml.SiteContactEmployeeId:""):i.append(l,e[l]?e[l]:""))})),i.append("PassportRawImage",null!==(l=e.PassportRawImage)&&void 0!==l&&l.file?null===(a=e.PassportRawImage)||void 0===a?void 0:a.file:""),i.append("id",null===Ol||void 0===Ol?void 0:Ol.userProfileData.Id),(0,t.Z)({method:"patch",url:"tas/employee",data:i}).then(function(){var e=(0,p.Z)((0,m.Z)().mark((function e(l){var a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,t.Z)({method:"post",url:"tas/groupmembers/".concat(null===Ol||void 0===Ol||null===(a=Ol.userProfileData)||void 0===a?void 0:a.Id),data:o}).then((function(e){Gl(!1),gl(null===Ol||void 0===Ol?void 0:Ol.userProfileData.Id),bl()})).catch((function(e){Ll(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(l){return e.apply(this,arguments)}}()).catch((function(e){var l=JSON.parse(e.response.data.message);l&&l.length>0&&Bl.error({message:"Data Duplicated",duration:0,description:(0,Z.jsx)("div",{children:(0,Z.jsxs)("table",{className:"border-collapse border border-gray-200 text-xs mt-5",children:[(0,Z.jsx)("thead",{children:(0,Z.jsxs)("tr",{className:"text-[11px] font-medium",children:[(0,Z.jsx)("th",{className:"border border-gray-200"}),(0,Z.jsx)("th",{className:"border border-gray-200 px-1",children:"ADAccount"}),(0,Z.jsx)("th",{className:"border border-gray-200 px-1",children:"SAP ID #"}),(0,Z.jsx)("th",{className:"border border-gray-200 px-1",children:"Mobile"})]})}),(0,Z.jsx)("tbody",{children:null===l||void 0===l?void 0:l.map((function(e){return(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{className:"border border-gray-200 text-center",children:(0,Z.jsx)(w.Link,{to:"/tas/people/search/".concat(e.EmployeeId),children:(0,Z.jsxs)("span",{className:"text-blue-500 hover:underline cursor-pointer",children:[e.FullName," (",e.EmployeeId,")"]})})}),(0,Z.jsx)("td",{className:"border border-gray-200 text-center",children:"boolean"===typeof e.ADAccount?e.ADAccount?"":(0,Z.jsx)(v.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""}),(0,Z.jsx)("td",{className:"border border-gray-200 text-center",children:"boolean"===typeof e.SAPID?e.SAPID?"":(0,Z.jsx)(v.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""}),(0,Z.jsx)("td",{className:"border border-gray-200 text-center",children:"boolean"===typeof e.Mobile?e.Mobile?"":(0,Z.jsx)(v.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})]})}))})]})})})})).then((function(){return Ll(!1)}))}else{var s=[],r={};Object.keys(e).map((function(l){isNaN(l)||s.push({GroupMasterId:parseInt(l),GroupDetailId:e[l]?e[l]:""}),"PassportImage"!==l&&"SiteContactEmployeeId"!==l?r[l]="Gender"===l?e[l]:"CompletionDate"===l||"CommenceDate"===l||"Dob"===l?e[l]?D()(e[l]).format("YYYY-MM-DD"):"":e[l]?e[l]:"":"SiteContactEmployeeId"===l&&("string"===typeof e[l]?r[l]=null!==ml&&void 0!==ml&&ml.SiteContactEmployeeId?null===ml||void 0===ml?void 0:ml.SiteContactEmployeeId:"":r[l]=e[l]?e[l]:"")})),(0,t.Z)({method:"put",url:"tas/requestdocumentprofilechange",data:(0,n.Z)({},r)}).then(function(){var e=(0,p.Z)((0,m.Z)().mark((function e(l){var a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,t.Z)({method:"post",url:"tas/groupmembers/".concat(null===Ol||void 0===Ol||null===(a=Ol.userProfileData)||void 0===a?void 0:a.Id),data:s}).then((function(e){Gl(!1),bl()})).catch((function(e){Ll(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(l){return e.apply(this,arguments)}}()).catch((function(e){var l=JSON.parse(e.response.data.message);l&&l.length>0&&Bl.error({message:"Validation Warning",duration:0,description:(0,Z.jsx)("div",{children:(0,Z.jsx)(u.Table,{data:l,columns:ea,containerClass:"shadow-none border",pager:!1})})})})).then((function(){return Ll(!1)}))}},className:"bg-white rounded-lg",onFinishFailed:function(e){e&&Rl(e.errorFields)},disabled:!Ml,children:(0,Z.jsx)(N.Z,{defaultActiveKey:"1",type:"card",size:"middle",items:aa,activeKey:Nl,onTabClick:function(e){return Il(e)}})})),(0,Z.jsx)("div",{className:"mt-3 flex justify-end",children:hl?null:Ml?(0,Z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Z.jsx)(u.Button,{type:"primary",loading:wl,onClick:function(){return pl.submit()},icon:(0,Z.jsx)(f.Z,{}),children:"Save"}),(0,Z.jsx)(u.Button,{onClick:function(){return Gl(!1)},disabled:wl,children:"Cancel"})]}):(0,Z.jsx)(u.Button,{onClick:function(){return Gl(!0)},children:"Edit"})})]}),Hl]})},M=a(8251),G=a(10202),k=a(82241);var T=function(e){var l=e.data,a=(0,i.useContext)(L.V).state,n=function(e,l){var n,o,t,i,s,r,d,u,c;switch(e){case"Dob":case"CommenceDate":return l?D()(l).format("YYYY-MM-DD"):"";case"Gender":return"0"==l?"Female":"Male";case"EmployerId":return null===(n=a.referData.employers.find((function(e){return l})))||void 0===n?void 0:n.label;case"LocationId":return null===(o=a.referData.locations.find((function(e){return l})))||void 0===o?void 0:o.label;case"NationalityId":return null===(t=a.referData.nationalities.find((function(e){return l})))||void 0===t?void 0:t.label;case"PeopleTypeId":return null===(i=a.referData.peopleTypes.find((function(e){return l})))||void 0===i?void 0:i.label;case"PositionId":return null===(s=a.referData.positions.find((function(e){return l})))||void 0===s?void 0:s.label;case"RosterId":return null===(r=a.referData.rosters.find((function(e){return l})))||void 0===r?void 0:r.label;case"StateId":return null===(d=a.referData.states.find((function(e){return l})))||void 0===d?void 0:d.label;case"CostCodeId":return null===(u=a.referData.costCodes.find((function(e){return l})))||void 0===u?void 0:u.label;case"DepartmentId":return null===(c=a.referData.departments.find((function(e){return l})))||void 0===c?void 0:c.Name;default:return l}},o=[{label:"Field Name",name:"FieldName"},{label:"Old Value",name:"OldValue",cellRender:function(e){return(0,Z.jsx)("div",{children:n(e.data.FieldName,e.data.OldValue)})}},{label:"New Value",name:"NewValue",cellRender:function(e){return(0,Z.jsx)("div",{children:n(e.data.FieldName,e.data.NewValue)})}}];return(0,Z.jsx)(u.Table,{data:l,columns:o,allowColumnReordering:!1,containerClass:"shadow-none",keyExpr:"FieldName",pager:{pageSize:[100]}})},V=a(52957);var Y=function(e){var l,a,s,r,d=e.form,c=e.disabled,m=e.temporaryData,p=(0,i.useContext)(L.V).state,v=(0,i.useState)(!1),f=(0,o.Z)(v,2),b=f[0],h=f[1];return(0,Z.jsxs)(u.Form,{form:d,className:"max-w-[600px]",onFinish:function(e){h(!0),(0,t.Z)({method:"put",url:"tas/requestdocumentprofilechange/temp",data:(0,n.Z)((0,n.Z)({},e),{},{StartDate:e.StartDate?D()(e.StartDate).format("YYYY-MM-DD"):null,EndDate:e.EndDate?D()(e.EndDate).format("YYYY-MM-DD"):null,Id:null===m||void 0===m?void 0:m.Id})}).then((function(e){})).catch((function(e){})).then((function(){return h(!1)}))},disabled:c,children:[(0,Z.jsx)(u.Form.Item,{name:"EmployerId",label:"Employer",className:"col-span-12 mb-2",children:(0,Z.jsx)(x.Z,{options:null===(l=p.referData)||void 0===l?void 0:l.employers,filterOption:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}),(0,Z.jsx)(u.Form.Item,{name:"DepartmentId",label:"Department",className:"col-span-12 mb-2",children:(0,Z.jsx)(V.Z,{treeData:null===(a=p.referData)||void 0===a?void 0:a.departments,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},onSelect:function(e,l){return d.setFieldValue("CostCodeId",l.CostCodeId)},showSearch:!0,allowClear:!0})}),(0,Z.jsx)(u.Form.Item,{name:"CostCodeId",label:"Cost Code",className:"col-span-12 mb-2",children:(0,Z.jsx)(x.Z,{options:null===(s=p.referData)||void 0===s?void 0:s.costCodes,filterOption:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}),(0,Z.jsx)(u.Form.Item,{name:"PositionId",label:"Position",className:"col-span-12 mb-2",children:(0,Z.jsx)(x.Z,{options:null===(r=p.referData)||void 0===r?void 0:r.positions,filterOption:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}),(0,Z.jsx)(u.Form.Item,{name:"StartDate",label:"Start Date",className:"col-span-12 mb-2",children:(0,Z.jsx)(y.Z,{})}),(0,Z.jsx)(u.Form.Item,{name:"EndDate",label:"End Date",className:"col-span-12 mb-2",children:(0,Z.jsx)(y.Z,{})}),c?null:(0,Z.jsx)(u.Form.Item,{className:"col-span-12 flex justify-end",children:(0,Z.jsx)(u.Button,{type:"primary",onClick:d.submit,loading:b,children:"Save"})})]})};var O=function(){var e=(0,i.useState)(null),l=(0,o.Z)(e,2),a=l[0],m=l[1],p=(0,i.useState)(!0),v=(0,o.Z)(p,2),f=v[0],b=v[1],h=(0,i.useState)(null),g=(0,o.Z)(h,2),x=g[0],y=g[1],N=(0,i.useState)(!1),I=(0,o.Z)(N,2),j=I[0],C=I[1],q=(0,i.useState)([]),F=(0,o.Z)(q,2),w=F[0],S=F[1],P=(0,i.useState)(null),R=(0,o.Z)(P,2),E=R[0],V=R[1],O=(0,i.useState)([]),U=(0,o.Z)(O,2),z=(U[0],U[1]),B=(0,i.useState)(null),H=(0,o.Z)(B,2),W=H[0],_=H[1],K=(0,i.useState)(!1),J=(0,o.Z)(K,2),$=J[0],Q=J[1],X=(0,i.useState)([]),ee=(0,o.Z)(X,2),le=ee[0],ae=ee[1],ne=(0,i.useState)(null),oe=(0,o.Z)(ne,2),te=oe[0],ie=oe[1],se=(0,i.useState)(!1),re=(0,o.Z)(se,2),de=re[0],ue=re[1],ce=(0,i.useState)(null),me=(0,o.Z)(ce,2),pe=me[0],ve=me[1],fe=(0,i.useState)(null),be=(0,o.Z)(fe,2),he=be[0],ge=be[1],xe=r.Z.useForm(),ye=(0,o.Z)(xe,1)[0],Ne=r.Z.useForm(),Ie=(0,o.Z)(Ne,1)[0],De=r.Z.useForm(),je=(0,o.Z)(De,1)[0],Ce=(0,s.UO)().documentId,qe=(0,k.Z)(),Fe=(0,i.useContext)(L.V),we=Fe.state,Le=Fe.action,Ze="requestDocumentDetail_".concat(Ce),Se=(0,s.s0)();(0,i.useEffect)((function(){return we.connectionMultiViewer&&we.userInfo&&(Pe(),we.connectionMultiViewer.on("UsersInScreen",(function(e,l){var a=l.map((function(e){return{name:e.userName.split("_")[0],role:e.userName.split("_")[1],color:(0,G.Z)()}}));Le.setMultiViewers(a.filter((function(e){var l,a;return e.name!=="".concat(null===(l=we.userInfo)||void 0===l?void 0:l.Firstname," ").concat(null===(a=we.userInfo)||void 0===a?void 0:a.Lastname)})))}))),function(){we.connectionMultiViewer&&Re()}}),[we.connectionMultiViewer,we.userInfo]),(0,i.useEffect)((function(){Ce&&(Le.changeMenuKey("/request/task"),t.Z.all(["tas/requestdocumentprofilechange/".concat(Ce),"tas/requestdocumenthistory/".concat(Ce),"tas/requestdocument/myinfo","tas/requestdocumentprofilechange/temp/".concat(Ce)].map((function(e){return t.Z.get(e)}))).then(t.Z.spread((function(e,l,a,o){e.data.Id?(m(e.data),Ee(e.data.EmployeeId)):Q(!0),ae(l.data),ie(a.data),ge(o.data),je.setFieldsValue((0,n.Z)((0,n.Z)({},o.data),{},{StartDate:o.data.StartDate?D()(o.data.StartDate):null,EndDate:o.data.EndDate?D()(o.data.EndDate):null}))}))).catch((function(){})).then((function(){return b(!1)})))}),[Ce]),(0,i.useEffect)((function(){a&&Me()}),[a]),(0,i.useEffect)((function(){w&&Ge()}),[w]);var Pe=function(){try{var e,l,a,n;null===(e=we.connectionMultiViewer)||void 0===e||e.invoke("JoinScreen","".concat(null===(l=we.userInfo)||void 0===l?void 0:l.Firstname," ").concat(null===(a=we.userInfo)||void 0===a?void 0:a.Lastname,"-").concat(null===(n=we.userInfo)||void 0===n?void 0:n.Role),Ze)}catch(o){}},Re=function(){var e,l,a;Le.setMultiViewers([]),null===(e=we.connectionMultiViewer)||void 0===e||e.invoke("LeaveScreen","".concat(null===(l=we.userInfo)||void 0===l?void 0:l.Firstname," ").concat(null===(a=we.userInfo)||void 0===a?void 0:a.Role),Ze)},Ee=function(e){(0,t.Z)({method:"get",url:"tas/employee/profile/".concat(e)}).then((function(e){Le.saveUserProfileData(e.data),ve(e.data)})).catch((function(e){}))},Ae=function(){(0,t.Z)({method:"get",url:"tas/requestdocumentprofilechange/".concat(Ce)}).then((function(e){m(e.data)})).catch((function(e){})).then((function(){return b(!1)}))},Me=function(e){(0,t.Z)({method:"get",url:"/tas/requestgroupconfig/groupandmembers/".concat(Ce)}).then((function(e){S(e.data)}))},Ge=function(){(0,t.Z)({method:"get",url:"/tas/requestgroupconfig/documentroute/".concat(Ce)}).then((function(e){z(e.data),ke(e.data)})).catch((function(e){})).then((function(){return b(!1)}))},ke=function(e){var l=e.find((function(e){return 1===e.CurrentPosition}));if(_(l),"dataapproval"===(null===l||void 0===l?void 0:l.GroupTag))V(null);else if("Requester"===(null===l||void 0===l?void 0:l.GroupTag)){var a=e.findIndex((function(e){return 1===(null===e||void 0===e?void 0:e.CurrentPosition)})),n=e[a+1],o=w.find((function(e){return e.id===(null===n||void 0===n?void 0:n.GroupId)}));if(o){var t=[];o.groupMembers.map((function(e){t.push({value:e.employeeId,label:e.fullName})})),ye.setFieldValue("nextGroupName",null===o||void 0===o?void 0:o.GroupName),ye.setFieldValue("nextGroupId",null===o||void 0===o?void 0:o.id),ye.setFieldValue("assignEmployeeOptions",t)}V(o)}},Te=function(e){y(e),"Approve"===e||"Complete"===e||"Decline"===e?ye.submit():C(!0)},Ve=(0,i.useMemo)((function(){return 0===(null===W||void 0===W?void 0:W.OrderIndex)&&"Requester"===(null===W||void 0===W?void 0:W.GroupTag)}),[W]);return(0,Z.jsxs)("div",{children:[f?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("div",{className:"animate-skeleton h-[230px] flex rounded-ot mb-5 shadow-md"}),(0,Z.jsx)("div",{className:"animate-skeleton h-[400px] flex rounded-ot shadow-md"})]}):$?(0,Z.jsxs)("div",{className:"bg-white rounded-ot px-4 py-3 min-h-[300px] flex flex-col justify-center items-center",children:[(0,Z.jsx)("div",{className:"text-xl",children:"Not Found Document"}),(0,Z.jsx)(u.Button,{htmlType:"button",type:"primary",className:"mt-5",onClick:function(){return Se("/request/task")},children:"Back to List"})]}):(0,Z.jsxs)("div",{className:"grid grid-cols-12 gap-y-5 relative gap-x-3",children:[(0,Z.jsx)(u.RequestDocumentHeader,{documentDetail:a,profileData:pe}),(0,Z.jsx)(u.Accordion,{className:"col-span-12 shadow-md rounded-ot overflow-hidden",title:"Travel Calendar",children:(0,Z.jsx)("div",{className:"p-4",children:(0,Z.jsx)(u.ProfileCalendar,{profile:pe})})}),"temp"===(null===a||void 0===a?void 0:a.DocumentTag)?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(u.Accordion,{className:"col-span-12 shadow-md rounded-ot overflow-hidden",title:"Temporary",children:(0,Z.jsx)("div",{className:"p-4",children:(0,Z.jsx)(Y,{form:je,temporaryData:he,disabled:M.Z.getDisabledStatus({documentData:a,userData:te,groupTag:null===W||void 0===W?void 0:W.GroupTag})})})}),(0,Z.jsx)(u.Accordion,{className:"col-span-12 shadow-md rounded-ot overflow-hidden",title:"Detail",children:(0,Z.jsx)("div",{className:"p-4 flex flex-col gap-5",children:(0,Z.jsx)(A,{data:null===a||void 0===a?void 0:a.employee,documentData:a,form:Ie,currentGroup:W,className:"shadow-none border",refreshData:Ae,getProfile:Ee,disabled:M.Z.getDisabledStatus({documentData:a,userData:te,groupTag:null===W||void 0===W?void 0:W.GroupTag})})})})]}):(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(u.Accordion,{className:"col-span-12 flex-1 shadow-md rounded-ot overflow-hidden",title:"Detail",children:(0,Z.jsx)("div",{className:"pt-4 flex flex-col gap-5",children:(0,Z.jsx)(A,{data:null===a||void 0===a?void 0:a.employee,documentData:a,form:Ie,currentGroup:W,className:"shadow-none pt-0",refreshData:Ae,disabled:M.Z.getDisabledStatus({documentData:a,userData:te,groupTag:null===W||void 0===W?void 0:W.GroupTag})})})}),(0,Z.jsx)(u.Accordion,{className:"col-span-12 w-full shadow-md rounded-ot overflow-hidden",title:"Changes",children:(0,Z.jsx)("div",{className:"pt-4",children:(0,Z.jsx)(T,{data:null===a||void 0===a?void 0:a.ChangeInfo})})})]})}),(0,Z.jsx)(u.Form,{form:ye,labelWrap:!0,className:"grid col-span-12",onFinish:function(e){ue(!0);"temp"===(null===a||void 0===a?void 0:a.DocumentTag)&&(0,n.Z)({},je.getFieldsValue()),"Approve"===x?(0,t.Z)({method:"put",url:"tas/requestdocument/approve",data:{id:Ce,nextGroupId:e.nextGroupId,assignEmployeeId:e.assignedEmployeeId,comment:e.comment,impersonateUserId:qe.get("impersonateuser")}}).then((function(e){C(!1),qe.get("impersonateuser")?Se("/request/impersonateuser/".concat(qe.get("impersonateuser"))):Se("/guest/request")})).catch((function(e){})).then((function(){return ue(!1)})):"Cancel"===x&&(0,t.Z)({method:"put",url:"tas/requestdocument/cancel",data:{id:Ce,comment:e.comment,impersonateUserId:qe.get("impersonateuser")}}).then((function(e){C(!1),qe.get("impersonateuser")?Se("/request/impersonateuser/".concat(qe.get("impersonateuser"))):Se("/guest/request")})).catch((function(e){})).then((function(){return ue(!1)}))},children:Ve?(0,Z.jsx)(u.Accordion,{title:"Request Document",className:"col-span-12 shadow-md rounded-ot overflow-hidden",children:(0,Z.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,Z.jsxs)("div",{children:["Comments:",(0,Z.jsx)(u.Form.Item,{className:"m-0",name:"comment",children:(0,Z.jsx)(d.Z.TextArea,{autoSize:{minRows:3,maxRows:5},maxLength:300,showCount:!0})})]}),(0,Z.jsx)("div",{className:"flex gap-10",children:E&&(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(u.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.nextGroupName!==l.nextGroupName},children:function(e){var l=e.getFieldValue;return(0,Z.jsxs)(u.Form.Item,{name:"nextGroupId",className:"mb-0",children:["Next Approval1: ",(0,Z.jsx)("span",{className:"font-bold",children:l("nextGroupName")})]})}})})}),(0,Z.jsx)("div",{className:"flex items-center gap-3 justify-end",children:(0,Z.jsx)(u.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.comment!==l.comment},children:function(e){var l=e.getFieldValue;Boolean(l("comment"));return null===E||void 0===E||E.GroupTag,(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(u.Button,{htmlType:"button",type:"primary",onClick:function(){return Te("Approve")},disabled:de,loading:de&&"Approve"===x,children:"Submit"}),(0,Z.jsx)(u.Button,{htmlType:"button",type:"danger",onClick:function(){return Te("Cancel")},disabled:de,children:"Cancel Request"})]})}})})]})}):(null===te||void 0===te?void 0:te.EmployeeId)===(null===a||void 0===a?void 0:a.RequestUserId)&&"Completed"!==(null===a||void 0===a?void 0:a.CurrentStatus)?(0,Z.jsx)(u.Accordion,{title:"Request Document",className:"col-span-12 shadow-md rounded-ot overflow-hidden",children:(0,Z.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,Z.jsxs)("div",{children:["Comments:",(0,Z.jsx)(u.Form.Item,{className:"m-0",name:"comment",children:(0,Z.jsx)(d.Z.TextArea,{autoSize:{minRows:3,maxRows:5},maxLength:300,showCount:!0})})]}),(0,Z.jsx)("div",{className:"flex items-center gap-3 justify-end",children:(0,Z.jsx)(u.Button,{htmlType:"button",type:"danger",onClick:function(){return Te("Cancel")},disabled:de,children:"Cancel Request"})})]})}):null}),(0,Z.jsx)(u.Accordion,{title:"Document History & Comments, Document Route",defaultOpen:!1,className:"col-span-12 shadow-md rounded-ot overflow-hidden",children:(0,Z.jsx)("div",{className:"grid grid-cols-12 items-start gap-4 p-4",children:(0,Z.jsx)(u.DocumentTimeline,{data:le})})})]}),(0,Z.jsx)(c.GI,{visible:j,showTitle:!1,height:120,width:350,children:(0,Z.jsx)("div",{children:function(e){switch(e){case"Approve":return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("div",{children:"Are you sure you want to approve this request?"}),(0,Z.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,Z.jsx)(u.Button,{type:"success",onClick:function(){return ye.submit()},loading:de,children:"Yes"}),(0,Z.jsx)(u.Button,{onClick:function(){return C(!1)},disabled:de,children:"No"})]})]});case"Cancel":return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("div",{children:"Are you sure you want to cancel this request?"}),(0,Z.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,Z.jsx)(u.Button,{type:"danger",onClick:function(){return ye.submit()},loading:de,children:"Yes"}),(0,Z.jsx)(u.Button,{onClick:function(){return C(!1)},disabled:de,children:"No"})]})]})}}(x)})})]})}},8251:function(e,l){var a={getDisabledStatus:function(e){var l,a,n=e.documentData,o=e.userData,t=e.groupTag;e.userGroupIds;return console.log("hello",n,o,t),"Completed"===t||"Cancelled"===t||(null!==n&&void 0!==n&&n.AssignedEmployeeId?!(null!==o&&void 0!==o&&null!==(l=o.LineManagerIds)&&void 0!==l&&l.includes(null===n||void 0===n?void 0:n.AssignedEmployeeId)||(null===n||void 0===n?void 0:n.AssignedEmployeeId)===(null===o||void 0===o?void 0:o.EmployeeId)||"Data Approval"===(null===o||void 0===o?void 0:o.Rolename)&&"linemanager"===t||"SystemAdministrator"===(null===o||void 0===o?void 0:o.Rolename)):!("SystemAdministrator"===(null===o||void 0===o?void 0:o.Rolename)||null!==o&&void 0!==o&&null!==(a=o.ApprovalGroupIds)&&void 0!==a&&a.includes(null===n||void 0===n?void 0:n.AssignedRouteConfigId)))},getActionPermission:function(e){var l,a,n=e.documentData,o=e.userData,t=e.groupTag,i=(e.userGroupIds,null);"Completed"===(null===n||void 0===n?void 0:n.CurrentStatus)||"Cancelled"===(null===n||void 0===n?void 0:n.CurrentStatus)?i=!1:i=null!==n&&void 0!==n&&n.AssignedEmployeeId?!!(null!==o&&void 0!==o&&null!==(l=o.LineManagerIds)&&void 0!==l&&l.includes(null===n||void 0===n?void 0:n.AssignedEmployeeId)||(null===n||void 0===n?void 0:n.AssignedEmployeeId)===(null===o||void 0===o?void 0:o.EmployeeId)||"Data Approval"===(null===o||void 0===o?void 0:o.Rolename)&&"linemanager"===t||"SystemAdministrator"===(null===o||void 0===o?void 0:o.Rolename)):!!("SystemAdministrator"===(null===o||void 0===o?void 0:o.Rolename)||null!==o&&void 0!==o&&null!==(a=o.ApprovalGroupIds)&&void 0!==a&&a.includes(null===n||void 0===n?void 0:n.AssignedRouteConfigId));return i},checkUpdateItinerary:function(e){var l,a=e.groupAndMembers,n=e.userData,o=!1,t=null===a||void 0===a?void 0:a.find((function(e){return"travelflight"===e.GroupTag}));return null!==n&&void 0!==n&&null!==(l=n.GroupIds)&&void 0!==l&&l.includes(null===t||void 0===t?void 0:t.GroupId)&&(o=!0),o}};l.Z=a},24957:function(e,l,a){a.d(l,{Z:function(){return r}});var n=a(87462),o=a(47313),t={icon:function(e,l){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:l}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:e}}]}},name:"close-circle",theme:"twotone"},i=a(17469),s=function(e,l){return o.createElement(i.Z,(0,n.Z)({},e,{ref:l,icon:t}))};var r=o.forwardRef(s)},53979:function(e,l,a){a.d(l,{Z:function(){return r}});var n=a(87462),o=a(47313),t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-12-12-28.3-18.7-45.3-18.7H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 176h256v112H384V176zm128 554c-79.5 0-144-64.5-144-144s64.5-144 144-144 144 64.5 144 144-64.5 144-144 144zm0-224c-44.2 0-80 35.8-80 80s35.8 80 80 80 80-35.8 80-80-35.8-80-80-80z"}}]},name:"save",theme:"filled"},i=a(17469),s=function(e,l){return o.createElement(i.Z,(0,n.Z)({},e,{ref:l,icon:t}))};var r=o.forwardRef(s)}}]);