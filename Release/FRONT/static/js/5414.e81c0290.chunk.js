"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[5414],{65414:function(e,n,l){l.r(n),l.d(n,{default:function(){return B}});var t=l(1413),o=l(29439),a=l(56573),i=l(47313),r=l(58467),s=l(65040),d=l(21975),u=l(2880),c=l(14261),m=l(74165),p=l(15861),v=l(24957),f=l(53979),h=l(12998),b=l(68197),g=l(59624),x=l(74294),y=l(93031),D=l(76047),I=l(10658),N=l.n(I),j=l(46146),C=l.n(j),q=l(69226),F=l.n(q),w=l(2135),Z=l(42614),L=l(46417);N().extend(C()),N().extend(F());var S=new RegExp(/^[0-9]{8}$/),R=new RegExp(/^[A-Za-z -]+$/g),P=new RegExp(/^[0-9 +]+$/),E={labelCol:{xs:{span:24},sm:{span:12},md:{span:8},lg:{span:12},xl:{span:8},xxl:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}};var A=function(e){var n,l,r,c,I,j,C,q,F,A,M,k,G,T,V,Y,B,z,O,U,H,_,W,J,K,$,Q,X,ee,ne,le,te,oe,ae,ie,re,se,de,ue,ce,me,pe,ve,fe,he,be,ge,xe,ye,De,Ie,Ne,je,Ce,qe,Fe,we,Ze,Le,Se,Re,Pe,Ee,Ae,Me,ke,Ge,Te,Ve,Ye,Be,ze,Oe,Ue,He,_e,We,Je,Ke,$e,Qe,Xe,en,nn,ln,tn,on,an,rn,sn,dn,un,cn,mn,pn,vn=e.data,fn=e.form,hn=e.documentData,bn=e.className,gn=e.refreshData,xn=e.disabled,yn=e.getProfile,Dn=e.profileFields,In=void 0===Dn?[]:Dn,Nn=(0,i.useState)(0),jn=(0,o.Z)(Nn,2),Cn=jn[0],qn=jn[1],Fn=(0,i.useState)(!0),wn=(0,o.Z)(Fn,2),Zn=(wn[0],wn[1]),Ln=(0,i.useState)(!1),Sn=(0,o.Z)(Ln,2),Rn=Sn[0],Pn=Sn[1],En=(0,i.useState)(null),An=(0,o.Z)(En,2),Mn=An[0],kn=An[1],Gn=(0,i.useState)(!1),Tn=(0,o.Z)(Gn,2),Vn=Tn[0],Yn=Tn[1],Bn=(0,i.useContext)(Z.V).state,zn=h.ZP.useNotification(),On=(0,o.Z)(zn,2),Un=On[0],Hn=On[1];(0,i.useEffect)((function(){if("temp"!==(null===hn||void 0===hn?void 0:hn.DocumentTag)&&vn&&fn){var e,n=(0,t.Z)((0,t.Z)({},vn),{},{Dob:null!==vn&&void 0!==vn&&vn.Dob?N()(null===vn||void 0===vn?void 0:vn.Dob):null,CommenceDate:null!==vn&&void 0!==vn&&vn.CommenceDate?N()(null===vn||void 0===vn?void 0:vn.CommenceDate):null,CompletionDate:null!==vn&&void 0!==vn&&vn.CompletionDate?N()(null===vn||void 0===vn?void 0:vn.CompletionDate):null,NextRosterDate:null!==vn&&void 0!==vn&&vn.NextRosterDate?N()(null===vn||void 0===vn?void 0:vn.NextRosterDate):null,PassportExpiry:null!==vn&&void 0!==vn&&vn.PassportExpiry?N()(null===vn||void 0===vn?void 0:vn.PassportExpiry):null});null===fn||void 0===fn||fn.setFieldsValue(n),null===(e=n.GroupData)||void 0===e||e.map((function(e){null===fn||void 0===fn||fn.setFieldValue(e.GroupMasterId,e.GroupDetailId)}))}}),[vn,fn]),(0,i.useEffect)((function(){var e;"temp"===(null===hn||void 0===hn?void 0:hn.DocumentTag)&&Bn.userProfileData&&(null===fn||void 0===fn||fn.setFieldsValue(null===Bn||void 0===Bn?void 0:Bn.userProfileData),_n.map((function(e){"date"===e.type&&null!==Bn&&void 0!==Bn&&Bn.userProfileData[e.name]&&(null===fn||void 0===fn||fn.setFieldValue(e.name,N()(null===Bn||void 0===Bn?void 0:Bn.userProfileData[e.name])))})),Wn.map((function(e){"date"===e.type&&null!==Bn&&void 0!==Bn&&Bn.userProfileData[e.name]&&(null===fn||void 0===fn||fn.setFieldValue(e.name,N()(null===Bn||void 0===Bn?void 0:Bn.userProfileData[e.name])))})),Xn.map((function(e){"date"===e.type&&null!==Bn&&void 0!==Bn&&Bn.userProfileData[e.name]&&(null===fn||void 0===fn||fn.setFieldValue(e.name,N()(null===Bn||void 0===Bn?void 0:Bn.userProfileData[e.name])))})),null===Bn||void 0===Bn||null===(e=Bn.userProfileData.GroupData)||void 0===e||e.map((function(e){null===fn||void 0===fn||fn.setFieldValue(e.GroupMasterId,e.GroupDetailId)})))}),[hn,Bn.userProfileData]);var _n=[{label:null===(n=In.NationalityId)||void 0===n?void 0:n.Label,name:"NationalityId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(l=In.NationalityId)||void 0===l?void 0:l.FieldRequired,message:"".concat(null===(r=In.NationalityId)||void 0===r?void 0:r.Label," is required")}],inputprops:{options:Bn.referData.nationalities}},{label:null===(c=In.Email)||void 0===c?void 0:c.Label,name:"Email",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(I=In.Email)||void 0===I?void 0:I.FieldRequired,message:"".concat(null===(j=In.Email)||void 0===j?void 0:j.Label," is required")},{type:"email",message:"The input is not valid E-mail!"}]},{label:null===(C=In.Gender)||void 0===C?void 0:C.Label,name:"Gender",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(q=In.Gender)||void 0===q?void 0:q.FieldRequired,message:"".concat(null===(F=In.Gender)||void 0===F?void 0:F.Label," is required")}],inputprops:{options:[{value:1,label:"Male"},{value:0,label:"Female"}]}},{label:null===(A=In.Dob)||void 0===A?void 0:A.Label,name:"Dob",className:"col-span-12 lg:col-span-6 mb-0",type:"date",rules:[{required:null===(M=In.Dob)||void 0===M?void 0:M.FieldRequired,message:"".concat(null===(k=In.Dob)||void 0===k?void 0:k.Label," is required")}]},{label:null===(G=In.Firstname)||void 0===G?void 0:G.Label,name:"Firstname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(T=In.Firstname)||void 0===T?void 0:T.FieldRequired,message:"".concat(null===(V=In.Firstname)||void 0===V?void 0:V.Label," is required")}]},{label:null===(Y=In.Lastname)||void 0===Y?void 0:Y.Label,name:"Lastname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(B=In.Lastname)||void 0===B?void 0:B.FieldRequired,message:"".concat(null===(z=In.Lastname)||void 0===z?void 0:z.Label," is required")}]},{label:null===(O=In.MFirstname)||void 0===O?void 0:O.Label,name:"MFirstname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(U=In.MFirstname)||void 0===U?void 0:U.FieldRequired,message:"".concat(null===(H=In.MFirstname)||void 0===H?void 0:H.Label," is required")}]},{label:null===(_=In.MLastname)||void 0===_?void 0:_.Label,name:"MLastname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(W=In.MLastname)||void 0===W?void 0:W.FieldRequired,message:"".concat(null===(J=In.MLastname)||void 0===J?void 0:J.Label," is required")}]},{label:null===(K=In.CommenceDate)||void 0===K?void 0:K.Label,name:"CommenceDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date",rules:[{required:null===($=In.CommenceDate)||void 0===$?void 0:$.FieldRequired,message:"".concat(null===(Q=In.CommenceDate)||void 0===Q?void 0:Q.Label," is required")}],inputprops:{format:"M/D/YYYY"}},{label:"Completion Date",name:"CompletionDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date",inputprops:{format:"M/D/YYYY"}},{label:null===(X=In.DepartmentId)||void 0===X?void 0:X.Label,name:"DepartmentId",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(ee=In.DepartmentId)||void 0===ee?void 0:ee.FieldRequired,message:"".concat(null===(ne=In.DepartmentId)||void 0===ne?void 0:ne.Label," is required")}],type:"treeSelect",inputprops:{treeData:Bn.referData.departments,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},allowClear:!0,showSearch:!0,filterTreeNode:function(e,n){var l;return(null!==(l=null===n||void 0===n?void 0:n.Name)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())}}},{label:null===(le=In.CostCodeId)||void 0===le?void 0:le.Label,name:"CostCodeId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(te=In.CostCodeId)||void 0===te?void 0:te.FieldRequired,message:"".concat(null===(oe=In.CostCodeId)||void 0===oe?void 0:oe.Label," is required")}],inputprops:{options:Bn.referData.costCodes}},{label:null===(ae=In.StateId)||void 0===ae?void 0:ae.Label,name:"StateId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(ie=In.StateId)||void 0===ie?void 0:ie.FieldRequired,message:"".concat(null===(re=In.StateId)||void 0===re?void 0:re.Label," is required")}],inputprops:{options:Bn.referData.states}},{type:"component",component:(0,L.jsx)(s.Z.Item,{className:"col-span-12 lg:col-span-6 mb-0",label:"AD Account",children:(0,L.jsxs)(b.Z,{gutter:8,children:[(0,L.jsx)(g.Z,{span:12,children:(0,L.jsx)(s.Z.Item,{name:"ADAccount",className:"mb-0",children:(0,L.jsx)(d.Z,{})})}),(0,L.jsx)(g.Z,{span:12,children:(0,L.jsx)(u.Button,{htmlType:"button",disabled:!Vn,onClick:function(){(0,a.Z)({method:"post",url:"tas/employee/checkadaccount",data:{employeeId:null===vn||void 0===vn?void 0:vn.Id,adAccount:null===fn||void 0===fn?void 0:fn.getFieldValue("ADAccount")}}).then((function(e){e.data.AdAccountValidationStatus?Un.success({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1,description:(0,L.jsx)("div",{})}):Un.error({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1,description:(0,L.jsx)("div",{children:e.data.EmployeeId&&(0,L.jsxs)(w.Link,{to:"/tas/people/search/".concat(e.data.EmployeeId),className:"text-blue-500 hover:underline",children:[e.data.Firstname," ",e.data.Lastname]})})})})).catch((function(e){})).then((function(){return Zn(!1)}))},children:"Account Check"})})]})},"component-ADAccount")}],Wn=[{label:null===(se=In.EmployerId)||void 0===se?void 0:se.Label,name:"EmployerId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(de=In.EmployerId)||void 0===de?void 0:de.FieldRequired,message:"".concat(null===(ue=In.EmployerId)||void 0===ue?void 0:ue.Label," is required")}],inputprops:{options:null===(ce=Bn.referData)||void 0===ce?void 0:ce.employers}},{label:null===(me=In.PeopleTypeId)||void 0===me?void 0:me.Label,name:"PeopleTypeId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(pe=In.PeopleTypeId)||void 0===pe?void 0:pe.FieldRequired,message:"".concat(null===(ve=In.PeopleTypeId)||void 0===ve?void 0:ve.Label," is required")}],inputprops:{options:null===(fe=Bn.referData)||void 0===fe?void 0:fe.peopleTypes}},{label:null===(he=In.SAPID)||void 0===he?void 0:he.Label,name:"SAPID",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(be=In.SAPID)||void 0===be?void 0:be.FieldRequired,message:"".concat(null===(ge=In.SAPID)||void 0===ge?void 0:ge.Label," is required")}],inputprops:{maxLength:8}},{label:null===(xe=In.ContractNumber)||void 0===xe?void 0:xe.Label,name:"ContractNumber",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(ye=In.ContractNumber)||void 0===ye?void 0:ye.FieldRequired,message:"".concat(null===(De=In.ContractNumber)||void 0===De?void 0:De.Label," is required")}]},{label:"Person #",name:"Id",className:"col-span-12 lg:col-span-6 mb-0",inputprops:{disabled:!0}},{label:null===(Ie=In.PositionId)||void 0===Ie?void 0:Ie.Label,name:"PositionId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Ne=In.PositionId)||void 0===Ne?void 0:Ne.FieldRequired,message:"".concat(null===(je=In.PositionId)||void 0===je?void 0:je.Label," is required")}],inputprops:{options:null===(Ce=Bn.referData)||void 0===Ce?void 0:Ce.positions}},{label:"Active",name:"Active",className:"col-span-12 lg:col-span-6 mb-0",type:"check"},{label:null===(qe=In.HotelCheck)||void 0===qe?void 0:qe.Label,name:"HotelCheck",className:"col-span-12 lg:col-span-6 mb-0",type:"check",rules:[{required:null===(Fe=In.HotelCheck)||void 0===Fe?void 0:Fe.FieldRequired,message:"".concat(null===(we=In.HotelCheck)||void 0===we?void 0:we.Label," is required")}]},{label:null===(Ze=In.RosterId)||void 0===Ze?void 0:Ze.Label,name:"RosterId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Le=In.RosterId)||void 0===Le?void 0:Le.FieldRequired,message:"".concat(null===(Se=In.RosterId)||void 0===Se?void 0:Se.Label," is required")}],inputprops:{options:null===(Re=Bn.referData)||void 0===Re?void 0:Re.rosters}},{label:"Next Roster Start",name:"NextRosterDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date"},{label:null===(Pe=In.LocationId)||void 0===Pe?void 0:Pe.Label,name:"LocationId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Ee=In.LocationId)||void 0===Ee?void 0:Ee.FieldRequired,message:"".concat(null===(Ae=In.LocationId)||void 0===Ae?void 0:Ae.Label," is required")}],inputprops:{options:null===(Me=Bn.referData)||void 0===Me?void 0:Me.locations.filter((function(e){return 1!==e.onSite}))}},{label:null===(ke=In.FlightGroupMasterId)||void 0===ke?void 0:ke.Label,name:"FlightGroupMasterId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Ge=In.FlightGroupMasterId)||void 0===Ge?void 0:Ge.FieldRequired,message:"".concat(null===(Te=In.FlightGroupMasterId)||void 0===Te?void 0:Te.Label," is required")}],inputprops:{options:null===(Ve=Bn.referData)||void 0===Ve?void 0:Ve.transportGroups}},{label:null===(Ye=In.SiteContactEmployeeId)||void 0===Ye?void 0:Ye.Label,name:"SiteContactEmployeeId",className:"col-span-12 lg:col-span-6 mb-0",type:"searchSelect",rules:[{required:null===(Be=In.SiteContactEmployeeId)||void 0===Be?void 0:Be.FieldRequired,message:"".concat(null===(ze=In.SiteContactEmployeeId)||void 0===ze?void 0:ze.Label," is required")}],inputprops:{fetchOptions:function(e){return(0,a.Z)({method:"post",url:"tas/employee/searchshort",data:{model:{keyWord:e},pageIndex:0,pageSize:100}}).then((function(e){return e.data.data.map((function(e){return{label:"".concat(e.Firstname," ").concat(e.Lastname," /").concat(e.Mobile,"/"),value:e.Id}}))}))},showSearch:!0,editName:["SiteContactEmployeeFirstname","SiteContactEmployeeLastname"],placeholder:"Select user",allowClear:!0}}],Jn=[{label:null===(Oe=In.EmergencyContactName)||void 0===Oe?void 0:Oe.Label,name:"EmergencyContactName",className:"col-span-6 mb-0",rules:[{required:null===(Ue=In.EmergencyContactName)||void 0===Ue?void 0:Ue.FieldRequired,message:"".concat(null===(He=In.EmergencyContactName)||void 0===He?void 0:He.Label," is required")}]},{label:null===(_e=In.EmergencyContactMobile)||void 0===_e?void 0:_e.Label,name:"EmergencyContactMobile",className:"col-span-6 mb-0",rules:[{required:null===(We=In.EmergencyContactMobile)||void 0===We?void 0:We.FieldRequired,message:"".concat(null===(Je=In.EmergencyContactMobile)||void 0===Je?void 0:Je.Label," is required")},{pattern:P,message:"Invalid phone number"}],inputprops:{className:"w-full",maxLength:15}},{label:null===(Ke=In.Mobile)||void 0===Ke?void 0:Ke.Label,name:"Mobile",className:"col-span-6 mb-0",type:"number",rules:[{required:null===($e=In.Mobile)||void 0===$e?void 0:$e.FieldRequired,message:"".concat(null===(Qe=In.Mobile)||void 0===Qe?void 0:Qe.Label," is required")},{pattern:S,message:"".concat(null===(Xe=In.Mobile)||void 0===Xe?void 0:Xe.Label," must be 8 digit")}],inputprops:{prefix:"+976",className:"w-full",maxLength:8}},{label:null===(en=In.PersonalMobile)||void 0===en?void 0:en.Label,name:"PersonalMobile",className:"col-span-6 mb-0",type:"number",rules:[{required:null===(nn=In.PersonalMobile)||void 0===nn?void 0:nn.FieldRequired,message:"".concat(null===(ln=In.PersonalMobile)||void 0===ln?void 0:ln.Label," is required")},{pattern:S,message:"".concat(null===(tn=In.PersonalMobile)||void 0===tn?void 0:tn.Label," must be 8 digit")}],inputprops:{prefix:"+976",className:"w-full",maxLength:8}},{label:null===(on=In.PickUpAddress)||void 0===on?void 0:on.Label,name:"PickUpAddress",className:"col-span-6 mb-0",type:"textarea",rules:[{required:null===(an=In.PickUpAddress)||void 0===an?void 0:an.FieldRequired,message:"".concat(null===(rn=In.PickUpAddress)||void 0===rn?void 0:rn.Label," is required")}]},{label:null===(sn=In.FrequentFlyer)||void 0===sn?void 0:sn.Label,name:"FrequentFlyer",className:"col-span-6 mb-0",rules:[{required:null===(dn=In.FrequentFlyer)||void 0===dn?void 0:dn.FieldRequired,message:"".concat(null===(un=In.FrequentFlyer)||void 0===un?void 0:un.Label," is required")}]}],Kn=(0,i.useMemo)((function(){var e;return null===(e=Bn.referData)||void 0===e?void 0:e.fieldsOfGroups.map((function(e){return{name:e.Id,label:e.Description}}))}),[null===(cn=Bn.referData)||void 0===cn?void 0:cn.fieldsOfGroups]),$n=[{type:"component",component:(0,L.jsx)(L.Fragment,{children:null===(mn=Bn.referData)||void 0===mn||null===(pn=mn.fieldsOfGroups)||void 0===pn?void 0:pn.map((function(e,n){var l;return(0,L.jsx)(s.Z.Item,{name:e.Id,label:e.Description,className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:e.Required,message:"".concat(e.Description," is required")}],children:(0,L.jsx)(x.Z,{showSearch:!0,allowClear:!0,filterOption:function(e,n){var l;return(null!==(l=null===n||void 0===n?void 0:n.children)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},children:null===(l=e.details)||void 0===l?void 0:l.map((function(e,n){return(0,L.jsx)(x.Z.Option,{value:e.Id,children:e.Description},n)}))})},"g-fields-".concat(n))}))})}],Qn=[{type:"component",component:(0,L.jsx)(s.Z.Item,{noStyle:!0,shouldUpdate:function(e,n){return e.NationalityId!==n.NationalityId},children:function(e){e.getFieldValue;var n,l,t,o,a,i,r,u,c,m,p,v=null===(n=Bn.referData)||void 0===n||null===(l=n.nationalities)||void 0===l?void 0:l.find((function(e){return e.value===fn.getFieldValue("NationalityId")}));return"MN"!==(null===v||void 0===v?void 0:v.Code)&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(s.Z.Item,{label:null===(t=In.PassportNumber)||void 0===t?void 0:t.Label,name:"PassportNumber",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(o=In.PassportExpiry)||void 0===o?void 0:o.FieldRequired,message:"".concat(null===(a=In.PassportNumber)||void 0===a?void 0:a.Label," is required")}],children:(0,L.jsx)(d.Z,{})}),(0,L.jsx)(s.Z.Item,{label:null===(i=In.PassportName)||void 0===i?void 0:i.Label,name:"PassportName",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(r=In.PassportExpiry)||void 0===r?void 0:r.FieldRequired,message:"".concat(null===(u=In.PassportName)||void 0===u?void 0:u.Label," is required")},{pattern:R,message:"The input is not valid name!"}],children:(0,L.jsx)(d.Z,{})}),(0,L.jsx)(s.Z.Item,{label:null===(c=In.PassportExpiry)||void 0===c?void 0:c.Label,name:"PassportExpiry",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(m=In.PassportExpiry)||void 0===m?void 0:m.FieldRequired,message:"".concat(null===(p=In.PassportExpiry)||void 0===p?void 0:p.Label," is required")}],children:(0,L.jsx)(y.Z,{})})]})}})},{label:"Passport Image",name:"PassportRawImage",className:"col-span-12 lg:col-span-7 mb-0",type:"image"}],Xn=[{name:"PassportNumber",type:"image"},{name:"PassportName",type:"image"},{name:"PassportExpiry",type:"date"},{name:"PassportImage",type:"image"}],el=[{label:"",name:"FullName",alignment:"left",wrap:!0,cellRender:function(e){var n,l;return(0,L.jsx)("div",{className:"flex items-center",children:(0,L.jsx)(w.Link,{to:"/tas/people/search/".concat(null===(n=e.data)||void 0===n?void 0:n.EmployeeId),children:(0,L.jsxs)("button",{type:"button",className:"text-blue-500 hover:underline whitespace-normal",children:[e.value," (",null===(l=e.data)||void 0===l?void 0:l.EmployeeId,")"]})})})}},{label:"ADAccount",name:"ADAccount",alignment:"left",cellRender:function(e){return(0,L.jsx)("div",{children:"boolean"===typeof e.value?e.value?"":(0,L.jsx)(v.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})}},{label:"SAP ID",name:"SAPID",alignment:"center",width:"60px",cellRender:function(e){return(0,L.jsx)("div",{children:"boolean"===typeof e.value?e.value?"":(0,L.jsx)(v.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})}},{label:"Mobile",name:"Mobile",alignment:"center",width:"60px",cellRender:function(e){return(0,L.jsx)("div",{children:"boolean"===typeof e.value?e.value?"":(0,L.jsx)(v.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})}}],nl=function(e){var n=0;return Mn&&Mn.map((function(l,t){null!==e&&void 0!==e&&e.find((function(e){return e.name===l.name[0]}))&&n++})),n>0&&(0,L.jsx)(u.ErrorTabElement,{children:n})},ll=[{label:(0,L.jsxs)("div",{className:"font-normal",children:["Personal ",nl([].concat(_n))]}),key:0,forceRender:!0,children:(0,L.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,L.jsx)(u.FormItemRender,{fields:_n,form:fn,editData:vn},"t-item-1c")},"t-item-0")},{label:(0,L.jsxs)("div",{children:["On Site ",nl(Wn)]}),key:1,forceRender:!0,children:(0,L.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,L.jsx)(u.FormItemRender,{fields:Wn,form:fn,editData:vn},"t-item-2c")},"t-item-1")},{label:(0,L.jsxs)("div",{children:["Off Site ",nl([].concat(Jn,[{name:"PersonalMobile"}]))]}),key:2,forceRender:!0,children:(0,L.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,L.jsx)(u.FormItemRender,{fields:Jn,form:fn,editData:vn},"t-item-3c")},"t-item-2")},{label:(0,L.jsxs)("div",{children:["Group ",nl(Kn)]}),key:3,forceRender:!0,children:(0,L.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,L.jsx)(u.FormItemRender,{fields:$n,form:fn,editData:vn},"t-item-4c")},"t-item-3")},{label:(0,L.jsxs)("div",{children:["Citizenship ",nl(function(){if(null!==fn&&void 0!==fn&&fn.getFieldValue("NationalityId")){var e,n,l=null===(e=Bn.referData)||void 0===e||null===(n=e.nationalities)||void 0===n?void 0:n.find((function(e){return e.value===fn.getFieldValue("NationalityId")}));return"MN"!==(null===l||void 0===l?void 0:l.Code)?[{label:"Passport Number",name:"PassportNumber",rules:[{required:!0,message:"Passport Number is required"}]},{label:"Name On Passport",name:"PassportName",rules:[{required:!0,message:"Name on password is required"}]},{label:"Passport Expiry Date",name:"PassportExpiry",rules:[{required:!0,message:"Password expiry date is required"}]}]:[]}return[]}())]}),key:4,forceRender:!0,children:(0,L.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,L.jsx)(u.FormItemRender,{fields:Qn,form:fn,editData:vn},"t-item-5c")},"t-item-4")}];return(0,L.jsxs)(L.Fragment,{children:[Bn.customLoading?(0,L.jsx)("div",{className:"animate-skeleton h-[400px] flex rounded-ot shadow-md col-span-12"}):(0,L.jsxs)("div",{className:"bg-white rounded-ot p-4 col-span-12 shadow-md mb-1 ".concat(bn),children:[(0,L.jsx)(s.Z,(0,t.Z)((0,t.Z)({form:fn},E),{},{labelAlign:"left",labelWrap:!0,onFinish:function(e){if(kn(null),Pn(!0),"temp"===(null===hn||void 0===hn?void 0:hn.DocumentTag)){var n,l,o=[],i=new FormData;Object.keys(e).map((function(n){isNaN(n)||o.push({GroupMasterId:parseInt(n),GroupDetailId:e[n]?e[n]:""}),"PassportRawImage"!==n&&"SiteContactEmployeeId"!==n&&("Gender"===n?i.append(n,e[n]?1:0):"CompletionDate"===n||"CommenceDate"===n||"Dob"===n?i.append(n,e[n]?N()(e[n]).format("YYYY-MM-DD"):""):i.append(n,e[n]?e[n]:"")),"SiteContactEmployeeId"===n&&("string"===typeof e[n]?i.append(n,null!==vn&&void 0!==vn&&vn.SiteContactEmployeeId?null===vn||void 0===vn?void 0:vn.SiteContactEmployeeId:""):i.append(n,e[n]?e[n]:""))})),i.append("PassportRawImage",null!==(n=e.PassportRawImage)&&void 0!==n&&n.file?null===(l=e.PassportRawImage)||void 0===l?void 0:l.file:""),i.append("id",null===Bn||void 0===Bn?void 0:Bn.userProfileData.Id),(0,a.Z)({method:"patch",url:"tas/employee",data:i}).then(function(){var e=(0,p.Z)((0,m.Z)().mark((function e(n){var l;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,a.Z)({method:"post",url:"tas/groupmembers/".concat(null===Bn||void 0===Bn||null===(l=Bn.userProfileData)||void 0===l?void 0:l.Id),data:o}).then((function(e){Yn(!1),yn(null===Bn||void 0===Bn?void 0:Bn.userProfileData.Id),gn()})).catch((function(e){Pn(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){var n=JSON.parse(e.response.data.message);n&&n.length>0&&Un.error({message:"Data Duplicated",duration:0,description:(0,L.jsx)("div",{children:(0,L.jsxs)("table",{className:"border-collapse border border-gray-200 text-xs mt-5",children:[(0,L.jsx)("thead",{children:(0,L.jsxs)("tr",{className:"text-[11px] font-medium",children:[(0,L.jsx)("th",{className:"border border-gray-200"}),(0,L.jsx)("th",{className:"border border-gray-200 px-1",children:"ADAccount"}),(0,L.jsx)("th",{className:"border border-gray-200 px-1",children:"SAP ID #"}),(0,L.jsx)("th",{className:"border border-gray-200 px-1",children:"Mobile"})]})}),(0,L.jsx)("tbody",{children:null===n||void 0===n?void 0:n.map((function(e){return(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border border-gray-200 text-center",children:(0,L.jsx)(w.Link,{to:"/tas/people/search/".concat(e.EmployeeId),children:(0,L.jsxs)("span",{className:"text-blue-500 hover:underline cursor-pointer",children:[e.FullName," (",e.EmployeeId,")"]})})}),(0,L.jsx)("td",{className:"border border-gray-200 text-center",children:"boolean"===typeof e.ADAccount?e.ADAccount?"":(0,L.jsx)(v.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""}),(0,L.jsx)("td",{className:"border border-gray-200 text-center",children:"boolean"===typeof e.SAPID?e.SAPID?"":(0,L.jsx)(v.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""}),(0,L.jsx)("td",{className:"border border-gray-200 text-center",children:"boolean"===typeof e.Mobile?e.Mobile?"":(0,L.jsx)(v.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})]})}))})]})})})})).then((function(){return Pn(!1)}))}else{var r=[],s={};Object.keys(e).map((function(n){isNaN(n)||r.push({GroupMasterId:parseInt(n),GroupDetailId:e[n]?e[n]:""}),"PassportImage"!==n&&"SiteContactEmployeeId"!==n?s[n]="Gender"===n?e[n]:"CompletionDate"===n||"CommenceDate"===n||"Dob"===n?e[n]?N()(e[n]).format("YYYY-MM-DD"):"":e[n]?e[n]:"":"SiteContactEmployeeId"===n&&("string"===typeof e[n]?s[n]=null!==vn&&void 0!==vn&&vn.SiteContactEmployeeId?null===vn||void 0===vn?void 0:vn.SiteContactEmployeeId:"":s[n]=e[n]?e[n]:"")})),(0,a.Z)({method:"put",url:"tas/requestdocumentprofilechange",data:(0,t.Z)({},s)}).then(function(){var e=(0,p.Z)((0,m.Z)().mark((function e(n){var l;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,a.Z)({method:"post",url:"tas/groupmembers/".concat(null===Bn||void 0===Bn||null===(l=Bn.userProfileData)||void 0===l?void 0:l.Id),data:r}).then((function(e){Yn(!1),gn()})).catch((function(e){Pn(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){var n=JSON.parse(e.response.data.message);n&&n.length>0&&Un.error({message:"Validation Warning",duration:0,description:(0,L.jsx)("div",{children:(0,L.jsx)(u.Table,{data:n,columns:el,containerClass:"shadow-none border",pager:!1})})})})).then((function(){return Pn(!1)}))}},className:"bg-white rounded-lg",onFinishFailed:function(e){e&&kn(e.errorFields)},disabled:!Vn,children:(0,L.jsx)(D.Z,{defaultActiveKey:"1",type:"card",size:"middle",items:ll,activeKey:Cn,onTabClick:function(e){return qn(e)}})})),(0,L.jsx)("div",{className:"mt-3 flex justify-end",children:xn?null:Vn?(0,L.jsxs)("div",{className:"flex items-center gap-3",children:[(0,L.jsx)(u.Button,{type:"primary",loading:Rn,onClick:function(){return fn.submit()},icon:(0,L.jsx)(f.Z,{}),children:"Save"}),(0,L.jsx)(u.Button,{onClick:function(){return Yn(!1)},disabled:Rn,children:"Cancel"})]}):(0,L.jsx)(u.Button,{onClick:function(){return Yn(!0)},children:"Edit"})})]}),Hn]})},M=l(8251),k=l(10202),G=l(82241);var T=function(e){var n=e.data,l=(0,i.useContext)(Z.V).state,t=function(e,n){var t,o,a,i,r,s,d,u,c;switch(e){case"Dob":case"CommenceDate":return n?N()(n).format("YYYY-MM-DD"):"";case"Gender":return"0"==n?"Female":"Male";case"EmployerId":return null===(t=l.referData.employers.find((function(e){return n})))||void 0===t?void 0:t.label;case"LocationId":return null===(o=l.referData.locations.find((function(e){return n})))||void 0===o?void 0:o.label;case"NationalityId":return null===(a=l.referData.nationalities.find((function(e){return n})))||void 0===a?void 0:a.label;case"PeopleTypeId":return null===(i=l.referData.peopleTypes.find((function(e){return n})))||void 0===i?void 0:i.label;case"PositionId":return null===(r=l.referData.positions.find((function(e){return n})))||void 0===r?void 0:r.label;case"RosterId":return null===(s=l.referData.rosters.find((function(e){return n})))||void 0===s?void 0:s.label;case"StateId":return null===(d=l.referData.states.find((function(e){return n})))||void 0===d?void 0:d.label;case"CostCodeId":return null===(u=l.referData.costCodes.find((function(e){return e.Id===parseInt(n)})))||void 0===u?void 0:u.label;case"DepartmentId":return null===(c=l.referData.departments.find((function(e){return n})))||void 0===c?void 0:c.Name;default:return n}},o=[{label:"Field Name",name:"FieldName"},{label:"Old Value",name:"OldValue",cellRender:function(e){return(0,L.jsx)("div",{children:t(e.data.FieldName,e.data.OldValue)})}},{label:"New Value",name:"NewValue",cellRender:function(e){return(0,L.jsx)("div",{children:t(e.data.FieldName,e.data.NewValue)})}}];return(0,L.jsx)(u.Table,{data:n,columns:o,allowColumnReordering:!1,containerClass:"shadow-none",keyExpr:"FieldName",pager:{pageSize:[100]}})},V=l(52957);var Y=function(e){var n,l,r,s,d=e.form,c=e.disabled,m=e.temporaryData,p=(0,i.useContext)(Z.V).state,v=(0,i.useState)(!1),f=(0,o.Z)(v,2),h=f[0],b=f[1];return(0,L.jsxs)(u.Form,{form:d,className:"max-w-[600px]",onFinish:function(e){b(!0),(0,a.Z)({method:"put",url:"tas/requestdocumentprofilechange/temp",data:(0,t.Z)((0,t.Z)({},e),{},{StartDate:e.StartDate?N()(e.StartDate).format("YYYY-MM-DD"):null,EndDate:e.EndDate?N()(e.EndDate).format("YYYY-MM-DD"):null,Id:null===m||void 0===m?void 0:m.Id})}).then((function(e){})).catch((function(e){})).then((function(){return b(!1)}))},disabled:c,children:[(0,L.jsx)(u.Form.Item,{name:"EmployerId",label:"Employer",className:"col-span-12 mb-2",children:(0,L.jsx)(x.Z,{options:null===(n=p.referData)||void 0===n?void 0:n.employers,filterOption:function(e,n){var l;return(null!==(l=null===n||void 0===n?void 0:n.label)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}),(0,L.jsx)(u.Form.Item,{name:"DepartmentId",label:"Department",className:"col-span-12 mb-2",children:(0,L.jsx)(V.Z,{treeData:null===(l=p.referData)||void 0===l?void 0:l.departments,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},onSelect:function(e,n){return d.setFieldValue("CostCodeId",n.CostCodeId)},showSearch:!0,allowClear:!0})}),(0,L.jsx)(u.Form.Item,{name:"CostCodeId",label:"Cost Code",className:"col-span-12 mb-2",children:(0,L.jsx)(x.Z,{options:null===(r=p.referData)||void 0===r?void 0:r.costCodes,filterOption:function(e,n){var l;return(null!==(l=null===n||void 0===n?void 0:n.label)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}),(0,L.jsx)(u.Form.Item,{name:"PositionId",label:"Position",className:"col-span-12 mb-2",children:(0,L.jsx)(x.Z,{options:null===(s=p.referData)||void 0===s?void 0:s.positions,filterOption:function(e,n){var l;return(null!==(l=null===n||void 0===n?void 0:n.label)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}),(0,L.jsx)(u.Form.Item,{name:"StartDate",label:"Start Date",className:"col-span-12 mb-2",children:(0,L.jsx)(y.Z,{})}),(0,L.jsx)(u.Form.Item,{name:"EndDate",label:"End Date",className:"col-span-12 mb-2",children:(0,L.jsx)(y.Z,{})}),c?null:(0,L.jsx)(u.Form.Item,{className:"col-span-12 flex justify-end",children:(0,L.jsx)(u.Button,{type:"primary",onClick:d.submit,loading:h,children:"Save"})})]})};var B=function(){var e=(0,i.useState)(null),n=(0,o.Z)(e,2),l=n[0],m=n[1],p=(0,i.useState)(!0),v=(0,o.Z)(p,2),f=v[0],h=v[1],b=(0,i.useState)(null),g=(0,o.Z)(b,2),x=g[0],y=g[1],D=(0,i.useState)(!1),I=(0,o.Z)(D,2),j=I[0],C=I[1],q=(0,i.useState)([]),F=(0,o.Z)(q,2),w=F[0],S=F[1],R=(0,i.useState)(null),P=(0,o.Z)(R,2),E=P[0],V=P[1],B=(0,i.useState)([]),z=(0,o.Z)(B,2),O=(z[0],z[1]),U=(0,i.useState)(null),H=(0,o.Z)(U,2),_=H[0],W=H[1],J=(0,i.useState)(!1),K=(0,o.Z)(J,2),$=K[0],Q=K[1],X=(0,i.useState)([]),ee=(0,o.Z)(X,2),ne=ee[0],le=ee[1],te=(0,i.useState)(null),oe=(0,o.Z)(te,2),ae=oe[0],ie=oe[1],re=(0,i.useState)(!1),se=(0,o.Z)(re,2),de=se[0],ue=se[1],ce=(0,i.useState)(null),me=(0,o.Z)(ce,2),pe=me[0],ve=me[1],fe=(0,i.useState)(null),he=(0,o.Z)(fe,2),be=he[0],ge=he[1],xe=(0,i.useState)(!0),ye=(0,o.Z)(xe,2),De=(ye[0],ye[1],(0,i.useState)([])),Ie=(0,o.Z)(De,2),Ne=Ie[0],je=Ie[1],Ce=s.Z.useForm(),qe=(0,o.Z)(Ce,1)[0],Fe=s.Z.useForm(),we=(0,o.Z)(Fe,1)[0],Ze=s.Z.useForm(),Le=(0,o.Z)(Ze,1)[0],Se=(0,r.UO)().documentId,Re=(0,G.Z)(),Pe=(0,i.useContext)(Z.V),Ee=Pe.state,Ae=Pe.action,Me="requestDocumentDetail_".concat(Se),ke=(0,r.s0)();(0,i.useEffect)((function(){return Ee.connectionMultiViewer&&Ee.userInfo&&(Ge(),Ee.connectionMultiViewer.on("UsersInScreen",(function(e,n){var l=n.map((function(e){return{name:e.userName.split("_")[0],role:e.userName.split("_")[1],color:(0,k.Z)()}}));Ae.setMultiViewers(l.filter((function(e){var n,l;return e.name!=="".concat(null===(n=Ee.userInfo)||void 0===n?void 0:n.Firstname," ").concat(null===(l=Ee.userInfo)||void 0===l?void 0:l.Lastname)})))}))),function(){Ee.connectionMultiViewer&&Te()}}),[Ee.connectionMultiViewer,Ee.userInfo]),(0,i.useEffect)((function(){Se&&(Ae.changeMenuKey("/request/task"),a.Z.all(["tas/requestdocumentprofilechange/".concat(Se),"tas/requestdocumenthistory/".concat(Se),"tas/requestdocument/myinfo","tas/requestdocumentprofilechange/temp/".concat(Se),"tas/profilefield"].map((function(e){return a.Z.get(e)}))).then(a.Z.spread((function(e,n,l,o,a){e.data.Id?(m(e.data),Ve(e.data.EmployeeId)):Q(!0);var i={};a.data.map((function(e){i[e.ColumnName]=e})),je(i),le(n.data),ie(l.data),ge(o.data),Le.setFieldsValue((0,t.Z)((0,t.Z)({},o.data),{},{StartDate:o.data.StartDate?N()(o.data.StartDate):null,EndDate:o.data.EndDate?N()(o.data.EndDate):null}))}))).catch((function(){})).then((function(){return h(!1)})))}),[Se]),(0,i.useEffect)((function(){l&&Be()}),[l]),(0,i.useEffect)((function(){w&&ze()}),[w]);var Ge=function(){try{var e,n,l,t;null===(e=Ee.connectionMultiViewer)||void 0===e||e.invoke("JoinScreen","".concat(null===(n=Ee.userInfo)||void 0===n?void 0:n.Firstname," ").concat(null===(l=Ee.userInfo)||void 0===l?void 0:l.Lastname,"-").concat(null===(t=Ee.userInfo)||void 0===t?void 0:t.Role),Me)}catch(o){}},Te=function(){var e,n,l;Ae.setMultiViewers([]),null===(e=Ee.connectionMultiViewer)||void 0===e||e.invoke("LeaveScreen","".concat(null===(n=Ee.userInfo)||void 0===n?void 0:n.Firstname," ").concat(null===(l=Ee.userInfo)||void 0===l?void 0:l.Role),Me)},Ve=function(e){(0,a.Z)({method:"get",url:"tas/employee/profile/".concat(e)}).then((function(e){Ae.saveUserProfileData(e.data),ve(e.data)})).catch((function(e){}))},Ye=function(){(0,a.Z)({method:"get",url:"tas/requestdocumentprofilechange/".concat(Se)}).then((function(e){m(e.data)})).catch((function(e){})).then((function(){return h(!1)}))},Be=function(e){(0,a.Z)({method:"get",url:"/tas/requestgroupconfig/groupandmembers/".concat(Se)}).then((function(e){S(e.data)}))},ze=function(){(0,a.Z)({method:"get",url:"/tas/requestgroupconfig/documentroute/".concat(Se)}).then((function(e){O(e.data),Oe(e.data)})).catch((function(e){})).then((function(){return h(!1)}))},Oe=function(e){var n=e.find((function(e){return 1===e.CurrentPosition}));if(W(n),"dataapproval"===(null===n||void 0===n?void 0:n.GroupTag))V({GroupTag:"complete"});else if("Requester"===(null===n||void 0===n?void 0:n.GroupTag)){var l=e.findIndex((function(e){return 1===(null===e||void 0===e?void 0:e.CurrentPosition)})),t=e[l+1],o=w.find((function(e){return e.id===(null===t||void 0===t?void 0:t.GroupId)}));if(o){var a=[];o.groupMembers.map((function(e){a.push({value:e.employeeId,label:e.fullName})})),qe.setFieldValue("nextGroupName",null===o||void 0===o?void 0:o.GroupName),qe.setFieldValue("nextGroupId",null===o||void 0===o?void 0:o.id),qe.setFieldValue("assignEmployeeOptions",a)}V(o)}},Ue=function(e){y(e),"Approve"===e||"Complete"===e||"Decline"===e?qe.submit():C(!0)},He=(0,i.useMemo)((function(){return M.Z.getActionPermission({documentData:l,userData:ae,groupTag:null===_||void 0===_?void 0:_.GroupTag,userGroupIds:null===ae||void 0===ae?void 0:ae.ApprovalGroupIds})}),[l,ae,_]);return(0,L.jsxs)("div",{children:[f?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{className:"animate-skeleton h-[230px] flex rounded-ot mb-5 shadow-md"}),(0,L.jsx)("div",{className:"animate-skeleton h-[400px] flex rounded-ot shadow-md"})]}):$?(0,L.jsxs)("div",{className:"bg-white rounded-ot px-4 py-3 min-h-[300px] flex flex-col justify-center items-center",children:[(0,L.jsx)("div",{className:"text-xl",children:"Not Found Document"}),(0,L.jsx)(u.Button,{htmlType:"button",type:"primary",className:"mt-5",onClick:function(){return ke("/request/task")},children:"Back to List"})]}):(0,L.jsxs)("div",{className:"grid grid-cols-12 gap-y-5 relative gap-x-3",children:[(0,L.jsx)(u.RequestDocumentHeader,{documentDetail:l,profileData:pe}),(0,L.jsx)(u.Accordion,{className:"col-span-12 shadow-md rounded-ot overflow-hidden",title:"Travel Calendar",children:(0,L.jsx)("div",{className:"p-4",children:(0,L.jsx)(u.ProfileCalendar,{profile:pe})})}),"temp"===(null===l||void 0===l?void 0:l.DocumentTag)?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(u.Accordion,{className:"col-span-12 shadow-md rounded-ot overflow-hidden",title:"Temporary",children:(0,L.jsx)("div",{className:"p-4",children:(0,L.jsx)(Y,{form:Le,temporaryData:be,disabled:M.Z.getDisabledStatus({documentData:l,userData:ae,groupTag:null===_||void 0===_?void 0:_.GroupTag})})})}),(0,L.jsx)(u.Accordion,{className:"col-span-12 shadow-md rounded-ot overflow-hidden",title:"Detail",children:(0,L.jsx)("div",{className:"p-4 flex flex-col gap-5",children:(0,L.jsx)(A,{data:null===l||void 0===l?void 0:l.employee,documentData:l,form:we,currentGroup:_,className:"shadow-none border",refreshData:Ye,getProfile:Ve,profileFields:Ne,disabled:M.Z.getDisabledStatus({documentData:l,userData:ae,groupTag:null===_||void 0===_?void 0:_.GroupTag})})})})]}):(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(u.Accordion,{className:"col-span-12 flex-1 shadow-md rounded-ot overflow-hidden",title:"Detail",children:(0,L.jsx)("div",{className:"pt-4 flex flex-col gap-5",children:(0,L.jsx)(A,{data:null===l||void 0===l?void 0:l.employee,documentData:l,form:we,currentGroup:_,className:"shadow-none pt-0",refreshData:Ye,profileFields:Ne,disabled:M.Z.getDisabledStatus({documentData:l,userData:ae,groupTag:null===_||void 0===_?void 0:_.GroupTag})})})}),(0,L.jsx)(u.Accordion,{className:"col-span-12 w-full shadow-md rounded-ot overflow-hidden",title:"Changes",children:(0,L.jsx)(T,{data:null===l||void 0===l?void 0:l.ChangeInfo})})]})}),(0,L.jsx)(u.Form,{form:qe,labelWrap:!0,className:"grid col-span-12",onFinish:function(e){ue(!0);"temp"===(null===l||void 0===l?void 0:l.DocumentTag)&&(0,t.Z)({},Le.getFieldsValue()),"Approve"===x?(0,a.Z)({method:"put",url:"tas/requestdocument/approve",data:{id:Se,nextGroupId:e.nextGroupId,assignEmployeeId:e.assignedEmployeeId,comment:e.comment,impersonateUserId:Re.get("impersonateuser")}}).then((function(e){C(!1),Re.get("impersonateuser")?ke("/request/impersonateuser/".concat(Re.get("impersonateuser"))):ke("/request/task")})).catch((function(e){})).then((function(){return ue(!1)})):"Cancel"===x?(0,a.Z)({method:"put",url:"tas/requestdocument/cancel",data:{id:Se,comment:e.comment,impersonateUserId:Re.get("impersonateuser")}}).then((function(e){C(!1),Re.get("impersonateuser")?ke("/request/impersonateuser/".concat(Re.get("impersonateuser"))):ke("/request/task")})).catch((function(e){})).then((function(){return ue(!1)})):"Decline"===x?(0,a.Z)({method:"put",url:"tas/requestdocument/decline",data:{id:Se,comment:e.comment,impersonateUserId:Re.get("impersonateuser")}}).then((function(e){C(!1),Re.get("impersonateuser")?ke("/request/impersonateuser/".concat(Re.get("impersonateuser"))):ke("/request/task")})).catch((function(e){})).then((function(){return ue(!1)})):"Complete"===x&&("temp"===(null===l||void 0===l?void 0:l.DocumentTag)?(0,a.Z)({method:"put",url:"tas/requestdocumentprofilechange/complete/temp/".concat(Se),data:{id:Se,comment:e.comment,impersonateUserId:Re.get("impersonateuser")}}).then((function(e){C(!1),Re.get("impersonateuser")?ke("/request/impersonateuser/".concat(Re.get("impersonateuser"))):ke("/request/task")})).catch((function(e){})).then((function(){return ue(!1)})):(0,a.Z)({method:"put",url:"tas/requestdocumentprofilechange/complete/".concat(Se),data:{id:Se,comment:e.comment,impersonateUserId:Re.get("impersonateuser")}}).then((function(e){C(!1),Re.get("impersonateuser")?ke("/request/impersonateuser/".concat(Re.get("impersonateuser"))):ke("/request/task")})).catch((function(e){})).then((function(){return ue(!1)})))},children:He?(0,L.jsx)(u.Accordion,{title:"Request Document",className:"col-span-12 shadow-md rounded-ot overflow-hidden",children:(0,L.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,L.jsxs)("div",{children:["Comments:",(0,L.jsx)(u.Form.Item,{className:"m-0",name:"comment",children:(0,L.jsx)(d.Z.TextArea,{autoSize:{minRows:3,maxRows:5},maxLength:300,showCount:!0})})]}),(0,L.jsx)("div",{className:"flex gap-10",children:"complete"!==(null===E||void 0===E?void 0:E.GroupTag)&&(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(u.Form.Item,{noStyle:!0,shouldUpdate:function(e,n){return e.nextGroupName!==n.nextGroupName},children:function(e){var n=e.getFieldValue;return(0,L.jsxs)(u.Form.Item,{name:"nextGroupId",className:"mb-0",children:["Next Approval: ",(0,L.jsx)("span",{className:"font-bold",children:n("nextGroupName")})]})}})})}),(0,L.jsx)("div",{className:"flex items-center gap-3 justify-end",children:(0,L.jsx)(u.Form.Item,{noStyle:!0,shouldUpdate:function(e,n){return e.comment!==n.comment},children:function(e){var n=e.getFieldValue,l=!Boolean(n("comment"));return function(e,n){return e?"complete"===e?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(u.Button,{htmlType:"button",type:"success",onClick:function(){return Ue("Complete")},disabled:de,loading:de&&"Complete"===x,children:"Complete"}),(0,L.jsx)(u.Button,{htmlType:"button",type:"danger",onClick:function(){return Ue("Cancel")},disabled:de,children:"Cancel Request"}),(0,L.jsx)(u.Tooltip,{title:n?"Please fill comment field!":"",children:(0,L.jsx)("div",{children:(0,L.jsx)(u.Button,{htmlType:"button",onClick:function(){return Ue("Decline")},disabled:n||de,loading:de&&"Decline"===x,children:"Decline"})})})]}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(u.Button,{htmlType:"button",type:"success",onClick:function(){return Ue("Approve")},disabled:de,loading:de&&"Approve"===x,children:"Approve"}),(0,L.jsx)(u.Button,{htmlType:"button",type:"danger",onClick:function(){return Ue("Cancel")},disabled:de,children:"Cancel Request"}),(0,L.jsx)(u.Tooltip,{title:n?"Please fill comment field!":"",children:(0,L.jsx)("div",{children:(0,L.jsx)(u.Button,{htmlType:"button",onClick:function(){return Ue("Decline")},disabled:n||de,loading:de&&"Decline"===x,children:"Decline"})})})]}):null}(null===E||void 0===E?void 0:E.GroupTag,l)}})})]})}):(null===ae||void 0===ae?void 0:ae.EmployeeId)===(null===l||void 0===l?void 0:l.RequestUserId)&&"Completed"!==(null===l||void 0===l?void 0:l.CurrentStatus)?(0,L.jsx)(u.Accordion,{title:"Request Document",className:"col-span-12 shadow-md rounded-ot overflow-hidden",children:(0,L.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,L.jsxs)("div",{children:["Comments:",(0,L.jsx)(u.Form.Item,{className:"m-0",name:"comment",children:(0,L.jsx)(d.Z.TextArea,{autoSize:{minRows:3,maxRows:5},maxLength:300,showCount:!0})})]}),(0,L.jsx)("div",{className:"flex gap-10",children:"complete"!==(null===E||void 0===E?void 0:E.GroupTag)&&(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(u.Form.Item,{noStyle:!0,shouldUpdate:function(e,n){return e.nextGroupName!==n.nextGroupName},children:function(e){var n=e.getFieldValue;return(0,L.jsxs)(u.Form.Item,{name:"nextGroupId",className:"mb-0",children:["Next Approval: ",(0,L.jsx)("span",{className:"font-bold",children:n("nextGroupName")})]})}})})}),(0,L.jsx)("div",{className:"flex items-center gap-3 justify-end",children:(0,L.jsx)(u.Button,{htmlType:"button",type:"danger",onClick:function(){return Ue("Cancel")},disabled:de,children:"Cancel Request"})})]})}):null}),(0,L.jsx)(u.Accordion,{title:"Document History & Comments, Document Route",defaultOpen:!1,className:"col-span-12 shadow-md rounded-ot overflow-hidden",children:(0,L.jsx)("div",{className:"grid grid-cols-12 items-start gap-4 p-4",children:(0,L.jsx)(u.DocumentTimeline,{data:ne})})})]}),(0,L.jsx)(c.GI,{visible:j,showTitle:!1,height:120,width:350,children:(0,L.jsx)("div",{children:function(e){switch(e){case"Approve":return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{children:"Are you sure you want to approve this request?"}),(0,L.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,L.jsx)(u.Button,{type:"success",onClick:function(){return qe.submit()},loading:de,children:"Yes"}),(0,L.jsx)(u.Button,{onClick:function(){return C(!1)},disabled:de,children:"No"})]})]});case"Cancel":return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{children:"Are you sure you want to cancel this request?"}),(0,L.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,L.jsx)(u.Button,{type:"danger",onClick:function(){return qe.submit()},loading:de,children:"Yes"}),(0,L.jsx)(u.Button,{onClick:function(){return C(!1)},disabled:de,children:"No"})]})]});case"Decline":return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{children:"Are you sure you want to decline this request?"}),(0,L.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,L.jsx)(u.Button,{onClick:function(){return qe.submit()},loading:de,children:"Yes"}),(0,L.jsx)(u.Button,{onClick:function(){return C(!1)},disabled:de,children:"No"})]})]});case"Complete":return(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{children:"Are you sure you want to complete this request?"}),(0,L.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,L.jsx)(u.Button,{type:"success",onClick:function(){return qe.submit()},loading:de,children:"Yes"}),(0,L.jsx)(u.Button,{onClick:function(){return C(!1)},disabled:de,children:"No"})]})]})}}(x)})})]})}},8251:function(e,n){var l={getDisabledStatus:function(e){var n,l,t=e.documentData,o=e.userData,a=e.groupTag;e.userGroupIds;return console.log("hello",t,o,a),"Completed"===a||"Cancelled"===a||(null!==t&&void 0!==t&&t.AssignedEmployeeId?!(null!==o&&void 0!==o&&null!==(n=o.LineManagerIds)&&void 0!==n&&n.includes(null===t||void 0===t?void 0:t.AssignedEmployeeId)||(null===t||void 0===t?void 0:t.AssignedEmployeeId)===(null===o||void 0===o?void 0:o.EmployeeId)||"Data Approval"===(null===o||void 0===o?void 0:o.Rolename)&&"linemanager"===a||"SystemAdministrator"===(null===o||void 0===o?void 0:o.Rolename)):!("SystemAdministrator"===(null===o||void 0===o?void 0:o.Rolename)||null!==o&&void 0!==o&&null!==(l=o.ApprovalGroupIds)&&void 0!==l&&l.includes(null===t||void 0===t?void 0:t.AssignedRouteConfigId)))},getActionPermission:function(e){var n,l,t=e.documentData,o=e.userData,a=e.groupTag,i=(e.userGroupIds,null);"Completed"===(null===t||void 0===t?void 0:t.CurrentStatus)||"Cancelled"===(null===t||void 0===t?void 0:t.CurrentStatus)?i=!1:i=null!==t&&void 0!==t&&t.AssignedEmployeeId?!!(null!==o&&void 0!==o&&null!==(n=o.LineManagerIds)&&void 0!==n&&n.includes(null===t||void 0===t?void 0:t.AssignedEmployeeId)||(null===t||void 0===t?void 0:t.AssignedEmployeeId)===(null===o||void 0===o?void 0:o.EmployeeId)||"Data Approval"===(null===o||void 0===o?void 0:o.Rolename)&&"linemanager"===a||"SystemAdministrator"===(null===o||void 0===o?void 0:o.Rolename)):!!("SystemAdministrator"===(null===o||void 0===o?void 0:o.Rolename)||null!==o&&void 0!==o&&null!==(l=o.ApprovalGroupIds)&&void 0!==l&&l.includes(null===t||void 0===t?void 0:t.AssignedRouteConfigId));return i},checkUpdateItinerary:function(e){var n,l=e.groupAndMembers,t=e.userData,o=!1,a=null===l||void 0===l?void 0:l.find((function(e){return"travelflight"===e.GroupTag}));return null!==t&&void 0!==t&&null!==(n=t.GroupIds)&&void 0!==n&&n.includes(null===a||void 0===a?void 0:a.GroupId)&&(o=!0),o}};n.Z=l},24957:function(e,n,l){l.d(n,{Z:function(){return s}});var t=l(87462),o=l(47313),a={icon:function(e,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:n}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:e}}]}},name:"close-circle",theme:"twotone"},i=l(17469),r=function(e,n){return o.createElement(i.Z,(0,t.Z)({},e,{ref:n,icon:a}))};var s=o.forwardRef(r)},53979:function(e,n,l){l.d(n,{Z:function(){return s}});var t=l(87462),o=l(47313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-12-12-28.3-18.7-45.3-18.7H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 176h256v112H384V176zm128 554c-79.5 0-144-64.5-144-144s64.5-144 144-144 144 64.5 144 144-64.5 144-144 144zm0-224c-44.2 0-80 35.8-80 80s35.8 80 80 80 80-35.8 80-80-35.8-80-80-80z"}}]},name:"save",theme:"filled"},i=l(17469),r=function(e,n){return o.createElement(i.Z,(0,t.Z)({},e,{ref:n,icon:a}))};var s=o.forwardRef(r)}}]);