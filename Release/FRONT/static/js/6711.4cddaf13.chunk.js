"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[6711],{66711:function(e,t,n){n.r(t);var a=n(1413),i=n(29439),s=n(2880),l=n(14261),o=n(47313),r=n(65040),c=n(29074),u=n(56573),d=n(40765),p=n(82138),m=n(92350),f=n(81514),h=n(58467),v=n(2135),b=n(42614),g=n(46417),x="Transport Group",j=[{label:"Code",name:"Code",rules:[{required:!0,message:"Code is required"}],className:"col-span-12 mb-2",inputprops:{maxLength:20}},{label:"Description",name:"Description",rules:[{required:!0,message:"Description is required"}],className:"col-span-12 mb-2"}],C=[{label:"Code",name:"Code",rules:[{required:!0,message:"Code is required"}],className:"col-span-12 mb-2",inputprops:{maxLength:20}},{label:"Days Pattern",name:"DayPattern",rules:[{required:!0,message:"Days Pattern is required"}],className:"col-span-12 mb-2",type:"select",inputprops:{options:[{value:28,label:"28"},{value:42,label:"42"},{value:56,label:"56"}],allowClear:!1}},{label:"Description",name:"Description",rules:[{required:!0,message:"Description is required"}],className:"col-span-12 mb-2"},{label:"Active",name:"Active",className:"col-span-12 mb-2",type:"check",inputprops:{}}],y=[{label:"Code",name:"Code",className:"col-span-3 mb-2",inputprops:{}},{label:"Description",name:"Description",className:"col-span-3 mb-2"},{label:"Active",name:"Active",className:"col-span-1 mb-2",type:"check",inputprops:{indeterminatewith:!0}}];t.default=function(){var e=(0,o.useState)([]),t=(0,i.Z)(e,2),n=t[0],Z=t[1],N=(0,o.useState)([]),w=(0,i.Z)(N,2),A=w[0],D=w[1],k=(0,o.useState)(null),S=(0,i.Z)(k,2),I=S[0],R=S[1],q=(0,o.useState)(!1),F=(0,i.Z)(q,2),L=F[0],B=F[1],E=(0,o.useState)(!1),G=(0,i.Z)(E,2),P=G[0],V=G[1],T=(0,o.useState)(!1),M=(0,i.Z)(T,2),O=M[0],_=M[1],z=(0,o.useState)(!1),J=(0,i.Z)(z,2),K=J[0],Y=J[1],H=r.Z.useForm(),Q=(0,i.Z)(H,1)[0],U=r.Z.useForm(),W=(0,i.Z)(U,1)[0],X=(0,o.useContext)(b.V).action,$=(0,o.useRef)(null),ee=(0,h.s0)();(0,o.useEffect)((function(){X.changeMenuKey("/tas/transportgroup"),te()}),[]);var te=function(){B(!0),(0,u.Z)({method:"get",url:"tas/flightgroupmaster"}).then((function(e){if(Z(e.data),1===W.getFieldValue("Active")){var t=e.data.filter((function(e){return 1===e.Active}));D(t)}else if(0===W.getFieldValue("Active")){var n=e.data.filter((function(e){return 0===e.Active}));D(n)}else D(e.data)})).catch((function(e){})).then((function(){return B(!1)}))},ne=function(){X.changeLoadingStatusReferItem({transportGroups:!0}),(0,u.Z)({method:"get",url:"tas/flightgroupmaster?Active=1"}).then((function(e){var t=[];e.data.map((function(e){return t.push((0,a.Z)({value:e.Id,label:"".concat(e.Code," - ").concat(e.Description)},e))})),X.setReferDataItem({transportGroups:t})})).catch((function(e){})).then((function(){return X.changeLoadingStatusReferItem({transportGroups:!1})}))},ae=function(e){R(e),V(!0)},ie=[{label:"Code",name:"Code"},{label:"Description",name:"Description"},{label:"Employee Count",name:"EmployeeCount",alignment:"left"},{label:"Detail Count",name:"DetailCount",alignment:"left"},{label:"Active",name:"Active",width:"90px",alignment:"center",cellRender:function(e){return(0,g.jsx)(l.Jg,{disabled:!0,iconSize:18,value:1===e.data.Active||0})}},{label:"Cluster",name:"ClusterStatus",width:"120px",alignment:"center",cellRender:function(e){return(0,g.jsx)(c.Z,{color:1===e.value?"success":0===e.value?"":"blue",children:1===e.value?"complete":0===e.value?"none":"processing"})}},{label:"",name:"",width:"80px",cellRender:function(e){return(0,g.jsx)("div",{className:"flex items-center",children:(0,g.jsx)(v.Link,{to:"/tas/transportgroup/".concat(e.data.Id),children:(0,g.jsx)("button",{type:"button",className:"edit-button",children:"View"})})})}},{label:"",name:"action",width:"170px",alignment:"center",cellRender:function(e){return(0,g.jsxs)("div",{className:"flex gap-4",children:[(0,g.jsx)("button",{type:"button",className:"edit-button",onClick:function(){return t=e.data,R(t),void Y(!0);var t},children:"Edit"}),1===e.data.Active?(0,g.jsx)("button",{type:"button",className:"dlt-button",onClick:function(){return ae(e.data)},children:"Deactivate"}):(0,g.jsx)("button",{type:"button",className:"scs-button",onClick:function(){return ae(e.data)},children:"Reactivate"})]})}}],se=function(){Y(!1)};return(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-3 shadow-md",children:[(0,g.jsx)("div",{className:"text-lg font-bold mb-2",children:x}),(0,g.jsx)(s.Form,{form:W,fields:y,className:"grid grid-cols-12 gap-x-8",onFinish:function(e){B(!0),(0,f.Z)(e,n).then((function(e){D(e),B(!1)}))},children:(0,g.jsx)("div",{className:"flex gap-4 items-baseline col-span-1",children:(0,g.jsx)(s.Button,{htmlType:"submit",loading:L,icon:(0,g.jsx)(d.Z,{}),children:"Search"})})})]}),(0,g.jsx)(s.Table,{ref:$,data:A,columns:ie,allowColumnReordering:!1,loading:L,keyExpr:"Id",onRowDblClick:function(e){return ee("/tas/transportgroup/".concat(e.data.Id))},tableClass:"border-t max-h-[calc(100vh-282px)]",title:(0,g.jsxs)("div",{className:"flex justify-between py-2 px-1",children:[(0,g.jsxs)("div",{className:"flex items-center gap-1",children:[(0,g.jsx)("span",{className:"font-bold",children:A.length}),(0,g.jsx)("span",{className:" text-gray-400",children:"results"})]}),(0,g.jsxs)(s.Button,{icon:(0,g.jsx)(p.Z,{}),onClick:function(){R(null),Q.resetFields(),Y(!0)},children:["Add ",x]})]})}),(0,g.jsx)(s.Modal,{open:K,onCancel:function(){return Y(!1)},title:I?"Edit ".concat(x):"Add ".concat(x),children:(0,g.jsx)(s.Form,{form:Q,fields:I?j:C,editData:I,onFinish:function(e){_(!0),I?(0,u.Z)({method:"put",url:"tas/flightgroupmaster",data:(0,a.Z)((0,a.Z)({},e),{},{Active:e.Active?1:0,Id:I.Id})}).then((function(e){te(),ne(),se()})).catch((function(e){})).then((function(){return _(!1)})):(0,u.Z)({method:"post",url:"tas/flightgroupmaster",data:(0,a.Z)((0,a.Z)({},e),{},{Active:e.Active?1:0})}).then((function(e){te(),ne(),se()})).catch((function(e){})).then((function(){return _(!1)}))},initValues:{DayPattern:28},labelCol:{flex:"110px"},children:(0,g.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2",children:[(0,g.jsx)(s.Button,{type:"primary",onClick:function(){return Q.submit()},loading:O,icon:(0,g.jsx)(m.Z,{}),children:"Save"}),(0,g.jsx)(s.Button,{onClick:se,disabled:O,children:"Cancel"})]})})}),(0,g.jsxs)(l.GI,{visible:P,showTitle:!1,height:110,width:350,children:[(0,g.jsxs)("div",{children:["Are you sure you want to ",1===(null===I||void 0===I?void 0:I.Active)?"deactivate":"reactivate"," this record?"]}),(0,g.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,g.jsx)(s.Button,{type:1===(null===I||void 0===I?void 0:I.Active)?"danger":"success",onClick:function(){_(!0),(0,u.Z)({method:"delete",url:"tas/flightgroupmaster",data:{id:I.Id}}).then((function(){te(),ne(),V(!1)})).catch((function(e){})).then((function(){return _(!1)}))},loading:O,children:"Yes"}),(0,g.jsx)(s.Button,{onClick:function(){return V(!1)},disabled:O,children:"No"})]})]})]})}},81514:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(93433),i=n(4942),s=n(1413);var l=function e(t,n,a){var l=[],o=Object.keys(n);return t.map((function(t){if(t[a].length>0)l.push((0,s.Z)((0,s.Z)({},t),{},(0,i.Z)({},a,e(t[a],n,a))));else{var r=!1;o.map((function(e){var a,i;""!==n[e]&&"undefined"!==typeof n[e]&&null!==n[e]?r="string"===typeof n[e]?r||(null===(a=t[e])||void 0===a?void 0:a.toLowerCase().includes(null===(i=n[e])||void 0===i?void 0:i.toLowerCase())):r||t[e]===n[e]:r=!0})),r&&l.push(t)}})),l};function o(e,t,n,i){return"tree"===n?l(t,e,i):new Promise((function(n,i){var s=Object.keys(e),l=(0,a.Z)(t);s.map((function(t){""!==e[t]&&"undefined"!==typeof e[t]&&null!==e[t]&&(l="string"===typeof e[t]?l.filter((function(n){var a,i;return null===(a=n[t])||void 0===a?void 0:a.toLowerCase().includes(null===(i=e[t])||void 0===i?void 0:i.toLowerCase())})):l.filter((function(n){return n[t]===e[t]})))})),n(l)}))}}}]);