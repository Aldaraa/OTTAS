"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[4942],{74942:function(e,t,n){n.r(t);var a=n(1413),i=n(29439),s=n(2880),c=n(14261),o=n(47313),l=n(65040),r=n(56573),u=n(40765),d=n(82138),m=n(92350),p=n(81514),h=n(42614),f=n(46417),v="Camp";t.default=function(){var e=(0,o.useState)([]),t=(0,i.Z)(e,2),n=t[0],b=t[1],x=(0,o.useState)([]),g=(0,i.Z)(x,2),j=g[0],C=g[1],Z=(0,o.useState)(null),N=(0,i.Z)(Z,2),y=N[0],w=N[1],A=(0,o.useState)(!1),k=(0,i.Z)(A,2),D=k[0],S=k[1],I=(0,o.useState)(!1),R=(0,i.Z)(I,2),F=R[0],q=R[1],L=(0,o.useState)(!1),B=(0,i.Z)(L,2),E=B[0],O=B[1],T=(0,o.useState)(!1),V=(0,i.Z)(T,2),_=V[0],z=V[1],M=l.Z.useForm(),P=(0,i.Z)(M,1)[0],G=l.Z.useForm(),J=(0,i.Z)(G,1)[0],K=(0,o.useContext)(h.V),Y=K.action;K.state,(0,o.useEffect)((function(){H(),Y.changeMenuKey("/tas/camp")}),[]);var H=function(){S(!0),(0,r.Z)({method:"get",url:"tas/camp"}).then((function(e){b(e.data);var t=[];if(e.data.map((function(e){return t.push((0,a.Z)({value:e.Id,label:"".concat(e.Code," - ").concat(e.Description)},e))})),Y.setReferDataItem({camps:t}),1===J.getFieldValue("Active")){var n=e.data.filter((function(e){return 1===e.Active}));C(n)}else if(0===J.getFieldValue("Active")){var i=e.data.filter((function(e){return 0===e.Active}));C(i)}else C(e.data)})).catch((function(e){})).then((function(){return S(!1)}))},Q=function(){Y.changeLoadingStatusReferItem({camps:!0}),(0,r.Z)({method:"get",url:"tas/camp?Active=1"}).then((function(e){var t=[];e.data.map((function(e){return t.push((0,a.Z)({value:e.Id,label:"".concat(e.Code," - ").concat(e.Description)},e))})),Y.setReferDataItem({camps:t})})).catch((function(e){})).then((function(){return Y.changeLoadingStatusReferItem({camps:!1})}))},U=function(e){w(e),q(!0)},W=[{label:"Code",name:"Code",width:"80px"},{label:"Description",name:"Description"},{label:"# Room",name:"RoomCount",alignment:"left"},{label:"Active",name:"Active",width:"90px",alignment:"center",cellRender:function(e){return(0,f.jsx)(c.Jg,{disabled:!0,iconSize:18,value:1===e.data.Active||0})}},{label:"",name:"action",width:"170px",cellRender:function(e){return(0,f.jsxs)("div",{className:"flex gap-4",children:[(0,f.jsx)("button",{className:"edit-button",onClick:function(){return t=e.data,w(t),void z(!0);var t},children:"Edit"}),1===e.data.Active?e.data.RoomCount>0?(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{id:"target".concat(e.data.Id),className:"dlt-button_lbl",children:"Deactivate"}),(0,f.jsx)(c.u,{target:"#target".concat(e.data.Id),showEvent:"mouseenter",hideEvent:"mouseleave",hideOnOutsideClick:!1,position:"top",children:(0,f.jsx)("div",{children:"Don't deactivate because there is an active Room"})})]}):(0,f.jsx)("button",{type:"button",disabled:e.data.RoomCount>0,className:"dlt-button",onClick:function(){return U(e.data)},children:"Deactivate"}):(0,f.jsx)("button",{type:"button",className:"scs-button",onClick:function(){return U(e.data)},children:"Reactivate"})]})}}],X=function(){z(!1)};return(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-3 shadow-md",children:[(0,f.jsx)("div",{className:"text-lg font-bold mb-2",children:v}),(0,f.jsx)(s.Form,{form:J,fields:[{label:"Code",name:"Code",className:"col-span-2 mb-2",inputprops:{}},{label:"Description",name:"Description",className:"col-span-3 mb-2"},{label:"Active",name:"Active",className:"col-span-1 mb-2",type:"check",inputprops:{indeterminatewith:!0}}],className:"grid grid-cols-12 gap-x-8",onFinish:function(e){S(!0),(0,p.Z)(e,n).then((function(e){C(e),S(!1)}))},children:(0,f.jsx)("div",{className:"flex gap-4 items-baseline col-span-1",children:(0,f.jsx)(s.Button,{htmlType:"submit",loading:D,icon:(0,f.jsx)(u.Z,{}),children:"Search"})})})]}),(0,f.jsx)(s.Table,{data:j,columns:W,allowColumnReordering:!1,xw:!0,loading:D,keyExpr:"Id",pager:{showPageSizeSelector:!1,showNavigationButtons:!1},tableClass:"border-t max-h-[calc(100vh-250px)]",title:(0,f.jsxs)("div",{className:"flex justify-between py-2 px-1",children:[(0,f.jsxs)("div",{className:"flex items-center gap-1",children:[(0,f.jsx)("span",{className:"font-bold",children:j.length}),(0,f.jsx)("span",{className:" text-gray-400",children:"results"})]}),(0,f.jsxs)(s.Button,{icon:(0,f.jsx)(d.Z,{}),onClick:function(){w(null),P.resetFields(),z(!0)},children:["Add ",v]})]})}),(0,f.jsx)(s.Modal,{open:_,onCancel:function(){return z(!1)},title:y?"Edit ".concat(v):"Add ".concat(v),children:(0,f.jsx)(s.Form,{form:P,fields:y?[{label:"Code",name:"Code",rules:[{required:!0,message:"Code is required"}],className:"col-span-12 mb-2",inputprops:{maxLength:20}},{label:"Description",name:"Description",rules:[{required:!0,message:"Description is required"}],className:"col-span-12 mb-2"}]:[{label:"Code",name:"Code",rules:[{required:!0,message:"Code is required"}],className:"col-span-12 mb-2",inputprops:{maxLength:20}},{label:"Description",name:"Description",rules:[{required:!0,message:"Description is required"}],className:"col-span-12 mb-2"},{label:"Active",name:"Active",className:"col-span-12 mb-2",type:"check",inputprops:{}}],editData:y,onFinish:function(e){O(!0),y?(0,r.Z)({method:"put",url:"tas/camp",data:(0,a.Z)((0,a.Z)({},e),{},{Id:y.Id})}).then((function(e){H(),Q(),X()})).catch((function(e){})).then((function(){return O(!1)})):(0,r.Z)({method:"post",url:"tas/camp",data:(0,a.Z)((0,a.Z)({},e),{},{Active:e.Active?1:0})}).then((function(e){H(),Q(),X()})).catch((function(e){})).then((function(){return O(!1)}))},children:(0,f.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2",children:[(0,f.jsx)(s.Button,{type:"primary",onClick:function(){return P.submit()},loading:E,icon:(0,f.jsx)(m.Z,{}),children:"Save"}),(0,f.jsx)(s.Button,{onClick:X,disabled:E,children:"Cancel"})]})})}),(0,f.jsxs)(c.GI,{visible:F,showTitle:!1,height:110,width:350,children:[(0,f.jsxs)("div",{children:["Are you sure you want to ",1===(null===y||void 0===y?void 0:y.Active)?"deactivate":"reactivate"," this record?"]}),(0,f.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,f.jsx)(s.Button,{type:1===(null===y||void 0===y?void 0:y.Active)?"danger":"success",onClick:function(){O(!0),(0,r.Z)({method:"delete",url:"tas/camp",data:{id:y.Id}}).then((function(){H(),Q(),q(!1)})).catch((function(e){})).then((function(){return O(!1)}))},loading:E,children:"Yes"}),(0,f.jsx)(s.Button,{onClick:function(){return q(!1)},disabled:E,children:"No"})]})]})]})}},81514:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(93433),i=n(4942),s=n(1413);var c=function e(t,n,a){var c=[],o=Object.keys(n);return t.map((function(t){if(t[a].length>0)c.push((0,s.Z)((0,s.Z)({},t),{},(0,i.Z)({},a,e(t[a],n,a))));else{var l=!1;o.map((function(e){var a,i;""!==n[e]&&"undefined"!==typeof n[e]&&null!==n[e]?l="string"===typeof n[e]?l||(null===(a=t[e])||void 0===a?void 0:a.toLowerCase().includes(null===(i=n[e])||void 0===i?void 0:i.toLowerCase())):l||t[e]===n[e]:l=!0})),l&&c.push(t)}})),c};function o(e,t,n,i){return"tree"===n?c(t,e,i):new Promise((function(n,i){var s=Object.keys(e),c=(0,a.Z)(t);s.map((function(t){""!==e[t]&&"undefined"!==typeof e[t]&&null!==e[t]&&(c="string"===typeof e[t]?c.filter((function(n){var a,i;return null===(a=n[t])||void 0===a?void 0:a.toLowerCase().includes(null===(i=e[t])||void 0===i?void 0:i.toLowerCase())})):c.filter((function(n){return n[t]===e[t]})))})),n(c)}))}}}]);