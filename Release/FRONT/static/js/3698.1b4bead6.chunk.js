"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[3698],{93698:function(e,n,a){a.r(n),a.d(n,{default:function(){return x}});var t=a(29439),l=a(47313),r=a(2880),o=a(65040),s=a(58467),i=a(23495),u=a(74294),d=a(56573),c=a(42614),m=a(46417);var p=function(e){var n,a=e.data,s=void 0===a?[]:a,p=e.handleChangeData,h=e.changeIsEditing,f=e.className,b=void 0===f?"":f,v=e.onRemove,g=(0,l.useState)(!1),x=(0,t.Z)(g,2),I=x[0],j=x[1],R=(0,l.useContext)(c.V).state,N=o.Z.useForm(),D=(0,t.Z)(N,1)[0];(0,l.useEffect)((function(){D.setFieldsValue({rosters:s})}),[s]);var w=function(){p([]),h(!1)},C=[{label:"#",name:"index",width:30,cellRender:function(e){var n=e.rowIndex;return(0,m.jsx)("div",{children:n+1})}},{label:"Fullname",name:"Fullname",cellRender:function(e){var n=e.data;return(0,m.jsxs)("div",{children:[n.Firstname," ",n.Lastname]})}},{label:"Roster",name:"RosterName"},{label:"Cost Code",name:"CostCodeName"},{label:"Department",name:"DepartmentName"},{label:"Room Type",name:"RoomTypeName"},{label:"Room Number",name:"RoomNumber"},{label:"",name:"remove",width:100,cellRender:function(e){return(0,m.jsx)("button",{type:"button",className:"dlt-button text-xs",onClick:function(n){return function(e,n,a){e.stopPropagation(),v(n,a)}(n,e.data,e.rowIndex)},children:"Remove"})}}];return(0,m.jsxs)("div",{className:"rounded-ot bg-white p-5 mb-5 shadow-md ".concat(b),children:[(0,m.jsx)(r.Button,{className:"mb-3",onClick:function(){h(!1)},icon:(0,m.jsx)(i.Z,{}),children:"Back"}),(0,m.jsx)(r.Table,{columns:C,data:s,containerClass:"shadow-none border",pager:!1}),(0,m.jsxs)("div",{className:"mt-2 ml-4",children:[(0,m.jsx)("span",{className:"font-bold",children:s.length})," people selected"]}),(0,m.jsx)(o.Z,{form:D,size:"small",onFinish:function(e){j(!0);var n=null===s||void 0===s?void 0:s.map((function(e){return e.Id}));(0,d.Z)({method:"put",url:"tas/employee/changedata/group",data:{empIds:n,groupMasterId:e.groupMasterId,groupDetailId:e.groupDetailId}}).then((function(e){w()})).catch((function(e){})).then((function(){return j(!1)}))},initialValues:{rosters:[]},children:(0,m.jsxs)("div",{className:"col-span-12 flex gap-5 mt-4",children:[(0,m.jsx)(o.Z.Item,{name:"groupMasterId",label:"Group",children:(0,m.jsx)(u.Z,{options:null===(n=R.referData)||void 0===n?void 0:n.fieldsOfGroups,style:{width:180},fieldNames:{label:"Description",value:"Id"}})}),(0,m.jsx)(o.Z.Item,{shouldUpdate:function(e,n){return e.groupMasterId!==n.groupMasterId},children:function(e){var n,a,t=e.getFieldValue,l=e.setFieldValue,r=null===(n=R.referData)||void 0===n||null===(a=n.fieldsOfGroups)||void 0===a?void 0:a.find((function(e){return e.Id===t("groupMasterId")}));return l("groupDetailId",null),(0,m.jsx)(o.Z.Item,{name:"groupDetailId",label:"Sub group",children:(0,m.jsx)(u.Z,{options:r?null===r||void 0===r?void 0:r.details:[],fieldNames:{label:"Description",value:"Id"},style:{width:180}})})}}),(0,m.jsx)(o.Z.Item,{shouldUpdate:function(e,n){return e.groupMasterId!==n.groupMasterId||e.groupDetailId!==n.groupDetailId},children:function(e){var n=e.getFieldValue;return(0,m.jsx)(o.Z.Item,{children:(0,m.jsx)(r.Button,{type:"primary",disabled:!n("groupMasterId")||!n("groupDetailId"),onClick:function(){return D.submit()},loading:I,className:"py-0",children:"Process"})})}})]})})]})},h=a(14261),f=a(58821),b=a(18711),v=a(2135),g=[{label:"Person #",name:"Id",dataType:"string",width:"70px",cellRender:function(e){return(0,m.jsx)("div",{className:"flex items-center justify-center",children:(0,m.jsx)(v.Link,{to:"/tas/people/search/".concat(e.data.Id),children:(0,m.jsx)("button",{type:"button",className:"text-blue-600 underline",children:e.value})})})}},{label:"",name:"Active",width:"21px",alignment:"center",showInColumnChooser:!1,allowSorting:!1,cellRender:function(e){return(0,m.jsx)(b.DcD,{color:1===e.value?"lime":"lightgray"})}},{label:"Firstname",name:"Firstname"},{label:"Lastname",name:"Lastname"},{label:"SAP #",name:"SAPID",alignment:"left"},{label:"Department",name:"DepartmentName"},{label:"Employer",name:"EmployerName"},{label:"Roster",name:"RosterName"},{label:"Resource Type",name:"PeopleTypeName"},{label:"Room",name:"RoomNumber",cellRender:function(e){return(0,m.jsx)("span",{children:e.value})}},{label:"Gender",name:"Gender",alignment:"center",width:"70px",cellRender:function(e){return(0,m.jsx)("span",{children:1===e.data.Gender?"M":"F"})},groupCellRender:function(e){return(0,m.jsxs)("span",{children:[1===e.value?"M":"F"," ",e.groupContinuesMessage?"- ".concat(e.groupContinuesMessage):""]})}},{label:"",name:"HasFutureTransport",width:"50px",cellRender:function(e){return(0,m.jsx)(h.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})},headerCellRender:function(e,n){return(0,m.jsx)(f.dm9,{})}},{label:"",name:"HasFutureRoomBooking",width:"50px",cellRender:function(e,n){return(0,m.jsx)(h.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})},headerCellRender:function(e,n){return(0,m.jsx)("i",{className:"dx-icon-home"})}}];var x=function(){var e=(0,s.TH)(),n=(0,l.useState)([]),a=(0,t.Z)(n,2),i=a[0],u=a[1],d=(0,l.useState)(!1),c=(0,t.Z)(d,2),h=c[0],f=c[1],b=o.Z.useForm(),v=(0,t.Z)(b,1)[0],x=(0,l.useRef)(null);return(0,l.useEffect)((function(){e.state&&v.setFieldValue(e.state.name,e.state.value)}),[]),(0,m.jsxs)("div",{children:[(0,m.jsx)(r.PeolpeSelectionTable,{ref:x,onSelect:function(e){u(e)},onReturn:function(){f(!0)},selectedRowsData:i,className:"".concat(h?"hidden":"block"),columns:g,searchDefaultValues:{Active:1},hideFields:["Active"]}),(0,m.jsx)(p,{data:i,changeIsEditing:f,onRemove:function(e,n){var a;null===(a=x.current)||void 0===a||a.instance.deselectRows([e.Id])},handleChangeData:u,className:"".concat(h?"block":"hidden")})]})}}}]);