"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[8920],{78373:function(e,t,n){var a=n(1413),r=n(29439),o=n(36459),l=n(47515),s=n(82138),i=n(74294),c=n(23983),d=n(87785),u=n(14576),m=n(21975),p=n(56573),f=n(2880),h=n(47313),x=n(46417);t.Z=function(e){var t=Object.assign({},((0,o.Z)(e),e)),n=(0,h.useState)([]),v=(0,r.Z)(n,2),b=v[0],g=v[1],D=(0,h.useState)(""),Z=(0,r.Z)(D,2),j=Z[0],C=Z[1],y=(0,h.useState)(null),I=(0,r.Z)(y,2),E=I[0],S=I[1],N=(0,h.useState)(!1),w=(0,r.Z)(N,2),T=w[0],k=w[1],q=(0,h.useRef)(null);(0,h.useEffect)((function(){L()}),[]);var L=(0,h.useCallback)((function(){(0,p.Z)({method:"get",url:"tas/busstop?Active=1"}).then((function(e){g(e.data)}))}),[]),M=(0,h.useCallback)((function(e){C(e.target.value)}),[]),O=function(e){e.preventDefault(),k(!0),(0,p.Z)({method:"post",url:"tas/busstop",data:{description:j,active:1}}).then((function(e){C(""),L()})).catch((function(){})).then((function(){k(!1)}))},F=(0,h.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation(),S(t)}),[]),A=(0,h.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),k(!0),(0,p.Z)({method:"delete",url:"tas/busstop",data:{id:null===E||void 0===E?void 0:E.Id}}).then((function(e){L()})).catch((function(e){})).then((function(){k(!1)}))}),[E]),Y=(0,h.useCallback)((function(e){e.stopPropagation(),e.preventDefault()}),[]);return(0,x.jsx)(i.Z,(0,a.Z)((0,a.Z)({},t),{},{className:"w-full",options:b.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{value:e.Description,label:e.Description})})),style:{width:250},popupMatchSelectWidth:!1,optionRender:function(e){return(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("span",{children:e.data.label}),(0,x.jsx)(c.Z,{title:"Are you sure to remove ?",onConfirm:A,cancelButtonProps:{style:{backgroundColor:"white"}},okButtonProps:{loading:T},onPopupClick:Y,children:(0,x.jsx)(f.Button,{type:"danger",className:"px-1",onClick:function(t){return F(t,e.data)},children:(0,x.jsx)(l.Z,{})})})]})},dropdownRender:function(e){return(0,x.jsxs)(x.Fragment,{children:[e,(0,x.jsx)(d.Z,{style:{margin:"8px 0"}}),(0,x.jsxs)(u.Z,{style:{padding:"0 8px 4px"},children:[(0,x.jsx)(m.Z,{placeholder:"Please enter item",ref:q,value:j,onChange:M,onKeyDown:function(e){return e.stopPropagation()}}),(0,x.jsx)(f.Button,{type:"text",icon:(0,x.jsx)(s.Z,{}),loading:T,onClick:O,children:"Add"})]})]})}}))}},98920:function(e,t,n){n.r(t),n.d(t,{default:function(){return oe}});var a=n(74165),r=n(15861),o=n(1413),l=n(29439),s=n(45987),i=n(2880),c=n(14261),d=n(47313),u=n(65040),m=n(12998),p=n(29074),f=n(84523),h=n(56573),x=n(37289),v=n(40765),b=n(87462),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM514.1 580.1l-61.8-102.4c-2.2-3.6-6.1-5.8-10.3-5.8h-38.4c-2.3 0-4.5.6-6.4 1.9-5.6 3.5-7.3 10.9-3.7 16.6l82.3 130.4-83.4 132.8a12.04 12.04 0 0010.2 18.4h34.5c4.2 0 8-2.2 10.2-5.7L510 664.8l62.3 101.4c2.2 3.6 6.1 5.7 10.2 5.7H620c2.3 0 4.5-.7 6.5-1.9 5.6-3.6 7.2-11 3.6-16.6l-84-130.4 85.3-132.5a12.04 12.04 0 00-10.1-18.5h-35.7c-4.2 0-8.1 2.2-10.3 5.8l-61.2 102.3z"}}]},name:"file-excel",theme:"outlined"},D=n(17469),Z=function(e,t){return d.createElement(D.Z,(0,b.Z)({},e,{ref:t,icon:g}))};var j=d.forwardRef(Z),C=n(82138),y=n(92350),I=n(6986),E=n(74294),S=n(21975),N=n(76298),w=n(46417),T=function(e,t,n){return[{label:"Mode",name:"transportModeId",className:"col-span-6 mb-2",rules:[{required:!0,message:"Mode is required"}],type:"select",inputprops:{options:e}},{type:"component",component:(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.transportModeId!==t.transportModeId},children:function(n){var a,r=n.getFieldValue;return"Drive"===(null===(a=e.find((function(e){return e.value===r("transportModeId")})))||void 0===a?void 0:a.label)?(0,w.jsx)(u.Z.Item,{label:"Carrier",name:"carrierId",className:"col-span-6 mb-2",rules:[{required:!0,message:"Carrier is required"}],children:(0,w.jsx)(E.Z,{options:t,allowClear:!0,showSearch:!0,filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())}})}):(0,w.jsx)("div",{className:"col-span-6 mb-2"})}})},{label:"Transport Code",name:"code",className:"col-span-6 mb-2",rules:[{required:!0,message:"Transport Code is required"}]},{type:"component",component:(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.transportModeId!==t.transportModeId},children:function(n){var a,r=n.getFieldValue;return"Drive"!==(null===(a=e.find((function(e){return e.value===r("transportModeId")})))||void 0===a?void 0:a.label)&&(0,w.jsx)(u.Z.Item,{label:"Carrier",name:"carrierId",className:"col-span-6 mb-2",rules:[{required:!0,message:"Carrier is required"}],children:(0,w.jsx)(E.Z,{options:t,allowClear:!0,showSearch:!0,filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())}})})}})},{type:"component",component:(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.transportModeId!==t.transportModeId},children:function(t){var n,a=t.getFieldValue;return"Drive"===(null===(n=e.find((function(e){return e.value===a("transportModeId")})))||void 0===n?void 0:n.label)&&(0,w.jsx)(u.Z.Item,{label:"Direction",name:"Direction",className:"col-span-6 mb-2",rules:[{required:!0,message:"Carrier is required"}],children:(0,w.jsx)(E.Z,{options:[{value:"IN",label:"IN"},{value:"OUT",label:"OUT"}]})})}})},{type:"component",component:(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.toLocationId!==t.toLocationId||e.transportModeId!==t.transportModeId||e.Direction!==t.Direction},children:function(t){var a=t.getFieldValue,r=t.setFieldValue,o=e.find((function(e){return e.value===a("transportModeId")})),l=a("Direction"),s=n.find((function(e){return"DRV"===e.Code}));return"Drive"===(null===o||void 0===o?void 0:o.label)&&("IN"===l?r("fromLocationId",s.Id):"OUT"===l&&r("fromLocationId",n.find((function(e){return"OT"===e.Code})).Id)),"Drive"!==(null===o||void 0===o?void 0:o.label)?(0,w.jsx)(u.Z.Item,{label:"Port Of Departure",name:"fromLocationId",className:"col-span-6 mb-2",rules:[{required:!0,message:"Port Of Departure is required"}],children:(0,w.jsx)(E.Z,{options:n.filter((function(e){return e.Id!==a("toLocationId")})),allowClear:!0,showSearch:!0,filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},onChange:function(e,t){return function(e,t,n){var a=t.find((function(e){return"OT"===e.Code}));"OT"!==(null===e||void 0===e?void 0:e.Code)&&n("toLocationId",(null===a||void 0===a?void 0:a.Id)||null)}(t,n,r)}})}):(0,w.jsx)(u.Z.Item,{label:"Port Of Departure",name:"fromLocationId",className:"col-span-6 mb-2",rules:[{required:!0,message:"Port Of Departure is required"}],children:(0,w.jsx)(E.Z,{disabled:!0,options:n.filter((function(e){return e.Id!==a("toLocationId")}))})})}})},{type:"component",component:(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.fromLocationId!==t.fromLocationId||e.transportModeId!==t.transportModeId||e.Direction!==t.Direction},children:function(t){var a=t.getFieldValue,r=t.setFieldValue,o=e.find((function(e){return e.value===a("transportModeId")})),l=a("Direction"),s=n.find((function(e){return"DRV"===e.Code}));"Drive"===(null===o||void 0===o?void 0:o.label)&&("IN"===l?r("toLocationId",n.find((function(e){return 1===e.onSite})).value):"OUT"===l&&r("toLocationId",s.Id));return"Drive"!==(null===o||void 0===o?void 0:o.label)?(0,w.jsx)(u.Z.Item,{label:"Port Of Arrive",name:"toLocationId",className:"col-span-6 mb-2",rules:[{required:!0,message:"Port Of Arrive is required"}],children:(0,w.jsx)(E.Z,{options:n.filter((function(e){return e.Id!==a("fromLocationId")})),allowClear:!0,showSearch:!0,filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())}})}):(0,w.jsx)(u.Z.Item,{label:"Port Of Arrive",name:"toLocationId",className:"col-span-6 mb-2",rules:[{required:!0,message:"Port Of Arrive is required"}],children:(0,w.jsx)(E.Z,{disabled:!0,options:n.filter((function(e){return e.Id!==a("fromLocationId")})),allowClear:!0})})}})},{label:"Week day",name:"dayNums",className:"col-span-6 mb-2",rules:[{required:!0,message:"Week day is required"}],type:"checkDays"},{label:"Frequency Weeks",name:"frequencyWeeks",className:"col-span-6 mb-2",rules:[{required:!0,message:"Frequency Weeks is required"}],type:"number",inputprops:{min:0}},{label:"Start Date",name:"startDate",className:"col-span-6 mb-2",rules:[{required:!0,message:"Start Date is required"}],type:"date",inputprops:{className:"w-full",showWeek:!0}},{label:"End Date",name:"endDate",className:"col-span-6 mb-2",rules:[{required:!0,message:"End Date is required"}],type:"date",inputprops:{className:"w-full",showWeek:!0}},{type:"component",component:(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.fromLocationId!==t.fromLocationId||e.toLocationId!==t.toLocationId||e.transportModeId!==t.transportModeId},children:function(t){var a,r,o=t.getFieldValue,l=(t.setFieldValue,null===n||void 0===n||null===(a=n.find((function(e){return e.Id===o("fromLocationId")})))||void 0===a?void 0:a.onSite),s=null===n||void 0===n||null===(r=n.find((function(e){return e.Id===o("toLocationId")})))||void 0===r?void 0:r.onSite,i=e.find((function(e){return e.value===o("transportModeId")}));return"Drive"===(null===i||void 0===i?void 0:i.label)?"OUT"===o("Direction")?(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(u.Z.Item,{label:"Out ETD",name:"outETD",className:"col-span-6 mb-2",rules:[{required:!0,message:"Out ETD is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})})}):(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(u.Z.Item,{label:"In ETD",name:"etd",className:"col-span-6 mb-2",rules:[{required:!0,message:"In ETD is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})})}):0===l&&0===s?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.Z.Item,{label:"In ETD",name:"etd",className:"col-span-6 mb-2",rules:[{required:!0,message:"In ETD is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})}),(0,w.jsx)(u.Z.Item,{label:"In ETA",name:"eta",className:"col-span-6 mb-2",rules:[{required:!0,message:"In ETA is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})})]}):1===l&&0===s?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.Z.Item,{label:"Out ETD",name:"outETD",className:"col-span-6 mb-3",rules:[{required:!0,message:"Out ETD is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})}),(0,w.jsx)(u.Z.Item,{label:"Out ETA",name:"outETA",className:"col-span-6 mb-3",rules:[{required:!0,message:"Out ETA is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.Z.Item,{label:"In ETD",name:"etd",className:"col-span-6 mb-3",rules:[{required:!0,message:"In ETD is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})}),(0,w.jsx)(u.Z.Item,{label:"In ETA",name:"eta",className:"col-span-6 mb-3",rules:[{required:!0,message:"In ETA is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})}),(0,w.jsx)(u.Z.Item,{label:"Out ETD",name:"outETD",className:"col-span-6 mb-3",rules:[{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})}),(0,w.jsx)(u.Z.Item,{label:"Out ETA",name:"outETA",className:"col-span-6 mb-3",rules:[{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})})]})}})},{type:"component",component:(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.fromLocationId!==t.fromLocationId||e.toLocationId!==t.toLocationId||e.transportModeId!==t.transportModeId},children:function(t){var a,r,o=t.getFieldValue,l=null===n||void 0===n||null===(a=n.find((function(e){return e.Id===o("fromLocationId")})))||void 0===a?void 0:a.onSite,s=null===n||void 0===n||null===(r=n.find((function(e){return e.Id===o("toLocationId")})))||void 0===r?void 0:r.onSite,i=e.find((function(e){return e.value===o("transportModeId")}));return"Drive"!==(null===i||void 0===i?void 0:i.label)&&(0,w.jsxs)(w.Fragment,{children:[!(0===l&&0===s)&&(0,w.jsx)(u.Z.Item,{label:"Out Seats",name:"outSeats",className:"col-span-6 mb-2",rules:[{required:0===l&&1===s||1===l&&0===s,message:"Out Seats is required"}],children:(0,w.jsx)(N.Z,{controls:!1,disabled:0===l&&0===s,min:0})}),!(1===l&&0===s)&&(0,w.jsx)(u.Z.Item,{label:"In Seats",name:"inSeats",className:"col-span-6 mb-2",rules:[{required:0===l&&1===s||0===l&&0===s,message:"In Seats is required"}],children:(0,w.jsx)(N.Z,{min:0,controls:!1})})]})}})},{label:"Air Craft Code",name:"AircraftCode",className:"col-span-6 mb-2"}]},k=function(e,t,n,a){return[{label:"Mode",name:"transportModeId",className:"col-span-6 mb-2",rules:[{required:!0,message:"Mode is required"}],type:"select",inputprops:{options:e}},{label:"Cost Code",name:"costCodeId",className:"col-span-6 mb-2",rules:[{required:!0,message:"Cost Code is required"}],type:"select",inputprops:{options:a}},{label:"Transport Code",name:"code",className:"col-span-6 mb-2",rules:[{required:!0,message:"Transport Code is required"}]},{label:"Carrier",name:"carrierId",className:"col-span-6 mb-2",rules:[{required:!0,message:"Carrier is required"}],type:"select",inputprops:{options:t}},{type:"component",component:(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.toLocationId!==t.toLocationId},children:function(e){var t=e.getFieldValue;return(0,w.jsx)(u.Z.Item,{label:"Port Of Departure",name:"fromLocationId",className:"col-span-6 mb-2",rules:[{required:!0,message:"Port Of Departure is required"}],children:(0,w.jsx)(E.Z,{options:n.filter((function(e){return e.Id!==t("toLocationId")})),allowClear:!0,showSearch:!0,filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())}})})}})},{type:"component",component:(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.fromLocationId!==t.fromLocationId},children:function(e){var t=e.getFieldValue;return(0,w.jsx)(u.Z.Item,{label:"Port Of Arrive",name:"toLocationId",className:"col-span-6 mb-2",rules:[{required:!0,message:"Port Of Arrive is required"}],children:(0,w.jsx)(E.Z,{options:n.filter((function(e){return e.Id!==t("fromLocationId")})),allowClear:!0,showSearch:!0,filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())}})})}})},{label:"Date",name:"eventDate",className:"col-span-6 mb-2",rules:[{required:!0,message:"Date is required"}],type:"date",inputprops:{className:"w-full",showWeek:!0}},{label:"Seats",name:"Seats",type:"number",className:"col-span-6 mb-2",rules:[{required:!0,message:"Seats is required"}],inputprops:{min:0}},{type:"component",component:(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.fromLocationId!==t.fromLocationId||e.toLocationId!==t.toLocationId},children:function(e){var t,a,r=e.getFieldValue,o=e.setFieldValue,l=null===n||void 0===n||null===(t=n.find((function(e){return e.Id===r("fromLocationId")})))||void 0===t?void 0:t.onSite,s=null===n||void 0===n||null===(a=n.find((function(e){return e.Id===r("toLocationId")})))||void 0===a?void 0:a.onSite;return o("etd",null),o("eta",null),o("outETD",null),o("outETA",null),o("outSeats",null),1===s&&0===l?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.Z.Item,{label:"In ETD",name:"etd",className:"col-span-6 mb-2",rules:[{required:!0,message:"In ETD is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})}),(0,w.jsx)(u.Z.Item,{label:"In ETA",name:"eta",className:"col-span-6 mb-2",rules:[{required:!0,message:"In ETA is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})}),(0,w.jsx)(u.Z.Item,{label:"Out ETD",name:"outETD",className:"col-span-6 mb-2",rules:[{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})}),(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.outETD!==t.outETD||e.outETA!==t.outETA},children:function(e){var t=e.getFieldValue,n=(e.setFieldValue,!1);return t("outETD")&&(n=!0),(0,w.jsx)(u.Z.Item,{label:"Out ETA",name:"outETA",className:"col-span-6 mb-2",rules:[{required:n,message:"Out ETA is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})})}}),(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.outETD!==t.outETD||e.outETA!==t.outETA},children:function(e){var t=e.getFieldValue,n=(e.setFieldValue,!1);return t("outETD")&&t("outETA")&&(n=!0),(0,w.jsx)(u.Z.Item,{label:"Out Seats",name:"outSeats",className:"col-span-6 mb-2",rules:[{required:n,message:"Out Seats is required"}],children:(0,w.jsx)(N.Z,{maxLength:4,min:0})})}})]}):0===s&&1===l?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.Z.Item,{label:"Out ETD",name:"etd",className:"col-span-6 mb-2",rules:[{required:!0,message:"In ETD is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})}),(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.outETD!==t.outETD||e.outETA!==t.outETA},children:function(e){var t=e.getFieldValue,n=(e.setFieldValue,!1);return t("outETD")&&(n=!0),(0,w.jsx)(u.Z.Item,{label:"Out ETA",name:"eta",className:"col-span-6 mb-2",rules:[{required:n,message:"Out ETA is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})})}})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.Z.Item,{label:"In ETD",name:"etd",className:"col-span-6 mb-2",rules:[{required:!0,message:"In ETD is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})}),(0,w.jsx)(u.Z.Item,{label:"In ETA",name:"eta",className:"col-span-6 mb-2",rules:[{required:!0,message:"In ETA is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4})})]})}})},{label:"Air Craft Code",name:"AircraftCode",className:"col-span-6 mb-2"}]},q=n(10658),L=n.n(q),M=function(e){return e.endOf("D")<L()().endOf("D")},O=function(e,t,n){return[{label:"Carrier",name:"CarrierId",className:"col-span-6 mb-2",rules:[{required:!0,message:"Carrier is required"}],type:"select",inputprops:{options:t}},{label:"Transport Code",name:"Code",className:"col-span-6 mb-2",rules:[{required:!0,message:"Transport Code is required"}]},{label:"Seats (Schedule)",name:"Seats",className:"col-span-6 mb-2"},{type:"component",component:(0,w.jsx)("div",{className:"col-span-6"})},{label:"ETD (Schedule)",name:"ETD",className:"col-span-6 mb-2",rules:[{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],inputprops:{maxLength:4}},{label:"ETA (Schedule)",name:"ETA",className:"col-span-6 mb-2",rules:[{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],inputprops:{maxLength:4}},{label:"From Date",name:"StartDate",className:"col-span-6 mb-2",type:"date",inputprops:{showWeek:!0,disabledDate:M,format:"YYYY-MM-DD"}},{label:"To Date",name:"EndDate",className:"col-span-6 mb-2",type:"date",inputprops:{showWeek:!0}}]},F=n(58467),A=n(2135),Y=n(42614),R=n(76629),P=n(11372),B=n(60020),V=n(93031),U=n(78373),W=["editData"],z=["key","name"];var $=function(e){var t=e.editData,n=(0,s.Z)(e,W),a=(0,d.useState)(!1),r=(0,l.Z)(a,2),c=r[0],u=r[1],m=(0,d.useState)([]),p=(0,l.Z)(m,2),f=(p[0],p[1]),x=i.Form.useForm(),v=(0,l.Z)(x,1)[0],b=i.Form.useWatch("busstops",v);(0,d.useEffect)((function(){g()}),[]);var g=(0,d.useCallback)((function(){(0,h.Z)({method:"get",url:"tas/busstop?Active=1"}).then((function(e){f(e.data)}))}),[]),D=[{type:"component",component:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"col-span-12 flex items-center gap-3 mb-5",children:[(0,w.jsx)(i.Form.Item,{name:"startDate",className:"mb-0",children:(0,w.jsx)(V.Z,{placeholder:"Start Date"})}),(0,w.jsx)(P.Z,{}),(0,w.jsx)(i.Form.Item,{name:"endDate",className:"mb-0",children:(0,w.jsx)(V.Z,{placeholder:"End Date"})})]}),(0,w.jsx)(i.Form.List,{name:"busstops",className:"col-span-12",children:function(e,t){var n=t.add,a=t.remove;return(0,w.jsxs)(w.Fragment,{children:[e.length>0?(0,w.jsxs)("div",{className:"col-span-12 flex flex-col gap-y-2 max-h-[350px] overflow-auto mb-3",children:[(0,w.jsxs)("div",{children:["Stations (",e.length,"):"]}),e.map((function(e){e.key;var t=e.name,n=(0,s.Z)(e,z);return(0,w.jsxs)("div",{className:"flex gap-x-2 items-start",children:[(0,w.jsx)(i.Form.Item,(0,o.Z)((0,o.Z)({},n),{},{className:"col-span-5 mb-0",name:[t,"description"],rules:[{required:!0,message:"Station is required"}],children:(0,w.jsx)(U.Z,{placeholder:"Station"})})),(0,w.jsx)(i.Form.Item,{name:[t,"etd"],className:"col-span-5 mb-0",rules:[{required:!0,message:"ETD is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],children:(0,w.jsx)(S.Z,{maxLength:4,placeholder:"ETD"})}),(0,w.jsx)("button",{type:"button",className:"bg-[#FFE2E5] text-[#F64E60] hover:bg-red-200 rounded-md py-1 px-3 disabled:bg-gray-100 transition-all",onClick:function(){return a(t)},children:(0,w.jsx)(B.Z,{})})]})}))]}):null,(0,w.jsx)(i.Form.Item,{className:"col-span-12 mb-5",children:(0,w.jsx)(i.Button,{className:"w-full flex justify-center",onClick:function(){return n()},block:!0,icon:(0,w.jsx)(C.Z,{}),children:"Add new station"})})]})}})]})}],Z=(0,d.useCallback)((function(){null===n||void 0===n||n.onCancel()}),[]);return(0,w.jsx)(i.Modal,(0,o.Z)((0,o.Z)({width:800,title:(0,w.jsxs)("div",{children:["Set Bus Stop ",(0,w.jsxs)("span",{className:"text-secondary2",children:["/ ",null===t||void 0===t?void 0:t.Code," /"]})]})},n),{},{children:(0,w.jsx)(i.Form,{form:v,fields:D,layout:"vertical",noLayoutConfig:!0,onFinish:function(e){u(!0),(0,h.Z)({method:"put",url:"tas/activetransport/busstop",data:(0,o.Z)((0,o.Z)({},e),{},{startDate:L()(e.startDate).format("YYYY-MM-DD"),endDate:L()(e.endDate).format("YYYY-MM-DD"),id:null===t||void 0===t?void 0:t.Id})}).then((function(e){n.onCancel()})).catch((function(e){})).then((function(){u(!1)}))},children:(0,w.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2",children:[(0,w.jsx)(i.Button,{type:"primary",onClick:function(){return v.submit()},loading:c,icon:(0,w.jsx)(y.Z,{}),disabled:0===(null===b||void 0===b?void 0:b.length),children:"Save"}),(0,w.jsx)(i.Button,{onClick:Z,disabled:c,children:"Cancel"})]})})}))},_=n(82508),H={labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:16}}};var X=function(e){var t=e.open,n=void 0!==t&&t,a=e.transportMode,r=e.carrier,s=e.location,c=e.onReload,u=e.onCancel,m=e.editData,p=(0,d.useState)(null),f=(0,l.Z)(p,2),x=f[0],v=f[1],b=(0,d.useState)(!1),g=(0,l.Z)(b,2),D=g[0],Z=g[1],j=(0,d.useState)(!1),C=(0,l.Z)(j,2),I=C[0],E=C[1],S=i.Form.useForm(),N=(0,l.Z)(S,1)[0];(0,d.useEffect)((function(){m&&n&&T()}),[m,n]);var T=(0,d.useCallback)((function(){Z(!0),(0,h.Z)({method:"get",url:"tas/activetransport/extendinfo/".concat(m.Id)}).then((function(e){v(e.data),N.setFieldsValue((0,o.Z)((0,o.Z)({},e.data),{},{endDate:null,startDate:L()(e.data.ScheduleStartDate)}))})).catch((function(e){})).finally((function(){Z(!1)}))}),[m]),k=(0,d.useMemo)((function(){return[{label:"Mode",name:"TransportMode",className:"col-span-6 mb-2",inputprops:{disabled:!0}},{label:"Carrier",name:"Carrier",className:"col-span-6 mb-2",inputprops:{disabled:!0}},{label:"Transport Code",name:"Code",className:"col-span-6 mb-2",inputprops:{disabled:!0}},{label:"Seat",name:"Seat",className:"col-span-6 mb-2",rules:[{required:!0,message:"Seat is required"}],inputprops:{}},{label:"Port Of Departure",name:"FromLocation",className:"col-span-6 mb-2",inputprops:{disabled:!0}},{label:"Port Of Arrive",name:"ToLocation",className:"col-span-6 mb-2",inputprops:{disabled:!0}},{label:"Week day",name:"DayNum",className:"col-span-6 mb-2",inputprops:{disabled:!0}},{label:"Frequency Weeks",name:"FrequencyWeeks",className:"col-span-6 mb-2",type:"number",inputprops:{min:0,disabled:!0}},{label:"ETD",name:"ETD",className:"col-span-6 mb-2",rules:[{required:!0,message:"ETD is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],inputprops:{maxLength:4}},{label:"ETA",name:"ETA",className:"col-span-6 mb-2",rules:[{required:!0,message:"ETA is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],inputprops:{maxLength:4}},{label:"Start Date",name:"startDate",className:"col-span-6 mb-2",rules:[{required:!0,message:"Start Date is required"}],type:"date",inputprops:{className:"w-full",showWeek:!0,disabled:!0}},{label:"End Date",name:"endDate",className:"col-span-6 mb-2",rules:[{required:!0,message:"End Date is required"}],type:"date",inputprops:{className:"w-full",showWeek:!0,disabledDate:function(e){return e<L()(null===x||void 0===x?void 0:x.ScheduleStartDate).subtract(1,"day").endOf("day")||e>L()(null===x||void 0===x?void 0:x.ScheduleStartDate).add(18,"month").endOf("day")},defaultPickerValue:L()(null===x||void 0===x?void 0:x.ScheduleStartDate).add(18,"month")}}]}),[a,r,s,x]);return(0,w.jsx)(i.Modal,{open:n,onCancel:u,width:900,title:"Extend Transport",children:D?(0,w.jsxs)("div",{className:"flex flex-col justify-center items-center h-[240px]",children:[(0,w.jsx)(_.Z,{style:{fontSize:24}}),(0,w.jsx)("span",{children:"Loading..."})]}):(0,w.jsx)(i.Form,(0,o.Z)((0,o.Z)({form:N,fields:k,onFinish:function(e){E(!0),(0,h.Z)({method:"post",url:"tas/activetransport/extend",data:(0,o.Z)((0,o.Z)({},e),{},{seats:e.Seat,activeTransportId:null===m||void 0===m?void 0:m.Id,startDate:L()(e.startDate).format("YYYY-MM-DD"),endDate:L()(e.endDate).format("YYYY-MM-DD")})}).then((function(e){u(),c()})).catch((function(e){})).finally((function(e){E(!1)}))},className:"gap-x-4"},H),{},{children:(0,w.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2 mt-4",children:[(0,w.jsx)(i.Button,{type:"primary",onClick:function(){return N.submit()},loading:I,icon:(0,w.jsx)(y.Z,{}),children:"Save"}),(0,w.jsx)(i.Button,{onClick:u,disabled:I,children:"Cancel"})]})}))})},J=["editData","refresh"],K=[{name:"AircraftCode",label:"Air Craft Code",className:"col-span-12 mb-2"}];var G=function(e){var t=e.editData,n=e.refresh,a=(0,s.Z)(e,J),r=(0,d.useState)(!1),c=(0,l.Z)(r,2),u=c[0],m=c[1],p=i.Form.useForm(),f=(0,l.Z)(p,1)[0];(0,d.useEffect)((function(){f.setFieldsValue(t)}),[t]);var x=(0,d.useCallback)((function(){null===a||void 0===a||a.onCancel()}),[]);return(0,w.jsx)(i.Modal,(0,o.Z)((0,o.Z)({width:600,title:(0,w.jsxs)("div",{children:["Change Air Craft Code ",(0,w.jsxs)("span",{className:"text-secondary2",children:["/ ",null===t||void 0===t?void 0:t.Code," /"]})]})},a),{},{children:(0,w.jsx)(i.Form,{form:f,fields:K,layout:"vertical",noLayoutConfig:!0,onFinish:function(e){m(!0),(0,h.Z)({method:"put",url:"tas/activetransport/aircraftcode",data:(0,o.Z)((0,o.Z)({},e),{},{id:null===t||void 0===t?void 0:t.Id})}).then((function(e){a.onCancel(),n()})).catch((function(e){})).then((function(){m(!1)}))},children:(0,w.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2",children:[(0,w.jsx)(i.Button,{type:"primary",onClick:function(){return f.submit()},loading:u,icon:(0,w.jsx)(y.Z,{}),children:"Save"}),(0,w.jsx)(i.Button,{onClick:x,disabled:u,children:"Cancel"})]})})}))},Q=n(15226),ee=["rowData","scheduleDate","onReset","onCancel"];var te=function(e){var t=e.rowData,n=e.scheduleDate,a=e.onReset,r=e.onCancel,c=(0,s.Z)(e,ee),u=(0,d.useState)(!1),m=(0,l.Z)(u,2),p=m[0],f=m[1],x=i.Form.useForm(),v=(0,l.Z)(x,1)[0];(0,d.useEffect)((function(){v.setFieldsValue((0,o.Z)((0,o.Z)({},t),{},{scheduleDate:n}))}),[n,t]);var b=[{name:"scheduleDate",label:"Schedule Date",className:"col-span-12 mb-2",rules:[{required:!0,message:"Schedule Date is required"}],type:"date",inputprops:{maxLength:4,disabled:!0,className:"w-[200px]"}},{name:"RealETD",label:"Real ETD",className:"col-span-12 mb-2",rules:[{required:!0,message:"Real ETD is required"},{pattern:new RegExp(/^(?:2[0-3]|[01][0-9])[0-5][0-9]$/),message:"Enter correct time"}],inputprops:{maxLength:4,className:"w-[100px]"}},{name:"Remark",label:"Remark",className:"col-span-12 mb-2",type:"select",inputprops:{options:[{label:"Airport Operation OT",value:"Airport Operation OT"},{label:"Airport Operation UB",value:"Airport Operation UB"},{label:"Aircraft shortage",value:"Aircraft shortage"},{label:"Connection flight delay",value:"Connection flight delay"},{label:"Crew Delay",value:"Crew Delay"},{label:"Crew Shortage",value:"Crew Shortage"},{label:"DE-Icing",value:"DE-Icing"},{label:"Due to bad weather condition",value:"Due to bad weather condition"},{label:"Due to PAX delay",value:"Due to PAX delay"},{label:"Due to Traffic jam",value:"Due to Traffic jam"},{label:"Unplanned maintenance",value:"Unplanned maintenance"}]}}];return(0,w.jsx)(i.Modal,(0,o.Z)((0,o.Z)({},c),{},{destroyOnClose:!1,children:(0,w.jsx)(i.Form,{fields:b,className:"gap-x-5",form:v,onFinish:function(e){f(!0),(0,h.Z)({method:"put",url:"tas/transportschedule/realetdbydate",data:(0,o.Z)((0,o.Z)({},e),{},{scheduleDate:n?L()(n).format("YYYY-MM-DD"):null,activeTransportId:t.Id})}).then((function(e){r(),a()})).catch((function(e){})).then((function(){return f(!1)}))},labelCol:{flex:"100px"},children:(0,w.jsxs)("div",{className:"col-span-12 gap-3 flex justify-end mt-3",children:[(0,w.jsx)(i.Button,{type:"primary",htmlType:"submit",loading:p,icon:(0,w.jsx)(y.Z,{}),children:"Save"}),(0,w.jsx)(i.Button,{onClick:r,disabled:p,children:"Cancel"})]})})}))},ne=["children"],ae={labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:16}}},re=(0,d.memo)((function(e){var t=e.children;(0,s.Z)(e,ne);return t}),(function(e,t){return JSON.stringify(e.data)===JSON.stringify(t.data)&&e.pageIndex===t.pageIndex&&e.pageSize===t.pageSize&&e.totalCount===t.totalCount}));var oe=function(){var e,t,n,s,b,g=R.Z.get("atv"),D=(0,d.useState)([]),Z=(0,l.Z)(D,2),E=Z[0],S=Z[1],N=(0,d.useState)(null),q=(0,l.Z)(N,2),M=q[0],P=q[1],B=(0,d.useState)(!1),V=(0,l.Z)(B,2),U=V[0],W=V[1],z=(0,d.useState)(!1),_=(0,l.Z)(z,2),H=_[0],J=_[1],K=(0,d.useState)(!1),ee=(0,l.Z)(K,2),ne=ee[0],oe=ee[1],le=(0,d.useState)(!1),se=(0,l.Z)(le,2),ie=se[0],ce=se[1],de=(0,d.useState)([]),ue=(0,l.Z)(de,2),me=ue[0],pe=ue[1],fe=(0,d.useState)([]),he=(0,l.Z)(fe,2),xe=he[0],ve=he[1],be=(0,d.useState)([]),ge=(0,l.Z)(be,2),De=ge[0],Ze=ge[1],je=(0,d.useState)([]),Ce=(0,l.Z)(je,2),ye=Ce[0],Ie=Ce[1],Ee=(0,d.useState)(!1),Se=(0,l.Z)(Ee,2),Ne=Se[0],we=Se[1],Te=(0,d.useState)(!1),ke=(0,l.Z)(Te,2),qe=ke[0],Le=ke[1],Me=(0,d.useState)(!1),Oe=(0,l.Z)(Me,2),Fe=Oe[0],Ae=Oe[1],Ye=(0,d.useState)(0),Re=(0,l.Z)(Ye,2),Pe=Re[0],Be=Re[1],Ve=(0,d.useState)(0),Ue=(0,l.Z)(Ve,2),We=Ue[0],ze=Ue[1],$e=(0,d.useState)(100),_e=(0,l.Z)($e,2),He=_e[0],Xe=_e[1],Je=(0,d.useState)(!1),Ke=(0,l.Z)(Je,2),Ge=Ke[0],Qe=Ke[1],et=(0,d.useState)(!0),tt=(0,l.Z)(et,2),nt=tt[0],at=tt[1],rt=(0,d.useState)(null),ot=(0,l.Z)(rt,2),lt=ot[0],st=ot[1],it=(0,d.useState)(null),ct=(0,l.Z)(it,2),dt=ct[0],ut=ct[1],mt=(0,d.useState)(!1),pt=(0,l.Z)(mt,2),ft=pt[0],ht=pt[1],xt=(0,d.useState)(!1),vt=(0,l.Z)(xt,2),bt=vt[0],gt=vt[1],Dt=u.Z.useForm(),Zt=(0,l.Z)(Dt,1)[0],jt=u.Z.useForm(),Ct=(0,l.Z)(jt,1)[0],yt=u.Z.useForm(),It=(0,l.Z)(yt,1)[0],Et=u.Z.useForm(),St=(0,l.Z)(Et,1)[0],Nt=u.Z.useForm(),wt=(0,l.Z)(Nt,1)[0],Tt=(0,Q.qo)(["ScheduleDate"],Zt),kt=(0,d.useRef)(null),qt=m.ZP.useNotification(),Lt=(0,l.Z)(qt,2),Mt=Lt[0],Ot=Lt[1],Ft=(0,F.s0)(),At=(0,d.useContext)(Y.V),Yt=At.action,Rt=At.state,Pt={DepartLocationId:null===(e=Rt.referData)||void 0===e||null===(t=e.locations)||void 0===t?void 0:t.find((function(e){return"UB"===e.Code})).Id,ArriveLocationId:null===(n=Rt.referData)||void 0===n||null===(s=n.locations)||void 0===s?void 0:s.find((function(e){return"OT"===e.Code})).Id};(0,d.useEffect)((function(){Yt.changeMenuKey("/tas/activetransport"),Vt()}),[]),(0,d.useEffect)((function(){Bt()}),[We]);var Bt=function(){var e,t=Zt.getFieldsValue();null===(e=kt.current)||void 0===e||e.instance.beginCustomLoading(),(0,h.Z)({method:"post",url:"tas/activetransport/getactivetransports",data:{model:(0,o.Z)((0,o.Z)({},t),{},{ScheduleDate:t.ScheduleDate?L()(t.ScheduleDate).format("YYYY-MM-DD"):null}),pageIndex:We,pageSize:He}}).then((function(e){R.Z.set("atv",(0,o.Z)((0,o.Z)({},t),{},{ScheduleDate:L()(t.ScheduleDate).format("YYYY-MM-DD")})),S(e.data.data),Be(e.data.totalcount)})).finally((function(){var e;return null===(e=kt.current)||void 0===e?void 0:e.instance.endCustomLoading()}))},Vt=(0,d.useCallback)((function(){h.Z.all(["tas/transportmode?Active=1","tas/location?Active=1","tas/carrier?Active=1","tas/costcode?Active=1"].map((function(e){return h.Z.get(e)}))).then(h.Z.spread((function(e,t,n,a){pe(e.data.map((function(e){return(0,o.Z)({value:e.Id,label:e.Code},e)}))),ve(t.data.map((function(e){return(0,o.Z)({value:e.Id,label:"".concat(e.Code," - ").concat(e.Description)},e)}))),Ze(n.data.map((function(e){return{value:e.Id,label:"".concat(e.Code," - ").concat(e.Description)}}))),Ie(a.data.map((function(e){return{value:e.Id,label:"".concat(e.Code," - ").concat(e.Description)}})))}))).catch((function(){})).finally((function(){return at(!1)}))}),[]),Ut=(0,d.useCallback)((function(e){P(e),W(!0)}),[]),Wt=(0,d.useCallback)((function(e){P(e),Ae(!0)}),[]),zt=(0,d.useCallback)((function(e){st(e),Qe(!0)}),[]),$t=(0,d.useCallback)((function(e){ut(!0),P(e)}),[]),_t=(0,d.useCallback)((function(e){console.log("clicked",e),ht(!0),P(e)}),[]),Ht=[{label:"#",name:"Id",width:"80px",alignment:"left",allowEditing:!1,cellRender:function(e){return(0,w.jsx)("div",{children:(0,w.jsx)(A.Link,{to:"/tas/activetransport/".concat(e.data.Id),children:(0,w.jsx)("span",{type:"button",className:"text-blue-600 hover:underline",children:e.value})})})}},{label:"Day",name:"DayNum",width:"100px",alignment:"left",allowEditing:!1},{label:"Mode",name:"TransportModeName",width:"70px",alignment:"left",allowEditing:!1},{label:"Dir",name:"Direction",width:"80px",allowEditing:!1,cellRender:function(e){return(0,w.jsx)(p.Z,{color:"IN"===e.value?"green":"OUT"===e.value?"blue":"magenta",className:"text-center text-[10px] font-semibold",children:e.value})}},{label:"Code",name:"Code",allowEditing:!1},{label:"Air Craft Code",name:"AircraftCode",allowEditing:!1},{label:"Description",name:"Description",allowEditing:!0},{label:"Schedule Start Date",name:"ScheduleStartDate",allowEditing:!1,cellRender:function(e){return(0,w.jsx)("div",{children:L()(e.value).format("YYYY-MM-DD")})}},{label:"Schedule End Date",name:"ScheduleEndDate",allowEditing:!1,cellRender:function(e){return(0,w.jsx)("div",{children:L()(e.value).format("YYYY-MM-DD")})}},{label:"Special",name:"Special",width:"70px",alignment:"center",allowEditing:!1,allowFiltering:!1,cellRender:function(e){return(0,w.jsx)(c.Jg,{disabled:!0,iconSize:18,value:1===e.data.Special||0})}},{label:"",name:"action",width:"130px",alignment:"center",allowEditing:!1,allowSorting:!1,cellRender:function(e){return(0,w.jsxs)("div",{className:"flex justify-end gap-3",onClick:function(e){return e.stopPropagation()},children:[(0,w.jsx)("button",{type:"button",className:"edit-button",onClick:function(){return Xt(e.data)},children:"Edit"}),(0,w.jsx)(f.Z,{menu:{onClick:function(t){return function(e,t){console.log("object",e,t),e.domEvent.stopPropagation(),"0"===e.key&&Wt(t),"1"===e.key&&$t(t),"2"===e.key&&zt(t),"4"!==e.key&&"3"!==e.key||Ut(t),"5"===e.key&&_t(t)}(t,e.data)},items:(t=e.data,n=Tt,1===t.Active?"EXTERNAL"!==t.Direction?[{label:"Extend",key:"0"},{label:"Change Air Craft",key:"1"},{label:"Bus stop",key:"2"},{label:"Deactivate",key:"3",danger:!0},{label:"Edit Real ETD",key:"5",disabled:!(null!==n&&void 0!==n?n:L()(n).isValid())}]:[{label:"Change Air Craft",key:"1"},{label:"Bus stop",key:"2"},{label:"Deactivate",key:"3",danger:!0}]:[{label:"Reactivate",key:"4",danger:!0,disabled:!0}])},placement:"bottomLeft",children:(0,w.jsx)(i.Button,{icon:(0,w.jsx)(x.Z,{})})})]});var t,n}}],Xt=(0,d.useCallback)((function(e){P((0,o.Z)((0,o.Z)({},e),{},{StartDate:L()(),EndDate:L()(e.ScheduleEndDate)})),ce(!0)}),[]),Jt=(0,d.useCallback)((function(){(0,h.Z)({method:"delete",url:"tas/activetransport",data:{id:M.Id}}).then((function(){Bt(),W(!1)})).catch((function(e){W(!1),Mt.error({message:"Warning",duration:0,btn:!1,description:e.response.data.message})}))}),[M]),Kt=[{label:"Port Of Departure",name:"fromLocationId",className:"col-span-3 mb-2",type:"select",inputprops:{options:xe}},{label:"Port Of Arrive",name:"toLocationId",className:"col-span-3 mb-2",type:"select",inputprops:{options:xe}},{label:"Transport Code",name:"transportCode",className:"col-span-3 mb-2"},{label:"Active",name:"Active",className:"col-span-1 mb-2",type:"check",inputprops:{indeterminatewith:!0}},{label:"Mode",name:"TransportModeId",className:"col-span-3 mb-2",type:"select",inputprops:{options:me}},{label:"Week Days",name:"dayNum",className:"col-span-3 mb-3",type:"select",inputprops:{options:[{value:"Monday",label:"Monday"},{value:"Tuesday",label:"Tuesday"},{value:"Wednesday",label:"Wednesday"},{value:"Thursday",label:"Thursday"},{value:"Friday",label:"Friday"},{value:"Saturday",label:"Saturday"},{value:"Sunday",label:"Sunday"}]}},{label:"Schedule Date",name:"ScheduleDate",className:"col-span-3 mb-2",type:"date",inputprops:{showWeek:!0}}],Gt=[{label:"Start Date",name:"StartDate",className:"col-span-3 mb-2",type:"date",rules:[{required:!0,message:"Start date is required"}],inputprops:{showWeek:!0,className:"w-full"}},{label:"End Date",name:"EndDate",className:"col-span-3 mb-2",type:"date",rules:[{required:!0,message:"End date is required"}],inputprops:{showWeek:!0,className:"w-full"}},{label:"Mode",name:"TransportModeId",className:"col-span-3 mb-2",type:"select",inputprops:{options:me}},{label:"Direction",name:"Direction",className:"col-span-3 mb-2",type:"select",inputprops:{options:[{value:"IN",label:"IN"},{value:"OUT",label:"OUT"}]}}],Qt=(0,d.useCallback)((function(e){var t=e.changes[0];(0,h.Z)({method:"put",url:"tas/activetransport/changedescr",data:{id:t.key,description:t.data.Description}}).then((function(e){Bt()})).catch((function(e){}))}),[]);return(0,w.jsxs)("div",{children:[Ot,(0,w.jsxs)("div",{className:nt?"block":"hidden",children:[(0,w.jsx)(i.Skeleton,{className:"w-full h-[150px] mb-3"}),(0,w.jsx)(i.Skeleton,{className:"w-full h-[250px]"})]}),(0,w.jsxs)("div",{className:nt?"hidden":"block",children:[(0,w.jsxs)("div",{className:"rounded-ot bg-white px-3 pb-3 pt-2 mb-3 shadow-md",children:[(0,w.jsx)("div",{className:"text-lg font-bold mb-2",children:"Active Transport Types"}),(0,w.jsx)(i.Form,{form:Zt,fields:Kt,className:"grid grid-cols-12 gap-x-5",onFinish:Bt,noLayoutConfig:!0,labelCol:{flex:"110px"},size:"small",initValues:(0,o.Z)((0,o.Z)({Active:1},g),{},{fromLocationId:Pt.DepartLocationId,toLocationId:Pt.ArriveLocationId,ScheduleDate:null!==g&&void 0!==g&&g.ScheduleDate&&L()(null===g||void 0===g?void 0:g.ScheduleDate).isValid()?L()(null===g||void 0===g?void 0:g.ScheduleDate):L()()}),children:(0,w.jsxs)("div",{className:"flex gap-4 justify-end col-span-12",children:[(0,w.jsx)(i.Button,{htmlType:"submit",icon:(0,w.jsx)(v.Z,{}),children:"Search"}),(0,w.jsx)(i.Button,{htmlType:"submit",onClick:function(){return we(!0)},icon:(0,w.jsx)(j,{}),children:"Export"})]})})]}),(0,w.jsx)(re,{data:E,pageSize:He,pageIndex:We,totalCount:Pe,children:(0,w.jsx)(i.CustomTable,{ref:kt,data:E,keyExpr:"Id",columns:Ht,onChangePageSize:function(e){return Xe(e)},onChangePageIndex:function(e){return ze(e)},pageSize:He,pageIndex:We,totalCount:Pe,pagerPosition:"bottom",showColumnLines:!1,onRowDblClick:function(e){return Ft("/tas/activetransport/".concat(e.data.Id))},wordWrapEnabled:!0,filterRow:{visible:!0,applyFilter:"auto"},tableClass:"max-h-[calc(100vh-360px)] border-t",editing:{mode:"cell",allowUpdating:!0},onSaving:Qt,title:(0,w.jsxs)("div",{className:"flex justify-between py-2 px-1",children:[(0,w.jsxs)("div",{className:"flex items-center gap-1",children:[(0,w.jsx)("span",{className:"font-bold",children:Pe}),(0,w.jsx)("span",{className:" text-gray-400",children:"results"})]}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsx)(i.Button,{onClick:function(){return oe(!0)},icon:(0,w.jsx)(C.Z,{}),children:"Add Special"}),(0,w.jsx)(i.Button,{onClick:function(){return J(!0)},icon:(0,w.jsx)(C.Z,{}),children:"Add Schedule"})]})]})})})]}),(0,w.jsxs)(c.GI,{visible:U,showTitle:!1,height:110,width:350,children:[(0,w.jsxs)("div",{children:["Are you sure you want to ",1===(null===M||void 0===M?void 0:M.Active)?"deactivate":"reactivate"," this record?"]}),(0,w.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,w.jsx)(i.Button,{type:1===(null===M||void 0===M?void 0:M.Active)?"danger":"success",onClick:Jt,children:"Yes"}),(0,w.jsx)(i.Button,{onClick:function(){return W(!1)},children:"No"})]})]}),(0,w.jsx)(X,{transportMode:me,carrier:De,location:xe,open:Fe,onReload:Bt,editData:M,onCancel:function(){return Ae(!1)}}),(0,w.jsx)(i.Modal,{open:H,title:"Add Schedule",onCancel:function(){return J(!1)},width:900,children:(0,w.jsx)(i.Form,(0,o.Z)((0,o.Z)({form:Ct,fields:T(me,De,xe),onFinish:function(e){Le(!0);var t=me.find((function(t){return t.value===e.transportModeId}));"Drive"===(null===t||void 0===t?void 0:t.label)?(0,h.Z)({method:"post",url:"tas/transportschedule/createscheduledrive",data:(0,o.Z)({startDate:e.startDate?L()(e.startDate).format("YYYY-MM-DD"):null,endDate:e.endDate?L()(e.endDate).format("YYYY-MM-DD"):null},e)}).then((function(e){Bt(),Ct.resetFields(),J(!1)})).catch((function(e){})).then((function(){return Le(!1)})):(0,h.Z)({method:"post",url:"tas/transportschedule/createschedule",data:(0,o.Z)((0,o.Z)({},e),{},{startDate:e.startDate?L()(e.startDate).format("YYYY-MM-DD"):null,endDate:e.endDate?L()(e.endDate).format("YYYY-MM-DD"):null,etd:e.etd,eta:e.eta,outETD:e.outETD,outETA:e.outETA,inSeats:e.inSeats,outSeats:e.outSeats})}).then((function(e){Bt(),Ct.resetFields(),J(!1)})).catch((function(e){})).then((function(){return Le(!1)}))},className:"gap-x-4"},ae),{},{children:(0,w.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2 mt-4",children:[(0,w.jsx)(i.Button,{type:"primary",onClick:function(){return Ct.submit()},loading:qe,icon:(0,w.jsx)(y.Z,{}),children:"Save"}),(0,w.jsx)(i.Button,{onClick:function(){J(!1),Ct.resetFields()},disabled:qe,children:"Cancel"})]})}))}),(0,w.jsx)(i.Modal,{open:ne,title:"Add Special",onCancel:function(){return oe(!1)},width:900,children:(0,w.jsx)(i.Form,(0,o.Z)((0,o.Z)({form:It,fields:k(me,De,xe,ye),onFinish:function(e){Le(!0),(0,h.Z)({method:"post",url:"tas/activetransport/createspecial",data:(0,o.Z)((0,o.Z)({},e),{},{eventDate:e.eventDate?L()(e.eventDate).format("YYYY-MM-DD"):null,etd:e.etd,eta:e.eta})}).then((function(e){Bt(),It.resetFields(),oe(!1)})).catch((function(e){})).then((function(){return Le(!1)}))},className:"gap-x-4"},ae),{},{children:(0,w.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2 mt-4",children:[(0,w.jsx)(i.Button,{type:"primary",onClick:function(){return It.submit()},loading:qe,icon:(0,w.jsx)(y.Z,{}),children:"Save"}),(0,w.jsx)(i.Button,{onClick:function(){oe(!1),It.resetFields()},disabled:qe,children:"Cancel"})]})}))}),(0,w.jsx)(i.Modal,{open:ie,title:"Edit Transport",onCancel:function(){return ce(!1)},width:700,children:(0,w.jsx)(i.Form,(0,o.Z)((0,o.Z)({form:St,fields:O(0,De,0),onFinish:function(e){Le(!0),(0,h.Z)({method:"put",url:"tas/activetransport",data:(0,o.Z)((0,o.Z)({},e),{},{StartDate:e.StartDate?L()(e.StartDate).format("YYYY-MM-DD"):null,EndDate:e.EndDate?L()(e.EndDate).format("YYYY-MM-DD"):null,id:M.Id})}).then((function(e){Bt(),St.resetFields(),ce(!1)})).catch((function(e){})).then((function(){return Le(!1)}))},editData:M,className:"gap-x-4"},ae),{},{children:(0,w.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2 mt-4",children:[(0,w.jsx)(i.Button,{type:"primary",onClick:function(){return St.submit()},loading:qe,icon:(0,w.jsx)(y.Z,{}),children:"Save"}),(0,w.jsx)(i.Button,{onClick:function(){ce(!1),St.resetFields()},disabled:qe,children:"Cancel"})]})}))}),(0,w.jsx)(i.Modal,{open:Ne,onCancel:function(){return we(!1)},title:"Export Transport schedule",width:750,children:(0,w.jsx)(i.Form,{form:wt,fields:Gt,onFinish:function(e){gt(!0),(0,h.Z)({method:"put",responseType:"blob",url:"tas/transportschedule/scheduleexport",data:{StartDate:e.StartDate?L()(e.StartDate).format("YYYY-MM-DD"):null,EndDate:e.EndDate?L()(e.EndDate).format("YYYY-MM-DD"):null,transportModeId:e.TransportModeId?e.TransportModeId:null,Direction:e.Direction?e.Direction:null}}).then(function(){var t=(0,r.Z)((0,a.Z)().mark((function t(n){var r,o,l;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.URL.createObjectURL(new Blob([n.data]));case 2:return r=t.sent,o="TAS_TRANSPORT_SCHEDULE_".concat(L()(e.startdate).format("YYYY-MM-DD"),".xlsx"),t.next=6,document.createElement("a");case 6:return(l=t.sent).href=r,t.next=10,l.setAttribute("download",o);case 10:return t.next=12,document.body.appendChild(l);case 12:return t.next=14,l.click();case 14:we(!1);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){})).then((function(){gt(!1)}))},layout:"vertical",initValues:{StartDate:L()(),EndDate:L()().add(2,"M"),TransportModeId:null===(b=me.find((function(e){return"Airplane"===e.Code})))||void 0===b?void 0:b.Id,Direction:"IN"},className:"gap-x-4",noLayoutConfig:!0,children:(0,w.jsx)("div",{className:"col-span-12 flex justify-end gap-4 mt-4",children:(0,w.jsx)(i.Button,{icon:(0,w.jsx)(I.Z,{}),type:"primary",htmlType:"button",onClick:wt.submit,loading:bt,children:"Download"})})})}),(0,w.jsx)($,{open:Ge,onCancel:function(){return Qe(!1)},editData:lt}),(0,w.jsx)(G,{open:dt,onCancel:function(){return ut(!1)},editData:M,refresh:Bt}),(0,w.jsx)(te,{open:ft,onCancel:function(){return ht(!1)},title:"Edit Real ETD (".concat(L()(Tt).format("YYYY-MM-DD"),")"),width:600,rowData:M,onReset:Bt,scheduleDate:Tt})]})}},60020:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(87462),r=n(47313),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},l=n(17469),s=function(e,t){return r.createElement(l.Z,(0,a.Z)({},e,{ref:t,icon:o}))};var i=r.forwardRef(s)},37289:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(87462),r=n(47313),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},l=n(17469),s=function(e,t){return r.createElement(l.Z,(0,a.Z)({},e,{ref:t,icon:o}))};var i=r.forwardRef(s)},23983:function(e,t,n){n.d(t,{Z:function(){return N}});var a=n(29439),r=n(47313),o=n(38925),l=n(72884),s=n.n(l),i=n(10288),c=n(205),d=n(74714),u=n(61677),m=n(54689),p=n(23961),f=n(22834),h=n(83281),x=n(11147),v=n(81180),b=n(2717),g=n(4942),D=n(58973),Z=(0,D.I$)("Popconfirm",(function(e){return function(e){var t,n,a=e.componentCls,r=e.iconCls,o=e.antCls,l=e.zIndexPopup,s=e.colorText,i=e.colorWarning,c=e.marginXXS,d=e.marginXS,u=e.fontSize,m=e.fontWeightStrong,p=e.colorTextHeading;return(0,g.Z)({},a,(n={zIndex:l},(0,g.Z)(n,"&".concat(o,"-popover"),{fontSize:u}),(0,g.Z)(n,"".concat(a,"-message"),(t={marginBottom:d,display:"flex",flexWrap:"nowrap",alignItems:"start"},(0,g.Z)(t,"> ".concat(a,"-message-icon ").concat(r),{color:i,fontSize:u,lineHeight:1,marginInlineEnd:d}),(0,g.Z)(t,"".concat(a,"-title"),{fontWeight:m,color:p,"&:only-child":{fontWeight:"normal"}}),(0,g.Z)(t,"".concat(a,"-description"),{marginTop:c,color:s}),t)),(0,g.Z)(n,"".concat(a,"-buttons"),{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:d}}),n))}(e)}),(function(e){return{zIndexPopup:e.zIndexPopupBase+60}}),{resetStyle:!1}),j=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},C=function(e){var t=e.prefixCls,n=e.okButtonProps,l=e.cancelButtonProps,s=e.title,i=e.description,c=e.cancelText,u=e.okText,b=e.okType,g=void 0===b?"primary":b,D=e.icon,Z=void 0===D?r.createElement(o.Z,null):D,j=e.showCancel,C=void 0===j||j,y=e.close,I=e.onConfirm,E=e.onCancel,S=e.onPopupClick,N=r.useContext(d.E_).getPrefixCls,w=(0,x.Z)("Popconfirm",v.Z.Popconfirm),T=(0,a.Z)(w,1)[0],k=(0,p.Z)(s),q=(0,p.Z)(i);return r.createElement("div",{className:"".concat(t,"-inner-content"),onClick:S},r.createElement("div",{className:"".concat(t,"-message")},Z&&r.createElement("span",{className:"".concat(t,"-message-icon")},Z),r.createElement("div",{className:"".concat(t,"-message-text")},k&&r.createElement("div",{className:"".concat(t,"-title")},k),q&&r.createElement("div",{className:"".concat(t,"-description")},q))),r.createElement("div",{className:"".concat(t,"-buttons")},C&&r.createElement(f.ZP,Object.assign({onClick:E,size:"small"},l),c||(null===T||void 0===T?void 0:T.cancelText)),r.createElement(m.Z,{buttonProps:Object.assign(Object.assign({size:"small"},(0,h.nx)(g)),n),actionFn:I,close:y,prefixCls:N("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},u||(null===T||void 0===T?void 0:T.okText))))},y=function(e){var t=e.prefixCls,n=e.placement,o=e.className,l=e.style,i=j(e,["prefixCls","placement","className","style"]),c=(0,r.useContext(d.E_).getPrefixCls)("popconfirm",t),u=Z(c);return(0,(0,a.Z)(u,1)[0])(r.createElement(b.ZP,{placement:n,className:s()(c,o),style:l,content:r.createElement(C,Object.assign({prefixCls:c},i))}))},I=void 0,E=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},S=r.forwardRef((function(e,t){var n,l,m=e.prefixCls,p=e.placement,f=void 0===p?"top":p,h=e.trigger,x=void 0===h?"click":h,v=e.okType,b=void 0===v?"primary":v,g=e.icon,D=void 0===g?r.createElement(o.Z,null):g,j=e.children,y=e.overlayClassName,S=e.onOpenChange,N=e.onVisibleChange,w=E(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),T=r.useContext(d.E_).getPrefixCls,k=(0,i.Z)(!1,{value:null!==(n=e.open)&&void 0!==n?n:e.visible,defaultValue:null!==(l=e.defaultOpen)&&void 0!==l?l:e.defaultVisible}),q=(0,a.Z)(k,2),L=q[0],M=q[1],O=function(e,t){M(e,!0),null===N||void 0===N||N(e),null===S||void 0===S||S(e,t)},F=T("popconfirm",m),A=s()(F,y),Y=Z(F);return(0,(0,a.Z)(Y,1)[0])(r.createElement(u.Z,Object.assign({},(0,c.Z)(w,["title"]),{trigger:x,placement:f,onOpenChange:function(t,n){var a=e.disabled;void 0!==a&&a||O(t,n)},open:L,ref:t,overlayClassName:A,content:r.createElement(C,Object.assign({okType:b,icon:D},e,{prefixCls:F,close:function(e){O(!1,e)},onConfirm:function(t){var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(I,t)},onCancel:function(t){var n;O(!1,t),null===(n=e.onCancel)||void 0===n||n.call(I,t)}})),"data-popover-inject":!0}),j))}));S._InternalPanelDoNotUseOrYouWillBeFired=y;var N=S}}]);