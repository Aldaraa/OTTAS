"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[5134],{15134:function(e,t,s){s.r(t),s.d(t,{default:function(){return P}});var n=s(29439),l=s(56573),i=s(47313),a=s(58467),r=s(2135),o=s(10658),c=s.n(o),d=s(42614),u=s(67805),x=s(83313),m=s(2880),h=s(74165),f=s(15861),v=s(71744),p=s(39548),j=s(69893),N=s(75549),y=s(45050),g=s(4123),b=s(87866),S=s(26317),w=s(84523),k=s(15413),I=s(37282),Z=s(46417);var D=function(){var e=(0,i.useState)(!1),t=(0,n.Z)(e,2),s=t[0],a=t[1],o=(0,i.useContext)(d.V),c=o.state,u=(o.action,(0,i.useState)(null)),x=(0,n.Z)(u,2),D=x[0],z=x[1];(0,i.useEffect)((function(){c.socket&&c.userInfo&&(A(),c.socket.on("SendMessage",(function(e){z(e)})),c.socket.on("socketUpdate",(function(e){c.socket.send("newMessage",c.userInfo.Id)})))}),[c.socket,c.userInfo]);var A=function(){var e=(0,f.Z)((0,h.Z)().mark((function e(){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.socket._connectionStarted){e.next=8;break}return e.prev=1,e.next=4,c.socket.send("newMessage",c.userInfo.Id);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)("header",{className:"header h-[50px] text-white relative z-10 px-[25px] flex justify-between bg-[#27223f]",children:[(0,Z.jsx)("div",{className:"flex items-center",children:(0,Z.jsx)("img",{src:I,width:60})}),(0,Z.jsxs)("div",{className:"flex items-center gap-8",children:[(0,Z.jsx)(w.Z,{trigger:"click",open:s,onOpenChange:function(e){return a(e)},disabled:0===(null===D||void 0===D?void 0:D.employeeNoticationShortcutDetails.length),dropdownRender:function(e){var t;return(0,Z.jsxs)("div",{className:"bg-white rounded-ot shadow-md w-[400px] overflow-hidden pt-1 relative max-h-[635px]",children:[(0,Z.jsx)("div",{className:"max-h-[400px] overflow-auto",children:(null===D||void 0===D||null===(t=D.employeeNoticationShortcutDetails)||void 0===t?void 0:t.length)>0?null===D||void 0===D?void 0:D.employeeNoticationShortcutDetails.map((function(e){return(0,Z.jsxs)("div",{className:"flex flex-col gap-1 items-center px-4 py-1 cursor-pointer hover:bg-blue-100 transition-all ".concat(0===e.viewStatus?"font-bold":""),onClick:function(){return t=e.notifIndex,void(0,l.Z)({method:"get",url:"tas/notification/detail/".concat(t)}).then((function(e){a(!1)})).catch((function(e){}));var t},children:[(0,Z.jsx)("div",{className:"text-[12px]",children:null===e||void 0===e?void 0:e.description}),(0,Z.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,Z.jsx)("div",{className:"self-end text-[11px] text-gray-600",children:e.changeEmployee}),(0,Z.jsx)("div",{className:"self-end text-[11px] text-gray-400",children:e.relativeTime})]})]})})):(0,Z.jsx)("div",{className:"px-4 py-1",children:"No notification"})}),(null===D||void 0===D?void 0:D.employeeNoticationShortcutDetails.length)>0&&(0,Z.jsx)("div",{className:"bg-white",children:(0,Z.jsx)(r.Link,{to:"/tas/notifications",onClick:function(){return a(!1)},className:" py-1 hover:underline decoration-blue-400 block text-center border-t",children:(0,Z.jsx)("span",{className:"text-blue-400",children:"See all"})})})]})},children:(0,Z.jsx)(k.Z,{count:null===D||void 0===D?void 0:D.newNotificationCount,size:"small",className:"cursor-pointer",children:(0,Z.jsx)(v.Z,{style:{color:(null===D||void 0===D?void 0:D.employeeNoticationShortcutDetails.length)>0?"white":"lightgray",fontSize:"18px"}})})}),(0,Z.jsx)(w.Z,{trigger:"click",dropdownRender:function(e){var t,s,n,l;return(0,Z.jsxs)("div",{className:"bg-white rounded-ot shadow-md overflow-hidden pt-1",children:[(0,Z.jsxs)("div",{className:"flex gap-2 items-center px-4 py-1 cursor-default",children:[(0,Z.jsx)(p.Z,{style:{fontSize:"16px"}}),(0,Z.jsxs)("div",{children:[null===(t=c.userInfo)||void 0===t?void 0:t.Firstname," ",null===(s=c.userInfo)||void 0===s?void 0:s.Lastname]})]}),(0,Z.jsxs)("div",{className:"flex gap-2 items-center px-4 py-1 cursor-default",children:[(0,Z.jsx)(j.Z,{style:{fontSize:"16px"}}),(0,Z.jsx)("div",{children:c.userInfo.Role})]}),(0,Z.jsxs)("div",{className:"flex gap-2 items-center px-4 py-1 cursor-default",children:[null!==(n=c.userInfo)&&void 0!==n&&n.ReadonlyAccess?(0,Z.jsx)(N.Z,{style:{fontSize:"16px"}}):(0,Z.jsx)(y.Z,{style:{fontSize:"16px"}}),(0,Z.jsx)("div",{children:null!==(l=c.userInfo)&&void 0!==l&&l.ReadonlyAccess?"Only read":"Full access"})]}),(0,Z.jsxs)("div",{className:"flex gap-2 items-center px-4 py-1 cursor-default",children:[(0,Z.jsx)(g.Z,{rotate:90,style:{fontSize:"16px"}}),(0,Z.jsx)("div",{children:c.userInfo.Mobile})]}),(0,Z.jsxs)("div",{className:"flex gap-2 items-center px-4 py-1 cursor-default",children:[(0,Z.jsx)(b.Z,{style:{fontSize:"16px"}}),(0,Z.jsx)("div",{children:c.userInfo.Email})]})]})},children:(0,Z.jsxs)("div",{className:"flex flex-col cursor-pointer",children:[(0,Z.jsxs)("div",{className:"text-xs font-semibold",children:[c.userInfo.Firstname,".",c.userInfo.Lastname[0]]}),(0,Z.jsx)("div",{className:"text-xs",children:c.userInfo.Role})]})}),(0,Z.jsx)(m.Tooltip,{title:"Help",children:(0,Z.jsx)("button",{type:"button",className:"flex items-center gap-2",children:(0,Z.jsx)(S.Z,{style:{fontSize:"20px"}})})})]})]})},z=s(1522),A=s(41612),R=s(21521),T=s(18637),C=s(15708);function M(e){var t=e.label,s=e.key,n=e.icon,l=e.children,i=e.type,a=e.disabled;e.name,e.routeName;return{key:s,icon:n,children:l,label:t,type:i,disabled:a}}var P=function(){var e,t,s=(0,i.useState)(null),o=(0,n.Z)(s,2),h=o[0],f=o[1],v=(0,i.useState)(!0),p=(0,n.Z)(v,2),j=p[0],N=p[1],y=(0,i.useState)(c()()),g=(0,n.Z)(y,2),b=(g[0],g[1],(0,i.useState)(null)),S=(0,n.Z)(b,2),w=(S[0],S[1]),k=(0,i.useState)("transportlist"),I=(0,n.Z)(k,2),P=(I[0],I[1],(0,i.useState)(!1)),L=(0,n.Z)(P,2),E=L[0],V=L[1],q=(0,i.useState)(null),F=(0,n.Z)(q,2),H=(F[0],F[1]),G=((0,a.s0)(),(0,a.UO)().employeeId,(0,i.useContext)(d.V)),O=G.state,U=G.action;(0,i.useEffect)((function(){_()}),[]);var _=function(){(0,l.Z)({method:"get",url:"tas/employee/".concat(O.userInfo.Id)}).then((function(e){U.saveUserProfileData(e.data),f(e.data),w({employeeStatusDates:e.data.employeeStatusDates,employeeTransports:e.data.employeeTransports})})).catch((function(e){})).then((function(){return N(!1)}))},B=[M({name:"My Request",label:(0,Z.jsx)(r.Link,{to:"/guest/request",children:(0,Z.jsx)("span",{className:"submenu-title",children:"My Request"})}),key:"/guest/request"}),M({name:"Documents",routeName:"Documents",label:(0,Z.jsx)("span",{className:"font-medium",children:"Create Request"}),key:"documents",icon:(0,Z.jsx)(C.Z,{style:{fontSize:"16px"}}),type:"group",children:[M({name:"Non Site Travel",routeName:"NonSiteTravel",label:(0,Z.jsx)(r.Link,{to:"/guest/nonsitetravel/".concat(O.userInfo.Id),children:(0,Z.jsx)("span",{className:"submenu-title",children:"Non Site Travel"})}),key:"/guest/nonsitetravel"}),M({name:"TAS Profile Changes",routeName:"TASProfileChanges",label:(0,Z.jsx)(r.Link,{to:"/guest/samprofilechanges/".concat(O.userInfo.Id),children:(0,Z.jsx)("span",{className:"submenu-title",children:"TAS Profile Changes"})}),key:"/guest/samprofilechanges"}),M({name:"Site Travel",routeName:"SiteTravel",label:(0,Z.jsx)(r.Link,{to:"/guest/sitetravel/".concat(O.userInfo.Id),children:(0,Z.jsx)("span",{className:"submenu-title",children:"Site Travel"})}),key:"/guest/sitetravel"}),M({name:"De-Mobilisation",routeName:"De-Mobilisation",label:(0,Z.jsx)(r.Link,{to:"/guest/de-mobilisation/".concat(O.userInfo.Id),children:(0,Z.jsx)("span",{className:"submenu-title",children:"De-Mobilisation"})}),key:"/guest/de-mobilisation"})]})],K=(0,i.useMemo)((function(){if(h){if(h.Gender&&h.Active)return z;if(h.Gender&&!h.Active)return A;if(!h.Gender&&h.Active)return R;if(!h.Gender&&!h.Active)return T}}),[h]);return(0,Z.jsxs)("div",{className:"relative flex flex-col w-full z-50",children:[(0,Z.jsx)(D,{}),(0,Z.jsx)("div",{className:"w-full flex items-start gap-3 p-3",children:j?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(m.Skeleton,{className:"w-[300px] h-[300px]"}),(0,Z.jsx)(m.Skeleton,{className:"flex-1 h-[300px]"})]}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("div",{className:"",children:(0,Z.jsx)("div",{className:"relative flex flex-col gap-4 w-[300px]",children:(0,Z.jsxs)("div",{className:"w-full bg-white rounded-ot py-3 px-3 shadow-card self-start",children:[(0,Z.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Z.jsx)("img",{src:K,className:"w-[70px] rounded-ot"}),(0,Z.jsxs)("div",{className:"font-bold mt-2 text-primary",children:[null===h||void 0===h?void 0:h.Firstname," ",null===h||void 0===h?void 0:h.Lastname," (",null===h||void 0===h?void 0:h.Id,")"]}),(0,Z.jsxs)("div",{className:"text-gray-500 text-center text-xs",children:[null===h||void 0===h?void 0:h.EmployerName," \u2014 ",null===h||void 0===h?void 0:h.PositionName]})]}),(0,Z.jsxs)("div",{className:"mt-4",children:[(0,Z.jsx)("div",{className:"font-semibold mb-2",children:"Detail information"}),(0,Z.jsx)("table",{className:"text-xs",children:(0,Z.jsxs)("tbody",{children:[(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{className:"text-gray-400 w-[100px]",children:"SAPID:"}),(0,Z.jsx)("td",{children:null===h||void 0===h?void 0:h.SAPID})]}),(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{className:"text-gray-400",children:"Position:"}),(0,Z.jsx)("td",{children:null===h||void 0===h?void 0:h.PositionName})]}),(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{className:"text-gray-400",children:"Department:"}),(0,Z.jsx)("td",{className:"flex-1",children:null===h||void 0===h?void 0:h.DepartmentName})]}),(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{className:"text-gray-400",children:"AD Account:"}),(0,Z.jsx)("td",{className:"flex-1",children:null===h||void 0===h?void 0:h.ADAccount})]}),(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{className:"text-gray-400",children:"Employer:"}),(0,Z.jsx)("td",{className:"flex-1",children:null===h||void 0===h?void 0:h.EmployerName})]}),(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{className:"text-gray-400",children:"Phone Number:"}),(0,Z.jsx)("td",{className:"flex-1",children:null===h||void 0===h?void 0:h.PersonalMobile})]}),(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{className:"text-gray-400",children:"People Type:"}),(0,Z.jsx)("td",{children:null===h||void 0===h?void 0:h.PeopleTypeName})]}),(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{className:"text-gray-400",children:"Room Number:"}),(0,Z.jsx)("td",{children:null!==(e=O.userData)&&void 0!==e&&e.RoomNumber?null===(t=O.userData)||void 0===t?void 0:t.RoomNumber:(0,Z.jsx)("span",{className:"text-gray-400",children:"Not Registered"})})]})]})})]}),1===O.userInfo.CreateRequest?(0,Z.jsx)("div",{className:"w-full border-t mt-3",children:(0,Z.jsx)(u.Z,{id:"tas",mode:"inline",defaultOpenKeys:["people","documents"],items:B,className:"transition-all duration-0"})}):null]})})}),(0,Z.jsx)("div",{className:"flex-1 bg-white rounded-ot shadow-card px-4 py-3",children:(0,Z.jsx)(a.j3,{})})]})}),(0,Z.jsx)(x.Z,{title:"Select employee",open:E,width:1e3,onClose:function(){return V(!1)},children:(0,Z.jsx)(m.PeopleSearch,{onSelect:function(e){H(e),V(!0)}})})]})}},15708:function(e,t,s){s.d(t,{Z:function(){return o}});var n=s(87462),l=s(47313),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"},a=s(17469),r=function(e,t){return l.createElement(a.Z,(0,n.Z)({},e,{ref:t,icon:i}))};var o=l.forwardRef(r)}}]);