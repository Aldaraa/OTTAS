"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[1952],{1952:function(e,l,a){a.r(l),a.d(l,{default:function(){return V}});var n=a(1413),o=a(29439),t=a(45987),i=a(47313),s=a(2880),r=a(14261),d=a(58821),c=a(23495),u=a(82138),m=a(56573),p=a(58467),v=a(2135),b=a(42956),g=a(18711),h=a(73030),f=a(24957),x=a(53979),N=a(65040),y=a(12998),I=a(74294),C=a(21975),q=a(93031),L=a(68197),R=a(59624),j=a(76047),F=a(42614),Z=a(63462),D=a(10658),P=a.n(D),S=a(46417),w=[{name:"PassportNumber",type:"image"},{name:"PassportName",type:"image"},{name:"PassportExpiry",type:"date"},{name:"PassportRawImage",type:"image"}],M={labelCol:{xs:{span:24},sm:{span:12},md:{span:8},lg:{span:12},xl:{span:8},xxl:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}},k=new RegExp(/^[\u0410-\u042f\u04ae\u04e8]{2}\d{8}$/),A=new RegExp(/^[0-9]{8}$/),E=new RegExp(/^[A-Za-z -]+$/g),T=new RegExp(/^[0-9 +]+$/);var z=function(e){e.getData,e.changeMode,e.navigateUrl;var l,a,t,r,d,c,u,b,g,h,D,z,G,V,B,H,U,Y,O,$,J,K,W,_,Q,X,ee,le,ae,ne,oe,te,ie,se,re,de,ce,ue,me,pe,ve,be,ge,he,fe,xe,Ne,ye,Ie,Ce,qe,Le,Re,je,Fe,Ze,De,Pe,Se,we,Me,ke,Ae,Ee,Te,ze,Ge,Ve,Be,He,Ue,Ye,Oe,$e,Je,Ke,We,_e,Qe,Xe,el,ll,al,nl=(0,i.useState)(0),ol=(0,o.Z)(nl,2),tl=ol[0],il=ol[1],sl=(0,i.useState)(!1),rl=(0,o.Z)(sl,2),dl=rl[0],cl=rl[1],ul=(0,i.useState)([]),ml=(0,o.Z)(ul,2),pl=ml[0],vl=ml[1],bl=(0,i.useState)(!1),gl=(0,o.Z)(bl,2),hl=gl[0],fl=gl[1],xl=(0,i.useState)(null),Nl=(0,o.Z)(xl,2),yl=Nl[0],Il=Nl[1],Cl=(0,p.s0)(),ql=N.Z.useForm(),Ll=(0,o.Z)(ql,1)[0],Rl=y.ZP.useNotification(),jl=(0,o.Z)(Rl,2),Fl=jl[0],Zl=jl[1],Dl=(0,i.useContext)(F.V).state;(0,i.useEffect)((function(){Pl()}),[]);var Pl=function(){fl(!0),(0,m.Z)({method:"get",url:"tas/profilefield"}).then((function(e){var l={};e.data.map((function(e){l[e.ColumnName]=e})),vl(l),Ll.setFieldValue("HotelCheck",1)})).catch((function(){})).then((function(){return fl(!1)}))},Sl=[{label:null===(l=pl.NationalityId)||void 0===l?void 0:l.Label,name:"NationalityId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(a=pl.NationalityId)||void 0===a?void 0:a.FieldRequired,message:"".concat(null===(t=pl.NationalityId)||void 0===t?void 0:t.Label," is required")}],inputprops:{options:Dl.referData.nationalities}},{type:"component",component:(0,S.jsx)(N.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.NRN!==l.NRN||e.NationalityId!==l.NationalityId},children:function(e){var l,a,n,o,t=e.getFieldValue,i=e.setFieldValue,s=Dl.referData.nationalities.find((function(e){return e.value===t("NationalityId")}));return"MN"===(null===s||void 0===s?void 0:s.Code)&&10===(null===(l=t("NRN"))||void 0===l?void 0:l.length)&&i("Gender",Z.Z.getGender(t("NRN"))),(0,S.jsx)(N.Z.Item,{label:null===(a=pl.Gender)||void 0===a?void 0:a.Label,name:"Gender",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(n=pl.Gender)||void 0===n?void 0:n.FieldRequired,message:"".concat(null===(o=pl.Gender)||void 0===o?void 0:o.Label," is required")}],children:(0,S.jsx)(I.Z,{options:[{value:1,label:"Male"},{value:0,label:"Female"}]})})}})},{type:"component",component:(0,S.jsx)(N.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.NationalityId!==l.NationalityId},children:function(e){var l,a,n,o=e.getFieldValue,t=Dl.referData.nationalities.find((function(e){return e.value===o("NationalityId")}));return"MN"===(null===t||void 0===t?void 0:t.Code)&&(0,S.jsx)(N.Z.Item,{label:null===(l=pl.NRN)||void 0===l?void 0:l.Label,name:"NRN",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(a=pl.NRN)||void 0===a?void 0:a.FieldRequired,message:"".concat(null===(n=pl.NRN)||void 0===n?void 0:n.Label," is required")},{pattern:k,message:"Please use only cyrillic characters"}],children:(0,S.jsx)(C.Z,{maxLength:10,onInput:function(e){return e.target.value=e.target.value.toUpperCase()}})})}})},{type:"component",component:(0,S.jsx)(N.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.NRN!==l.NRN||e.NationalityId!==l.NationalityId},children:function(e){var l,a,n,o,t=e.getFieldValue,i=e.setFieldValue,s=Dl.referData.nationalities.find((function(e){return e.value===t("NationalityId")}));return"MN"!==(null===s||void 0===s?void 0:s.Code)||10!==(null===(l=t("NRN"))||void 0===l?void 0:l.length)||t("Dob")||i("Dob",P()(Z.Z.getDob(t("NRN")))),(0,S.jsx)(N.Z.Item,{label:null===(a=pl.Dob)||void 0===a?void 0:a.Label,name:"Dob",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(n=pl.Dob)||void 0===n?void 0:n.FieldRequired,message:"".concat(null===(o=pl.Dob)||void 0===o?void 0:o.Label," is required")}],children:(0,S.jsx)(q.Z,{})})}})},{label:null===(r=pl.Firstname)||void 0===r?void 0:r.Label,name:"Firstname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(d=pl.Firstname)||void 0===d?void 0:d.FieldRequired,message:"".concat(null===(c=pl.Firstname)||void 0===c?void 0:c.Label," is required")}]},{label:null===(u=pl.Lastname)||void 0===u?void 0:u.Label,name:"Lastname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(b=pl.Lastname)||void 0===b?void 0:b.FieldRequired,message:"".concat(null===(g=pl.Lastname)||void 0===g?void 0:g.Label," is required")}]},{label:null===(h=pl.MFirstname)||void 0===h?void 0:h.Label,name:"MFirstname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(D=pl.MFirstname)||void 0===D?void 0:D.FieldRequired,message:"".concat(null===(z=pl.MFirstname)||void 0===z?void 0:z.Label," is required")}]},{label:null===(G=pl.MLastname)||void 0===G?void 0:G.Label,name:"MLastname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(V=pl.MLastname)||void 0===V?void 0:V.FieldRequired,message:"".concat(null===(B=pl.MLastname)||void 0===B?void 0:B.Label," is required")}]},{label:null===(H=pl.CommenceDate)||void 0===H?void 0:H.Label,name:"CommenceDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date",rules:[{required:null===(U=pl.CommenceDate)||void 0===U?void 0:U.FieldRequired,message:"".concat(null===(Y=pl.CommenceDate)||void 0===Y?void 0:Y.Label," is required")}],inputprops:{format:"M/D/YYYY"}},{label:"Completion Date",name:"CompletionDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date",rules:[{required:!1,message:"Completion Date is required"}],inputprops:{format:"M/D/YYYY"}},{label:null===(O=pl.DepartmentId)||void 0===O?void 0:O.Label,name:"DepartmentId",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===($=pl.DepartmentId)||void 0===$?void 0:$.FieldRequired,message:"".concat(null===(J=pl.DepartmentId)||void 0===J?void 0:J.Label," is required")}],type:"treeSelect",inputprops:{treeData:Dl.referData.departments,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},allowClear:!0,showSearch:!0,filterTreeNode:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.Name)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())}}},{label:null===(K=pl.CostCodeId)||void 0===K?void 0:K.Label,name:"CostCodeId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(W=pl.CostCodeId)||void 0===W?void 0:W.FieldRequired,message:"".concat(null===(_=pl.CostCodeId)||void 0===_?void 0:_.Label," is required")}],inputprops:{options:Dl.referData.costCodes}},{label:null===(Q=pl.StateId)||void 0===Q?void 0:Q.Label,name:"StateId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(X=pl.StateId)||void 0===X?void 0:X.FieldRequired,message:"".concat(null===(ee=pl.StateId)||void 0===ee?void 0:ee.Label," is required")}],inputprops:{options:Dl.referData.states}},{label:null===(le=pl.Email)||void 0===le?void 0:le.Label,name:"Email",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(ae=pl.Email)||void 0===ae?void 0:ae.FieldRequired,message:"".concat(null===(ne=pl.Email)||void 0===ne?void 0:ne.Label," is required")},{type:"email",message:"The input is not valid E-mail!"}]},{type:"component",component:(0,S.jsx)(N.Z.Item,{className:"col-span-12 lg:col-span-6 mb-0",label:"AD Account",children:(0,S.jsxs)(L.Z,{gutter:8,children:[(0,S.jsx)(R.Z,{span:12,children:(0,S.jsx)(N.Z.Item,{name:"ADAccount",className:"mb-0",children:(0,S.jsx)(C.Z,{})})}),(0,S.jsx)(R.Z,{span:12,children:(0,S.jsx)(s.Button,{onClick:function(){(0,m.Z)({method:"post",url:"tas/employee/checkadaccount",data:{adAccount:Ll.getFieldValue("ADAccount")}}).then((function(e){e.data.AdAccountValidationStatus?Fl.success({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1}):Fl.error({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1,description:(0,S.jsx)("div",{children:e.data.EmployeeId&&(0,S.jsxs)(v.Link,{to:"/tas/people/search/".concat(e.data.EmployeeId),className:"text-blue-500 hover:underline",children:[e.data.Firstname," ",e.data.Lastname]})})})})).catch((function(e){})).then((function(){return cl(!1)}))},children:"Account Check"})})]})},"component-ADAccount")},{label:"Camp",name:"CampId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",inputprops:{options:null===(oe=Dl.referData)||void 0===oe?void 0:oe.camps}},{label:"Room Type",name:"RoomTypeId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",depindex:"CampId",inputprops:{optionsurl:"tas/roomtype?active=1&campId=",optionvalue:"Id",optionlabel:"Description"}},"SystemAdmin"===(null===(te=Dl.userInfo)||void 0===te?void 0:te.Role)&&{label:"Create Request",name:"CreateRequest",className:"col-span-12 lg:col-span-6 mb-0",type:"check"}],wl=[{label:null===(ie=pl.EmployerId)||void 0===ie?void 0:ie.Label,name:"EmployerId",className:"col-span-6 mb-0",type:"select",rules:[{required:null===(se=pl.EmployerId)||void 0===se?void 0:se.FieldRequired,message:"".concat(null===(re=pl.EmployerId)||void 0===re?void 0:re.Label," is required")}],inputprops:{options:Dl.referData.employers}},{label:null===(de=pl.PeopleTypeId)||void 0===de?void 0:de.Label,name:"PeopleTypeId",className:"col-span-6 mb-0",type:"select",rules:[{required:null===(ce=pl.PeopleTypeId)||void 0===ce?void 0:ce.FieldRequired,message:"".concat(null===(ue=pl.PeopleTypeId)||void 0===ue?void 0:ue.Label," type is required")}],inputprops:{options:Dl.referData.peopleTypes}},{label:null===(me=pl.SAPID)||void 0===me?void 0:me.Label,name:"SAPID",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(pe=pl.SAPID)||void 0===pe?void 0:pe.FieldRequired,message:"".concat(null===(ve=pl.SAPID)||void 0===ve?void 0:ve.Label," is required")}],inputprops:{maxLength:8}},{label:null===(be=pl.ContractNumber)||void 0===be?void 0:be.Label,name:"ContractNumber",className:"col-span-6 mb-0",rules:[{required:null===(ge=pl.ContractNumber)||void 0===ge?void 0:ge.FieldRequired,message:"".concat(null===(he=pl.ContractNumber)||void 0===he?void 0:he.Label," ID is required")}]},{label:"PersonId",name:"PersonId",className:"col-span-6 mb-0",inputprops:{disabled:!0}},{label:null===(fe=pl.PositionId)||void 0===fe?void 0:fe.Label,name:"PositionId",className:"col-span-6 mb-0",type:"select",rules:[{required:null===(xe=pl.PositionId)||void 0===xe?void 0:xe.FieldRequired,message:"".concat(null===(Ne=pl.PositionId)||void 0===Ne?void 0:Ne.Label," is required")}],inputprops:{options:Dl.referData.positions}},{label:null===(ye=pl.RosterId)||void 0===ye?void 0:ye.Label,name:"RosterId",className:"col-span-6 mb-0",type:"select",rules:[{required:null===(Ie=pl.RosterId)||void 0===Ie?void 0:Ie.FieldRequired,message:"".concat(null===(Ce=pl.RosterId)||void 0===Ce?void 0:Ce.Label," is required")}],inputprops:{options:Dl.referData.rosters}},{label:null===(qe=pl.HotelCheck)||void 0===qe?void 0:qe.Label,name:"HotelCheck",className:"col-span-6 mb-0",type:"check",rules:[{required:null===(Le=pl.HotelCheck)||void 0===Le?void 0:Le.FieldRequired,message:"".concat(null===(Re=pl.HotelCheck)||void 0===Re?void 0:Re.Label," is required")}]},{label:null===(je=pl.LocationId)||void 0===je?void 0:je.Label,name:"LocationId",className:"col-span-6 mb-0",type:"select",rules:[{required:null===(Fe=pl.LocationId)||void 0===Fe?void 0:Fe.FieldRequired,message:"".concat(null===(Ze=pl.LocationId)||void 0===Ze?void 0:Ze.Label," is required")}],inputprops:{options:null===(De=Dl.referData)||void 0===De?void 0:De.locations.filter((function(e){return 1!==e.onSite}))}},{label:null===(Pe=pl.FlightGroupMasterId)||void 0===Pe?void 0:Pe.Label,name:"FlightGroupMasterId",className:"col-span-6 mb-0",type:"select",rules:[{required:null===(Se=pl.FlightGroupMasterId)||void 0===Se?void 0:Se.FieldRequired,message:"".concat(null===(we=pl.FlightGroupMasterId)||void 0===we?void 0:we.Label," is required")}],inputprops:{options:Dl.referData.transportGroups}},{label:null===(Me=pl.SiteContactEmployeeId)||void 0===Me?void 0:Me.Label,name:"SiteContactEmployeeId",className:"col-span-12 lg:col-span-6 mb-0",type:"searchSelect",rules:[{required:null===(ke=pl.SiteContactEmployeeId)||void 0===ke?void 0:ke.FieldRequired,message:"".concat(null===(Ae=pl.SiteContactEmployeeId)||void 0===Ae?void 0:Ae.Label," is required")}],inputprops:{fetchOptions:function(e){return(0,m.Z)({method:"post",url:"tas/employee/searchshort",data:{model:{keyWord:e},pageIndex:0,pageSize:100}}).then((function(e){return e.data.data.map((function(e){return{label:"".concat(e.Firstname," ").concat(e.Lastname," /").concat(e.Mobile,"/"),value:e.Id}}))}))},showSearch:!0,placeholder:"Select user",allowClear:!0}}],Ml=[{label:null===(Ee=pl.EmergencyContactName)||void 0===Ee?void 0:Ee.Label,name:"EmergencyContactName",className:"col-span-6 mb-0",rules:[{required:null===(Te=pl.EmergencyContactName)||void 0===Te?void 0:Te.FieldRequired,message:"".concat(null===(ze=pl.EmergencyContactName)||void 0===ze?void 0:ze.Label," is required")}]},{label:null===(Ge=pl.EmergencyContactMobile)||void 0===Ge?void 0:Ge.Label,name:"EmergencyContactMobile",className:"col-span-6 mb-0",rules:[{required:null===(Ve=pl.EmergencyContactMobile)||void 0===Ve?void 0:Ve.FieldRequired,message:"".concat(null===(Be=pl.EmergencyContactMobile)||void 0===Be?void 0:Be.Label," is required")},{pattern:T,message:"Invalid phone number"}],inputprops:{className:"w-full",maxLength:15}},{label:null===(He=pl.Mobile)||void 0===He?void 0:He.Label,name:"Mobile",className:"col-span-6 mb-0",type:"number",rules:[{required:null===(Ue=pl.Mobile)||void 0===Ue?void 0:Ue.FieldRequired,message:"".concat(null===(Ye=pl.Mobile)||void 0===Ye?void 0:Ye.Label," is required")},{pattern:A,message:"".concat(null===(Oe=pl.Mobile)||void 0===Oe?void 0:Oe.Label," must be 8 digit")}],inputprops:{prefix:"+976",className:"w-full",maxLength:8}},{label:null===($e=pl.PersonalMobile)||void 0===$e?void 0:$e.Label,name:"PersonalMobile",className:"col-span-6 mb-0",type:"number",rules:[{required:null===(Je=pl.PersonalMobile)||void 0===Je?void 0:Je.FieldRequired,message:"".concat(null===(Ke=pl.PersonalMobile)||void 0===Ke?void 0:Ke.Label," is required")},{pattern:A,message:"".concat(null===(We=pl.PersonalMobile)||void 0===We?void 0:We.Label," must be 8 digit")}],inputprops:{prefix:"+976",className:"w-full",maxLength:8}},{label:null===(_e=pl.PickUpAddress)||void 0===_e?void 0:_e.Label,name:"PickUpAddress",className:"col-span-6 mb-0",type:"textarea",rules:[{required:null===(Qe=pl.PickUpAddress)||void 0===Qe?void 0:Qe.FieldRequired,message:"".concat(null===(Xe=pl.PickUpAddress)||void 0===Xe?void 0:Xe.Label," is required")}]},{label:null===(el=pl.FrequentFlyer)||void 0===el?void 0:el.Label,name:"FrequentFlyer",className:"col-span-6 mb-0",rules:[{required:null===(ll=pl.FrequentFlyer)||void 0===ll?void 0:ll.FieldRequired,message:"".concat(null===(al=pl.FrequentFlyer)||void 0===al?void 0:al.Label," is required")}]}],kl=[{type:"component",component:(0,S.jsx)(N.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.NationalityId!==l.NationalityId},children:function(e){e.getFieldValue;var l,a,n,o,t,i,s,r,d,c,u,m=null===(l=Dl.referData)||void 0===l||null===(a=l.nationalities)||void 0===a?void 0:a.find((function(e){return e.value===Ll.getFieldValue("NationalityId")}));return"MN"!==(null===m||void 0===m?void 0:m.Code)&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(N.Z.Item,{label:null===(n=pl.PassportNumber)||void 0===n?void 0:n.Label,name:"PassportNumber",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(o=pl.PassportNumber)||void 0===o?void 0:o.FieldRequired,message:"".concat(null===(t=pl.PassportNumber)||void 0===t?void 0:t.Label," is required")}],children:(0,S.jsx)(C.Z,{})}),(0,S.jsx)(N.Z.Item,{label:null===(i=pl.PassportName)||void 0===i?void 0:i.Label,name:"PassportName",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(s=pl.PassportName)||void 0===s?void 0:s.FieldRequired,message:"".concat(null===(r=pl.PassportName)||void 0===r?void 0:r.Label," is required")},{pattern:E,message:"The input is not valid name!"}],children:(0,S.jsx)(C.Z,{})}),(0,S.jsx)(N.Z.Item,{label:null===(d=pl.PassportExpiry)||void 0===d?void 0:d.Label,name:"PassportExpiry",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(c=pl.PassportExpiry)||void 0===c?void 0:c.FieldRequired,message:"".concat(null===(u=pl.PassportExpiry)||void 0===u?void 0:u.Label," is required")}],children:(0,S.jsx)(q.Z,{})})]})}})},{label:"Passport Image",name:"PassportRawImage",className:"col-span-12 lg:col-span-7 mb-0",type:"image"}],Al=function(e){var l=0;return yl&&yl.map((function(a,n){null!==e&&void 0!==e&&e.find((function(e){return e.name===a.name[0]}))&&l++})),l>0&&(0,S.jsx)(s.ErrorTabElement,{children:l})},El=[{label:(0,S.jsxs)("div",{children:["Personal ",Al([].concat(Sl,[{name:"NRN"},{name:"Gender"}]))]}),key:0,forceRender:!0,children:(0,S.jsx)("div",{className:"px-4 grid grid-cols-12 gap-x-5 gap-y-2 pt-4",children:(0,S.jsx)(s.FormItemRender,{fields:Sl,form:Ll},"t-item-1c")},"t-item-0")},{label:(0,S.jsxs)("div",{children:["On Site ",Al(wl)]}),key:1,forceRender:!0,children:(0,S.jsx)("div",{className:"px-4 grid grid-cols-12 gap-x-5 gap-y-2 pt-4",children:(0,S.jsx)(s.FormItemRender,{fields:wl,form:Ll},"t-item-2c")},"t-item-1")},{label:(0,S.jsxs)("div",{children:["Off Site ",Al([].concat(Ml,[{name:"PersonalMobile"}]))]}),key:2,forceRender:!0,children:(0,S.jsx)("div",{className:"px-4 grid grid-cols-12 gap-x-5 gap-y-2 pt-4",children:(0,S.jsx)(s.FormItemRender,{fields:Ml,form:Ll},"t-item-3c")},"t-item-2")},{label:(0,S.jsxs)("div",{children:["Citizenship ",Al(w)]}),key:4,forceRender:!0,children:(0,S.jsx)("div",{className:"px-4 grid grid-cols-12 gap-x-5 gap-y-2 pt-4",children:(0,S.jsx)(s.FormItemRender,{fields:kl,form:Ll},"t-item-5c")},"t-item-4")}];return(0,S.jsxs)(S.Fragment,{children:[hl?(0,S.jsx)(s.Skeleton,{className:"h-[400px]"}):(0,S.jsxs)(N.Z,(0,n.Z)((0,n.Z)({},M),{},{form:Ll,labelAlign:"left",onFinish:function(e){var l,a;cl(!0),Il(null);var n=new FormData;Object.keys(e).map((function(l){"PassportRawImage"!==l&&("Gender"===l?n.append(l,e[l]?1:0):n.append(l,e[l]?e[l]:""))})),n.set("PassportRawImage",null!==(l=e.PassportRawImage)&&void 0!==l&&l.file?null===(a=e.PassportRawImage)||void 0===a?void 0:a.file:""),n.set("Active",0),(0,m.Z)({method:"post",url:"tas/employee/request",data:n}).then((function(e){Cl("".concat(e.data))})).catch((function(e){var l=JSON.parse(e.response.data.message);l&&l.length>0&&Fl.error({message:"Validation Warning",duration:0,description:(0,S.jsx)("div",{children:(0,S.jsxs)("table",{className:"border-collapse border border-slate-500 text-xs mt-5",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{className:"text-[11px] font-medium",children:[(0,S.jsx)("th",{className:"border border-slate-600"}),(0,S.jsx)("th",{className:"border border-slate-600 px-1",children:"ADAccount"}),(0,S.jsx)("th",{className:"border border-slate-600 px-1",children:"SAP ID #"}),(0,S.jsx)("th",{className:"border border-slate-600 px-1",children:"Mobile"}),(0,S.jsx)("th",{className:"border border-slate-600 px-1",children:"NRN"})]})}),(0,S.jsx)("tbody",{children:null===l||void 0===l?void 0:l.map((function(e){return(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{className:"border border-slate-600 text-center",children:(0,S.jsx)(v.Link,{to:"/tas/people/search/".concat(e.EmployeeId),children:(0,S.jsxs)("span",{className:"text-blue-500 hover:underline cursor-pointer",children:[e.FullName," (",e.EmployeeId,")"]})})}),(0,S.jsx)("td",{className:"border border-slate-600 text-center",children:"boolean"===typeof e.ADAccount?e.ADAccount?"":(0,S.jsx)(f.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""}),(0,S.jsx)("td",{className:"border border-slate-600 text-center",children:"boolean"===typeof e.SAPID?e.SAPID?"":(0,S.jsx)(f.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""}),(0,S.jsx)("td",{className:"border border-slate-600 text-center",children:"boolean"===typeof e.Mobile?e.Mobile?"":(0,S.jsx)(f.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""}),(0,S.jsx)("td",{className:"border border-slate-600 text-center",children:"boolean"===typeof e.NRN?e.NRN?"":(0,S.jsx)(f.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})]})}))})]})})})})).then((function(){return cl(!1)}))},className:"bg-white rounded-lg",onFinishFailed:function(e){e&&Il(e.errorFields)},children:[(0,S.jsx)(j.Z,{defaultActiveKey:"1",type:"card",size:"middle",items:El,activeKey:tl,onTabClick:function(e){return il(e)}}),(0,S.jsx)(N.Z,{className:"px-4 pb-5 flex justify-end",children:(0,S.jsx)(s.Button,{htmlType:"button",className:"mt-5 mr-2",type:"primary",onClick:function(){return Ll.submit()},loading:dl,icon:(0,S.jsx)(x.Z,{}),children:"Save"})})]})),Zl]})},G=["selectType","onSelect","toLink","target","defaultColumns","renderSelectCell"];var V=function(e){e.selectType,e.onSelect,e.toLink;var l=e.target,a=void 0===l?"":l,f=e.defaultColumns,x=void 0===f?[]:f,N=(e.renderSelectCell,(0,t.Z)(e,G)),y=(0,i.useState)(!1),I=(0,o.Z)(y,2),C=I[0],q=I[1],L=(0,i.useState)(new b.Z({key:"Id",load:function(e){var l,a="";return e.sort.length>1&&(a="?sortby=".concat(e.sort[0].selector,"&sortdirection=").concat(e.sort[0].desc?"desc":"asc")),e.filter?(null===(l=j.current)||void 0===l||l.instance.beginCustomLoading(),(0,m.Z)({method:"post",url:"tas/employee/search".concat(a),data:{model:e.filter?e.filter:{CampId:"",DepartmentId:"",Firstname:"",FlightGroupMasterId:"",Lastname:"",LocationId:"",NRN:"",RoomId:"",RoomTypeId:"",costCodeId:"",employerId:"",futureBookingId:"",group:"",id:"",peopleTypeId:"",roomAssignment:"",rosterId:"",sapId:"",mobile:"",hasRoom:"",futureBooking:"",Active:1},pageIndex:e.skip/e.take,pageSize:e.take}}).then((function(e){return{data:e.data.data,totalCount:e.data.totalcount}})).finally((function(){var e;return null===(e=j.current)||void 0===e?void 0:e.instance.endCustomLoading()}))):new Promise((function(e){e({totalCount:0,data:[]})}))}})),R=(0,o.Z)(L,1)[0],j=(0,i.useRef)(null),F=(0,p.s0)(),Z=[{label:"Person #",name:"Id",dataType:"string",width:"80px"},{label:"SAP ID #",name:"SAPID",alignment:"left",width:"90px",visible:!1},{label:"",name:"Active",width:"21px",alignment:"center",showInColumnChooser:!1,allowSorting:!1,cellRender:function(e){return(0,S.jsx)(g.DcD,{color:1===e.value?"lime":"lightgray"})}},{label:"Firstname",name:"Firstname",dataType:"string"},{label:"Lastname",name:"Lastname",dataType:"string"},{label:"Department",name:"DepartmentName",dataType:"string",width:"220px"},{label:"Employer",name:"EmployerName",dataType:"string"},{label:"Resource Type",name:"PeopleTypeName",dataType:"string"},{label:"Gender",name:"Gender",alignment:"center",width:"70px",cellRender:function(e){return(0,S.jsx)("span",{children:1===e.data.Gender?"M":"F"})},groupCellRender:function(e){return(0,S.jsxs)("span",{children:[1===e.value?"M":"F"," ",e.groupContinuesMessage?"- ".concat(e.groupContinuesMessage):""]})}},{label:"",name:"HasFutureTransport",width:"50px",showInColumnChooser:!1,cellRender:function(e){return(0,S.jsx)(r.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})},headerCellRender:function(e,l){return(0,S.jsx)(d.dm9,{})}},{label:"",name:"HasFutureRoomBooking",width:"50px",showInColumnChooser:!1,cellRender:function(e,l){return(0,S.jsx)(r.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})},headerCellRender:function(e,l){return(0,S.jsx)("i",{className:"dx-icon-home"})}},{label:"",name:"buttons",width:"90px",alignment:"center",showInColumnChooser:!1,cellRender:function(e){return(0,S.jsx)("div",{className:"flex items-center gap-3",children:(0,S.jsx)(v.Link,{to:"".concat(e.data.Id),target:a,children:(0,S.jsx)("button",{type:"button",className:"edit-button",children:"Select"})})})}}],D=(0,i.useCallback)((function(e){"header"===e.target&&(e.items||(e.items=[]),e.items.push({text:"Column Chooser",icon:"columnchooser",onItemClick:function(){var l;null===(l=e.component)||void 0===l||l.showColumnChooser()}}))}),[]);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:(0,h.m6)("bg-white px-3 py-2 rounded-ot shadow-card",C?"block":"hidden"),children:[(0,S.jsx)("div",{}),(0,S.jsx)(s.Button,{className:"mb-3",onClick:function(){return q(!1)},icon:(0,S.jsx)(c.Z,{}),children:"Back"}),(0,S.jsx)(z,{changeMode:q})]}),(0,S.jsxs)("div",{className:(0,h.m6)("bg-white rounded-ot shadow-card",C?"hidden":"block"),children:[(0,S.jsx)("div",{className:"px-3 py-2",children:(0,S.jsx)(s.SearchPeopleForm,{containerClass:"bg-white rounded-ot py-2",onSearch:function(e){var l;null===(l=j.current)||void 0===l||l.instance.filter(e)},initialValues:{Active:1},extraContent:(0,S.jsx)(s.Button,{htmlType:"button",icon:(0,S.jsx)(u.Z,{}),onClick:function(){q(!0)},children:"Add Person"})})}),(0,S.jsx)(s.Table,(0,n.Z)({ref:j,data:R,columns:x.length>0?Z.map((function(e){return x.includes(e.name)||"buttons"===e.name?e:(0,n.Z)((0,n.Z)({},e),{},{visible:!1})})):Z,isHeaderFilter:!1,isSearch:!1,allowColumnReordering:!1,remoteOperations:!0,onRowDblClick:function(e){return F("".concat(e.data.Id))},containerClass:"shadow-none border rounded-t-none",tableClass:"max-h-[calc(100vh-290px)]",columnChooser:{enabled:!1,mode:"select",visible:!1},onContextMenuPreparing:D},N))]})]})}},24957:function(e,l,a){a.d(l,{Z:function(){return r}});var n=a(87462),o=a(47313),t={icon:function(e,l){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:l}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:e}}]}},name:"close-circle",theme:"twotone"},i=a(17469),s=function(e,l){return o.createElement(i.Z,(0,n.Z)({},e,{ref:l,icon:t}))};var r=o.forwardRef(s)},53979:function(e,l,a){a.d(l,{Z:function(){return r}});var n=a(87462),o=a(47313),t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-12-12-28.3-18.7-45.3-18.7H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 176h256v112H384V176zm128 554c-79.5 0-144-64.5-144-144s64.5-144 144-144 144 64.5 144 144-64.5 144-144 144zm0-224c-44.2 0-80 35.8-80 80s35.8 80 80 80 80-35.8 80-80-35.8-80-80-80z"}}]},name:"save",theme:"filled"},i=a(17469),s=function(e,l){return o.createElement(i.Z,(0,n.Z)({},e,{ref:l,icon:t}))};var r=o.forwardRef(s)}}]);