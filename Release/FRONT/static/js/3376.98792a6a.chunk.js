"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[3376],{71775:function(e,t,n){n.r(t);var a=n(74165),i=n(15861),s=n(1413),l=n(29439),c=n(2880),o=n(14261),r=n(47313),u=n(65040),d=n(56573),m=n(40765),p=n(82138),h=n(92350),f=n(81514),v=n(42614),b=n(46417),x="Request Hotel";t.default=function(){var e=(0,r.useState)([]),t=(0,l.Z)(e,2),n=t[0],C=t[1],y=(0,r.useState)([]),j=(0,l.Z)(y,2),g=j[0],k=j[1],N=(0,r.useState)(null),Z=(0,l.Z)(N,2),w=Z[0],D=Z[1],A=(0,r.useState)(!1),I=(0,l.Z)(A,2),F=I[0],E=I[1],L=(0,r.useState)(!1),q=(0,l.Z)(L,2),S=q[0],O=q[1],R=(0,r.useState)(!1),B=(0,l.Z)(R,2),T=B[0],V=B[1],M=(0,r.useState)(!1),_=(0,l.Z)(M,2),z=_[0],G=_[1],H=u.Z.useForm(),J=(0,l.Z)(H,1)[0],K=u.Z.useForm(),P=(0,l.Z)(K,1)[0],Y=(0,r.useContext)(v.V).action;(0,r.useEffect)((function(){Y.changeMenuKey("/tas/requesthotel"),Q()}),[]);var Q=function(){E(!0),(0,d.Z)({method:"get",url:"tas/requestlocalhotel"}).then((function(e){if(C(e.data),1===P.getFieldValue("Active")){var t=e.data.filter((function(e){return 1===e.Active}));k(t)}else if(0===P.getFieldValue("Active")){var n=e.data.filter((function(e){return 0===e.Active}));k(n)}else k(e.data)})).catch((function(e){})).then((function(){return E(!1)}))},U=function(e){D(e),O(!0)},W=[{label:"Description",name:"Description"},{label:"Day Cost",name:"DayCost",cellRender:function(e){var t=e.value;return(0,b.jsx)("div",{children:Intl.NumberFormat().format(t)})}},{label:"Early Check In Cost",name:"EarlyCheckInCost",cellRender:function(e){var t=e.value;return(0,b.jsx)("div",{children:Intl.NumberFormat().format(t)})}},{label:"Late Check Out Cost",name:"LateCheckOutCost",cellRender:function(e){var t=e.value;return(0,b.jsx)("div",{children:Intl.NumberFormat().format(t)})}},{label:"Active",name:"Active",width:"90px",alignment:"center",cellRender:function(e){return(0,b.jsx)(o.Jg,{disabled:!0,iconSize:18,value:1===e.data.Active||0})}},{label:"",name:"action",width:"170px",cellRender:function(e){return(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{type:"button",className:"edit-button",onClick:function(){return t=e.data,D(t),void G(!0);var t},children:"Edit"}),1===e.data.Active?(0,b.jsx)("button",{type:"button",disabled:e.data.EmployeeCount>0,className:"dlt-button",onClick:function(){return U(e.data)},children:"Deactivate"}):(0,b.jsx)("button",{type:"button",className:"scs-button",onClick:function(){return U(e.data)},children:"Reactivate"})]})}}],X=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(!0),(0,f.Z)(t,n).then((function(e){k(e),E(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){G(!1)};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-3 shadow-md",children:[(0,b.jsx)("div",{className:"text-lg font-bold mb-2",children:x}),(0,b.jsx)(c.Form,{form:P,fields:[{label:"Description",name:"Description",className:"col-span-3 mb-2"},{label:"Active",name:"Active",className:"col-span-1 mb-2",type:"check",inputprops:{indeterminatewith:!0}}],className:"grid grid-cols-12 gap-x-8",onFinish:X,noLayoutConfig:!0,children:(0,b.jsx)("div",{className:"flex gap-4 items-baseline col-span-1",children:(0,b.jsx)(c.Button,{htmlType:"submit",className:"flex items-center",loading:F,icon:(0,b.jsx)(m.Z,{}),children:"Search"})})})]}),(0,b.jsx)(c.Table,{data:g,columns:W,allowColumnReordering:!1,loading:F,keyExpr:"Id",tableClass:"border-t max-h-[calc(100vh-250px)]",title:(0,b.jsxs)("div",{className:"flex justify-between py-2 px-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"font-bold",children:g.length}),(0,b.jsx)("span",{className:" text-gray-400",children:"results"})]}),(0,b.jsxs)(c.Button,{icon:(0,b.jsx)(p.Z,{}),onClick:function(){D(null),J.resetFields(),G(!0)},children:["Add ",x]})]})}),(0,b.jsx)(c.Modal,{open:z,onCancel:function(){return G(!1)},title:w?"Edit ".concat(x):"Add ".concat(x),children:(0,b.jsx)(c.Form,{form:J,fields:w?[{label:"Description",name:"Description",className:"col-span-12 mb-2",rules:[{required:!0,message:"Description is required"}]},{label:"Day Cost",name:"DayCost",className:"col-span-12 mb-2",inputprops:{min:0}},{label:"Early Check In Cost",name:"EarlyCheckInCost",className:"col-span-12 mb-2",inputprops:{min:0}},{label:"Late Check Out Cost",name:"LateCheckOutCost",className:"col-span-12 mb-2",type:"number",inputprops:{min:0}}]:[{label:"Description",name:"Description",className:"col-span-12 mb-2",rules:[{required:!0,message:"Description is required"}]},{label:"Day Cost",name:"DayCost",className:"col-span-12 mb-2",type:"price",inputprops:{min:0}},{label:"Early Check In Cost",name:"EarlyCheckInCost",className:"col-span-12 mb-2",type:"price",inputprops:{min:0}},{label:"Late Check Out Cost",name:"LateCheckOutCost",className:"col-span-12 mb-2",type:"price",inputprops:{min:0}},{label:"Active",name:"Active",className:"col-span-12 mb-2",type:"check",inputprops:{}}],editData:w,onFinish:function(e){V(!0),w?(0,d.Z)({method:"put",url:"tas/requestlocalhotel",data:(0,s.Z)((0,s.Z)({},e),{},{Id:w.Id})}).then((function(e){Q(),$()})).catch((function(e){})).then((function(){return V(!1)})):(0,d.Z)({method:"post",url:"tas/requestlocalhotel",data:(0,s.Z)({},e)}).then((function(e){Q(),$()})).catch((function(e){})).then((function(){return V(!1)}))},children:(0,b.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2",children:[(0,b.jsx)(c.Button,{type:"primary",onClick:function(){return J.submit()},loading:T,icon:(0,b.jsx)(h.Z,{}),children:"Save"}),(0,b.jsx)(c.Button,{onClick:$,disabled:T,children:"Cancel"})]})})}),(0,b.jsxs)(o.GI,{visible:S,showTitle:!1,height:110,width:350,children:[(0,b.jsxs)("div",{children:["Are you sure you want to ",1===(null===w||void 0===w?void 0:w.Active)?"deactivate":"reactivate"," this record?"]}),(0,b.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,b.jsx)(c.Button,{type:1===(null===w||void 0===w?void 0:w.Active)?"danger":"success",onClick:function(){V(!0),(0,d.Z)({method:"delete",url:"tas/requestlocalhotel",data:{Id:w.Id}}).then((function(){Q(),O(!1)})).catch((function(e){})).then((function(){return V(!1)}))},loading:T,children:"Yes"}),(0,b.jsx)(c.Button,{onClick:function(){return O(!1)},disabled:T,children:"No"})]})]})]})}},81514:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(93433),i=n(4942),s=n(1413);var l=function e(t,n,a){var l=[],c=Object.keys(n);return t.map((function(t){if(t[a].length>0)l.push((0,s.Z)((0,s.Z)({},t),{},(0,i.Z)({},a,e(t[a],n,a))));else{var o=!1;c.map((function(e){var a,i;""!==n[e]&&"undefined"!==typeof n[e]&&null!==n[e]?o="string"===typeof n[e]?o||(null===(a=t[e])||void 0===a?void 0:a.toLowerCase().includes(null===(i=n[e])||void 0===i?void 0:i.toLowerCase())):o||t[e]===n[e]:o=!0})),o&&l.push(t)}})),l};function c(e,t,n,i){return"tree"===n?l(t,e,i):new Promise((function(n,i){var s=Object.keys(e),l=(0,a.Z)(t);s.map((function(t){""!==e[t]&&"undefined"!==typeof e[t]&&null!==e[t]&&(l="string"===typeof e[t]?l.filter((function(n){var a,i;return null===(a=n[t])||void 0===a?void 0:a.toLowerCase().includes(null===(i=e[t])||void 0===i?void 0:i.toLowerCase())})):l.filter((function(n){return n[t]===e[t]})))})),n(l)}))}}}]);