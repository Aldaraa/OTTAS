"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[2867],{72867:function(e,t,s){s.r(t),s.d(t,{default:function(){return z}});var n=s(74165),i=s(15861),r=s(29439),o=s(56573),l=s(47313),a=s(58467),c=s(42614),d=s(2880),u=s(10202),x=s(2135),m=s(26672),v=s(22539),h=s(63733),f=s(54290),p=s(88019),j=s(29074),g=s(15413),N=s(84523),y=s(90820),b=s(37289),w=s(82508),k=s(1522),C=s(41612),S=s(21521),I=s(18637),P=s(76629),D=s(73030),R=s(10658),A=s.n(R),E=s(46417),T=[{path:"shiftvisual",label:"Shift Visual",hasPermission:!0},{path:"noshow",label:"No Show & Go Show",hasPermission:!0},{path:"history",label:"Account History",hasPermission:!1},{path:"audit",label:"Profile Audit",hasPermission:!1},{path:"profilebydate",label:"Profile By Date",hasPermission:!0},{path:"rolecenter",label:"Role Center",hasPermission:!0}],M=function(e){switch(e){case"Confirmed":case"Waiting":return"green";case"Submitted":return"orange"}},L=[{label:"",name:"Direction",width:60},{label:"Date",name:"EventDate",cellRender:function(e){return(0,E.jsx)("div",{children:A()(e.value).format("YYYY-MM-DD ddd")})}},{label:"Description",name:"Description"},{label:"Status",name:"Status",width:100,cellRender:function(e){return(0,E.jsx)(j.Z,{color:M(e.value),children:e.value})}}];var F=function(e){var t,s,n,i,u=e.data,j=(0,l.useState)(!1),R=(0,r.Z)(j,2),M=R[0],F=R[1],Z=(0,l.useState)(null),z=(0,r.Z)(Z,2),B=z[0],Y=z[1],V=(0,l.useState)(!1),_=(0,r.Z)(V,2),U=_[0],G=_[1],H=(0,l.useContext)(c.V).state,O=(0,a.UO)().employeeId,K=(0,a.TH)().pathname;(0,l.useEffect)((function(){q()}),[O]);var q=function(){G(!0),(0,o.Z)({method:"get",url:"tas/requestdocument/existingbooking/".concat(O)}).then((function(e){Y(e.data)})).catch((function(e){})).then((function(){return G(!1)}))},J=(0,l.useMemo)((function(){if(u){if(null!==u&&void 0!==u&&u.Gender&&u.Active)return k;if(null!==u&&void 0!==u&&u.Gender&&!u.Active)return C;if((null===u||void 0===u||!u.Gender)&&u.Active)return S;if((null===u||void 0===u||!u.Gender)&&!u.Active)return I}}),[u]),W=(0,l.useMemo)((function(){return 1===(null===u||void 0===u?void 0:u.Active)?[].concat(T,[{path:"/request/existingbookings/".concat(u.Id),label:"Existing Booking",hasPermission:!0}]):T.filter((function(e){return!e.hasPermission}))}),[u]);return(0,E.jsxs)("div",{className:"rounded-ot p-4 flex justify-between items-center col-span-12 shadow-md sticky top-0 z-[100] ".concat(1===(null===u||void 0===u?void 0:u.Active)?"bg-white":"bg-[#d9d9d9]"),children:[(0,E.jsxs)("div",{className:"flex gap-5",children:[(0,E.jsx)(x.Link,{className:"".concat(1===(null===u||void 0===u?void 0:u.Active)?"":"bg-gray-100"," h-[80px] w-[80px] flex items-center justify-center rounded-ot border overflow-hidden"),to:"/tas/people/search/".concat(O),onClick:function(){return P.Z.set("pp_rt","")},children:(0,E.jsx)("img",{className:"object-cover",src:J})}),(0,E.jsxs)("div",{children:[(0,E.jsxs)("span",{className:"text-start lg:text-lg font-bold flex gap-1 items-center",children:[null===u||void 0===u?void 0:u.Firstname," ",null===u||void 0===u?void 0:u.Lastname," (",null===u||void 0===u?void 0:u.Id,")",u.OnSiteStatus?(0,E.jsx)(d.Tooltip,{title:"Today on Site",children:(0,E.jsx)("span",{children:(0,E.jsx)("div",{className:"ml-2 h-3 w-3 bg-green-400 rounded-full relative z-0",children:(0,E.jsx)("div",{className:"absolute animate-ping inset-0 bg-green-400 rounded-full z-10"})})})}):null]}),(0,E.jsxs)("div",{className:"flex justify-start gap-4 divide-x mt-2",children:[(0,E.jsxs)("div",{className:"text-[#718096] text-xs flex flex-col gap-1",children:[(0,E.jsx)(d.Tooltip,{Tooltip:!0,title:"Nationality",children:(0,E.jsxs)("div",{className:"flex gap-3 items-center cursor-default",children:[(0,E.jsx)("div",{children:(0,E.jsx)(m.FaPassport,{size:15})}),(0,E.jsx)("div",{children:null!==u&&void 0!==u&&u.NationalityName?null===u||void 0===u?void 0:u.NationalityName:(0,E.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})}),(0,E.jsx)(d.Tooltip,{title:"".concat(u.EmployerCurrentStatus?"Temporary":"Permanent"," Employer name"),children:(0,E.jsxs)("div",{className:"flex gap-3 items-center cursor-default",children:[(0,E.jsx)("div",{children:(0,E.jsx)(m.FaRegBuilding,{size:15})}),(0,E.jsxs)("div",{children:[(0,E.jsx)(g.Z,{className:"mr-1",status:u.EmployerCurrentStatus?"warning":"success"}),null!==u&&void 0!==u&&u.EmployerName?null===u||void 0===u?void 0:u.EmployerName:(0,E.jsx)("span",{className:"text-gray-400",children:"Not registered"})]})]})}),(0,E.jsx)(d.Tooltip,{title:(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{className:"text-secondary2",children:"Cost Code: "}),u.CostCodeDescription?u.CostCodeDescription:null]}),children:(0,E.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,E.jsx)("div",{children:(0,E.jsx)(v.c85,{size:15})}),(0,E.jsxs)("div",{children:[(0,E.jsx)(g.Z,{className:"mr-1",status:u.CostCodeCurrentStatus?"warning":"success"}),null!==u&&void 0!==u&&u.CostCodeNumber?null===u||void 0===u?void 0:u.CostCodeNumber:(0,E.jsx)("span",{className:"text-gray-400",children:"Not registered"})]})]})}),(0,E.jsx)(d.Tooltip,{title:"Mobile",className:"flex items-center gap-3 cursor-default",children:(0,E.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,E.jsx)("div",{children:(0,E.jsx)(v.IXo,{size:15})}),(0,E.jsx)("div",{children:null!==u&&void 0!==u&&u.PersonalMobile?null===u||void 0===u?void 0:u.PersonalMobile:(0,E.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})})]}),(0,E.jsxs)("div",{className:"pl-4 text-[#718096] text-xs flex flex-col gap-1",children:[(0,E.jsx)(d.Tooltip,{title:"".concat(u.PositionCurrentStatus?"Temporary":"Permanent"," Position name"),children:(0,E.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,E.jsx)("div",{children:(0,E.jsx)(m.FaBriefcase,{size:15})}),(0,E.jsxs)("div",{className:"",children:[(0,E.jsx)(g.Z,{className:"mr-1",status:u.PositionCurrentStatus?"warning":"success"}),null!==u&&void 0!==u&&u.PositionName?null===u||void 0===u?void 0:u.PositionName:(0,E.jsx)("span",{className:"text-gray-400",children:"Not registered"})]})]})}),(0,E.jsx)(d.Tooltip,{title:"SAP ID #",children:(0,E.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,E.jsx)("div",{children:(0,E.jsx)(h.Lhg,{size:15})}),(0,E.jsx)("div",{children:null!==u&&void 0!==u&&u.SAPID?null===u||void 0===u?void 0:u.SAPID:(0,E.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})}),(0,E.jsx)(d.Tooltip,{title:"Own Room",children:(0,E.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,E.jsx)("div",{children:(0,E.jsx)(m.FaHouseUser,{size:15})}),null!==u&&void 0!==u&&u.RoomNumber?"AccomAdmin"===(null===(t=H.userInfo)||void 0===t?void 0:t.Role)||"SystemAdmin"===(null===(s=H.userInfo)||void 0===s?void 0:s.Role)?(0,E.jsx)(x.Link,{target:"_blank",to:"/tas/roomcalendar/".concat(u.RoomId,"/").concat(A()().format("YYYY-MM-DD")),children:null===u||void 0===u?void 0:u.RoomNumber}):(0,E.jsx)("div",{children:null===u||void 0===u?void 0:u.RoomNumber}):(0,E.jsx)("div",{className:"text-gray-400",children:"Not registered"})]})}),null!==u&&void 0!==u&&u.CurrentRoomNumber?(0,E.jsx)(d.Tooltip,{title:"Current Room",className:"flex items-center gap-3 cursor-default",children:(0,E.jsxs)("div",{className:"flex items-center gap-3 cursor-default text-success",children:[(0,E.jsx)("div",{children:(0,E.jsx)(m.FaHouseUser,{size:15})}),"AccomAdmin"===(null===(n=H.userInfo)||void 0===n?void 0:n.Role)||"SystemAdmin"===(null===(i=H.userInfo)||void 0===i?void 0:i.Role)?(0,E.jsx)(x.Link,{target:"_blank",to:"/tas/roomcalendar/".concat(u.CurrentRoomId,"/").concat(A()().format("YYYY-MM-DD")),children:null===u||void 0===u?void 0:u.CurrentRoomNumber}):(0,E.jsx)("div",{children:null===u||void 0===u?void 0:u.CurrentRoomNumber})]})}):null]}),(0,E.jsxs)("div",{className:"pl-4 text-[#718096] text-xs flex flex-col gap-1",children:[(0,E.jsx)(d.Tooltip,{title:"Location",className:"flex items-center gap-3 cursor-default",children:(0,E.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,E.jsx)("div",{children:(0,E.jsx)(m.FaLocationArrow,{size:15})}),(0,E.jsx)("div",{children:null!==u&&void 0!==u&&u.LocationName?null===u||void 0===u?void 0:u.LocationName:(0,E.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})}),(0,E.jsx)(d.Tooltip,{title:"Resource Type",className:"flex items-center gap-3 cursor-default",children:(0,E.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,E.jsx)("div",{children:(0,E.jsx)(m.FaUserAlt,{size:14})}),(0,E.jsx)("div",{children:null!==u&&void 0!==u&&u.PeopleTypeName?null===u||void 0===u?void 0:u.PeopleTypeName:(0,E.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})})]}),(0,E.jsx)("div",{className:"pl-4 text-[#718096] text-xs flex flex-col gap-1",children:(0,E.jsx)(d.DepartmentList,{toLink:"/tas/people/search/",data:u,id:null===u||void 0===u?void 0:u.DepartmentId})})]})]})]}),(0,E.jsxs)("div",{className:"grid grid-cols-2 items-center gap-3 text-[10px] leading-none",children:[1===(null===u||void 0===u?void 0:u.Active)&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(x.NavLink,{to:"/tas/people/search/".concat(O,"/flight"),state:u,className:function(e){var t=e.isActive;return(0,D.m6)("p-1 border rounded-[12px] hover:shadow-card transition-all","".concat(t?"border-[#5939B2]":""))},children:(0,E.jsxs)("div",{className:"h-[50px] w-[50px] flex flex-col justify-center gap-1 items-center text-center text-[#374151]",children:[(0,E.jsx)(f.r,{}),"Flight"]})}),(0,E.jsx)(x.NavLink,{to:"/tas/people/search/".concat(O,"/roombooking"),className:function(e){var t=e.isActive;return"p-1 border rounded-[12px] hover:shadow-card transition-all ".concat(t?"border-[#00CBA6] shadow-card":"")},children:(0,E.jsxs)("div",{className:"h-[50px] w-[50px] text-[#374151] flex flex-col justify-center items-center gap-1 text-center",children:[(0,E.jsx)(p.r,{}),"Room Booking"]})}),(0,E.jsx)(x.NavLink,{to:"/tas/people/search/".concat(O,"/rosterexecute"),state:u,className:function(e){var t=e.isActive;return"p-1 border rounded-[12px] hover:shadow-card transition-all ".concat(t?"border-[#C59900] shadow-card":"")},children:(0,E.jsxs)("div",{className:"h-[50px] w-[50px] text-[#374151] rounded-[10px] flex flex-col justify-center items-center gap-1 text-center",children:[(0,E.jsx)(y.cdy,{size:19}),"Roster Execute"]})})]}),(0,E.jsx)(N.Z,{trigger:"hover",placement:"bottomRight",dropdownRender:function(e){return(0,E.jsx)("div",{className:"bg-white rounded-ot shadow-md p-1 mt-1",children:W.map((function(e,t){return"Existing Booking"===e.label?(0,E.jsx)("button",{className:"py-1 px-3 hover:bg-black hover:bg-opacity-[0.04] rounded-ot",onClick:function(){return F(!0)},children:e.label}):(0,E.jsx)(x.Link,{to:e.path,children:(0,E.jsx)("div",{className:"py-1 px-3 hover:bg-black hover:bg-opacity-[0.04] rounded-ot",children:e.label})},t)}))})},children:(0,E.jsx)("button",{type:"button",className:"p-1 border rounded-[12px] hover:shadow-card transition-all ".concat(["/tas/people/search/".concat(O,"/shiftvisual")].includes(K)?"border-[#1E9500] shadow-card":""),children:(0,E.jsxs)("div",{className:"h-[50px] w-[50px] text-[10px] text-[#374151] rounded-[10px] flex flex-col justify-center items-center gap-1",children:[(0,E.jsx)(b.Z,{style:{fontSize:20}}),"Others"]})})})]}),(0,E.jsx)(d.Modal,{open:M,title:"Existing Bookings",width:800,onCancel:function(){return F(!1)},children:U?(0,E.jsx)("div",{className:"p-8 flex justify-center items-center",children:(0,E.jsx)(w.Z,{style:{fontSize:24}})}):(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,E.jsxs)("div",{children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{className:"text-gray-500 ",children:"Name:"})," ",null===B||void 0===B?void 0:B.FullName," (",null===B||void 0===B?void 0:B.EmployeeId,")"]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{className:"text-gray-500",children:"Department:"})," ",null===B||void 0===B?void 0:B.Department]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{className:"text-gray-500",children:"Employer:"})," ",null===B||void 0===B?void 0:B.Employer]})]}),(0,E.jsx)(d.Table,{data:null===B||void 0===B?void 0:B.SiteTravel,columns:L,pager:!1,containerClass:"shadow-none border border-gray-300",title:(0,E.jsx)("div",{className:"border-b py-1 font-bold",children:"Site Travel"})})]})})})]})};var Z=s(14261);var z=function(){var e=P.Z.get("pp_rt"),t=(0,a.f_)(),s=(0,l.useState)(!0),x=(0,r.Z)(s,2),m=x[0],v=x[1],h=(0,l.useState)(!1),f=(0,r.Z)(h,2),p=f[0],j=f[1],g=(0,l.useState)(!1),N=(0,r.Z)(g,2),y=N[0],b=N[1],w=(0,a.s0)(),k=(0,a.UO)().employeeId,C=(0,l.useContext)(c.V),S=C.state,I=C.action,D="employeeProfile_".concat(k),R=(0,a.TH)();!function(e,t){var s=(0,l.useRef)(t);(0,l.useEffect)((function(){s.current=t}),[t]),(0,l.useEffect)((function(){function t(t){"safeMode"===e&&192===t.keyCode&&t.altKey&&t.shiftKey&&s.current(t)}return document.addEventListener("keydown",t),function(){return document.removeEventListener("keydown",t)}}),[e])}("safeMode",(0,l.useCallback)((function(){var e;"SystemAdmin"===(null===S||void 0===S||null===(e=S.userInfo)||void 0===e?void 0:e.Role)&&b(!0)}),[S])),(0,l.useEffect)((function(){console.log("location",R,e),"string"!==typeof e||R.pathname.includes(e)||w(e),I.changeMenuKey("/tas/people/search")}),[]),(0,l.useEffect)((function(){return S.connectionMultiViewer&&S.userInfo&&(A(),S.connectionMultiViewer.on("UsersInScreen",(function(e,t){var s=t.map((function(e){return{name:e.userName.split("_")[0],role:e.userName.split("_")[1],color:(0,u.Z)()}}));I.setMultiViewers(s.filter((function(e){var t,s;return e.name!=="".concat(null===(t=S.userInfo)||void 0===t?void 0:t.Firstname," ").concat(null===(s=S.userInfo)||void 0===s?void 0:s.Lastname)})))}))),function(){return S.connectionMultiViewer&&T()}}),[S.connectionMultiViewer,S.userInfo]),(0,l.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t||void 0===t||!t.data){e.next=6;break}return e.next=4,I.saveUserProfileData(t.data);case 4:e.next=7;break;case 6:j(!0);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error initializing data:",e.t0);case 12:return e.prev=12,v(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(){return e.apply(this,arguments)}}();e()}),[t,I]),(0,l.useEffect)((function(){0!==S.ChangedFlight&&M()}),[S.ChangedFlight]);var A=function(){try{var e,t,s,n;null===(e=S.connectionMultiViewer)||void 0===e||e.invoke("JoinScreen","".concat(null===(t=S.userInfo)||void 0===t?void 0:t.Firstname," ").concat(null===(s=S.userInfo)||void 0===s?void 0:s.Lastname,"_").concat(null===(n=S.userInfo)||void 0===n?void 0:n.Role),D)}catch(i){}},T=function(){var e,t,s,n;I.setMultiViewers([]),null===(e=S.connectionMultiViewer)||void 0===e||e.invoke("LeaveScreen","".concat(null===(t=S.userInfo)||void 0===t?void 0:t.Firstname," ").concat(null===(s=S.userInfo)||void 0===s?void 0:s.Lastname,"_").concat(null===(n=S.userInfo)||void 0===n?void 0:n.Role),D)},M=function(){v(!0),(0,o.Z)({method:"get",url:"tas/employee/".concat(k)}).then((function(e){I.saveUserProfileData(e.data)})).catch((function(e){})).then((function(){return v(!1)}))};return(0,E.jsx)("div",{children:m?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:"animate-skeleton h-[230px] flex rounded-ot mb-5 shadow-md"}),(0,E.jsx)("div",{className:"animate-skeleton h-[400px] flex rounded-ot shadow-md"})]}):p?(0,E.jsxs)("div",{className:"bg-white rounded-ot px-4 py-3 min-h-[300px] flex flex-col justify-center items-center",children:[(0,E.jsx)("div",{className:"text-xl",children:"Not Found Employee"}),(0,E.jsx)(d.Button,{type:"primary",className:"mt-5",onClick:function(){return w("/tas/people/search")},children:"Back to List"})]}):(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)("div",{className:"grid grid-cols-12 gap-5 relative",children:[(0,E.jsx)(F,{data:S.userProfileData}),(0,E.jsx)("div",{className:"w-full col-span-12",children:(0,E.jsxs)("div",{className:"flex items-start gap-5",children:[(0,E.jsx)(d.VerticalCalendar,{employeeId:S.userProfileData.Id}),(0,E.jsx)(d.FlightList,{employeeId:S.userProfileData.Id,profileData:S.userProfileData})]})}),(0,E.jsx)(a.j3,{}),(0,E.jsx)(Z.GI,{visible:y,showTitle:!1,height:"auto",width:350,children:(0,E.jsxs)("div",{children:[(0,E.jsxs)("div",{className:"text-center",children:["Do you want to enable ",(0,E.jsx)("b",{children:"Safe Mode"}),"? This will restrict certain functions for security?"]}),(0,E.jsxs)("div",{className:"flex gap-5 mt-3 justify-center",children:[(0,E.jsx)(d.Button,{type:"success",onClick:function(){return w("/tas/people/search/sm/".concat(k))},children:"Yes"}),(0,E.jsx)(d.Button,{onClick:function(){return b(!1)},children:"No"})]})]})})]})})})}}}]);