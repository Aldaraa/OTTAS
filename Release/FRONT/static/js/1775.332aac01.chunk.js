"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[1775],{14446:function(e,l,a){var i=a(1413),o=a(74165),r=a(15861),n=a(29439),d=a(24957),t=a(53979),s=a(65040),u=a(12998),c=a(21975),p=a(68197),v=a(59624),m=a(76298),f=a(74294),b=a(93031),D=a(76047),F=a(2880),g=a(10658),h=a.n(g),y=a(47313),x=a(46146),I=a.n(x),N=a(69226),q=a.n(N),L=a(56573),P=a(2135),R=a(42614),C=a(46417);h().extend(I()),h().extend(q());var j=new RegExp(/^[\u0410-\u042f\u04ae\u04e8]{2}\d{8}$/),Z=new RegExp(/^[0-9]{8}$/),E=new RegExp(/^[A-Za-z -]+$/g),w=new RegExp(/^[0-9 +]+$/),M={labelCol:{xs:{span:24},sm:{span:12},md:{span:8},lg:{span:12},xl:{span:8},xxl:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}};l.Z=function(e){var l,a,g,x,I,N,q,S,A,k,V,T,G,z,Y,H,O,U,B,$,K,W,_,J,Q,X,ee,le,ae,ie,oe,re,ne,de,te,se,ue,ce,pe,ve,me,fe,be,De,Fe,ge,he,ye,xe,Ie,Ne,qe,Le,Pe,Re,Ce,je,Ze,Ee,we,Me,Se,Ae,ke,Ve,Te,Ge,ze,Ye,He,Oe,Ue,Be,$e,Ke,We,_e,Je,Qe,Xe,el,ll,al,il,ol,rl,nl,dl,tl,sl,ul,cl,pl,vl,ml,fl,bl,Dl,Fl,gl,hl,yl,xl,Il,Nl,ql,Ll,Pl,Rl,Cl,jl,Zl,El,wl,Ml,Sl,Al,kl,Vl,Tl,Gl,zl,Yl,Hl,Ol,Ul,Bl,$l,Kl,Wl,_l,Jl,Ql,Xl,ea,la,aa,ia,oa,ra,na,da,ta,sa,ua,ca,pa,va,ma,fa,ba,Da,Fa,ga,ha,ya,xa,Ia,Na,qa,La,Pa,Ra,Ca,ja,Za,Ea,wa,Ma,Sa,Aa,ka,Va,Ta,Ga,za,Ya,Ha,Oa,Ua,Ba,$a=e.className,Ka=e.refreshData,Wa=(e.currentGroup,e.disabled),_a=(0,y.useState)(0),Ja=(0,n.Z)(_a,2),Qa=Ja[0],Xa=Ja[1],ei=(0,y.useState)(!0),li=(0,n.Z)(ei,2),ai=(li[0],li[1]),ii=(0,y.useState)(!1),oi=(0,n.Z)(ii,2),ri=oi[0],ni=oi[1],di=(0,y.useState)(null),ti=(0,n.Z)(di,2),si=ti[0],ui=ti[1],ci=(0,y.useState)(!1),pi=(0,n.Z)(ci,2),vi=pi[0],mi=pi[1],fi=s.Z.useForm(),bi=(0,n.Z)(fi,1)[0],Di=(0,y.useContext)(R.V).state,Fi=u.ZP.useNotification(),gi=(0,n.Z)(Fi,2),hi=gi[0],yi=gi[1];(0,y.useEffect)((function(){var e;Di.userProfileData&&bi&&(null===bi||void 0===bi||bi.setFieldsValue(Di.userProfileData),xi.map((function(e){"date"===e.type&&Di.userProfileData[e.name]&&(null===bi||void 0===bi||bi.setFieldValue(e.name,h()(Di.userProfileData[e.name])))})),Ni.map((function(e){"date"===e.type&&Di.userProfileData[e.name]&&(null===bi||void 0===bi||bi.setFieldValue(e.name,h()(Di.userProfileData[e.name])))})),Ci.map((function(e){"date"===e.type&&Di.userProfileData[e.name]&&(null===bi||void 0===bi||bi.setFieldValue(e.name,h()(Di.userProfileData[e.name])))})),null===(e=Di.userProfileData.GroupData)||void 0===e||e.map((function(e){null===bi||void 0===bi||bi.setFieldValue(e.GroupMasterId,e.GroupDetailId)})))}),[Di.userProfileData,bi]);var xi=[{label:null===(l=Di.referData)||void 0===l||null===(a=l.profileFields.NationalityId)||void 0===a?void 0:a.Label,name:"NationalityId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(g=Di.referData)||void 0===g||null===(x=g.profileFields.NationalityId)||void 0===x?void 0:x.FieldRequired,message:"".concat(null===(I=Di.referData)||void 0===I||null===(N=I.profileFields.NationalityId)||void 0===N?void 0:N.Label," is required")}],inputprops:{options:Di.referData.nationalities}},{type:"component",component:(0,C.jsx)(s.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.NationalityId!==l.NationalityId},children:function(e){var l,a,i,o,r,n,d=e.getFieldValue,t=Di.referData.nationalities.find((function(e){return e.value===d("NationalityId")}));return"MN"===(null===t||void 0===t?void 0:t.Code)?(0,C.jsx)(s.Z.Item,{label:null===(l=Di.referData)||void 0===l||null===(a=l.profileFields.NRN)||void 0===a?void 0:a.Label,name:"NRN",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(i=Di.referData)||void 0===i||null===(o=i.profileFields.NRN)||void 0===o?void 0:o.FieldRequired,message:"".concat(null===(r=Di.referData)||void 0===r||null===(n=r.profileFields.NRN)||void 0===n?void 0:n.Label," is required")},{pattern:j,message:"Please use only cyrillic characters"}],children:(0,C.jsx)(c.Z,{maxLength:10,onInput:function(e){return e.target.value=e.target.value.toUpperCase()}})}):(0,C.jsx)("div",{className:"col-span-12 lg:col-span-6 mb-0"})}})},{label:null===(q=Di.referData)||void 0===q||null===(S=q.profileFields.Gender)||void 0===S?void 0:S.Label,name:"Gender",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(A=Di.referData)||void 0===A||null===(k=A.profileFields.Gender)||void 0===k?void 0:k.FieldRequired,message:"".concat(null===(V=Di.referData)||void 0===V||null===(T=V.profileFields.Gender)||void 0===T?void 0:T.Label," is required")}],inputprops:{options:[{value:1,label:"Male"},{value:0,label:"Female"}]}},{label:null===(G=Di.referData)||void 0===G||null===(z=G.profileFields.Dob)||void 0===z?void 0:z.Label,name:"Dob",className:"col-span-12 lg:col-span-6 mb-0",type:"date",rules:[{required:null===(Y=Di.referData)||void 0===Y||null===(H=Y.profileFields.Dob)||void 0===H?void 0:H.FieldRequired,message:"".concat(null===(O=Di.referData)||void 0===O||null===(U=O.profileFields.Dob)||void 0===U?void 0:U.Label," is required")}]},{label:null===(B=Di.referData)||void 0===B||null===($=B.profileFields.Firstname)||void 0===$?void 0:$.Label,name:"Firstname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(K=Di.referData)||void 0===K||null===(W=K.profileFields.Firstname)||void 0===W?void 0:W.FieldRequired,message:"".concat(null===(_=Di.referData)||void 0===_||null===(J=_.profileFields.Firstname)||void 0===J?void 0:J.Label," is required")}]},{label:null===(Q=Di.referData)||void 0===Q||null===(X=Q.profileFields.Lastname)||void 0===X?void 0:X.Label,name:"Lastname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(ee=Di.referData)||void 0===ee||null===(le=ee.profileFields.Lastname)||void 0===le?void 0:le.FieldRequired,message:"".concat(null===(ae=Di.referData)||void 0===ae||null===(ie=ae.profileFields.Lastname)||void 0===ie?void 0:ie.Label," is required")}]},{label:null===(oe=Di.referData)||void 0===oe||null===(re=oe.profileFields.MFirstname)||void 0===re?void 0:re.Label,name:"MFirstname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(ne=Di.referData)||void 0===ne||null===(de=ne.profileFields.MFirstname)||void 0===de?void 0:de.FieldRequired,message:"".concat(null===(te=Di.referData)||void 0===te||null===(se=te.profileFields.MFirstname)||void 0===se?void 0:se.Label," is required")}]},{label:null===(ue=Di.referData)||void 0===ue||null===(ce=ue.profileFields.MLastname)||void 0===ce?void 0:ce.Label,name:"MLastname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(pe=Di.referData)||void 0===pe||null===(ve=pe.profileFields.MLastname)||void 0===ve?void 0:ve.FieldRequired,message:"".concat(null===(me=Di.referData)||void 0===me||null===(fe=me.profileFields.MLastname)||void 0===fe?void 0:fe.Label," is required")}]},{label:null===(be=Di.referData)||void 0===be||null===(De=be.profileFields.CommenceDate)||void 0===De?void 0:De.Label,name:"CommenceDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date",rules:[{required:null===(Fe=Di.referData)||void 0===Fe||null===(ge=Fe.profileFields.CommenceDate)||void 0===ge?void 0:ge.FieldRequired,message:"".concat(null===(he=Di.referData)||void 0===he||null===(ye=he.profileFields.CommenceDate)||void 0===ye?void 0:ye.Label," is required")}],inputprops:{format:"M/D/YYYY"}},{label:"Completion Date",name:"CompletionDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date",inputprops:{format:"M/D/YYYY"}},{label:null===(xe=Di.referData)||void 0===xe||null===(Ie=xe.profileFields.DepartmentId)||void 0===Ie?void 0:Ie.Label,name:"DepartmentId",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(Ne=Di.referData)||void 0===Ne||null===(qe=Ne.profileFields.DepartmentId)||void 0===qe?void 0:qe.FieldRequired,message:"".concat(null===(Le=Di.referData)||void 0===Le||null===(Pe=Le.profileFields.DepartmentId)||void 0===Pe?void 0:Pe.Label," is required")}],type:"treeSelect",inputprops:{treeData:Di.referData.departments,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},allowClear:!0,showSearch:!0,filterTreeNode:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.Name)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())}}},{label:null===(Re=Di.referData)||void 0===Re||null===(Ce=Re.profileFields.CostCodeId)||void 0===Ce?void 0:Ce.Label,name:"CostCodeId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(je=Di.referData)||void 0===je||null===(Ze=je.profileFields.CostCodeId)||void 0===Ze?void 0:Ze.FieldRequired,message:"".concat(null===(Ee=Di.referData)||void 0===Ee||null===(we=Ee.profileFields.CostCodeId)||void 0===we?void 0:we.Label," is required")}],inputprops:{options:Di.referData.costCodes}},{label:null===(Me=Di.referData)||void 0===Me||null===(Se=Me.profileFields.StateId)||void 0===Se?void 0:Se.Label,name:"StateId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Ae=Di.referData)||void 0===Ae||null===(ke=Ae.profileFields.StateId)||void 0===ke?void 0:ke.FieldRequired,message:"".concat(null===(Ve=Di.referData)||void 0===Ve||null===(Te=Ve.profileFields.StateId)||void 0===Te?void 0:Te.Label," is required")}],inputprops:{options:Di.referData.states}},{label:null===(Ge=Di.referData)||void 0===Ge||null===(ze=Ge.profileFields.Email)||void 0===ze?void 0:ze.Label,name:"Email",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(Ye=Di.referData)||void 0===Ye||null===(He=Ye.profileFields.Email)||void 0===He?void 0:He.FieldRequired,message:"".concat(null===(Oe=Di.referData)||void 0===Oe||null===(Ue=Oe.profileFields.Email)||void 0===Ue?void 0:Ue.Label," is required")},{type:"email",message:"The input is not valid E-mail!"}]},{type:"component",component:(0,C.jsx)(s.Z.Item,{className:"col-span-12 lg:col-span-6 mb-0",label:"AD Account",children:(0,C.jsxs)(p.Z,{gutter:8,children:[(0,C.jsx)(v.Z,{span:12,children:(0,C.jsx)(s.Z.Item,{name:"ADAccount",className:"mb-0",children:(0,C.jsx)(c.Z,{})})}),(0,C.jsx)(v.Z,{span:12,children:(0,C.jsx)(F.Button,{htmlType:"button",disabled:!vi,onClick:function(){var e;(0,L.Z)({method:"post",url:"tas/employee/checkadaccount",data:{employeeId:null===(e=Di.userProfileData)||void 0===e?void 0:e.Id,adAccount:null===bi||void 0===bi?void 0:bi.getFieldValue("ADAccount")}}).then((function(e){e.data.AdAccountValidationStatus?hi.success({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1,description:(0,C.jsx)("div",{})}):hi.error({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1,description:(0,C.jsx)("div",{children:e.data.EmployeeId&&(0,C.jsxs)(P.Link,{to:"/tas/people/search/".concat(e.data.EmployeeId),className:"text-blue-500 hover:underline",children:[e.data.Firstname," ",e.data.Lastname]})})})})).catch((function(e){})).then((function(){return ai(!1)}))},children:"Account Check"})})]})},"component-ADAccount")}],Ii=(0,y.useMemo)((function(){var e,l;return"DataApproval"===(null===(e=Di.userInfo)||void 0===e?void 0:e.Role)||!(vi&&(null===(l=Di.userProfileData)||void 0===l||!l.PeopleTypeId))}),[Di.userInfo,vi,Di.userProfileData]),Ni=[{label:null===(Be=Di.referData)||void 0===Be||null===($e=Be.profileFields.EmployerId)||void 0===$e?void 0:$e.Label,name:"EmployerId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Ke=Di.referData)||void 0===Ke||null===(We=Ke.profileFields.EmployerId)||void 0===We?void 0:We.FieldRequired,message:"".concat(null===(_e=Di.referData)||void 0===_e||null===(Je=_e.profileFields.EmployerId)||void 0===Je?void 0:Je.Label," is required")}],inputprops:{options:null===(Qe=Di.referData)||void 0===Qe?void 0:Qe.employers}},{label:null===(Xe=Di.referData)||void 0===Xe||null===(el=Xe.profileFields.PeopleTypeId)||void 0===el?void 0:el.Label,name:"PeopleTypeId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(ll=Di.referData)||void 0===ll||null===(al=ll.profileFields.PeopleTypeId)||void 0===al?void 0:al.FieldRequired,message:"".concat(null===(il=Di.referData)||void 0===il||null===(ol=il.profileFields.PeopleTypeId)||void 0===ol?void 0:ol.Label," is required")}],inputprops:{options:null===(rl=Di.referData)||void 0===rl?void 0:rl.peopleTypes,disabled:Ii}},{label:null===(nl=Di.referData)||void 0===nl||null===(dl=nl.profileFields.SAPID)||void 0===dl?void 0:dl.Label,name:"SAPID",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(tl=Di.referData)||void 0===tl||null===(sl=tl.profileFields.SAPID)||void 0===sl?void 0:sl.FieldRequired,message:"".concat(null===(ul=Di.referData)||void 0===ul||null===(cl=ul.profileFields.SAPID)||void 0===cl?void 0:cl.Label," is required")}],inputprops:{maxLength:8}},{label:null===(pl=Di.referData)||void 0===pl||null===(vl=pl.profileFields.ContractNumber)||void 0===vl?void 0:vl.Label,name:"ContractNumber",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(ml=Di.referData)||void 0===ml||null===(fl=ml.profileFields.ContractNumber)||void 0===fl?void 0:fl.FieldRequired,message:"".concat(null===(bl=Di.referData)||void 0===bl||null===(Dl=bl.profileFields.ContractNumber)||void 0===Dl?void 0:Dl.Label," is required")}]},{label:"Person #",name:"Id",className:"col-span-12 lg:col-span-6 mb-0",inputprops:{disabled:!0}},{label:null===(Fl=Di.referData)||void 0===Fl||null===(gl=Fl.profileFields.PositionId)||void 0===gl?void 0:gl.Label,name:"PositionId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(hl=Di.referData)||void 0===hl||null===(yl=hl.profileFields.PositionId)||void 0===yl?void 0:yl.FieldRequired,message:"".concat(null===(xl=Di.referData)||void 0===xl||null===(Il=xl.profileFields.PositionId)||void 0===Il?void 0:Il.Label," is required")}],inputprops:{options:null===(Nl=Di.referData)||void 0===Nl?void 0:Nl.positions}},{label:null===(ql=Di.referData)||void 0===ql||null===(Ll=ql.profileFields.HotelCheck)||void 0===Ll?void 0:Ll.Label,name:"HotelCheck",className:"col-span-12 lg:col-span-6 mb-0",type:"check",rules:[{required:null===(Pl=Di.referData)||void 0===Pl||null===(Rl=Pl.profileFields.HotelCheck)||void 0===Rl?void 0:Rl.FieldRequired,message:"".concat(null===(Cl=Di.referData)||void 0===Cl||null===(jl=Cl.profileFields.HotelCheck)||void 0===jl?void 0:jl.Label," is required")}]},{label:null===(Zl=Di.referData)||void 0===Zl||null===(El=Zl.profileFields.RosterId)||void 0===El?void 0:El.Label,name:"RosterId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(wl=Di.referData)||void 0===wl||null===(Ml=wl.profileFields.RosterId)||void 0===Ml?void 0:Ml.FieldRequired,message:"".concat(null===(Sl=Di.referData)||void 0===Sl||null===(Al=Sl.profileFields.RosterId)||void 0===Al?void 0:Al.Label," is required")}],inputprops:{options:null===(kl=Di.referData)||void 0===kl?void 0:kl.rosters}},{label:"Next Roster Start",name:"NextRosterDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date"},{label:null===(Vl=Di.referData)||void 0===Vl||null===(Tl=Vl.profileFields.RoomId)||void 0===Tl?void 0:Tl.Label,name:"RoomId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Gl=Di.referData)||void 0===Gl||null===(zl=Gl.profileFields.RoomId)||void 0===zl?void 0:zl.FieldRequired,message:"".concat(null===(Yl=Di.referData)||void 0===Yl||null===(Hl=Yl.profileFields.RoomId)||void 0===Hl?void 0:Hl.Label," is required")}],inputprops:{options:null===(Ol=Di.referData)||void 0===Ol?void 0:Ol.rooms}},{label:null===(Ul=Di.referData)||void 0===Ul||null===(Bl=Ul.profileFields.LocationId)||void 0===Bl?void 0:Bl.Label,name:"LocationId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===($l=Di.referData)||void 0===$l||null===(Kl=$l.profileFields.LocationId)||void 0===Kl?void 0:Kl.FieldRequired,message:"".concat(null===(Wl=Di.referData)||void 0===Wl||null===(_l=Wl.profileFields.LocationId)||void 0===_l?void 0:_l.Label," is required")}],inputprops:{options:null===(Jl=Di.referData)||void 0===Jl?void 0:Jl.locations.filter((function(e){return 1!==e.onSite}))}},{label:null===(Ql=Di.referData)||void 0===Ql||null===(Xl=Ql.profileFields.FlightGroupMasterId)||void 0===Xl?void 0:Xl.Label,name:"FlightGroupMasterId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(ea=Di.referData)||void 0===ea||null===(la=ea.profileFields.FlightGroupMasterId)||void 0===la?void 0:la.FieldRequired,message:"".concat(null===(aa=Di.referData)||void 0===aa||null===(ia=aa.profileFields.FlightGroupMasterId)||void 0===ia?void 0:ia.Label," is required")}],inputprops:{options:null===(oa=Di.referData)||void 0===oa?void 0:oa.transportGroups}},{label:null===(ra=Di.referData)||void 0===ra||null===(na=ra.profileFields.SiteContactEmployeeId)||void 0===na?void 0:na.Label,name:"SiteContactEmployeeId",className:"col-span-12 lg:col-span-6 mb-0",type:"searchSelect",rules:[{required:null===(da=Di.referData)||void 0===da||null===(ta=da.profileFields.SiteContactEmployeeId)||void 0===ta?void 0:ta.FieldRequired,message:"".concat(null===(sa=Di.referData)||void 0===sa||null===(ua=sa.profileFields.SiteContactEmployeeId)||void 0===ua?void 0:ua.Label," is required")}],inputprops:{fetchOptions:function(e){return(0,L.Z)({method:"post",url:"tas/employee/searchshort",data:{model:{keyWord:e},pageIndex:0,pageSize:100}}).then((function(e){return e.data.data.map((function(e){return{label:"".concat(e.Firstname," ").concat(e.Lastname," /").concat(e.Mobile,"/"),value:e.Id}}))}))},showSearch:!0,editName:["SiteContactEmployeeFirstname","SiteContactEmployeeLastname"],placeholder:"Select user",allowClear:!0}}],qi=[{label:null===(ca=Di.referData)||void 0===ca||null===(pa=ca.profileFields.EmergencyContactName)||void 0===pa?void 0:pa.Label,name:"EmergencyContactName",className:"col-span-6 mb-0",rules:[{required:null===(va=Di.referData)||void 0===va||null===(ma=va.profileFields.EmergencyContactName)||void 0===ma?void 0:ma.FieldRequired,message:"".concat(null===(fa=Di.referData)||void 0===fa||null===(ba=fa.profileFields.EmergencyContactName)||void 0===ba?void 0:ba.Label," is required")}]},{label:null===(Da=Di.referData)||void 0===Da||null===(Fa=Da.profileFields.EmergencyContactMobile)||void 0===Fa?void 0:Fa.Label,name:"EmergencyContactMobile",className:"col-span-6 mb-0",rules:[{required:null===(ga=Di.referData)||void 0===ga||null===(ha=ga.profileFields.EmergencyContactMobile)||void 0===ha?void 0:ha.FieldRequired,message:"".concat(null===(ya=Di.referData)||void 0===ya||null===(xa=ya.profileFields.EmergencyContactMobile)||void 0===xa?void 0:xa.Label," is required")},{pattern:w,message:"Invalid phone number"}],inputprops:{className:"w-full",maxLength:15}},{label:null===(Ia=Di.referData)||void 0===Ia||null===(Na=Ia.profileFields.Mobile)||void 0===Na?void 0:Na.Label,name:"Mobile",className:"col-span-6 mb-0",type:"number",rules:[{required:null===(qa=Di.referData)||void 0===qa||null===(La=qa.profileFields.Mobile)||void 0===La?void 0:La.FieldRequired,message:"".concat(null===(Pa=Di.referData)||void 0===Pa||null===(Ra=Pa.profileFields.Mobile)||void 0===Ra?void 0:Ra.Label," is required")},{pattern:Z,message:"".concat(null===(Ca=Di.referData)||void 0===Ca||null===(ja=Ca.profileFields.Mobile)||void 0===ja?void 0:ja.Label," must be 8 digit")}],inputprops:{prefix:"+976",className:"w-full",maxLength:8}},{type:"component",component:(0,C.jsx)(s.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.PeopleTypeId!==l.PeopleTypeId},children:function(e){var l,a,i,o,r,n,d,t,u,c,p=(0,e.getFieldValue)("PeopleTypeId"),v="Visitor"===(null===(l=Di.referData.peopleTypes)||void 0===l||null===(a=l.find((function(e){return e.value===p})))||void 0===a?void 0:a.Code);return(0,C.jsx)(s.Z.Item,{className:"col-span-6 mb-0",name:"PersonalMobile",label:null===(i=Di.referData)||void 0===i||null===(o=i.profileFields.PersonalMobile)||void 0===o?void 0:o.Label,rules:[{required:!v&&(null===(r=Di.referData)||void 0===r||null===(n=r.profileFields.PersonalMobile)||void 0===n?void 0:n.FieldRequired),message:"".concat(null===(d=Di.referData)||void 0===d||null===(t=d.profileFields.PersonalMobile)||void 0===t?void 0:t.Label," is required")},{pattern:Z,message:"".concat(null===(u=Di.referData)||void 0===u||null===(c=u.profileFields.PersonalMobile)||void 0===c?void 0:c.Label," must be 8 digit")}],children:(0,C.jsx)(m.Z,{controls:!1,prefix:"+976",className:"w-full",maxLength:8})})}})},{label:null===(Za=Di.referData)||void 0===Za||null===(Ea=Za.profileFields.PickUpAddress)||void 0===Ea?void 0:Ea.Label,name:"PickUpAddress",className:"col-span-6 mb-0",type:"textarea",rules:[{required:null===(wa=Di.referData)||void 0===wa||null===(Ma=wa.profileFields.PickUpAddress)||void 0===Ma?void 0:Ma.FieldRequired,message:"".concat(null===(Sa=Di.referData)||void 0===Sa||null===(Aa=Sa.profileFields.PickUpAddress)||void 0===Aa?void 0:Aa.Label," is required")}]},{label:null===(ka=Di.referData)||void 0===ka||null===(Va=ka.profileFields.FrequentFlyer)||void 0===Va?void 0:Va.Label,name:"FrequentFlyer",className:"col-span-6 mb-0",rules:[{required:null===(Ta=Di.referData)||void 0===Ta||null===(Ga=Ta.profileFields.FrequentFlyer)||void 0===Ga?void 0:Ga.FieldRequired,message:"".concat(null===(za=Di.referData)||void 0===za||null===(Ya=za.profileFields.FrequentFlyer)||void 0===Ya?void 0:Ya.Label," is required")}]}],Li=(0,y.useMemo)((function(){var e;return null===(e=Di.referData)||void 0===e?void 0:e.fieldsOfGroups.map((function(e){return{name:e.Id,label:e.Description}}))}),[null===(Ha=Di.referData)||void 0===Ha?void 0:Ha.fieldsOfGroups]),Pi=[{type:"component",component:(0,C.jsx)(C.Fragment,{children:null===(Oa=Di.referData)||void 0===Oa||null===(Ua=Oa.fieldsOfGroups)||void 0===Ua?void 0:Ua.map((function(e,l){return(0,C.jsx)(s.Z.Item,{name:e.Id,label:e.Description,rules:[{required:e.Required,message:"".concat(e.Description," is required")}],className:"col-span-12 lg:col-span-7 mb-0",children:(0,C.jsx)(f.Z,{fieldNames:{value:"Id",label:"Description"},filterOption:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.Description)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0,options:e.details})},"g-fields-".concat(l))}))})}],Ri=[{type:"component",component:(0,C.jsx)(s.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.NationalityId!==l.NationalityId},children:function(e){e.getFieldValue;var l,a,i,o,r,n,d,t,u,p,v,m,f,D,F,g,h,y,x,I,N=null===(l=Di.referData)||void 0===l||null===(a=l.nationalities)||void 0===a?void 0:a.find((function(e){return e.value===bi.getFieldValue("NationalityId")}));return"MN"!==(null===N||void 0===N?void 0:N.Code)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(s.Z.Item,{label:null===(i=Di.referData)||void 0===i||null===(o=i.profileFields.PassportNumber)||void 0===o?void 0:o.Label,name:"PassportNumber",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(r=Di.referData)||void 0===r||null===(n=r.profileFields.PassportExpiry)||void 0===n?void 0:n.FieldRequired,message:"".concat(null===(d=Di.referData)||void 0===d||null===(t=d.profileFields.PassportNumber)||void 0===t?void 0:t.Label," is required")}],children:(0,C.jsx)(c.Z,{})}),(0,C.jsx)(s.Z.Item,{label:null===(u=Di.referData)||void 0===u||null===(p=u.profileFields.PassportName)||void 0===p?void 0:p.Label,name:"PassportName",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(v=Di.referData)||void 0===v||null===(m=v.profileFields.PassportExpiry)||void 0===m?void 0:m.FieldRequired,message:"".concat(null===(f=Di.referData)||void 0===f||null===(D=f.profileFields.PassportName)||void 0===D?void 0:D.Label," is required")},{pattern:E,message:"The input is not valid name!"}],children:(0,C.jsx)(c.Z,{})}),(0,C.jsx)(s.Z.Item,{label:null===(F=Di.referData)||void 0===F||null===(g=F.profileFields.PassportExpiry)||void 0===g?void 0:g.Label,name:"PassportExpiry",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(h=Di.referData)||void 0===h||null===(y=h.profileFields.PassportExpiry)||void 0===y?void 0:y.FieldRequired,message:"".concat(null===(x=Di.referData)||void 0===x||null===(I=x.profileFields.PassportExpiry)||void 0===I?void 0:I.Label," is required")}],children:(0,C.jsx)(b.Z,{})})]})}})},{label:"Passport Image",name:"PassportRawImage",className:"col-span-12 lg:col-span-7 mb-0",type:"image"}],Ci=[{name:"PassportNumber",type:"image"},{name:"PassportName",type:"image"},{name:"PassportExpiry",type:"date"},{name:"PassportImage",type:"image"}],ji=[{label:"",name:"FullName",alignment:"left",wrap:!0,cellRender:function(e){var l,a;return(0,C.jsx)("div",{className:"flex items-center",children:(0,C.jsx)(P.Link,{to:"/tas/people/search/".concat(null===(l=e.data)||void 0===l?void 0:l.EmployeeId),children:(0,C.jsxs)("button",{type:"button",className:"text-blue-500 hover:underline whitespace-normal",children:[e.value," (",null===(a=e.data)||void 0===a?void 0:a.EmployeeId,")"]})})})}},{label:"ADAccount",name:"ADAccount",alignment:"left",cellRender:function(e){return(0,C.jsx)("div",{children:"boolean"===typeof e.value?e.value?"":(0,C.jsx)(d.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})}},{label:"SAP ID",name:"SAPID",alignment:"center",width:"60px",cellRender:function(e){return(0,C.jsx)("div",{children:"boolean"===typeof e.value?e.value?"":(0,C.jsx)(d.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})}},{label:"Mobile",name:"Mobile",alignment:"center",width:"60px",cellRender:function(e){return(0,C.jsx)("div",{children:"boolean"===typeof e.value?e.value?"":(0,C.jsx)(d.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})}}],Zi=function(e){var l=0;return si&&si.map((function(a){null!==e&&void 0!==e&&e.find((function(e){return e.name===a.name[0]}))&&l++})),l>0&&(0,C.jsx)(F.ErrorTabElement,{children:l})},Ei=[{label:(0,C.jsxs)("div",{className:"font-normal",children:["Personal ",Zi([].concat(xi,[{name:"NRN"}]))]}),key:0,forceRender:!0,children:(0,C.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,C.jsx)(F.FormItemRender,{fields:xi,form:bi,editData:Di.userProfileData},"t-item-1c")},"t-item-0")},{label:(0,C.jsxs)("div",{children:["On Site ",Zi(Ni)]}),key:1,forceRender:!0,children:(0,C.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,C.jsx)(F.FormItemRender,{fields:Ni,form:bi,editData:Di.userProfileData},"t-item-2c")},"t-item-1")},{label:(0,C.jsxs)("div",{children:["Off Site ",Zi([].concat(qi,[{name:"PersonalMobile"}]))]}),key:2,forceRender:!0,children:(0,C.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,C.jsx)(F.FormItemRender,{fields:qi,form:bi,editData:Di.userProfileData},"t-item-3c")},"t-item-2")},"DataApproval"===(null===(Ba=Di.userInfo)||void 0===Ba?void 0:Ba.Role)?{label:(0,C.jsxs)("div",{children:["Group ",Zi(Li)]}),key:3,forceRender:!0,children:(0,C.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,C.jsx)(F.FormItemRender,{fields:Pi,form:bi,editData:Di.userProfileData},"t-item-4c")},"t-item-3")}:null,{label:(0,C.jsxs)("div",{children:["Citizenship ",Zi(function(){if(null!==bi&&void 0!==bi&&bi.getFieldValue("NationalityId")){var e,l,a=null===(e=Di.referData)||void 0===e||null===(l=e.nationalities)||void 0===l?void 0:l.find((function(e){return e.value===bi.getFieldValue("NationalityId")}));return"MN"!==(null===a||void 0===a?void 0:a.Code)?[{label:"Passport Number",name:"PassportNumber",rules:[{required:!0,message:"Passport Number is required"}]},{label:"Name On Passport",name:"PassportName",rules:[{required:!0,message:"Name on password is required"}]},{label:"Passport Expiry Date",name:"PassportExpiry",rules:[{required:!0,message:"Password expiry date is required"}]}]:[]}return[]}())]}),key:4,forceRender:!0,children:(0,C.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,C.jsx)(F.FormItemRender,{fields:Ri,form:bi,editData:Di.userProfileData},"t-item-5c")},"t-item-4")}];return(0,C.jsxs)(C.Fragment,{children:[Di.customLoading?(0,C.jsx)("div",{className:"animate-skeleton h-[400px] flex rounded-ot shadow-md col-span-12"}):(0,C.jsxs)("div",{className:"bg-white rounded-ot p-4 col-span-12 shadow-md mb-1 ".concat($a),children:[(0,C.jsx)(s.Z,(0,i.Z)((0,i.Z)({form:bi},M),{},{labelAlign:"left",onFinish:function(e){var l,a,i;ui(null),ni(!0);var n=[],d=new FormData;Object.keys(e).map((function(l){if(isNaN(l)){if("PassportRawImage"!==l&&"SiteContactEmployeeId"!==l)"Gender"===l?d.append(l,e[l]?1:0):"CommenceDate"===l||"CompletionDate"===l?d.append(l,e[l]?h()(e[l]).format("YYYY-MM-DD"):""):d.append(l,e[l]?e[l]:"");else if("SiteContactEmployeeId"===l){var a,i;if("string"===typeof e[l])d.append(l,null!==(a=Di.userProfileData)&&void 0!==a&&a.SiteContactEmployeeId?null===(i=Di.userProfileData)||void 0===i?void 0:i.SiteContactEmployeeId:"");else d.append(l,e[l]?e[l]:"")}}else n.push({GroupMasterId:parseInt(l),GroupDetailId:e[l]?e[l]:""})})),d.append("PassportRawImage",null!==(l=e.PassportRawImage)&&void 0!==l&&l.file?null===(a=e.PassportRawImage)||void 0===a?void 0:a.file:""),d.append("id",null===(i=Di.userProfileData)||void 0===i?void 0:i.Id),(0,L.Z)({method:"patch",url:"tas/employee",data:d}).then(function(){var e=(0,r.Z)((0,o.Z)().mark((function e(l){var a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,L.Z)({method:"post",url:"tas/groupmembers/".concat(null===(a=Di.userProfileData)||void 0===a?void 0:a.Id),data:n}).then((function(e){var l;mi(!1),Ka(null===(l=Di.userProfileData)||void 0===l?void 0:l.Id)})).catch((function(e){})).then((function(){ni(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(l){return e.apply(this,arguments)}}()).catch((function(e){var l=JSON.parse(e.response.data.message);l&&l.length>0&&(hi.error({message:"Validation Warning",duration:0,description:(0,C.jsx)("div",{children:(0,C.jsx)(F.Table,{data:l,columns:ji,containerClass:"shadow-none border",pager:!1})})}),ni(!1))}))},className:"bg-white rounded-lg",onFinishFailed:function(e){e&&ui(e.errorFields)},disabled:!vi,scrollToFirstError:!0,children:(0,C.jsx)(D.Z,{defaultActiveKey:"1",type:"card",size:"middle",items:Ei,activeKey:Qa,onTabClick:function(e){return Xa(e)}})})),(0,C.jsx)("div",{className:"mt-3 flex justify-end",children:Wa?null:vi?(0,C.jsxs)("div",{className:"flex items-center gap-3",children:[(0,C.jsx)(F.Button,{type:"primary",loading:ri,onClick:function(){return bi.submit()},icon:(0,C.jsx)(t.Z,{}),children:"Save"}),(0,C.jsx)(F.Button,{onClick:function(){return mi(!1)},disabled:ri,children:"Cancel"})]}):(0,C.jsx)(F.Button,{onClick:function(){return mi(!0)},children:"Edit"})})]}),yi]})}},24957:function(e,l,a){a.d(l,{Z:function(){return t}});var i=a(87462),o=a(47313),r={icon:function(e,l){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:l}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:e}}]}},name:"close-circle",theme:"twotone"},n=a(17469),d=function(e,l){return o.createElement(n.Z,(0,i.Z)({},e,{ref:l,icon:r}))};var t=o.forwardRef(d)},66736:function(e,l,a){a.d(l,{Z:function(){return t}});var i=a(87462),o=a(47313),r={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},n=a(17469),d=function(e,l){return o.createElement(n.Z,(0,i.Z)({},e,{ref:l,icon:r}))};var t=o.forwardRef(d)},53979:function(e,l,a){a.d(l,{Z:function(){return t}});var i=a(87462),o=a(47313),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-12-12-28.3-18.7-45.3-18.7H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 176h256v112H384V176zm128 554c-79.5 0-144-64.5-144-144s64.5-144 144-144 144 64.5 144 144-64.5 144-144 144zm0-224c-44.2 0-80 35.8-80 80s35.8 80 80 80 80-35.8 80-80-35.8-80-80-80z"}}]},name:"save",theme:"filled"},n=a(17469),d=function(e,l){return o.createElement(n.Z,(0,i.Z)({},e,{ref:l,icon:r}))};var t=o.forwardRef(d)}}]);