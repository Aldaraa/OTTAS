"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[9058],{49058:function(e,t,n){n.r(t);var i=n(1413),a=n(29439),s=n(2880),o=n(14261),c=n(47313),l=n(65040),r=n(56573),u=n(40765),d=n(82138),f=n(92350),p=n(81514),m=n(42614),h=n(46417),v="Shift Status Color";t.default=function(){var e=(0,c.useState)([]),t=(0,a.Z)(e,2),n=t[0],x=t[1],b=(0,c.useState)([]),j=(0,a.Z)(b,2),g=j[0],C=j[1],y=(0,c.useState)(null),Z=(0,a.Z)(y,2),N=Z[0],A=Z[1],w=(0,c.useState)(!1),k=(0,a.Z)(w,2),D=k[0],S=k[1],F=(0,c.useState)(!1),q=(0,a.Z)(F,2),L=q[0],B=q[1],I=(0,c.useState)(!1),R=(0,a.Z)(I,2),E=R[0],V=R[1],T=(0,c.useState)(!1),M=(0,a.Z)(T,2),O=M[0],_=M[1],z=l.Z.useForm(),G=(0,a.Z)(z,1)[0],J=l.Z.useForm(),K=(0,a.Z)(J,1)[0],P=(0,c.useContext)(m.V).action;(0,c.useEffect)((function(){P.changeMenuKey("/tas/shiftstatuscolor"),Y()}),[]);var Y=function(){S(!0),(0,r.Z)({method:"get",url:"tas/color"}).then((function(e){if(x(e.data),1===K.getFieldValue("Active")){var t=e.data.filter((function(e){return 1===e.Active}));C(t)}else if(0===K.getFieldValue("Active")){var n=e.data.filter((function(e){return 0===e.Active}));C(n)}else C(e.data)})).catch((function(e){})).then((function(){return S(!1)}))},H=function(e){A(e),B(!0)},Q=[{label:"",name:"Code",width:"50px",cellRender:function(e){return(0,h.jsx)("div",{className:"w-[30px] h-[13px]",style:{background:e.data.Code}})}},{label:"Description",name:"Description"},{label:"Active",name:"Active",width:"90px",cellRender:function(e){return(0,h.jsx)(o.Jg,{disabled:!0,iconSize:18,value:1===e.data.Active||0})}},{label:"",name:"action",width:"170px",cellRender:function(e){return(0,h.jsxs)("div",{className:"flex gap-4",children:[(0,h.jsx)("button",{type:"button",className:"edit-button",onClick:function(){return t=e.data,A(t),void _(!0);var t},children:"Edit"}),1===e.data.Active?(0,h.jsx)("button",{type:"button",className:"dlt-button",onClick:function(){return H(e.data)},children:"Deactivate"}):(0,h.jsx)("button",{type:"button",className:"scs-button",onClick:function(){return H(e.data)},children:"Reactivate"})]})}}],U=function(){_(!1)};return(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-3 shadow-md",children:[(0,h.jsx)("div",{className:"text-lg font-bold mb-2",children:v}),(0,h.jsx)(s.Form,{form:K,fields:[{label:"Code",name:"Code",className:"col-span-2 mb-2",inputprops:{}},{label:"Description",name:"Description",className:"col-span-3 mb-2"},{label:"Active",name:"Active",className:"col-span-1 mb-2",type:"check",inputprops:{indeterminatewith:!0}}],className:"grid grid-cols-12 gap-x-8",onFinish:function(e){S(!0),(0,p.Z)(e,n).then((function(e){C(e),S(!1)}))},noLayoutConfig:!0,initValues:{Active:1},children:(0,h.jsx)("div",{className:"flex gap-4 items-baseline col-span-1",children:(0,h.jsx)(s.Button,{htmlType:"submit",loading:D,icon:(0,h.jsx)(u.Z,{}),children:"Search"})})})]}),(0,h.jsx)(s.Table,{data:g,columns:Q,allowColumnReordering:!1,loading:D,keyExpr:"Id",tableClass:"border-t max-h-[calc(100vh-250px)]",title:(0,h.jsxs)("div",{className:"flex justify-between py-2 px-1",children:[(0,h.jsxs)("div",{className:"flex items-center gap-1",children:[(0,h.jsx)("span",{className:"font-bold",children:g.length}),(0,h.jsx)("span",{className:" text-gray-400",children:"results"})]}),(0,h.jsxs)(s.Button,{icon:(0,h.jsx)(d.Z,{}),onClick:function(){A(null),G.resetFields(),_(!0)},children:["Add ",v]})]})}),(0,h.jsx)(s.Modal,{open:O,onCancel:function(){return _(!1)},title:N?"Edit ".concat(v):"Add ".concat(v),children:(0,h.jsx)(s.Form,{form:G,fields:N?[{label:"Code",name:"Code",rules:[{required:!0,message:"Code is required"}],className:"col-span-12 mb-2",inputprops:{maxLength:20},type:"color"},{label:"Description",name:"Description",rules:[{required:!0,message:"Description is required"}],className:"col-span-12 mb-2"}]:[{label:"Code",name:"Code",rules:[{required:!0,message:"Code is required"}],className:"col-span-12 mb-2",inputprops:{maxLength:20},type:"color"},{label:"Description",name:"Description",rules:[{required:!0,message:"Description is required"}],className:"col-span-12 mb-2"},{label:"Active",name:"Active",className:"col-span-12 mb-2",type:"check",inputprops:{}}],editData:N,onFinish:function(e){V(!0),N?(0,r.Z)({method:"put",url:"tas/color",data:(0,i.Z)((0,i.Z)({},e),{},{Id:N.Id})}).then((function(e){Y(),U()})).catch((function(e){})).then((function(){return V(!1)})):(0,r.Z)({method:"post",url:"tas/color",data:(0,i.Z)((0,i.Z)({},e),{},{Active:e.Active?1:0})}).then((function(e){Y(),U()})).catch((function(e){})).then((function(){return V(!1)}))},children:(0,h.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2",children:[(0,h.jsx)(s.Button,{type:"primary",onClick:function(){return G.submit()},loading:E,icon:(0,h.jsx)(f.Z,{}),children:"Save"}),(0,h.jsx)(s.Button,{onClick:U,disabled:E,children:"Cancel"})]})})}),(0,h.jsxs)(o.GI,{visible:L,showTitle:!1,height:110,width:350,children:[(0,h.jsxs)("div",{children:["Are you sure you want to ",1===(null===N||void 0===N?void 0:N.Active)?"deactivate":"reactivate"," this record?"]}),(0,h.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,h.jsx)(s.Button,{type:1===(null===N||void 0===N?void 0:N.Active)?"danger":"success",onClick:function(){V(!0),(0,r.Z)({method:"delete",url:"tas/color",data:{id:N.Id}}).then((function(){Y(),B(!1)})).catch((function(e){})).then((function(){return V(!1)}))},loading:E,children:"Yes"}),(0,h.jsx)(s.Button,{onClick:function(){return B(!1)},disabled:E,children:"No"})]})]})]})}},81514:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(93433),a=n(4942),s=n(1413);var o=function e(t,n,i){var o=[],c=Object.keys(n);return t.map((function(t){if(t[i].length>0)o.push((0,s.Z)((0,s.Z)({},t),{},(0,a.Z)({},i,e(t[i],n,i))));else{var l=!1;c.map((function(e){var i,a;""!==n[e]&&"undefined"!==typeof n[e]&&null!==n[e]?l="string"===typeof n[e]?l||(null===(i=t[e])||void 0===i?void 0:i.toLowerCase().includes(null===(a=n[e])||void 0===a?void 0:a.toLowerCase())):l||t[e]===n[e]:l=!0})),l&&o.push(t)}})),o};function c(e,t,n,a){return"tree"===n?o(t,e,a):new Promise((function(n,a){var s=Object.keys(e),o=(0,i.Z)(t);s.map((function(t){""!==e[t]&&"undefined"!==typeof e[t]&&null!==e[t]&&(o="string"===typeof e[t]?o.filter((function(n){var i,a;return null===(i=n[t])||void 0===i?void 0:i.toLowerCase().includes(null===(a=e[t])||void 0===a?void 0:a.toLowerCase())})):o.filter((function(n){return n[t]===e[t]})))})),n(o)}))}}}]);