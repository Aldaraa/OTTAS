"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[8855],{48855:function(e,n,t){t.r(n);var i=t(74165),a=t(15861),s=t(1413),o=t(29439),r=t(2880),c=t(14261),l=t(47313),u=t(65040),d=t(56573),f=t(40765),m=t(82138),p=t(92350),h=t(81514),v=t(42614),x=t(46417),b="Airport Code",j=[{label:"Code",name:"Code",className:"col-span-12 mb-2",rules:[{required:!0,message:"Code is required"}],inputprops:{maxLength:10}},{label:"Description",name:"Description",className:"col-span-12 mb-2",rules:[{required:!0,message:"Description is required"}]},{label:"Country",name:"Country",className:"col-span-12 mb-2",rules:[{required:!0,message:"Country is required"}]}],C=[{label:"Code",name:"Code",className:"col-span-2 mb-2",inputprops:{}},{label:"Country",name:"Country",className:"col-span-2 mb-2"},{label:"Description",name:"Description",className:"col-span-3 mb-2"},{label:"Active",name:"Active",className:"col-span-1 mb-2",type:"check",inputprops:{indeterminatewith:!0}}];n.default=function(){var e=(0,l.useState)([]),n=(0,o.Z)(e,2),t=n[0],g=n[1],y=(0,l.useState)([]),Z=(0,o.Z)(y,2),N=Z[0],w=Z[1],k=(0,l.useState)(null),A=(0,o.Z)(k,2),S=A[0],q=A[1],D=(0,l.useState)(!1),L=(0,o.Z)(D,2),F=L[0],B=(L[1],(0,l.useState)(!1)),I=(0,o.Z)(B,2),R=I[0],E=I[1],T=(0,l.useState)(!1),M=(0,o.Z)(T,2),O=M[0],_=M[1],z=(0,l.useState)(!1),G=(0,o.Z)(z,2),J=G[0],K=G[1],P=(0,l.useState)(!1),V=(0,o.Z)(P,2),Y=V[0],H=V[1],Q=u.Z.useForm(),U=(0,o.Z)(Q,1)[0],W=u.Z.useForm(),X=(0,o.Z)(W,1)[0],$=(0,l.useContext)(v.V).action,ee=(0,l.useRef)(null);(0,l.useEffect)((function(){$.changeMenuKey("/tas/airportcode"),ne()}),[]);var ne=function(){var e;null===(e=ee.current)||void 0===e||e.instance.beginCustomLoading(),(0,d.Z)({method:"get",url:"tas/requestairport"}).then((function(e){g(e.data),w(e.data)})).catch((function(e){})).then((function(){var e;return null===(e=ee.current)||void 0===e?void 0:e.instance.endCustomLoading()}))},te=function(e){q(e),E(!0)},ie=[{label:"Country",name:"Country"},{label:"Description",name:"Description"},{label:"Active",name:"Active",width:"90px",alignment:"center",cellRender:function(e){return(0,x.jsx)(c.Jg,{disabled:!0,iconSize:18,value:1===e.data.Active||0})}},{label:"",name:"action",width:"170px",cellRender:function(e){return(0,x.jsxs)("div",{className:"flex gap-4",children:[(0,x.jsx)("button",{type:"button",className:"edit-button",onClick:function(){return n=e.data,q(n),void H(!0);var n},children:"Edit"}),1===e.data.Active?(0,x.jsx)("button",{type:"button",className:"dlt-button",onClick:function(){return te(e.data)},children:"Deactivate"}):(0,x.jsx)("button",{type:"button",className:"scs-button",onClick:function(){return te(e.data)},children:"Reactivate"})]})}}],ae=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(!0),(0,h.Z)(n,t).then((function(e){w(e),_(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),se=function(){H(!1)};return(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-3 shadow-md",children:[(0,x.jsx)("div",{className:"text-lg font-bold mb-2",children:b}),(0,x.jsx)(r.Form,{form:X,fields:C,className:"grid grid-cols-12 gap-x-8",onFinish:ae,noLayoutConfig:!0,children:(0,x.jsx)("div",{className:"flex gap-4 col-span-3 items-baseline",children:(0,x.jsx)(r.Button,{htmlType:"submit",className:"flex items-center",loading:O,icon:(0,x.jsx)(f.Z,{}),children:"Search"})})})]}),(0,x.jsx)(r.Table,{ref:ee,data:N,columns:ie,allowColumnReordering:!1,keyExpr:"Id",tableClass:"border-t max-h-[calc(100vh-250px)]",title:(0,x.jsxs)("div",{className:"flex justify-between py-2 px-1",children:[(0,x.jsxs)("div",{className:"flex items-center gap-1",children:[(0,x.jsx)("span",{className:"font-bold",children:N.length}),(0,x.jsx)("span",{className:" text-gray-400",children:"results"})]}),(0,x.jsxs)(r.Button,{icon:(0,x.jsx)(m.Z,{}),onClick:function(){q(null),U.resetFields(),H(!0)},children:["Add ",b]})]})}),(0,x.jsx)(r.Modal,{open:Y,onCancel:function(){return H(!1)},title:S?"Edit ".concat(b):"Add ".concat(b),children:(0,x.jsx)(r.Form,{form:U,fields:j,editData:S,onFinish:function(e){K(!0),S?(0,d.Z)({method:"put",url:"tas/requestairport",data:(0,s.Z)((0,s.Z)({},e),{},{Id:S.Id})}).then((function(e){ne(),se()})).catch((function(e){})).then((function(){return K(!1)})):(0,d.Z)({method:"post",url:"tas/requestairport",data:(0,s.Z)({},e)}).then((function(e){ne(),se()})).catch((function(e){})).then((function(){return K(!1)}))},loading:F,children:(0,x.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2",children:[(0,x.jsx)(r.Button,{type:"primary",onClick:function(){return U.submit()},loading:F,icon:(0,x.jsx)(p.Z,{}),children:"Save"}),(0,x.jsx)(r.Button,{onClick:se,children:"Cancel"})]})})}),(0,x.jsxs)(c.GI,{visible:R,showTitle:!1,height:110,width:350,children:[(0,x.jsxs)("div",{children:["Are you sure you want to ",1===(null===S||void 0===S?void 0:S.Active)?"deactivate":"reactivate"," this record?"]}),(0,x.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,x.jsx)(r.Button,{type:1===(null===S||void 0===S?void 0:S.Active)?"danger":"success",onClick:function(){K(!0),(0,d.Z)({method:"delete",url:"tas/requestairport",data:{Id:S.Id}}).then((function(){ne(),E(!1)})).catch((function(e){})).then((function(){return K(!1)}))},loading:J,children:"Yes"}),(0,x.jsx)(r.Button,{onClick:function(){return E(!1)},disabled:J,children:"No"})]})]})]})}},81514:function(e,n,t){t.d(n,{Z:function(){return r}});var i=t(93433),a=t(4942),s=t(1413);var o=function e(n,t,i){var o=[],r=Object.keys(t);return n.map((function(n){if(n[i].length>0)o.push((0,s.Z)((0,s.Z)({},n),{},(0,a.Z)({},i,e(n[i],t,i))));else{var c=!1;r.map((function(e){var i,a;""!==t[e]&&"undefined"!==typeof t[e]&&null!==t[e]?c="string"===typeof t[e]?c||(null===(i=n[e])||void 0===i?void 0:i.toLowerCase().includes(null===(a=t[e])||void 0===a?void 0:a.toLowerCase())):c||n[e]===t[e]:c=!0})),c&&o.push(n)}})),o};function r(e,n,t,a){return"tree"===t?o(n,e,a):new Promise((function(t,a){var s=Object.keys(e),o=(0,i.Z)(n);s.map((function(n){""!==e[n]&&"undefined"!==typeof e[n]&&null!==e[n]&&(o="string"===typeof e[n]?o.filter((function(t){var i,a;return null===(i=t[n])||void 0===i?void 0:i.toLowerCase().includes(null===(a=e[n])||void 0===a?void 0:a.toLowerCase())})):o.filter((function(t){return t[n]===e[n]})))})),t(o)}))}}}]);