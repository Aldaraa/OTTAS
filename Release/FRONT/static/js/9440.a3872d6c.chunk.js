"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[9440],{29440:function(e,n,t){t.r(n);var o=t(29439),l=t(2880),a=t(47313),r=t(76047),i=t(56573),d=t(58467),u=t(82508),s=t(14261),c=t(76629),m=t(46417);n.default=function(){var e=(0,a.useState)(null),n=(0,o.Z)(e,2),t=n[0],h=n[1],p=(0,a.useState)(!1),v=(0,o.Z)(p,2),f=v[0],g=v[1],x=(0,a.useState)(!1),b=(0,o.Z)(x,2),w=b[0],y=b[1],I=(0,a.useState)(!1),S=(0,o.Z)(I,2),D=S[0],k=S[1],N=(0,a.useState)(null),C=(0,o.Z)(N,2),j=C[0],R=C[1],M=(0,a.useState)(null),Z=(0,o.Z)(M,2),E=Z[0],A=Z[1],G=(0,a.useState)([]),T=(0,o.Z)(G,2),H=T[0],z=T[1],P=(0,d.UO)().employeeId;(0,a.useEffect)((function(){c.Z.set("pp_rt","rolecenter"),_()}),[]);var _=function(){g(!0),(0,i.Z)({method:"get",url:"tas/sysrole/roleinfo/".concat(P)}).then((function(e){h(e.data);var n=[];e.data.Menu.length>0&&e.data.Menu.map((function(e){e.Permission&&n.push(e.Id)})),z(n)})).catch((function(e){})).then((function(){return g(!1)}))},B=[{label:"Name",name:"Name"}],q=[{label:"Role Name",name:"RoleName"},{label:"",name:"action",width:"100px",cellRender:function(e){return(0,m.jsx)("button",{className:"dlt-button",onClick:function(){return J(e.row.data,"system")},children:"Remove"})}}],K=[{label:"Department Name",name:"DepartmentName"},{label:"",name:"action",width:"100px",cellRender:function(e){return(0,m.jsx)("button",{className:"dlt-button",onClick:function(){return J(e.row.data,"admin")},children:"Remove"})}}],O=[{label:"Department Name",name:"DepartmentName"},{label:"",name:"action",width:"100px",cellRender:function(e){return(0,m.jsx)("button",{className:"dlt-button",onClick:function(){return J(e.row.data,"manager")},children:"Remove"})}}],U=[{label:"Department Name",name:"DepartmentName"},{label:"",name:"action",width:"100px",cellRender:function(e){return(0,m.jsx)("button",{className:"dlt-button",onClick:function(){return J(e.row.data,"supervisor")},children:"Remove"})}}],Y=[{label:"Group Name",name:"GroupName"},{label:"",name:"action",width:"100px",cellRender:function(e){return(0,m.jsx)("button",{className:"dlt-button",onClick:function(){return J(e.row.data,"group")},children:"Remove"})}}],F=(0,a.useMemo)((function(){var e,n,o,a,r,i,d,u,s,c,h,p=[];0!==(null===t||void 0===t?void 0:t.Id)&&p.push({key:0,label:"System role",children:(0,m.jsx)(l.Table,{data:[t],columns:q,allowColumnReordering:!1,containerClass:"shadow-none border mt-5",keyExpr:"EventDate",pager:{showPageSizeSelector:(null===(a=[t])||void 0===a?void 0:a.length)>100},style:{maxHeight:"calc(100vh - 340px)"}})});(null===t||void 0===t?void 0:t.DepartmentAdminInfo.length)>0&&p.push({key:1,label:"Department Admin (".concat(null===t||void 0===t?void 0:t.DepartmentAdminInfo.length,")"),children:(0,m.jsx)(l.Table,{data:null===t||void 0===t?void 0:t.DepartmentAdminInfo,columns:K,allowColumnReordering:!1,containerClass:"shadow-none border mt-5",keyExpr:"EventDate",pager:{showPageSizeSelector:(null===t||void 0===t||null===(r=t.DepartmentAdminInfo)||void 0===r?void 0:r.length)>100},style:{maxHeight:"calc(100vh - 340px)"}})});(null===t||void 0===t||null===(e=t.DepartmentManagerInfo)||void 0===e?void 0:e.length)>0&&p.push({key:2,label:"Department Manager (".concat(null===t||void 0===t||null===(i=t.DepartmentManagerInfo)||void 0===i?void 0:i.length,")"),children:(0,m.jsx)(l.Table,{data:null===t||void 0===t?void 0:t.DepartmentManagerInfo,columns:O,allowColumnReordering:!1,containerClass:"shadow-none border mt-5 max-w-[600px]",keyExpr:"Id",pager:{showPageSizeSelector:(null===t||void 0===t||null===(d=t.DepartmentManagerInfo)||void 0===d?void 0:d.length)>100},style:{maxHeight:"calc(100vh - 340px)"}})});(null===t||void 0===t||null===(n=t.DepartmentSupervisorInfo)||void 0===n?void 0:n.length)>0&&p.push({key:3,label:"Department Supervisor (".concat(null===t||void 0===t||null===(u=t.DepartmentSupervisorInfo)||void 0===u?void 0:u.length,")"),children:(0,m.jsx)(l.Table,{data:null===t||void 0===t?void 0:t.DepartmentSupervisorInfo,columns:U,allowColumnReordering:!1,containerClass:"shadow-none border mt-5",pager:{showPageSizeSelector:(null===t||void 0===t||null===(s=t.DepartmentSupervisorInfo)||void 0===s?void 0:s.length)>100},keyExpr:"Id",style:{maxHeight:"calc(100vh - 340px)"}})});(null===t||void 0===t?void 0:t.GroupInfo.length)>0&&p.push({key:4,label:"Group Info (".concat(null===t||void 0===t?void 0:t.GroupInfo.length,")"),children:(0,m.jsx)(l.Table,{data:null===t||void 0===t?void 0:t.GroupInfo,columns:Y,allowColumnReordering:!1,containerClass:"shadow-none border mt-5",pager:{showPageSizeSelector:(null===t||void 0===t||null===(c=t.GroupInfo)||void 0===c?void 0:c.length)>100},keyExpr:"Id",style:{maxHeight:"calc(100vh - 340px)"}})});(null===t||void 0===t||null===(o=t.Menu)||void 0===o?void 0:o.length)>0&&p.push({key:5,label:"Menu (".concat(null===t||void 0===t||null===(h=t.Menu)||void 0===h?void 0:h.length,")"),children:(0,m.jsx)(l.TreeTable,{selectedRowKeys:H,autoExpandAll:!0,dataSource:null===t||void 0===t?void 0:t.Menu,pager:!1,columns:B,allowColumnReordering:!1,selection:{mode:"multiple",recursive:!0,showCheckBoxesMode:"always",allowSelectAll:!0,selectAllMode:"page"},containerClass:"shadow-none border mt-5",keyExpr:"Id",parentIdExpr:"Head_ID",style:{maxHeight:"calc(100vh - 340px)"}})});return p}),[t]),J=function(e,n){R(e),A(n),k(!0)};return(0,m.jsxs)("div",{className:"bg-white rounded-ot p-4 col-span-12 shadow-md",children:[f?(0,m.jsx)(u.Z,{style:{fontSize:26}}):F.length>0?(0,m.jsx)(r.Z,{items:F,type:"card"}):"No Roles",(0,m.jsxs)(s.GI,{visible:D,showTitle:!1,height:130,width:350,children:[(0,m.jsxs)("div",{children:["Are you sure you want to remove from ",(0,m.jsxs)("span",{className:"font-semibold text-primary",children:[null===j||void 0===j?void 0:j.DepartmentName," ",null===j||void 0===j?void 0:j.GroupName]})," role?"]}),(0,m.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,m.jsx)(l.Button,{type:"danger",onClick:function(){y(!0),"group"===E?(0,i.Z)({method:"delete",url:"tas/requestgroupemployee/groupemployees",data:{id:j.Id}}).then((function(){_(),k(!1)})).catch((function(e){})).then((function(){return y(!1)})):"system"===E?(0,i.Z)({method:"delete",url:"tas/sysrole/removeuser/".concat(j.Id)}).then((function(){_(),k(!1)})).catch((function(e){})).then((function(){return y(!1)})):(0,i.Z)({method:"delete",url:"tas/department/".concat(E,"/").concat(j.Id)}).then((function(){_(),k(!1)})).catch((function(){})).then((function(){return y(!1)}))},loading:w,children:"Yes"}),(0,m.jsx)(l.Button,{onClick:function(){return k(!1)},disabled:w,children:"No"})]})]})]})}}}]);