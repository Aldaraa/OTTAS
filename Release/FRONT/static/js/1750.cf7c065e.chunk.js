"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[1750],{41750:function(e,n,t){t.r(n);var a=t(29439),l=t(2880),o=t(47313),r=t(93031),s=t(56573),i=t(40765),d=t(10658),c=t.n(d),u=t(2135),m=t(26672),x=t(46417),p=r.Z.RangePicker;n.default=function(){var e=(0,o.useState)([]),n=(0,a.Z)(e,2),t=n[0],r=n[1],d=(0,o.useState)(!1),h=(0,a.Z)(d,2),f=h[0],v=h[1],b=(0,o.useState)(!1),g=(0,a.Z)(b,2),j=g[0],N=g[1],D=(0,o.useState)([c()().subtract(15,"d"),c()().add(15,"d")]),Y=(0,a.Z)(D,2),R=Y[0],y=Y[1],S=(0,o.useState)(null),C=(0,a.Z)(S,2),w=C[0],I=C[1],M=(0,o.useState)(0),k=(0,a.Z)(M,2),Z=k[0],P=k[1],E=(0,o.useState)(0),z=(0,a.Z)(E,2),L=z[0],T=z[1],B=(0,o.useState)(100),F=(0,a.Z)(B,2),O=F[0],A=F[1],G=(0,o.useRef)(null);(0,o.useEffect)((function(){t.length>0&&W()}),[L]);var _=(0,o.useMemo)((function(){return[{label:"#",name:"EmployeeId",width:"60px",alignment:"left"},{label:"",name:"RoomOwner",alignment:"center",width:"20px",cellRender:function(e){var n;return(0,x.jsx)("span",{className:"text-[12px]",children:e.value?(0,x.jsx)("i",{className:"dx-icon-home text-green-500"}):(0,x.jsx)(l.Tooltip,{title:e.data.RoomNumber&&(0,x.jsx)("span",{className:"text-blue-500 hover:underline",children:null===(n=e.data)||void 0===n?void 0:n.RoomNumber}),color:"white",overlayInnerStyle:{color:"black",fontSize:"12px"},children:(0,x.jsx)("i",{className:"dx-icon-home text-gray-400 text-[14px]"})})})}},{label:"Details",name:"FullName",alignment:"left",cellRender:function(e){return(0,x.jsx)("div",{className:"flex items-center gap-3 group",children:(0,x.jsxs)("div",{id:"emp".concat(e.data.Id),style:{fontSize:"12px"},className:"flex items-center gap-1",children:[1===e.data.Gender?(0,x.jsx)(m.FaMale,{size:14,className:"text-blue-600"}):(0,x.jsx)(m.FaFemale,{size:14,className:"text-pink-500"}),(0,x.jsx)(u.Link,{to:"/tas/byroom/".concat(e.data.EmployeeId,"/roombooking?startDate=").concat(c()(R[0]).format("YYYY-MM-DD"),"&endDate=").concat(c()(R[1]).format("YYYY-MM-DD")),children:(0,x.jsx)("span",{className:"hover:underline text-blue-500",children:e.value})})]})})}},{label:"SAPID",name:"SAPID",alignment:"left",width:"80px",cellRender:function(e){return(0,x.jsx)("span",{className:"text-[12px]",children:e.value})}},{label:"Department",name:"DepartmentName",alignment:"left",cellRender:function(e){var n;return(0,x.jsx)(l.DepartmentTooltip,{id:null===(n=e.data)||void 0===n?void 0:n.DepartmentId,trigger:"click",showStatus:!1,children:(0,x.jsx)("span",{className:"text-[12px] text-blue-500 cursor-pointer hover:text-blue-400 transition-all",children:e.value})})}},{label:"Employer",name:"EmployerName",alignment:"left",cellRender:function(e){return(0,x.jsx)("span",{className:"text-[12px]",children:e.value})}},{label:"Res.Type",name:"PeopleTypeCode",alignment:"left",cellRender:function(e){return(0,x.jsx)("span",{className:"text-[12px]",children:e.value})}},{label:"Mobile",name:"PersonalMobile",alignment:"left",cellRender:function(e){return(0,x.jsx)("span",{className:"text-[12px]",children:e.value})}},{label:"Date In",name:"DateIn",defaultSortOrder:"asc",cellRender:function(e){return(0,x.jsx)("div",{className:"text-xs",children:c()(e.value).format("YYYY-MM-DD ddd")})}},{label:"Last Night",name:"LastNight",cellRender:function(e){return(0,x.jsx)("div",{className:"text-xs",children:c()(e.value).format("YYYY-MM-DD ddd")})}},{label:"Days",name:"Days",alignment:"center",width:"50px",cellRender:function(e){return(0,x.jsx)("div",{className:"text-xs",children:e.value})}},{label:"",name:"action",width:"130px",cellRender:function(e){return(0,x.jsx)("div",{children:(0,x.jsx)(u.Link,{to:"/tas/roomcalendar/".concat(e.data.RoomId,"/").concat(c()(e.data.DateIn).startOf("month").format("YYYY-MM-DD"),"?employeeId=").concat(e.data.EmployeeId),children:(0,x.jsx)("button",{type:"button",className:"edit-button",children:"Room Calendar"})})})}}]}),[R]),V=(0,o.useCallback)((function(e){I(e),v(!1)}),[]),W=function(){var e;null===(e=G.current)||void 0===e||e.instance.beginCustomLoading(),N(!0),(0,s.Z)({method:"post",url:"tas/employeestatus/roombookingbyroom",data:{pageIndex:L,pageSize:O,model:{roomId:w.Id,startDate:c()(R[0]).format("YYYY-MM-DD"),endDate:c()(R[1]).format("YYYY-MM-DD")}}}).then((function(e){r(e.data.data),P(e.data.totalcount)})).catch((function(e){})).then((function(){var e;null===(e=G.current)||void 0===e||e.instance.endCustomLoading(),N(!1)}))};return(0,x.jsxs)("div",{className:"rounded-ot bg-white px-3 pt-2 shadow-md",children:[(0,x.jsx)("div",{className:"text-lg font-bold mb-2",children:"View Room Booking by Room"}),(0,x.jsxs)("div",{className:"flex gap-5 mb-4",children:[(0,x.jsxs)("div",{className:"flex",children:[(0,x.jsx)("div",{className:"min-w-[300px] w-auto border border-[#d9d9d9] flex items-center px-3 bg-gray-50 text-gray-600 border-r-0 rounded-l-[6px]",children:w&&(0,x.jsxs)("div",{className:"flex gap-3",children:[(0,x.jsxs)("div",{children:[null===w||void 0===w?void 0:w.Number," - ",null===w||void 0===w?void 0:w.BedCount]}),(0,x.jsxs)("div",{children:["/",null===w||void 0===w?void 0:w.RoomTypeName,"/"]}),(0,x.jsxs)("div",{children:["/",null===w||void 0===w?void 0:w.CampName,"/"]})]})}),(0,x.jsx)(l.Button,{className:"rounded-l-none border",onClick:function(){return v(!0)},children:"Select Room"})]}),(0,x.jsx)(p,{value:R,onChange:function(e){return y(e)}}),(0,x.jsx)(l.Button,{onClick:W,loading:j,icon:(0,x.jsx)(i.Z,{}),disabled:!w||!R[0]&&!R[1],children:"Search"})]}),(0,x.jsx)(l.CustomTable,{ref:G,data:t,keyExpr:"Id",columns:_,onChangePageSize:function(e){return A(e)},onChangePageIndex:function(e){return T(e)},pageSize:O,pageIndex:L,allowColumnReordering:!1,showColumnLines:!1,totalCount:Z,isPagination:!0,containerClass:"shadow-none pl-0 pr-0",pagerPosition:"bottom",tableClass:"max-h-[calc(100vh-240px)]",isGrouping:!1,searchPanel:{enabled:!0},hoverStateEnabled:!0,wordWrapEnabled:!0}),(0,x.jsx)(l.Modal,{destroyOnClose:!1,open:f,onCancel:function(){return v(!1)},footer:null,title:"Room",width:900,children:(0,x.jsx)(l.RoomSearch,{onSelect:V})})]})}}}]);