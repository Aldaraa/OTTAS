"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[3331],{83331:function(e,t,n){n.r(t);var a=n(1413),i=n(29439),l=n(2880),s=n(14261),r=n(47313),c=n(65040),o=n(56573),u=n(40765),d=n(82138),m=n(92350),p=n(81514),h=n(58467),f=n(2135),b=n(42614),v=n(46417),x="Group Master";t.default=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],g=t[1],j=(0,r.useState)([]),y=(0,i.Z)(j,2),N=y[0],w=y[1],C=(0,r.useState)(null),Z=(0,i.Z)(C,2),k=Z[0],S=Z[1],D=(0,r.useState)(!1),A=(0,i.Z)(D,2),O=A[0],R=A[1],q=(0,r.useState)(!1),L=(0,i.Z)(q,2),B=L[0],F=L[1],I=(0,r.useState)(!1),P=(0,i.Z)(I,2),E=P[0],z=P[1],J=(0,r.useState)(!1),V=(0,i.Z)(J,2),M=V[0],T=V[1],_=c.Z.useForm(),G=(0,i.Z)(_,1)[0],K=c.Z.useForm(),Y=(0,i.Z)(K,1)[0],H=(0,h.s0)(),Q=(0,r.useContext)(b.V).action;(0,r.useEffect)((function(){Q.changeMenuKey("/tas/groupmaster"),U()}),[]);var U=function(){R(!0),(0,o.Z)({method:"get",url:"tas/groupmaster"}).then((function(e){if(g(e.data),1===Y.getFieldValue("Active")){var t=e.data.filter((function(e){return 1===e.Active}));w(t)}else if(0===Y.getFieldValue("Active")){var n=e.data.filter((function(e){return 0===e.Active}));w(n)}else w(e.data)})).catch((function(e){})).then((function(){return R(!1)}))},W=function(e){S(e),F(!0)},X=[{label:"Description",name:"Description"},{label:"Order",name:"OrderBy",alignment:"left"},{label:"# Detail Count",name:"DetailCount",alignment:"left"},{label:"Log",name:"CreateLog",width:"120px",alignment:"center",cellRender:function(e){var t=e.value;return(0,v.jsx)(s.Jg,{disabled:!0,iconSize:18,value:1===t||0})}},{label:"Show on Profile",name:"ShowOnProfile",width:"120px",alignment:"center",cellRender:function(e){var t=e.value;return(0,v.jsx)(s.Jg,{disabled:!0,iconSize:18,value:1===t||0})}},{label:"Required",name:"Required",width:"120px",alignment:"center",cellRender:function(e){var t=e.value;return(0,v.jsx)(s.Jg,{disabled:!0,iconSize:18,value:1===t||0})}},{label:"Active",name:"Active",width:"90px",alignment:"center",cellRender:function(e){var t=e.value;return(0,v.jsx)(s.Jg,{disabled:!0,iconSize:18,value:1===t||0})}},{label:"",name:"",width:"80px",cellRender:function(e){return(0,v.jsx)("div",{className:"flex items-center",children:(0,v.jsx)(f.Link,{to:"/tas/groupmaster/".concat(e.data.Id),children:(0,v.jsx)("button",{type:"button",className:"edit-button",children:"View"})})})}},{label:"",name:"action",width:"170px",cellRender:function(e){return(0,v.jsxs)("div",{className:"flex gap-4",children:[(0,v.jsx)("button",{type:"button",className:"edit-button",onClick:function(){return t=e.data,S(t),void T(!0);var t},children:"Edit"}),1===e.data.Active?e.data.DetailCount>0?(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{id:"target".concat(e.data.Id),className:"dlt-button_lbl",children:"Deactivate"}),(0,v.jsx)(s.u,{target:"#target".concat(e.data.Id),showEvent:"mouseenter",hideEvent:"mouseleave",hideOnOutsideClick:!1,position:"top",children:(0,v.jsx)("div",{children:"Don't deactivate because there is an active Detail Count"})})]}):(0,v.jsx)("button",{type:"button",disabled:e.data.DetailCount>0,className:"dlt-button",onClick:function(){return W(e.data)},children:"Deactivate"}):(0,v.jsx)("button",{type:"button",className:"scs-button",onClick:function(){return W(e.data)},children:"Reactivate"})]})}}],$=function(){T(!1)};return(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-3 shadow-md",children:[(0,v.jsx)("div",{className:"text-lg font-bold mb-2",children:x}),(0,v.jsx)(l.Form,{form:Y,fields:[{label:"Description",name:"Description",className:"col-span-3 mb-2"},{label:"Order",name:"OrderBy",type:"number",className:"col-span-2 mb-2",inputprops:{className:"w-full"}},{label:"Active",name:"Active",className:"col-span-1 mb-2",type:"check",inputprops:{indeterminatewith:!0}},{label:"Show on Profile",name:"ShowOnProfile",className:"col-span-2 mb-2",type:"check",inputprops:{indeterminatewith:!0}}],className:"grid grid-cols-12 gap-x-8",onFinish:function(e){R(!0),(0,p.Z)(e,n).then((function(e){w(e),R(!1)}))},noLayoutConfig:!0,children:(0,v.jsx)("div",{className:"flex gap-4 items-baseline col-span-1",children:(0,v.jsx)(l.Button,{htmlType:"submit",className:"flex items-baseline",loading:O,icon:(0,v.jsx)(u.Z,{}),children:"Search"})})})]}),(0,v.jsx)(l.Table,{data:N,columns:X,allowColumnReordering:!1,loading:O,keyExpr:"Id",onRowDblClick:function(e){return H("/tas/groupmaster/".concat(e.data.Id))},tableClass:"border-t max-h-[calc(100vh-250px)]",title:(0,v.jsxs)("div",{className:"flex justify-between py-2 px-1",children:[(0,v.jsxs)("div",{className:"flex items-center gap-1",children:[(0,v.jsx)("span",{className:"font-bold",children:N.length}),(0,v.jsx)("span",{className:" text-gray-400",children:"results"})]}),(0,v.jsxs)(l.Button,{icon:(0,v.jsx)(d.Z,{}),onClick:function(){S(null),G.resetFields(),T(!0)},children:["Add ",x]})]})}),(0,v.jsx)(l.Modal,{open:M,onCancel:function(){return T(!1)},title:k?"Edit ".concat(x):"Add ".concat(x),children:(0,v.jsx)(l.Form,{form:G,fields:k?[{label:"Description",name:"Description",rules:[{required:!0,message:"Description is required"}],className:"col-span-12 mb-2"},{label:"Order",name:"OrderBy",rules:[{required:!0,message:"Order is required"}],type:"number",className:"col-span-12 mb-2"},{label:"Show on Profile",name:"ShowOnProfile",className:"col-span-12 mb-2",type:"check",inputprops:{}},{label:"Create Log",name:"CreateLog",className:"col-span-12 mb-2",type:"check",inputprops:{}},{label:"Required",name:"Required",className:"col-span-12 mb-2",type:"check",inputprops:{}}]:[{label:"Description",name:"Description",rules:[{required:!0,message:"Description is required"}],className:"col-span-12 mb-2"},{label:"Order",name:"OrderBy",rules:[{required:!0,message:"Order is required"}],type:"number",className:"col-span-12 mb-2"},{label:"Show on Profile",name:"ShowOnProfile",className:"col-span-12 mb-2",type:"check",inputprops:{}},{label:"Create Log",name:"CreateLog",className:"col-span-12 mb-2",type:"check",inputprops:{}},{label:"Required",name:"Required",className:"col-span-12 mb-2",type:"check",inputprops:{}},{label:"Active",name:"Active",className:"col-span-12 mb-2",type:"check",inputprops:{}}],editData:k,onFinish:function(e){z(!0),k?(0,o.Z)({method:"put",url:"tas/groupmaster",data:(0,a.Z)((0,a.Z)({},e),{},{Id:k.Id})}).then((function(e){U(),$()})).catch((function(e){})).then((function(){return z(!1)})):(0,o.Z)({method:"post",url:"tas/groupmaster",data:(0,a.Z)((0,a.Z)({},e),{},{Active:e.Active?1:0})}).then((function(e){U(),$()})).catch((function(e){})).then((function(){return z(!1)}))},children:(0,v.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2",children:[(0,v.jsx)(l.Button,{type:"primary",onClick:function(){return G.submit()},loading:E,icon:(0,v.jsx)(m.Z,{}),children:"Save"}),(0,v.jsx)(l.Button,{onClick:$,disabled:E,children:"Cancel"})]})})}),(0,v.jsxs)(s.GI,{visible:B,showTitle:!1,height:110,width:350,children:[(0,v.jsxs)("div",{children:["Are you sure you want to ",1===(null===k||void 0===k?void 0:k.Active)?"deactivate":"reactivate"," this record?"]}),(0,v.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,v.jsx)(l.Button,{type:1===(null===k||void 0===k?void 0:k.Active)?"danger":"success",onClick:function(){z(!0),(0,o.Z)({method:"delete",url:"tas/groupmaster",data:{id:k.Id}}).then((function(){U(),F(!1)})).catch((function(e){})).then((function(){return z(!1)}))},loading:E,children:"Yes"}),(0,v.jsx)(l.Button,{onClick:function(){return F(!1)},disabled:E,children:"No"})]})]})]})}},81514:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(93433),i=n(4942),l=n(1413);var s=function e(t,n,a){var s=[],r=Object.keys(n);return t.map((function(t){if(t[a].length>0)s.push((0,l.Z)((0,l.Z)({},t),{},(0,i.Z)({},a,e(t[a],n,a))));else{var c=!1;r.map((function(e){var a,i;""!==n[e]&&"undefined"!==typeof n[e]&&null!==n[e]?c="string"===typeof n[e]?c||(null===(a=t[e])||void 0===a?void 0:a.toLowerCase().includes(null===(i=n[e])||void 0===i?void 0:i.toLowerCase())):c||t[e]===n[e]:c=!0})),c&&s.push(t)}})),s};function r(e,t,n,i){return"tree"===n?s(t,e,i):new Promise((function(n,i){var l=Object.keys(e),s=(0,a.Z)(t);l.map((function(t){""!==e[t]&&"undefined"!==typeof e[t]&&null!==e[t]&&(s="string"===typeof e[t]?s.filter((function(n){var a,i;return null===(a=n[t])||void 0===a?void 0:a.toLowerCase().includes(null===(i=e[t])||void 0===i?void 0:i.toLowerCase())})):s.filter((function(n){return n[t]===e[t]})))})),n(s)}))}}}]);