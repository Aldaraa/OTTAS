"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[7790],{57790:function(e,t,n){n.r(t);var i=n(1413),a=n(29439),s=n(2880),l=n(14261),o=n(47313),c=n(65040),r=n(56573),u=n(40765),d=n(92350),f=n(81514),h=n(42614),p=n(2135),m=n(46417),v="Approval Groups";t.default=function(){var e=(0,o.useState)([]),t=(0,a.Z)(e,2),n=t[0],x=t[1],j=(0,o.useState)([]),b=(0,a.Z)(j,2),g=b[0],y=b[1],Z=(0,o.useState)(null),C=(0,a.Z)(Z,2),w=C[0],N=C[1],k=(0,o.useState)(!1),I=(0,a.Z)(k,2),A=I[0],D=I[1],S=(0,o.useState)(!1),E=(0,a.Z)(S,2),F=E[0],R=E[1],q=(0,o.useState)(!1),L=(0,a.Z)(q,2),B=L[0],O=L[1],G=(0,o.useState)(!1),T=(0,a.Z)(G,2),V=T[0],_=T[1],M=c.Z.useForm(),z=(0,a.Z)(M,1)[0],J=c.Z.useForm(),K=(0,a.Z)(J,1)[0],P=(0,o.useContext)(h.V).action;(0,o.useEffect)((function(){P.changeMenuKey("/tas/approvalgroups"),Y()}),[]);var Y=function(){D(!0),(0,r.Z)({method:"get",url:"tas/requestgroup"}).then((function(e){if(x(e.data),1===K.getFieldValue("Active")){var t=e.data.filter((function(e){return 1===e.Active}));y(t)}else if(0===K.getFieldValue("Active")){var n=e.data.filter((function(e){return 0===e.Active}));y(n)}else y(e.data)})).catch((function(e){})).then((function(){return D(!1)}))},H=function(e){N(e),R(!0)},Q=[{label:"Description",name:"Description",cellRender:function(e){return 0!==e.rowIndex?(0,m.jsx)("div",{className:"flex items-center",children:(0,m.jsx)(p.Link,{to:"/tas/approvalgroups/".concat(e.data.Id),children:(0,m.jsx)("span",{className:"text-blue-500 hover:underline cursor-pointer",children:e.value})})}):(0,m.jsx)("div",{children:e.value})}},{label:"# Resource",name:"EmployeeCount",alignment:"left",cellRender:function(e){return 0!==e.rowIndex&&(0,m.jsx)("div",{children:e.value})}},{label:"Active",name:"Active",width:"90px",alignment:"center",cellRender:function(e){return 0!==e.rowIndex&&(0,m.jsx)(l.Jg,{disabled:!0,iconSize:18,value:1===e.data.Active||0})}},{label:"",name:"action",width:"110px",cellRender:function(e){return 0!==e.rowIndex&&(0,m.jsx)("div",{className:"flex gap-4",children:1===e.data.Active?e.data.EmployeeCount>0?(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{id:"target".concat(e.data.Id),className:"dlt-button_lbl",children:"Deactivate"}),(0,m.jsx)(l.u,{target:"#target".concat(e.data.Id),showEvent:"mouseenter",hideEvent:"mouseleave",hideOnOutsideClick:!1,position:"top",children:(0,m.jsx)("div",{children:"Don't deactivate because there is an active Employee"})})]}):(0,m.jsx)("button",{type:"button",disabled:e.data.EmployeeCount>0,className:"dlt-button",onClick:function(){return H(e.data)},children:"Deactivate"}):(0,m.jsx)("button",{type:"button",className:"scs-button",onClick:function(){return H(e.data)},children:"Reactivate"})})}}],U=function(){_(!1)};return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-3 shadow-md",children:[(0,m.jsx)("div",{className:"text-lg font-bold mb-2",children:v}),(0,m.jsx)(s.Form,{form:K,fields:[{label:"Group Name",name:"Description",className:"col-span-6 xl:col-span-4 2xl:col-span-3 mb-2"}],className:"grid grid-cols-12 gap-x-8",onFinish:function(e){D(!0),(0,f.Z)(e,n).then((function(e){y(e),D(!1)}))},noLayoutConfig:!0,children:(0,m.jsx)("div",{className:"flex items-baseline col-span-1",children:(0,m.jsx)(s.Button,{htmlType:"submit",className:"flex items-center",icon:(0,m.jsx)(u.Z,{}),children:"Search"})})})]}),(0,m.jsx)(s.Table,{data:g,columns:Q,allowColumnReordering:!1,loading:A,keyExpr:"Id",pager:!1,tableClass:"border-t max-h-[calc(100vh-250px)]",title:(0,m.jsx)("div",{className:"flex justify-between py-2 px-1",children:(0,m.jsxs)("div",{className:"flex items-center gap-1",children:[(0,m.jsx)("span",{className:"font-bold",children:g.length}),(0,m.jsx)("span",{className:" text-gray-400",children:"results"})]})})}),(0,m.jsx)(s.Modal,{open:V,onCancel:function(){return _(!1)},title:w?"Edit ".concat(v):"Add ".concat(v),children:(0,m.jsx)(s.Form,{form:z,fields:[{label:"Description",name:"Description",rules:[{required:!0,message:"Description is required"}],className:"col-span-12 mb-2"}],editData:w,onFinish:function(e){O(!0),w?(0,r.Z)({method:"put",url:"tas/requestgroup",data:(0,i.Z)((0,i.Z)({},e),{},{Id:w.Id})}).then((function(e){Y(),U()})).catch((function(e){})).then((function(){return O(!1)})):(0,r.Z)({method:"post",url:"tas/requestgroup",data:(0,i.Z)({},e)}).then((function(e){Y(),U()})).catch((function(e){})).then((function(){return O(!1)}))},children:(0,m.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2",children:[(0,m.jsx)(s.Button,{type:"primary",onClick:function(){return z.submit()},loading:B,icon:(0,m.jsx)(d.Z,{}),children:"Save"}),(0,m.jsx)(s.Button,{onClick:U,disabled:B,children:"Cancel"})]})})}),(0,m.jsxs)(l.GI,{visible:F,showTitle:!1,height:110,width:350,children:[(0,m.jsx)("div",{children:"Are you sure you want to delete this record?"}),(0,m.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,m.jsx)(s.Button,{type:"danger",onClick:function(){O(!0),(0,r.Z)({method:"delete",url:"tas/requestgroup",data:{id:w.Id}}).then((function(){Y(),R(!1)})).catch((function(e){})).then((function(){return O(!1)}))},loading:B,children:"Yes"}),(0,m.jsx)(s.Button,{onClick:function(){return R(!1)},disabled:B,children:"No"})]})]})]})}},81514:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(93433),a=n(4942),s=n(1413);var l=function e(t,n,i){var l=[],o=Object.keys(n);return t.map((function(t){if(t[i].length>0)l.push((0,s.Z)((0,s.Z)({},t),{},(0,a.Z)({},i,e(t[i],n,i))));else{var c=!1;o.map((function(e){var i,a;""!==n[e]&&"undefined"!==typeof n[e]&&null!==n[e]?c="string"===typeof n[e]?c||(null===(i=t[e])||void 0===i?void 0:i.toLowerCase().includes(null===(a=n[e])||void 0===a?void 0:a.toLowerCase())):c||t[e]===n[e]:c=!0})),c&&l.push(t)}})),l};function o(e,t,n,a){return"tree"===n?l(t,e,a):new Promise((function(n,a){var s=Object.keys(e),l=(0,i.Z)(t);s.map((function(t){""!==e[t]&&"undefined"!==typeof e[t]&&null!==e[t]&&(l="string"===typeof e[t]?l.filter((function(n){var i,a;return null===(i=n[t])||void 0===i?void 0:i.toLowerCase().includes(null===(a=e[t])||void 0===a?void 0:a.toLowerCase())})):l.filter((function(n){return n[t]===e[t]})))})),n(l)}))}}}]);