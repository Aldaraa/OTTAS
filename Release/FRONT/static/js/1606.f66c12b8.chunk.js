(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[1606,2386,7655,6318,461,3230,7310,5645,1512,5871],{1606:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var n=a(76047),l=a(2880),s=a(42614),o=a(10658),r=a.n(o),i=a(2386),u=(a(87655),a(66318),a(461),a(63230),a(47310),a(55871),a(62235),a(11512),a(47313)),c=a(29439),d=a(56573),m=a(46417),p=[{label:"Owner",name:"RoomOwner",alignment:"center",width:"55px",cellRender:function(e){return(0,m.jsx)("span",{className:"text-[12px] px-1",children:e.value?(0,m.jsx)("i",{className:"dx-icon-home text-green-500"}):(0,m.jsx)("i",{className:"dx-icon-home text-gray-400 text-[14px]"})})}},{label:"Room Number",name:"RoomNumber"},{label:"Camp",name:"Camp"},{label:"Room Type",name:"RoomType"},{label:"Date In",name:"DateIn",cellRender:function(e){return(0,m.jsx)("div",{children:r()(e.value).format("YYYY-MM-DD ddd")})}},{label:"Last Night",name:"LastNight",cellRender:function(e){return(0,m.jsx)("div",{children:r()(e.value).format("YYYY-MM-DD ddd")})}},{label:"Days",name:"Days"}];var f=function(e){var t=e.firstDate,a=e.lastDate,n=e.empId,s=(0,u.useState)(!1),o=(0,c.Z)(s,2),r=o[0],i=o[1],f=(0,u.useState)([]),h=(0,c.Z)(f,2),x=h[0],v=h[1];return(0,u.useEffect)((function(){i(!0),(0,d.Z)({method:"get",url:"tas/employeestatus/employeebooking?employeeId=".concat(n,"&startDate=".concat(t,"&endDate=").concat(a))}).then((function(e){v(e.data)})).catch((function(e){})).then((function(){return i(!1)}))}),[t,a]),(0,m.jsx)("div",{className:"py-4 ",children:(0,m.jsx)(l.Table,{data:x,columns:p,allowColumnReordering:!1,loading:r,containerClass:"shadow-none border border-gray-300",keyExpr:"Id",pager:x.length>20})})};var h=function(){var e=(0,u.useContext)(s.V).state,t=[{label:"Schedule",key:1,children:(0,m.jsxs)("div",{className:"flex items-start gap-5 pt-3",children:[(0,m.jsx)(l.VerticalCalendar,{employeeId:e.userInfo.Id,containerClass:"shadow-none"}),(0,m.jsx)(l.FlightList,{profileData:e.userProfileData,employeeId:e.userInfo.Id,className:"shadow-none"})]})},{label:"Active Transport",key:2,children:(0,m.jsx)(i.default,{})},{key:4,label:"Room Occupancy Enquiry",children:(0,m.jsx)(f,{firstDate:r()().subtract(15,"d"),lastDate:r()().add(1,"M"),empId:e.userInfo.Id})}];return(0,m.jsx)(n.Z,{items:t,type:"card"})}},2386:function(e,t,a){"use strict";a.r(t);var n=a(1413),l=a(29439),s=a(40765),o=a(29074),r=a(56573),i=a(2880),u=a(10658),c=a.n(u),d=a(99660),m=a.n(d),p=a(47313),f=a(46417);t.default=function(){var e=(0,p.useState)([]),t=(0,l.Z)(e,2),a=t[0],u=t[1],d=(0,p.useState)(!1),h=(0,l.Z)(d,2),x=h[0],v=h[1],g=(0,p.useState)([]),b=(0,l.Z)(g,2),y=b[0],D=b[1],j=(0,p.useState)([]),N=(0,l.Z)(j,2),C=N[0],Z=N[1],S=i.Form.useForm(),w=(0,l.Z)(S,1)[0];(0,p.useEffect)((function(){I(w.getFieldsValue()),(0,r.Z)({method:"get",url:"tas/location?Active=1"}).then((function(e){var t=[];e.data.map((function(e){t.push((0,n.Z)({value:e.Id,label:"".concat(e.Code," - ").concat(e.Description)},e))})),D(t)})).catch((function(e){})),(0,r.Z)({method:"get",url:"tas/transportmode?Active=1"}).then((function(e){var t=[];e.data.map((function(e){"drive"!==m()(e.Code)&&t.push((0,n.Z)({value:e.Id,label:e.Code},e))})),Z(t)})).catch((function(e){}))}),[]);var I=function(e){v(!0),(0,r.Z)({method:"post",url:"/tas/transportschedule/monthtransportschedule",data:(0,n.Z)((0,n.Z)({},e),{},{ScheduleDate:e.ScheduleDate?c()(e.ScheduleDate).format("YYYY-MM-DD"):null})}).then((function(e){u(e.data)})).catch((function(e){})).then((function(){return v(!1)}))},T=[{label:"Travel Date",name:"EventDate",alignment:"left",cellRender:function(e){return(0,f.jsx)("div",{children:c()(e.value).format("YYYY-MM-DD")})}},{label:"Code",name:"Code",alignment:"left"},{label:"Direction",name:"Direction",alignment:"left",cellRender:function(e){return e.value&&(0,f.jsx)(o.Z,{color:"IN"===e.value?"green":"OUT"===e.value?"blue":"magenta",className:"text-center text-[10px] font-semibold",children:e.value})}},{label:"Description",name:"Description",alignment:"left"},{label:"Seats #",name:"Seats",alignment:"left"},{label:"Available Seats",name:"availableseats",alignment:"left",cellRender:function(e){var t=e.data.Seats-e.data.Confirmed;return(0,f.jsx)("div",{className:"".concat(t<=0?"text-red-500 font-bold":"text-green-600 font-bold"),children:t})}}],E=[{label:"Port Of Departure",name:"fromLocationId",className:"col-span-12 lg:col-span-4 mb-2",type:"select",inputprops:{options:y}},{label:"Port Of Arrive",name:"toLocationId",className:"col-span-12 lg:col-span-4 mb-2",type:"select",inputprops:{options:y}},{label:"Transport Code",name:"transportCode",className:"col-span-12 lg:col-span-4 mb-2"},{label:"Schedule Date",name:"ScheduleDate",className:"col-span-12 lg:col-span-4 mb-2",type:"date",inputprops:{showWeek:!0}},{label:"Mode",name:"TransportModeId",className:"col-span-12 lg:col-span-4 mb-2",type:"select",inputprops:{options:C}}];return(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-5 shadow-md",children:[(0,f.jsx)("div",{className:"text-lg font-bold mb-3",children:"Active Transport"}),(0,f.jsx)(i.Form,{form:w,fields:E,className:"grid grid-cols-12 gap-x-5",onFinish:I,size:"small",children:(0,f.jsx)("div",{className:"flex gap-4 justify-end col-span-12",children:(0,f.jsx)(i.Button,{htmlType:"submit",loading:x,icon:(0,f.jsx)(s.Z,{}),children:"Search"})})})]}),(0,f.jsx)(i.Table,{data:a,columns:T,allowColumnReordering:!1,loading:x,containerClass:"shadow-none border border-gray-300 mt-5",keyExpr:"Id",pager:a.length>20,tableClass:"max-h-[calc(100vh-300px)]"})]})}},87655:function(e,t,a){"use strict";a.r(t);var n=a(1413),l=a(29439),s=a(47313),o=a(2880),r=a(40765),i=a(56573),u=a(65040),c=a(29074),d=a(58467),m=a(2135),p=a(42614),f=a(10658),h=a.n(f),x=a(14261),v=a(42956),g=a(46417);t.default=function(){var e,t,a,f=(0,d.TH)(),b=(0,s.useState)([]),y=(0,l.Z)(b,2),D=y[0],j=y[1],N=(0,s.useState)([]),C=(0,l.Z)(N,2),Z=C[0],S=C[1],w=(0,s.useState)(null),I=(0,l.Z)(w,2),T=I[0],E=I[1],k=(0,s.useState)(!1),M=(0,l.Z)(k,2),A=M[0],R=M[1],q=(0,s.useState)(!1),Y=(0,l.Z)(q,2),F=Y[0],L=Y[1],O=(0,s.useState)(new v.Z({key:"Id",load:function(e){var t,a="";return(null===(t=e.sort)||void 0===t?void 0:t.length)>1&&(a="?sortby=".concat(e.sort[0].selector,"&sortdirection=").concat(e.sort[0].desc?"desc":"asc")),(0,i.Z)({method:"post",url:"tas/requestdocument/documentlist/cancelled".concat(a),data:{model:e.filter?(0,n.Z)({},e.filter):{startDate:"",endDate:"",Firstname:"",documentType:"",employerId:null,assignedEmployeeId:null,requestedEmployeeId:null,lastModifiedDate:""},pageIndex:e.skip/e.take,pageSize:e.take}}).then((function(e){return{data:e.data.data,totalCount:e.data.totalcount}})).catch((function(e){throw e}))}})),V=(0,l.Z)(O,1)[0],B=(0,s.useContext)(p.V),z=B.state,P=B.action,U=(0,d.s0)(),H=u.Z.useForm(),K=(0,l.Z)(H,1)[0],W=(0,s.useRef)(null);(0,s.useEffect)((function(){f.state&&K.setFieldValue(f.state.name,f.state.value),G(),_(),P.changeMenuKey("/request/cancelrequest")}),[]);var G=function(){(0,i.Z)({method:"get",url:"tas/requestgroupemployee"}).then((function(e){var t=[];e.data.map((function(e){t.push({value:e.EmployeeId,label:e.FullName})})),j(t)})).catch((function(e){}))},_=function(){(0,i.Z)({method:"get",url:"tas/requestgroup"}).then((function(e){var t=[];e.data.map((function(e){t.push({value:e.Id,label:e.Description})})),S(t)})).catch((function(e){}))},J=[{label:"Start Date",name:"StartDate",className:"col-span-6 xl:col-span-4 mb-2",type:"date",inputprops:{className:"w-full"}},{label:"End Date",name:"EndDate",className:"col-span-6 xl:col-span-4 mb-2",type:"date",inputprops:{className:"w-full"}},{label:"Request #",name:"Id",className:"col-span-6 xl:col-span-4 mb-2",type:"number",inputprops:{className:"w-full"}},{label:"Document",name:"DocumentType",className:"col-span-6 xl:col-span-4 mb-2",type:"select",inputprops:{className:"w-full",options:null===(e=z.referData)||void 0===e||null===(t=e.master)||void 0===t?void 0:t.documentTypes}},{label:"Approvel Type",name:"ApprovelType",className:"col-span-6 xl:col-span-4 mb-2",type:"select",inputprops:{className:"w-full",options:Z}},{label:"Last Modified",name:"LastModifiedDate",className:"col-span-6 xl:col-span-4 mb-2",type:"date",inputprops:{className:"w-full"}},{label:"Assigned To",name:"AssignedEmployeeId",className:"col-span-6 xl:col-span-4 mb-2",type:"select",inputprops:{className:"w-full",options:D}},{label:"Employer",name:"EmployerId",className:"col-span-6 xl:col-span-4 mb-2",type:"select",inputprops:{className:"w-full",options:null===(a=z.referData)||void 0===a?void 0:a.employers}},{label:"Requested By",name:"RequestedEmployeeId",className:"col-span-6 xl:col-span-4 mb-2",type:"select",inputprops:{className:"max-w-[300px]",options:D}}],$=(0,s.useCallback)((function(e){E(e),R(!0)}),[]),Q=(0,s.useCallback)((function(){L(!0),(0,i.Z)({method:"delete",url:"tas/requestdocument/remove",data:{documentId:T.Id}}).then((function(){R(!1)})).catch((function(e){})).then((function(){return L(!1)}))}),[T,W]),X=(0,s.useMemo)((function(){return[{label:"DaysAway",name:"DaysAway",dataType:"string",width:"75px",alignment:"center"},{label:"Request #",name:"Id",dataType:"string",width:"75px",alignment:"center"},{label:"CurrentStatus",name:"CurrentStatus",alignment:"left",width:"100px",cellRender:function(e){return(0,g.jsx)(g.Fragment,{children:"Approved"===e.value?(0,g.jsx)(c.Z,{color:"blue",children:e.value}):"Cancelled"===e.value?(0,g.jsx)(c.Z,{color:"error",children:e.value}):"Completed"===e.value?(0,g.jsx)(c.Z,{color:"success",children:e.value}):"Declined"===e.value?(0,g.jsx)(c.Z,{children:e.value}):"Saved"===e.value?(0,g.jsx)(c.Z,{color:"warning",children:e.value}):(0,g.jsx)(c.Z,{color:"orange",children:e.value})})}},{label:"Assigned Group",name:"AssignedGroupName",alignment:"left"},{label:"Document",name:"DocumentType",alignment:"left",width:"120px"},{label:"Employer",name:"EmployerName",alignment:"left"},{label:"Requester",name:"RequesterFullName",alignment:"left"},{label:"Assigned To",name:"AssignedEmployeeFullName",alignment:"left"},{label:"Date Requested",name:"RequestedDate",alignment:"left",cellRender:function(e){return(0,g.jsx)("div",{children:h()(e.value).format("YYYY-MM-DD ddd HH:mm")})}},{label:"Subject",name:"EmployeeFullName",alignment:"left"},{label:"Updated",name:"UpdateInfo",alignment:"left"},{label:"",name:"",width:"150px",alignment:"center",showInColumnChooser:!1,cellRender:function(e){return(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)(m.Link,{to:te(e),children:(0,g.jsx)("button",{type:"button",className:"edit-button",children:"View"})}),(0,g.jsx)("button",{type:"button",className:"dlt-button",onClick:function(){return $(e.data)},children:"Delete"})]})}}]}),[]),ee=(0,s.useCallback)((function(e){var t;null===(t=W.current)||void 0===t||t.instance.filter(e)}),[W]),te=(0,s.useCallback)((function(e){if("Non Site Travel"===e.data.DocumentType)return"/request/task/nonsitetravel/".concat(e.data.Id);if("Profile Changes"===e.data.DocumentType)return"/request/task/profilechanges/".concat(e.data.Id);if("De Mobilisation"===e.data.DocumentType)return"/request/task/de-mobilisation/".concat(e.data.Id);if("Site Travel"===e.data.DocumentType){if("ADD"===e.data.DocumentTag)return"/request/task/sitetravel/addtravel/".concat(e.data.Id);if("RESCHEDULE"===e.data.DocumentTag)return"/request/task/sitetravel/reschedule/".concat(e.data.Id);if("REMOVE"===e.data.DocumentTag)return"/request/task/sitetravel/remove/".concat(e.data.Id)}}),[]),ae=(0,s.useCallback)((function(e){"Non Site Travel"===e.data.DocumentType?U("/request/task/nonsitetravel/".concat(e.data.Id)):"Profile Changes"===e.data.DocumentType?U("/request/task/profilechanges/".concat(e.data.Id)):"De Mobilisation"===e.data.DocumentType?U("/request/task/de-mobilisation/".concat(e.data.Id)):"Site Travel"===e.data.DocumentType&&("ADD"===e.data.DocumentTag?U("/request/task/sitetravel/addtravel/".concat(e.data.Id)):"RESCHEDULE"===e.data.DocumentTag?U("/request/task/sitetravel/reschedule/".concat(e.data.Id)):"REMOVE"===e.data.DocumentTag&&U("/request/task/sitetravel/remove/".concat(e.data.Id)))}),[]);return(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"rounded-t-ot bg-white px-3 py-2 shadow-md border-b",children:[(0,g.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,g.jsx)("div",{className:"text-lg font-bold",children:"Search Task"})}),(0,g.jsx)(o.Form,(0,n.Z)((0,n.Z)({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}}),{},{form:K,fields:J,className:"grid grid-cols-12 gap-x-8",onFinish:ee,size:"small",wrapperCol:{flex:1},labelCol:{flex:"100px"},children:(0,g.jsx)("div",{className:"col-span-12 flex gap-4 justify-end",children:(0,g.jsx)(o.Button,{htmlType:"submit",icon:(0,g.jsx)(r.Z,{}),children:"Search"})})}))]}),(0,g.jsx)(o.Table,{ref:W,data:V,columns:X,isHeaderFilter:!1,isSearch:!1,allowColumnReordering:!1,remoteOperations:!0,onRowDblClick:ae,containerClass:"rounded-t-none",tableClass:"max-h-[calc(100vh-280px)]"}),(0,g.jsxs)(x.GI,{visible:A,showTitle:!1,height:110,width:350,children:[(0,g.jsx)("div",{children:"Are you sure you want to delete this record?"}),(0,g.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,g.jsx)(o.Button,{type:"danger",onClick:Q,loading:F,children:"Yes"}),(0,g.jsx)(o.Button,{onClick:function(){return R(!1)},disabled:F,children:"No"})]})]})]})}},66318:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var n=a(29439),l=a(47313),s=a(42614),o=a(56573),r=a(1413),i=a(93433),u=a(2880),c=a(46417),d={chart:{type:"column"},title:{text:"Total Request"},colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"],yAxis:{min:0,title:{text:"Count"}},xAxis:{type:"category"},tooltip:{pointFormat:"<b>{point.y}</b> {series.name}<br/>"},plotOptions:{column:{pointPadding:.2,borderWidth:0,centerInCategory:!0},series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y}"}}}},m=["#fe6a35","#2caffe","#fa4b42","#00e272","gray"],p=function(e,t){var a=(0,i.Z)(e);return a.find((function(e){return e.name===t.CurrentStatus}))?a.map((function(e){return e.name===t.CurrentStatus&&t.count>0?e.data.push({name:t.documentType,y:t.count}):e})):t.count>0&&a.push({name:t.CurrentStatus,data:[{name:t.documentType,y:t.count}],color:m[e.length]}),a};var f=function(e){var t=e.data,a=void 0===t?[]:t,n=(0,l.useMemo)((function(){var e=[];return a.length>0&&(e=a.reduce(p,[])),e}),[a]);return(0,c.jsx)("div",{children:(0,c.jsx)(u.MHighchart,{options:(0,r.Z)((0,r.Z)({},d),{},{series:n})})})},h={chart:{type:"column"},title:{text:"Total Request"},subtitle:{text:"By Month",align:"center"},yAxis:{min:0,title:{text:"Count"}},xAxis:{type:"category"},tooltip:{pointFormat:"<b>{point.y}</b> {series.name}<br/>"},plotOptions:{column:{centerInCategory:!0},series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y}"}}}},x=function(e,t){var a=(0,i.Z)(e);return a.find((function(e){return e.name===t.documentType}))?a.map((function(e){return e.name===t.documentType&&t.value>0?e.data.push({name:t.day,y:t.value}):e})):t.value>0&&a.push({name:t.documentType,data:[{name:t.day,y:t.value}]}),a};var v=function(e){var t=e.data,a=void 0===t?[]:t,n=(0,l.useMemo)((function(){var e=[];return a.length>0&&(e=a.reduce(x,[])),e}),[a]);return(0,c.jsx)("div",{children:(0,c.jsx)(u.MHighchart,{options:(0,r.Z)((0,r.Z)({},h),{},{series:n})})})},g=a(93031),b=a(11372),y=a(40765),D=a(10658),j=a.n(D),N={chart:{type:"column"},title:{text:"Document Type Distribution over Days Away Count"},xAxis:{type:"category",title:{text:"Days Away"}},yAxis:{min:0,title:{text:"Count of Request"}},legend:{align:"right",verticalAlign:"bottom"},tooltip:{headerFormat:"<b>{point.name}</b><br/>",pointFormat:"{series.name}: {point.y}<br/>Total: {point.stackTotal}"},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0}}}},C=function(e,t){var a=(0,i.Z)(e);return a.find((function(e){return e.name===t.DocumentType}))?a.map((function(e){return e.name===t.DocumentType&&t.Count>0?e.data.push({name:t.DaysAway,y:t.Count}):e})):t.Count>0&&a.push({name:t.DocumentType,data:[{name:t.DaysAway,y:t.Count}]}),a};var Z=function(e){var t=e.data,a=void 0===t?[]:t,n=(0,l.useMemo)((function(){var e=[],t=a.sort((function(e,t){return e.DaysAway-t.DaysAway}));return(null===a||void 0===a?void 0:a.length)>0&&(e=t.reduce(C,[])),{data:e,categories:t.map((function(e){return e.DaysAway}))}}),[a]);return(0,c.jsx)("div",{children:(0,c.jsx)(u.MHighchart,{options:(0,r.Z)((0,r.Z)({},N),{},{series:null===n||void 0===n?void 0:n.data})})})},S={accessibility:{screenReaderSection:{beforeChartFormat:"<h5>{chartTitle}</h5><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{viewTableButton}</div>"}},title:{text:"Declined Site Travel Requests",align:"left"}};var w=function(e){var t=e.data;return(0,c.jsx)("div",{children:(0,c.jsx)(u.MHighchart,{options:(0,r.Z)((0,r.Z)({},S),{},{series:[{type:"wordcloud",name:"Request",data:null===t||void 0===t?void 0:t.map((function(e){return{name:e.Comment,weight:e.Count}}))}]})})})};var I=function(){var e=(0,l.useContext)(s.V).action,t=(0,l.useState)(null),a=(0,n.Z)(t,2),r=a[0],i=a[1],d=(0,l.useState)(j()().subtract(1,"M")),m=(0,n.Z)(d,2),p=m[0],h=m[1],x=(0,l.useState)(j()()),D=(0,n.Z)(x,2),N=D[0],C=D[1];(0,l.useEffect)((function(){e.changeMenuKey("/request/dashboard"),S()}),[]);var S=function(){(0,o.Z)({method:"get",url:"tas/dashboardrequest/documentdata?startDate=".concat(p.format("YYYY-MM-DD"),"&endDate=").concat(N.format("YYYY-MM-DD"))}).then((function(e){i(e.data)}))};return(0,c.jsxs)("div",{className:"grid grid-cols-12 gap-5",children:[(0,c.jsx)("div",{className:"col-span-12 flex",children:(0,c.jsxs)("div",{className:"flex items-center gap-5 py-2 px-4 bg-white rounded-ot",children:[(0,c.jsxs)("div",{className:"text-secondary2",children:[(0,c.jsx)("span",{className:"mr-1",children:p.format("MMM DD")}),"\u2014",(0,c.jsx)("span",{className:"ml-1",children:N.format("MMM DD")})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)(g.Z.WeekPicker,{placeholder:"Start Week",value:p,onChange:function(e){return h(e)},allowClear:!1}),(0,c.jsx)(b.Z,{}),(0,c.jsx)(g.Z.WeekPicker,{placeholder:"End Week",value:N,onChange:function(e){return C(e)},allowClear:!1}),(0,c.jsx)(u.Button,{type:"primary",className:"py-[7px]",icon:(0,c.jsx)(y.Z,{}),onClick:S})]})]})}),(0,c.jsx)("div",{className:"bg-white rounded-ot col-span-6 overflow-hidden shadow-lg",children:(0,c.jsx)(f,{data:null===r||void 0===r?void 0:r.totalRequests})}),(0,c.jsx)("div",{className:"bg-white rounded-ot col-span-6 overflow-hidden shadow-lg",children:(0,c.jsx)(v,{data:null===r||void 0===r?void 0:r.monthData})}),(0,c.jsx)("div",{className:"bg-white rounded-ot col-span-6 overflow-hidden shadow-lg",children:(0,c.jsx)(w,{data:null===r||void 0===r?void 0:r.SiteTravelDeclined})}),(0,c.jsx)("div",{className:"bg-white rounded-ot col-span-6 overflow-hidden shadow-lg",children:(0,c.jsx)(Z,{data:null===r||void 0===r?void 0:r.PendingDocumentDaysAway})})]})}},461:function(e,t,a){"use strict";a.r(t);var n=a(2880),l=a(42614),s=a(47313),o=a(58467),r=a(46417);t.default=function(){var e=(0,o.s0)(),t=(0,s.useContext)(l.V).action;return(0,s.useEffect)((function(){t.changeMenuKey("/request/existingbookings")}),[]),(0,r.jsx)("div",{className:"rounded-ot shadow-card bg-white",children:(0,r.jsx)(n.PeopleSearch,{selectType:"link",toLink:function(e){return"".concat(e.Id)},fixedValue:{Active:1},hideFields:["Active"],onRowDblClick:function(t){return e("/request/existingbookings/".concat(t.data.Id))},tableClass:"max-h-[calc(100vh-270px)]"})})}},63230:function(e,t,a){"use strict";a.r(t);var n=a(29439),l=a(36459),s=a(47313),o=a(2880),r=a(56573),i=a(83313),u=a(21975),c=a(74294),d=a(58467),m=a(2135),p=a(42614),f=a(14261),h=a(40765),x=a(81514),v=a(46417);t.default=function(e){Object.assign({},((0,l.Z)(e),e));var t=(0,s.useState)(!1),a=(0,n.Z)(t,2),g=a[0],b=a[1],y=(0,s.useState)(null),D=(0,n.Z)(y,2),j=D[0],N=D[1],C=(0,s.useState)(null),Z=(0,n.Z)(C,2),S=Z[0],w=Z[1],I=(0,s.useState)([]),T=(0,n.Z)(I,2),E=T[0],k=T[1],M=(0,s.useState)(!1),A=(0,n.Z)(M,2),R=A[0],q=A[1],Y=(0,s.useState)(!1),F=(0,n.Z)(Y,2),L=F[0],O=F[1],V=(0,s.useState)([]),B=(0,n.Z)(V,2),z=B[0],P=B[1],U=(0,s.useState)(!1),H=(0,n.Z)(U,2),K=H[0],W=H[1],G=(0,s.useState)(!1),_=(0,n.Z)(G,2),J=_[0],$=_[1],Q=(0,s.useState)(null),X=(0,n.Z)(Q,2),ee=X[0],te=X[1],ae=(0,s.useState)([]),ne=(0,n.Z)(ae,2),le=ne[0],se=ne[1],oe=(0,d.s0)(),re=(0,s.useContext)(p.V).action,ie=o.Form.useForm(),ue=(0,n.Z)(ie,1)[0];(0,s.useEffect)((function(){re.changeMenuKey("/request/hierarchicaluser"),de(),ce()}),[]);var ce=function(){q(!0),(0,r.Z)({method:"get",url:"/tas/requestlinemanageremployee"}).then((function(e){P(e.data),se(e.data)})).catch((function(e){})).then((function(){return q(!1)}))},de=function(){(0,r.Z)({method:"get",url:"/tas/requestgroupemployee/linemanageremployees"}).then((function(e){var t,a=[];null===(t=e.data.Employees)||void 0===t||t.map((function(e){a.push({value:e.EmployeeId,label:e.FullName})})),k(a)}))},me=[{label:"#",name:"EmployeeId",dataType:"string",width:"80px",cellRender:function(e){return(0,v.jsx)("div",{className:"flex items-center text-blue-500 hover:underline",children:(0,v.jsx)(m.Link,{to:"/tas/people/search/".concat(e.value),target:"_blank",children:e.value})})}},{label:"Employee Name",name:"EmployeeFullName",dataType:"string"},{label:"#",name:"LineManagerEmployeeId",dataType:"string",width:"100px",cellRender:function(e){return(0,v.jsx)("div",{className:"flex items-center text-blue-500 hover:underline",children:(0,v.jsx)(m.Link,{to:"/tas/people/search/".concat(e.value),target:"_blank",children:e.value})})}},{label:"Line Manager Name",name:"LineManagerFullName",dataType:"string"},{label:"",name:"action",dataType:"string",width:100,cellRender:function(e){return(0,v.jsx)("button",{type:"button",className:"dlt-button",onClick:function(){return t=e.data,te(t),void $(!0);var t},children:"Delete"})}}];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-5",children:[(0,v.jsx)("div",{className:"text-lg font-bold mb-2",children:"Hierarchical User"}),(0,v.jsx)(o.Form,{form:ue,fields:[{label:"Employee Name",name:"EmployeeFullName",className:"col-span-6 mb-0 ",inputprops:{className:"w-[200px]"}},{label:"Line Manager Name",name:"LineManagerFullName",className:"col-span-6 mb-0",inputprops:{className:"w-[200px]"}}],className:"flex gap-x-5",onFinish:function(e){q(!0),(0,x.Z)(e,z).then((function(e){se(e),q(!1)}))},wrapperCol:{flex:1},noLayoutConfig:!0,children:(0,v.jsx)("div",{children:(0,v.jsx)(o.Button,{htmlType:"submit",className:"flex items-center",icon:(0,v.jsx)(h.Z,{}),children:"Search"})})})]}),(0,v.jsx)(o.Table,{columns:me,data:le,keyExpr:"Id",pager:le.length>20,loading:R,containerClass:"shadow-none px-0 border rounded-ot overflow-hidden",title:(0,v.jsx)("div",{className:"flex justify-end items-center border-b py-1 px-2",children:(0,v.jsx)(o.Button,{onClick:function(){return O(!0)},children:"Add"})})}),(0,v.jsx)(i.Z,{open:L,width:1e3,onClose:function(){return O(!1)},children:(0,v.jsx)(o.PeopleSearch,{onSelect:function(e){N(e),b(!0)},onRowDblClick:function(e){return oe("/tas/people/search/".concat(e.data.Id))},defaultColumns:["Id","Active","Lastname","Firstname","DepartmentName","EmployerName","RosterName"]})}),(0,v.jsxs)(o.Modal,{open:g,title:"Line Manager on ".concat(null===j||void 0===j?void 0:j.Firstname," ").concat(null===j||void 0===j?void 0:j.Lastname),children:[(0,v.jsx)("label",{children:"Selected Person:"}),(0,v.jsx)(u.Z,{value:"".concat(null===j||void 0===j?void 0:j.Firstname," ").concat(null===j||void 0===j?void 0:j.Lastname),disabled:!0,className:"mb-4"}),(0,v.jsx)("label",{children:"Line Manager:"}),(0,v.jsx)(c.Z,{options:E,onChange:function(e){return w(e)},placeholder:"Select Line Manager",className:"w-full",allowClear:!0,showSearch:!0,filterOption:function(e,t){var a;return(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())}}),(0,v.jsxs)("div",{className:"flex justify-end gap-4 mt-4",children:[(0,v.jsx)(o.Button,{type:"primary",disabled:!S,onClick:function(){W(!0),(0,r.Z)({method:"post",url:"/tas/requestlinemanageremployee",data:{employeeId:j.Id,lineManagerEmployeeId:S}}).then((function(e){ce(),N(null),w(null),b(!1),O(!1)})).catch((function(e){})).then((function(){return W(!1)}))},loading:K,children:"Save"}),(0,v.jsx)(o.Button,{onClick:function(){N(null),b(!1)},disabled:K,children:"Cancel"})]})]}),(0,v.jsxs)(f.GI,{visible:J,showTitle:!1,height:110,width:350,children:[(0,v.jsx)("div",{children:"Are you sure you want to delete this record?"}),(0,v.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,v.jsx)(o.Button,{type:"danger",onClick:function(){W(!0),(0,r.Z)({method:"delete",url:"tas/requestlinemanageremployee/".concat(ee.Id)}).then((function(){ce(),$(!1)})).catch((function(e){})).then((function(){return W(!1)}))},children:"Yes"}),(0,v.jsx)(o.Button,{onClick:function(){return $(!1)},children:"No"})]})]})]})}},47310:function(e,t,a){"use strict";a.r(t);var n=a(29439),l=a(2880),s=a(47313),o=a(65040),r=a(56573),i=a(40765),u=a(81514),c=a(42614),d=a(2135),m=a(46417);t.default=function(){var e=(0,s.useState)([]),t=(0,n.Z)(e,2),a=t[0],p=t[1],f=(0,s.useState)([]),h=(0,n.Z)(f,2),x=h[0],v=h[1],g=(0,s.useState)(!1),b=(0,n.Z)(g,2),y=b[0],D=b[1],j=o.Z.useForm(),N=(0,n.Z)(j,1)[0],C=(0,s.useContext)(c.V).action,Z=(0,s.useRef)(null);(0,s.useEffect)((function(){C.changeMenuKey("/request/impersonateuser"),S()}),[]);var S=function(){D(!0),(0,r.Z)({method:"get",url:"tas/requestgroupemployee"}).then((function(e){p(e.data),v(e.data)})).catch((function(e){})).then((function(){return D(!1)}))},w=[{label:"#",name:"EmployeeId",dataType:"string",width:80},{label:"Fullname",name:"FullName"},{label:"Email",name:"Email"},{label:"Task",name:"TaskCount"},{label:"",name:"action",width:"170px",cellRender:function(e){return(0,m.jsx)("div",{className:"flex gap-4",children:(0,m.jsx)(d.Link,{to:"/request/impersonateuser/".concat(e.data.EmployeeId),children:(0,m.jsx)("button",{type:"button",className:"edit-button",children:"Impersonate & Tasks"})})})}}];return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-5 shadow-md",children:[(0,m.jsx)("div",{className:"text-lg font-bold mb-2",children:"Impersonate User"}),(0,m.jsx)(l.Form,{form:N,fields:[{label:"Full Name",name:"FullName",className:"col-span-12 mb-2",inputprops:{className:"w-[250px]"}}],className:"flex gap-x-5 w-[600px]",onFinish:function(e){D(!0),(0,u.Z)(e,a).then((function(e){v(e),D(!1)}))},noLayoutConfig:!0,wrapperCol:{flex:1},children:(0,m.jsx)("div",{children:(0,m.jsx)(l.Button,{htmlType:"submit",className:"flex items-center",icon:(0,m.jsx)(i.Z,{}),children:"Search"})})})]}),(0,m.jsx)(l.Table,{ref:Z,data:x,columns:w,allowColumnReordering:!1,loading:y,keyExpr:"Id",tableClass:"max-h-[calc(100vh-210px)]"})]})}},62235:function(e,t,a){"use strict";a.r(t);var n=a(2880),l=a(42614),s=a(47313),o=a(58467),r=a(46417);t.default=function(){var e=(0,o.s0)(),t=(0,s.useContext)(l.V).action;return(0,s.useEffect)((function(){t.changeMenuKey("/request/shiftvisual")}),[]),(0,r.jsx)(n.PeopleSearch,{selectType:"link",toLink:function(e){return"".concat(e.Id)},onRowDblClick:function(t){return e("".concat(t.data.Id))},tableClass:"max-h-[calc(100vh-290px)]"})}},11512:function(e,t,a){"use strict";a.r(t);var n=a(1413),l=a(29439),s=a(56573),o=a(2880),r=a(47313),i=a(65040),u=a(74294),c=a(93031),d=a(58467),m=a(10658),p=a.n(m),f=a(42614),h=a(165),x=a(46417),v=function(e){var t=e.date,a=e.isEdit,n=e.data,l=e.shiftStatus,s=null===n||void 0===n?void 0:n.find((function(e){return p()(e.EventDate).format("YYYY-MM-DD")===p()(t).format("YYYY-MM-DD")})),o=l.all.find((function(e){return e.Id===(null===s||void 0===s?void 0:s.ShiftId)}));return(0,x.jsxs)("div",{className:"h-[50px] w-full flex justify-between gap-2",children:[(0,x.jsx)("div",{className:"flex flex-col items-start",children:(0,x.jsx)("div",{className:"font-medium",children:p()(t).format("DD")})}),s&&(0,x.jsx)(i.Z.Item,{className:"m-0 p-0 flex-1 self-center",name:[s.index,"ShiftId"],children:(0,x.jsx)(u.Z,{disabled:!a,bordered:!1,style:{background:null===o||void 0===o?void 0:o.ColorCode},className:"w-full rounded-md",popupMatchSelectWidth:!1,optionlabelProp:"label",size:"small",children:o?1===o.OnSite?l.onsite.map((function(e,t){return(0,x.jsx)(u.Z.Option,{value:e.value,label:e.label,children:e.label},t)})):l.offsite.map((function(e,t){return(0,x.jsx)(u.Z.Option,{value:e.value,label:e.label,children:e.label},t)})):l.all.map((function(e,t){return(0,x.jsx)(u.Z.Option,{value:e.value,label:e.label,children:e.label},t)}))})})]})};t.default=function(){var e,t=(0,d.f_)(),a=(0,r.useState)([]),u=(0,l.Z)(a,2),m=u[0],g=u[1],b=(0,r.useState)(p()()),y=(0,l.Z)(b,2),D=y[0],j=y[1],N=(0,r.useState)({all:[],bulk:[],offsite:[],onsite:[]}),C=(0,l.Z)(N,2),Z=C[0],S=C[1],w=(0,r.useState)(!1),I=(0,l.Z)(w,2),T=I[0],E=I[1],k=(0,r.useState)(!1),M=(0,l.Z)(k,2),A=M[0],R=M[1],q=(0,r.useState)(!1),Y=(0,l.Z)(q,2),F=Y[0],L=Y[1],O=i.Z.useForm(),V=(0,l.Z)(O,1)[0],B=i.Z.useForm(),z=(0,l.Z)(B,1)[0],P=(0,d.UO)().empId,U=(0,r.useContext)(f.V),H=U.state,K=U.action;(0,r.useEffect)((function(){G()}),[]),(0,r.useEffect)((function(){W()}),[D]);var W=function(){(0,s.Z)({method:"get",url:"tas/employeestatus/visualstatusdates/".concat(P,"/").concat(p()(D).startOf("month").format("YYYY-MM-DD"))}).then((function(e){var t=[];e.data.map((function(e,a){t.push((0,n.Z)({index:a},e))})),V.setFieldsValue({shift:t}),g(t)})).catch((function(e){}))},G=function(){(0,s.Z)({method:"get",url:"tas/shift?Active=1"}).then((function(e){var t=[],a=[],l=[],s=[];e.data.map((function(e){t.push((0,n.Z)({value:e.Id,label:"".concat(e.Code)},e)),s.push((0,n.Z)({value:e.Id,label:"".concat(e.Code,"-").concat(e.Description)},e)),1===e.OnSite?a.push((0,n.Z)({value:e.Id,label:e.Code},e)):l.push((0,n.Z)({value:e.Id,label:e.Code},e))})),S({all:t,bulk:s,offsite:l,onsite:a})})).catch((function(e){}))},_=[{type:"component",component:(0,x.jsx)(i.Z.Item,{name:"rangeDate",label:"Date",className:"col-span-12 mb-4",rules:[{required:!0,message:"Date is required"}],children:(0,x.jsx)(c.Z.RangePicker,{className:"w-full"})})},{label:"Shift",name:"ShiftId",className:"col-span-12 mb-4",rules:[{required:!0,message:"Shift is required"}],type:"select",inputprops:{options:Z.bulk}}],J=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=0,l=[];n<e.length;)l.push((0,x.jsxs)("div",{className:"flex flex-col gap-1",children:[0===n?(0,x.jsx)("div",{className:"text-gray-500 font-bold mb-2",children:t}):(0,x.jsx)("div",{className:"mb-2",children:"\xa0"}),e.slice(n,n+a).map((function(e,t){return(0,x.jsxs)("div",{className:"flex items-start gap-2",children:[(0,x.jsx)("div",{className:"w-[50px] text-center py-[2px] rounded-md",style:{backgroundColor:e.ColorCode},children:(0,x.jsx)("div",{className:"text-xs",style:{color:(0,h.Z)(e.ColorCode)>60?"black":"white"},children:e.Code})}),(0,x.jsxs)("div",{className:"leading-none",children:[e.Description," "]})]},t)}))]},n)),n+=a;return l};return(0,x.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,x.jsx)("div",{className:"bg-white px-5 py-3 rounded-ot shadow-card",children:(0,x.jsx)(o.ProfileCalendar,{profile:t})}),(0,x.jsxs)("div",{className:"bg-white rounded-ot p-4 col-span-12 shadow-md",children:[(0,x.jsx)("div",{className:"text-lg font-bold mb-3",children:"Shift Visual"}),(0,x.jsxs)("div",{className:"grid grid-cols-12 gap-5",children:[(0,x.jsx)("div",{className:"col-span-12 2xl:col-span-6",children:(0,x.jsxs)(i.Z,{form:V,component:!1,onFinish:function(e){var t=[];e.shift.map((function(e){e.ShiftId&&t.push(e)})),(0,s.Z)({method:"post",url:"tas/employeestatus/visualstatusdatechange",data:{employeeId:P,statusDates:[].concat(t)}}).then((function(e){W(),K.changedFlight(H.ChangedFlight+1),E(!1)})).catch((function(e){}))},children:[(0,x.jsx)(i.Z.List,{name:"shift",children:function(e){var t;return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(o.ShiftCalendar,{containerClass:"shadow-none",picker:"date",onChange:function(e){return j(p()(e).format("YYYY-MM-DD"))},data:m,cellRender:function(e){return(0,x.jsx)(v,{date:e,isEdit:T,data:m,shiftStatus:Z})},currentDate:D,extraComponent:null!==(t=H.userInfo)&&void 0!==t&&t.ReadonlyAccess?null:(0,x.jsx)("div",{className:"flex justify-end flex-1",children:(0,x.jsx)(o.Button,{onClick:function(){return R(!0)},children:"Bulk Change"})})})})}}),(0,x.jsx)(i.Z.Item,{className:"mt-2 flex justify-end",children:null!==(e=H.userInfo)&&void 0!==e&&e.ReadonlyAccess?null:T?(0,x.jsxs)("div",{className:"flex gap-4",children:[(0,x.jsx)(o.Button,{type:"success",onClick:function(){return V.submit()},children:"Save"}),(0,x.jsx)(o.Button,{onClick:function(){return E(!1)},children:"Cancel"})]}):(0,x.jsx)(o.Button,{type:"primary",onClick:function(){return E(!0)},children:"Edit"})})]})}),(0,x.jsxs)("div",{className:"col-span-12 2xl:col-span-6 flex justify-around flex-wrap",children:[J(Z.onsite.sort((function(e,t){return e.Code>t.Code?1:e.Code<t.Code?-1:0})),"On Site Shifts",16),J(Z.offsite.sort((function(e,t){return e.Code>t.Code?1:e.Code<t.Code?-1:0})),"Off Site Shifts",16)]})]}),(0,x.jsxs)(o.Modal,{title:"Bulk Change",open:A,onCancel:function(){R(!1),z.resetFields()},destroyOnClose:!0,children:[(0,x.jsx)(o.Form,{fields:_,form:z,onFinish:function(e){L(!0),(0,s.Z)({method:"post",url:"tas/employeestatus/visualstatusbulkchange",data:{employeeId:P,startDate:p()(e.rangeDate[0]).format("YYYY-MM-DD"),endDate:p()(e.rangeDate[1]).format("YYYY-MM-DD"),shiftId:e.ShiftId}}).then((function(e){R(!1),W(),K.changedFlight(H.ChangedFlight+1)})).catch((function(e){})).then((function(){return L(!1)}))}}),(0,x.jsx)("div",{className:"flex justify-end",children:(0,x.jsx)(o.Button,{type:"success",onClick:function(){return z.submit()},loading:F,children:"Save"})})]})]})]})}},55871:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var n=a(1413),l=a(29439),s=a(93433),o=a(47313),r=a(2880),i=a(56573),u=a(65040),c=a(58467),d=a(2135),m=a(42614),p=a(10658),f=a.n(p),h=a(76629),x=a(56385),v=a.n(x),g=a(55080),b=a(40765),y=a(31283),D=a(46417);function j(e,t){var a=!1;return e.length===t.length&&e.forEach((function(e){a=t.includes(e)})),a}var N=["StartDate","EndDate","Id","DocumentType","requestDocumentSearchCurrentStep"],C=["StartDate","EndDate","Id","DocumentType","requestDocumentSearchCurrentStep","ApprovelType","LastModifiedDate","AssignedEmployeeId","EmployerId","RequestedEmployeeId","Keyword"],Z=[{label:"Start Date",value:"StartDate"},{label:"End Date",value:"EndDate"},{label:"Request #",value:"Id"},{label:"Document Type",value:"DocumentType"},{label:"Current Step",value:"requestDocumentSearchCurrentStep"},{label:"Approvel Type",value:"ApprovelType"},{label:"Last Modified",value:"LastModifiedDate"},{label:"Assigned To",value:"AssignedEmployeeId"},{label:"Employer",value:"EmployerId"},{label:"Requested By",value:"RequestedEmployeeId"},{label:"Keyword",value:"Keyword"}];var S=function(e){var t,a,u,c,d,p,x,v,S,w=e.onFinish,I=e.form,T=h.Z.get("tr"),E=h.Z.get("tFields")?h.Z.get("tFields"):[],k=function(e){var t=!0;return e&&(t=!(f()(e)-f()().subtract(1,"hour")>0)),t}(null===T||void 0===T?void 0:T.date)?null:T.sf,M=(0,o.useState)([]),A=(0,l.Z)(M,2),R=A[0],q=A[1],Y=(0,o.useState)([]),F=(0,l.Z)(Y,2),L=F[0],O=F[1],V=(0,o.useState)(E.length>0?E:N),B=(0,l.Z)(V,2),z=B[0],P=B[1],U=(0,o.useState)(!0),H=(0,l.Z)(U,2),K=H[0],W=H[1],G=(0,o.useState)(!1),_=(0,l.Z)(G,2),J=_[0],$=_[1],Q=(0,o.useState)(!1),X=(0,l.Z)(Q,2),ee=X[0],te=X[1],ae=(0,o.useContext)(m.V).state,ne=(0,o.useContext)(m.V);(0,o.useEffect)((function(){le(),se()}),[]);var le=function(){(0,i.Z)({method:"get",url:"tas/requestgroupemployee"}).then((function(e){var t,a=[];null===(t=e.data)||void 0===t||t.map((function(e){a.push({value:e.EmployeeId,label:e.FullName})})),q(a)})).catch((function(e){}))},se=function(){(0,i.Z)({method:"get",url:"tas/requestgroup"}).then((function(e){var t,a=[];null===(t=e.data)||void 0===t||t.map((function(e){a.push({value:e.Id,label:e.Description})})),O(a)})).catch((function(e){}))},oe=[{label:"Start Date",name:"StartDate",className:"col-span-6 xl:col-span-4 mb-2",type:"date",inputprops:{className:"w-full"}},{label:"End Date",name:"EndDate",className:"col-span-6 xl:col-span-4 mb-2",type:"date",inputprops:{className:"w-full"}},{label:"Request #",name:"Id",className:"col-span-6 xl:col-span-4 mb-2",type:"number",inputprops:{className:"w-full"}},{label:"Document Type",name:"DocumentType",className:"col-span-6 xl:col-span-4 mb-2",type:"select",inputprops:{className:"w-full",allowClear:!1,options:null!==(t=ae.referData)&&void 0!==t&&null!==(a=t.master)&&void 0!==a&&a.documentTypes?[{value:null,label:"All"}].concat((0,s.Z)(null===(u=ae.referData)||void 0===u||null===(c=u.master)||void 0===c?void 0:c.documentTypes)):[]}},{label:"Current Step",name:"requestDocumentSearchCurrentStep",className:"col-span-6 xl:col-span-4 mb-2",type:"select",inputprops:{className:"w-full",allowClear:!1,options:null!==(d=ae.referData)&&void 0!==d&&null!==(p=d.master)&&void 0!==p&&p.searchCurrentSteps?[{value:null,label:"All"}].concat((0,s.Z)(null===(x=ae.referData)||void 0===x||null===(v=x.master)||void 0===v?void 0:v.searchCurrentSteps)):[]}},{label:"Approvel Type",name:"ApprovelType",className:"col-span-6 xl:col-span-4 mb-2",type:"select",inputprops:{className:"w-full",options:L.filter((function(e){return"OT badging"!==e.label&&"Data team"!==e.label}))}},{label:"Last Modified",name:"LastModifiedDate",className:"col-span-6 xl:col-span-4 mb-2",type:"date",inputprops:{className:"w-full"}},{label:"Assigned To",name:"AssignedEmployeeId",className:"col-span-6 xl:col-span-4 mb-2",type:"select",inputprops:{className:"w-full",options:R}},{label:"Employer",name:"EmployerId",className:"col-span-6 xl:col-span-4 mb-2",type:"select",inputprops:{className:"w-full",options:null===(S=ne.state.referData)||void 0===S?void 0:S.employers}},{label:"Requested By",name:"RequestedEmployeeId",className:"col-span-6 xl:col-span-4 mb-2",type:"select",inputprops:{className:"max-w-[300px]",options:R}},{label:"Keyword",name:"Keyword",className:"col-span-6 xl:col-span-4 mb-2"}],re=(0,o.useMemo)((function(){return oe.filter((function(e){return z.includes(e.name)}))}),[z,R,L]);return(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{className:"rounded-t-ot bg-white px-3 py-2 shadow-md border-b",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,D.jsx)("div",{className:"text-lg font-bold mb-3",children:"Search Task"}),(0,D.jsx)(r.Button,{htmlType:"button",onClick:function(){return te(!0)},className:"px-2",icon:(0,D.jsx)(g.Z,{style:{fontSize:"16px"}}),children:"Filter"})]}),(0,D.jsx)(r.Form,{form:I,fields:re,className:"grid grid-cols-12 gap-x-8",onFinish:w,size:"small",initValues:k?(0,n.Z)((0,n.Z)({},k.model),{},{StartDate:k.model.StartDate?f()(k.model.StartDate):null,EndDate:null}):{StartDate:f()().subtract(14,"day"),EndDate:null,Id:"",DocumentType:null,requestDocumentSearchCurrentStep:"Pending",ApprovelType:null,LastModifiedDate:null,AssignedEmployeeId:null,EmployerId:null,RequestedEmployeeId:null,Keyword:""},children:(0,D.jsx)("div",{className:"col-span-12 flex gap-4 justify-end",children:(0,D.jsx)(r.Button,{htmlType:"submit",icon:(0,D.jsx)(b.Z,{}),children:"Search"})})})]}),(0,D.jsxs)(r.Modal,{open:ee,onCancel:function(){return te(!1)},title:"Filter fields",children:[(0,D.jsxs)("div",{className:"pb-2 mb-2 border-b",children:[(0,D.jsx)(y.Z,{indeterminate:K,checked:J,onChange:function(e){var t=e.target.checked?C:[];h.Z.set("tFields",t),P(t),W(!1),$(e.target.checked)},children:"Select All"},"selectAll"),(0,D.jsx)(y.Z,{checked:j(N,z),onChange:function(e){var t=e.target.checked?N:[];h.Z.set("tFields",t),P(t),W(t.length<C.length)},children:"Default"},"default")]}),(0,D.jsx)(y.Z.Group,{style:{width:"100%"},value:z,onChange:function(e){h.Z.set("tFields",e);var t=Z.map((function(e){return e.value}));P(e),W(!!e.length&&e.length<t.length),$(e.length===t.length)},children:(0,D.jsx)("div",{className:"grid grid-cols-12 gap-x-5",children:Z.map((function(e,t){return(0,D.jsx)("div",{className:"col-span-6",children:(0,D.jsx)(y.Z,{value:e.value,children:e.label},"filter-check-item-".concat(t))})}))})})]})]})},w=a(73030),I=function(e){var t=!0;return e&&(t=!(f()(e)-f()().subtract(1,"hour")>0)),t},T=function(e){if("Non Site Travel"===e.data.DocumentType)return"/request/task/nonsitetravel/".concat(e.data.Id);if("Profile Changes"===e.data.DocumentType)return"/request/task/profilechanges/".concat(e.data.Id);if("De Mobilisation"===e.data.DocumentType)return"/request/task/de-mobilisation/".concat(e.data.Id);if("ExternalTravel"===e.data.DocumentType){if("ADD"===e.data.DocumentTag)return"/request/task/externaltravel/addtravel/".concat(e.data.Id);if("RESCHEDULE"===e.data.DocumentTag)return"/request/task/externaltravel/reschedule/".concat(e.data.Id);if("REMOVE"===e.data.DocumentTag)return"/request/task/externaltravel/remove/".concat(e.data.Id)}else if("Site Travel"===e.data.DocumentType){if("ADD"===e.data.DocumentTag)return"/request/task/sitetravel/addtravel/".concat(e.data.Id);if("RESCHEDULE"===e.data.DocumentTag)return"/request/task/sitetravel/reschedule/".concat(e.data.Id);if("REMOVE"===e.data.DocumentTag)return"/request/task/sitetravel/remove/".concat(e.data.Id)}},E=function(e,t,a){var n=(0,s.Z)(e);t&&v()(t).map((function(e){n[e].groupIndex=t[e]}));a&&v()(a).map((function(e){n[e].defaultSortOrder=a[e]}));return n},k=function(e){var t="";return e<0?t="bg-orange-500 text-white":0===e||1===e?t="bg-red-500 text-white":2!==e&&3!==e||(t="bg-yellow-500 text-white"),t};var M=function(){var e=h.Z.get("tr"),t=h.Z.get("grouping"),a=h.Z.get("sorting"),s=I(null===e||void 0===e?void 0:e.date)?null:e.sf,p=I(null===e||void 0===e?void 0:e.date)?null:e.rd,x=(0,c.TH)(),g=(0,o.useState)(p?p.data:[]),b=(0,l.Z)(g,2),y=b[0],j=b[1],N=(0,o.useState)(p?p.totalcount:0),C=(0,l.Z)(N,2),Z=C[0],M=C[1],A=(0,o.useState)(s?s.pageIndex:0),R=(0,l.Z)(A,2),q=R[0],Y=R[1],F=(0,o.useState)(s?s.pageSize:100),L=(0,l.Z)(F,2),O=L[0],V=L[1],B=(0,o.useContext)(m.V).state,z=(0,o.useContext)(m.V),P=(0,c.s0)(),U=u.Z.useForm(),H=(0,l.Z)(U,1)[0],K=(0,o.useRef)(null);(0,o.useEffect)((function(){x.state&&H.setFieldValue(x.state.name,x.state.value),e||W(),z.action.changeMenuKey("/request/task")}),[]),(0,o.useEffect)((function(){y.length>0&&W()}),[q,O]);var W=function(){var e;null===(e=K.current)||void 0===e||e.instance.beginCustomLoading(),(0,i.Z)({method:"post",url:"tas/requestdocument/documentlist",data:{model:H.getFieldsValue(),pageIndex:q,pageSize:O}}).then((function(e){j(e.data.data),M(e.data.totalcount)})).finally((function(){var e;return null===(e=K.current)||void 0===e?void 0:e.instance.endCustomLoading()}))},G=[{label:"",name:"DaysAway",dataType:"string",width:"45px",alignment:"left",cellRender:function(e){var t=e.value;return(0,D.jsx)(r.Tooltip,{title:"Days Away",children:(0,D.jsx)("div",{className:(0,w.m6)("py-[1px] px-[3px] rounded inline-block text-xs min-w-[30px] text-center",k(t)),children:t})})}},{label:"#",name:"Id",dataType:"string",width:"65px",cellRender:function(e){return(0,D.jsx)("div",{className:"flex items-center text-blue-500 hover:underline",children:(0,D.jsx)(d.Link,{to:T(e),target:"_blank",children:e.value})})}},{label:"CurrentStatus",name:"CurrentStatusGroup",alignment:"left"},{label:"Description",name:"Description",alignment:"left",width:380,minWidth:100,cellRender:function(e){var t=e.value;return(0,D.jsx)("div",{className:"truncate whitespace-pre-wrap",children:t})}},{label:"Employer",name:"EmployerName",alignment:"left"},{label:"Subject",name:"EmployeeFullName",alignment:"left"},{label:"Date Requested",name:"RequestedDate",alignment:"left",width:80,cellRender:function(e){return(0,D.jsx)("div",{children:f()(e.value).format("YYYY-MM-DD ddd HH:mm")})}},{label:"Assigned To",name:"AssignedEmployeeFullName",alignment:"left",width:120,cellRender:function(e){return(0,D.jsx)("div",{className:B.userInfo.Id===e.data.AssignedEmployeeId?"font-bold":"",children:e.value})}},{label:"Requester",name:"RequesterFullName",alignment:"left",width:120},{label:"Updated",name:"UpdatedInfo",alignment:"left"}];return(0,D.jsxs)("div",{children:[(0,D.jsx)(S,{form:H,onFinish:function(e){var t;Y(0),null===(t=K.current)||void 0===t||t.instance.beginCustomLoading(),(0,i.Z)({method:"post",url:"tas/requestdocument/documentlist",data:{model:(0,n.Z)((0,n.Z)({},e),{},{StartDate:e.StartDate?f()(e.StartDate).format("YYYY-MM-DD"):null,EndDate:e.EndDate?f()(e.EndDate).format("YYYY-MM-DD"):null}),pageIndex:0,pageSize:O}}).then((function(t){h.Z.set("tr",{rd:t.data,sf:{model:(0,n.Z)((0,n.Z)({},e),{},{StartDate:e.StartDate?f()(e.StartDate).format("YYYY-MM-DD"):null,EndDate:e.EndDate?f()(e.EndDate).format("YYYY-MM-DD"):null}),pageIndex:0,pageSize:O},date:f()().format("YYYY-MM-DD HH:mm")}),j(t.data.data),M(t.data.totalcount)})).finally((function(){var e;return null===(e=K.current)||void 0===e?void 0:e.instance.endCustomLoading()}))}}),(0,D.jsx)(r.CustomTable,{ref:K,data:y,keyExpr:"Id",columns:E(G,t,a),onChangePageSize:function(e){return V(e)},onChangePageIndex:function(e){return Y(e)},pageSize:O,pageIndex:q,totalCount:Z,pagerPosition:"top",isGrouping:!0,columnAutoWidth:!0,showColumnLines:!1,onRowDblClick:function(e){return P(T(e))},wordWrapEnabled:!0,onOptionChanged:function(e){if("columns"===e.name)if(e.fullName.includes("groupIndex")){var t=h.Z.get("grouping")?h.Z.get("grouping"):{};if(void 0!==typeof e.value)t[e.fullName[8]]=e.value,h.Z.set("grouping",t);else if(void 0!==typeof e.previousValue){var a=v()(t);a.filter((function(t){return t!==e.fullName[8]}));var n={};a.map((function(e,t){return n[e]=t})),h.Z.set("grouping",n)}}else if(e.fullName.includes("sortOrder")){var l=h.Z.get("sorting")?h.Z.get("sorting"):{};if(void 0!==typeof e.value)l[e.fullName[8]]=e.value,h.Z.set("sorting",l);else if(void 0!==typeof e.previousValue){var s=v()(l);s.filter((function(t){return t!==e.fullName[8]}));var o={};s.map((function(e,t){return o[e]=t})),h.Z.set("sorting",o)}}},tableClass:"max-h-[calc(100vh-305px)]",containerClass:"rounded-t-none"})]})}},81514:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var n=a(93433),l=a(4942),s=a(1413);var o=function e(t,a,n){var o=[],r=Object.keys(a);return t.map((function(t){if(t[n].length>0)o.push((0,s.Z)((0,s.Z)({},t),{},(0,l.Z)({},n,e(t[n],a,n))));else{var i=!1;r.map((function(e){var n,l;""!==a[e]&&"undefined"!==typeof a[e]&&null!==a[e]?i="string"===typeof a[e]?i||(null===(n=t[e])||void 0===n?void 0:n.toLowerCase().includes(null===(l=a[e])||void 0===l?void 0:l.toLowerCase())):i||t[e]===a[e]:i=!0})),i&&o.push(t)}})),o};function r(e,t,a,l){return"tree"===a?o(t,e,l):new Promise((function(a,l){var s=Object.keys(e),o=(0,n.Z)(t);s.map((function(t){""!==e[t]&&"undefined"!==typeof e[t]&&null!==e[t]&&(o="string"===typeof e[t]?o.filter((function(a){var n,l;return null===(n=a[t])||void 0===n?void 0:n.toLowerCase().includes(null===(l=e[t])||void 0===l?void 0:l.toLowerCase())})):o.filter((function(a){return a[t]===e[t]})))})),a(o)}))}},25364:function(e){e.exports=function(e,t,a,n){var l=-1,s=null==e?0:e.length;for(n&&s&&(a=e[++l]);++l<s;)a=t(a,e[l],l,e);return a}},80556:function(e){var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},30559:function(e){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},38012:function(e,t,a){var n=a(25364),l=a(36110),s=a(8771),o=RegExp("['\u2019]","g");e.exports=function(e){return function(t){return n(s(l(t).replace(o,"")),e,"")}}},85443:function(e,t,a){var n=a(30559)({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"});e.exports=n},83771:function(e){var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},78043:function(e){var t="\\ud800-\\udfff",a="\\u2700-\\u27bf",n="a-z\\xdf-\\xf6\\xf8-\\xff",l="A-Z\\xc0-\\xd6\\xd8-\\xde",s="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",o="["+s+"]",r="\\d+",i="["+a+"]",u="["+n+"]",c="[^"+t+s+r+a+n+l+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",p="["+l+"]",f="(?:"+u+"|"+c+")",h="(?:"+p+"|"+c+")",x="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",v="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",g="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",b="[\\ufe0e\\ufe0f]?",y=b+g+("(?:\\u200d(?:"+["[^"+t+"]",d,m].join("|")+")"+b+g+")*"),D="(?:"+[i,d,m].join("|")+")"+y,j=RegExp([p+"?"+u+"+"+x+"(?="+[o,p,"$"].join("|")+")",h+"+"+v+"(?="+[o,p+f,"$"].join("|")+")",p+"?"+f+"+"+x,p+"+"+v,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",r,D].join("|"),"g");e.exports=function(e){return e.match(j)||[]}},36110:function(e,t,a){var n=a(85443),l=a(11822),s=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=l(e))&&e.replace(s,n).replace(o,"")}},99660:function(e,t,a){var n=a(38012)((function(e,t,a){return e+(a?" ":"")+t.toLowerCase()}));e.exports=n},8771:function(e,t,a){var n=a(80556),l=a(83771),s=a(11822),o=a(78043);e.exports=function(e,t,a){return e=s(e),void 0===(t=a?void 0:t)?l(e)?o(e):n(e):e.match(t)||[]}}}]);