"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[6013],{86013:function(e,t,n){n.r(t);var a=n(1413),l=n(29439),i=n(2880),s=n(14261),c=n(47313),r=n(65040),u=n(29074),o=n(56573),d=n(40765),m=n(82138),p=n(92350),v=n(81514),b=n(58467),f=n(2135),h=n(42614),y=n(46417),x="Cluster";t.default=function(){var e=(0,c.useState)([]),t=(0,l.Z)(e,2),n=t[0],g=t[1],j=(0,c.useState)([]),N=(0,l.Z)(j,2),C=N[0],Z=N[1],D=(0,c.useState)(null),k=(0,l.Z)(D,2),A=k[0],w=k[1],S=(0,c.useState)(!1),q=(0,l.Z)(S,2),T=q[0],F=q[1],I=(0,c.useState)(!1),L=(0,l.Z)(I,2),W=L[0],R=L[1],B=(0,c.useState)(!1),M=(0,l.Z)(B,2),O=M[0],V=M[1],E=(0,c.useState)(!1),U=(0,l.Z)(E,2),_=U[0],z=U[1],G=r.Z.useForm(),J=(0,l.Z)(G,1)[0],K=r.Z.useForm(),P=(0,l.Z)(K,1)[0],Y=(0,c.useContext)(h.V).action,H=(0,c.useRef)(null),Q=(0,b.s0)();(0,c.useEffect)((function(){Y.changeMenuKey("/tas/cluster"),X()}),[]);var X=function(){var e,t;null===(e=H.current)||void 0===e||null===(t=e.instance)||void 0===t||t.beginCustomLoading(),(0,o.Z)({method:"get",url:"tas/cluster"}).then((function(e){if(g(e.data),1===P.getFieldValue("Active")){var t=e.data.filter((function(e){return 1===e.Active}));Z(t)}else if(0===P.getFieldValue("Active")){var n=e.data.filter((function(e){return 0===e.Active}));Z(n)}else Z(e.data)})).catch((function(e){})).then((function(){var e,t;return null===(e=H.current)||void 0===e||null===(t=e.instance)||void 0===t?void 0:t.endCustomLoading()}))},$=function(e){w(e),R(!0)},ee=[{label:"Code",name:"Code"},{label:"Description",name:"Description"},{label:"Week day",name:"DayNum"},{label:"Direction",name:"Direction",cellRender:function(e){return(0,y.jsx)(u.Z,{color:"IN"===e.value?"green":"blue",className:"w-[42px] text-center text-[10px] font-semibold",children:e.value})}},{label:"Detail Count",name:"DetailCount",alignment:"left"},{label:"Active",name:"Active",width:"90px",alignment:"center",cellRender:function(e){return(0,y.jsx)(s.Jg,{disabled:!0,iconSize:18,value:1===e.data.Active||0})}},{label:"",name:"",width:"80px",cellRender:function(e){return(0,y.jsx)("div",{className:"flex items-center",children:(0,y.jsx)(f.Link,{to:"/tas/cluster/".concat(e.data.Id),children:(0,y.jsx)("button",{type:"button",className:"edit-button",children:"View"})})})}},{label:"",name:"action",width:"170px",alignment:"center",cellRender:function(e){return(0,y.jsxs)("div",{className:"flex gap-4",children:[(0,y.jsx)("button",{type:"button",className:"edit-button",onClick:function(){return t=e.data,w(t),void z(!0);var t},children:"Edit"}),1===e.data.Active?(0,y.jsx)("button",{type:"button",className:"dlt-button",onClick:function(){return $(e.data)},children:"Deactivate"}):(0,y.jsx)("button",{type:"button",className:"scs-button",onClick:function(){return $(e.data)},children:"Reactivate"})]})}}],te=function(){z(!1)};return(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{className:"rounded-ot bg-white px-3 py-2 mb-3 shadow-md",children:[(0,y.jsx)("div",{className:"text-lg font-bold mb-2",children:x}),(0,y.jsx)(i.Form,{form:P,fields:[{label:"Code",name:"Code",className:"col-span-3 mb-2",inputprops:{}},{label:"Description",name:"Description",className:"col-span-3 mb-2"},{label:"Active",name:"Active",className:"col-span-1 mb-2",type:"check",inputprops:{indeterminatewith:!0}}],className:"grid grid-cols-12 gap-x-8",onFinish:function(e){F(!0),(0,v.Z)(e,n).then((function(e){Z(e),F(!1)}))},noLayoutConfig:!0,initValues:{Active:1},children:(0,y.jsx)("div",{className:"flex gap-4 items-baseline col-span-1",children:(0,y.jsx)(i.Button,{htmlType:"submit",loading:T,icon:(0,y.jsx)(d.Z,{}),children:"Search"})})})]}),(0,y.jsx)(i.Table,{ref:H,data:C,columns:ee,allowColumnReordering:!1,keyExpr:"Id",onRowDblClick:function(e){return Q("/tas/cluster/".concat(e.data.Id))},tableClass:"border-t max-h-[calc(100vh-245px)]",title:(0,y.jsxs)("div",{className:"flex justify-between py-2 px-1",children:[(0,y.jsxs)("div",{className:"flex items-center gap-1",children:[(0,y.jsx)("span",{className:"font-bold",children:C.length}),(0,y.jsx)("span",{className:" text-gray-400",children:"results"})]}),(0,y.jsxs)(i.Button,{icon:(0,y.jsx)(m.Z,{}),onClick:function(){w(null),J.resetFields(),z(!0)},children:["Add ",x]})]})}),(0,y.jsx)(i.Modal,{open:_,onCancel:function(){return z(!1)},title:A?"Edit ".concat(x):"Add ".concat(x),children:(0,y.jsx)(i.Form,{form:J,fields:A?[{label:"Code",name:"Code",rules:[{required:!0,message:"Code is required"}],className:"col-span-12 mb-2",inputprops:{maxLength:20}},{label:"Description",name:"Description",rules:[{required:!0,message:"Description is required"}],className:"col-span-12 mb-2"},{label:"Week day",name:"DayNum",rules:[{required:!0,message:"Week day is required"}],className:"col-span-12 mb-2",type:"select",inputprops:{options:[{value:"Monday",label:"Monday"},{value:"Tuesday",label:"Tuesday"},{value:"Wednesday",label:"Wednesday"},{value:"Thursday",label:"Thursday"},{value:"Friday",label:"Friday"},{value:"Saturday",label:"Saturday"},{value:"Sunday",label:"Sunday"}]}},{label:"Direction",name:"Direction",rules:[{required:!0,message:"Direction is required"}],className:"col-span-12 mb-2",type:"select",inputprops:{options:[{value:"IN",label:"IN"},{value:"OUT",label:"OUT"}]}}]:[{label:"Code",name:"Code",rules:[{required:!0,message:"Code is required"}],className:"col-span-12 mb-2",inputprops:{maxLength:20}},{label:"Description",name:"Description",rules:[{required:!0,message:"Description is required"}],className:"col-span-12 mb-2"},{label:"Week day",name:"DayNum",rules:[{required:!0,message:"Week day is required"}],className:"col-span-12 mb-2",type:"select",inputprops:{options:[{value:"Monday",label:"Monday"},{value:"Tuesday",label:"Tuesday"},{value:"Wednesday",label:"Wednesday"},{value:"Thursday",label:"Thursday"},{value:"Friday",label:"Friday"},{value:"Saturday",label:"Saturday"},{value:"Sunday",label:"Sunday"}]}},{label:"Direction",name:"Direction",rules:[{required:!0,message:"Direction is required"}],className:"col-span-12 mb-2",type:"select",inputprops:{options:[{value:"IN",label:"IN"},{value:"OUT",label:"OUT"}]}},{label:"Active",name:"Active",className:"col-span-12 mb-2",type:"check",inputprops:{}}],editData:A,onFinish:function(e){V(!0),A?(0,o.Z)({method:"put",url:"tas/cluster",data:(0,a.Z)((0,a.Z)({},e),{},{Active:e.Active?1:0,Id:A.Id})}).then((function(e){X(),te()})).catch((function(e){})).then((function(){return V(!1)})):(0,o.Z)({method:"post",url:"tas/cluster",data:(0,a.Z)((0,a.Z)({},e),{},{Active:e.Active?1:0})}).then((function(e){X(),te()})).catch((function(e){})).then((function(){return V(!1)}))},children:(0,y.jsxs)("div",{className:"col-span-12 flex justify-end items-center gap-2",children:[(0,y.jsx)(i.Button,{type:"primary",onClick:function(){return J.submit()},loading:O,icon:(0,y.jsx)(p.Z,{}),children:"Save"}),(0,y.jsx)(i.Button,{onClick:te,disabled:O,children:"Cancel"})]})})}),(0,y.jsxs)(s.GI,{visible:W,showTitle:!1,height:110,width:350,children:[(0,y.jsxs)("div",{children:["Are you sure you want to ",1===(null===A||void 0===A?void 0:A.Active)?"deactivate":"reactivate"," this record?"]}),(0,y.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,y.jsx)(i.Button,{type:1===(null===A||void 0===A?void 0:A.Active)?"danger":"success",onClick:function(){V(!0),(0,o.Z)({method:"delete",url:"tas/cluster",data:{id:A.Id}}).then((function(){X(),R(!1)})).catch((function(e){})).then((function(){return V(!1)}))},loading:O,children:"Yes"}),(0,y.jsx)(i.Button,{onClick:function(){return R(!1)},disabled:O,children:"No"})]})]})]})}},81514:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(93433),l=n(4942),i=n(1413);var s=function e(t,n,a){var s=[],c=Object.keys(n);return t.map((function(t){if(t[a].length>0)s.push((0,i.Z)((0,i.Z)({},t),{},(0,l.Z)({},a,e(t[a],n,a))));else{var r=!1;c.map((function(e){var a,l;""!==n[e]&&"undefined"!==typeof n[e]&&null!==n[e]?r="string"===typeof n[e]?r||(null===(a=t[e])||void 0===a?void 0:a.toLowerCase().includes(null===(l=n[e])||void 0===l?void 0:l.toLowerCase())):r||t[e]===n[e]:r=!0})),r&&s.push(t)}})),s};function c(e,t,n,l){return"tree"===n?s(t,e,l):new Promise((function(n,l){var i=Object.keys(e),s=(0,a.Z)(t);i.map((function(t){""!==e[t]&&"undefined"!==typeof e[t]&&null!==e[t]&&(s="string"===typeof e[t]?s.filter((function(n){var a,l;return null===(a=n[t])||void 0===a?void 0:a.toLowerCase().includes(null===(l=e[t])||void 0===l?void 0:l.toLowerCase())})):s.filter((function(n){return n[t]===e[t]})))})),n(s)}))}}}]);