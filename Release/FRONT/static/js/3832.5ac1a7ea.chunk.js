"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[3832],{83832:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});var n=a(1413),l=a(29439),o=a(47313),r=a(2880),s=a(65040),i=a(58467),d=a(45987),u=a(24957),c=a(23495),m=a(74294),h=a(52957),p=a(76298),v=a(56573),f=a(42614),x=a(10658),b=a.n(x),D=a(2135),j=a(29074),C=a(76047),g=a(81237),w=a(46417),S=[{label:"Event Date",name:"EventDate"},{label:"Shift Code",name:"ShiftCode"}],N=[{label:"Event Date",name:"EventDate"},{label:"Shift Code",name:"ShiftCode"}],Z=function(e){var t,a,l,o,s,i,d,u,c,m,h,p,v,f,x,D,Z,I,y,M,E,Y,R,O,k,F,L,T,V,z,q,G,P,B,W,A,U,H,J,_,K,Q,X,$,ee=[];(null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a||null===(l=a.EmployeeRoomData)||void 0===l?void 0:l.length)>0&&ee.push({key:"1",label:"Employee Room",children:(0,w.jsx)("div",{className:"pt-4",children:(0,w.jsx)(r.Table,{data:null===(c=e.data)||void 0===c||null===(m=c.data)||void 0===m?void 0:m.EmployeeRoomData,columns:S,focusedRowEnabled:!1,pager:(null===(h=e.data)||void 0===h||null===(p=h.data)||void 0===p||null===(v=p.EmployeeRoomData)||void 0===v?void 0:v.length)>20,tableClass:"border px-2 overflow-hidden rounded-ot select-none max-h-[300px]",containerClass:"pb-2 shadow-none pl-0 pr-0"})})});null!==(o=e.data)&&void 0!==o&&null!==(s=o.data)&&void 0!==s&&s.OnsiteData&&ee.push({key:"2",label:"On Site",children:(0,w.jsx)("div",{className:"p-4",children:(0,w.jsxs)("table",{className:"text-xs",children:[(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:"In Date:"}),(0,w.jsx)("td",{className:"pl-2",children:null!==(f=e.data)&&void 0!==f&&null!==(x=f.data)&&void 0!==x&&null!==(D=x.OnsiteData)&&void 0!==D&&D.InTransportDate?b()(null===(Z=e.data)||void 0===Z||null===(I=Z.data)||void 0===I||null===(y=I.OnsiteData)||void 0===y?void 0:y.InTransportDate).format("YYYY-MM-DD"):null}),(0,w.jsxs)("td",{className:"pl-3",children:[null===(M=e.data)||void 0===M||null===(E=M.data)||void 0===E||null===(Y=E.OnsiteData)||void 0===Y?void 0:Y.INActiveTransportCode," ",null===(R=e.data)||void 0===R||null===(O=R.data)||void 0===O||null===(k=O.OnsiteData)||void 0===k?void 0:k.INScheduleDescription]})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:"Out Date:"}),(0,w.jsx)("td",{className:"pl-2",children:null!==(F=e.data)&&void 0!==F&&null!==(L=F.data)&&void 0!==L&&null!==(T=L.OnsiteData)&&void 0!==T&&T.OutTransportDate?b()(null===(V=e.data)||void 0===V||null===(z=V.data)||void 0===z||null===(q=z.OnsiteData)||void 0===q?void 0:q.OutTransportDate).format("YYYY-MM-DD"):null}),(0,w.jsxs)("td",{className:"pl-3",children:[null===(G=e.data)||void 0===G||null===(P=G.data)||void 0===P||null===(B=P.OnsiteData)||void 0===B?void 0:B.OUTActiveTransportCode," ",null===(W=e.data)||void 0===W||null===(A=W.data)||void 0===A||null===(U=A.OnsiteData)||void 0===U?void 0:U.OUTScheduleDescription]})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:"Status:"}),(0,w.jsx)("td",{className:"pl-2",children:(0,w.jsx)(j.Z,{className:"text-xs",color:null===(H=g.Z.seatStatus[null===(J=e.data)||void 0===J||null===(_=J.data)||void 0===_||null===(K=_.OnsiteData)||void 0===K?void 0:K.Status])||void 0===H?void 0:H.tagColor,children:null===(Q=e.data)||void 0===Q||null===(X=Q.data)||void 0===X||null===($=X.OnsiteData)||void 0===$?void 0:$.Status})})]})]})})});if((null===(i=e.data)||void 0===i||null===(d=i.data)||void 0===d||null===(u=d.OffSiteStatus)||void 0===u?void 0:u.length)>0){var te,ae,ne=function(e){var t=[],a=null,l=null;return null===e||void 0===e||e.forEach((function(o,r){a?b()(l.EventDate).add(1,"day").format("YYYY-MM-DD")===b()(null===o||void 0===o?void 0:o.EventDate).format("YYYY-MM-DD")&&l.ShiftCode===o.ShiftCode?a=(0,n.Z)((0,n.Z)({},a),{},{endDate:o.EventDate}):(t.push((0,n.Z)((0,n.Z)({},a),{},{EventDate:"".concat(b()(a.startDate).format("YYYY-MM-DD")," ").concat(a.startDate!==a.endDate&&"\u2013 ".concat(b()(a.endDate).format("YYYY-MM-DD")))})),a={startDate:o.EventDate,ShiftCode:o.ShiftCode,endDate:o.EventDate}):a={startDate:o.EventDate,ShiftCode:o.ShiftCode,endDate:o.EventDate},r===e.length-1&&t.push((0,n.Z)((0,n.Z)({},a),{},{EventDate:"".concat(b()(a.startDate).format("YYYY-MM-DD")," ").concat(a.startDate!==a.endDate?"\u2013 ".concat(b()(a.endDate).format("YYYY-MM-DD")):"")})),l=o})),t}(null===(te=e.data)||void 0===te||null===(ae=te.data)||void 0===ae?void 0:ae.OffSiteStatus);ee.push({key:"3",label:"Off Site",children:(0,w.jsx)("div",{className:"pt-4",children:(0,w.jsx)(r.Table,{data:ne,columns:N,pager:(null===ne||void 0===ne?void 0:ne.length)>20,tableClass:"border px-2 overflow-hidden rounded-ot max-h-[300px]",containerClass:"pb-2 shadow-none pl-0 pr-0"})})})}return(0,w.jsx)("div",{className:"bg-white rounded-ot shadow-md border p-2",children:(0,w.jsx)(C.Z,{items:ee,type:"card"})})};var I=["key","name"],y=(0,o.lazy)((function(){return a.e(5251).then(a.bind(a,25251))}));var M=function(e){var t,a=e.data,i=void 0===a?[]:a,x=e.handleChangeData,j=e.changeIsEditing,C=e.className,g=e.selectionTableRef,S=(0,o.useState)(!1),N=(0,l.Z)(S,2),M=N[0],E=N[1],Y=(0,o.useState)(b()()),R=(0,l.Z)(Y,2),O=R[0],k=R[1],F=(0,o.useState)(null),L=(0,l.Z)(F,2),T=L[0],V=L[1],z=(0,o.useState)(null),q=(0,l.Z)(z,2),G=q[0],P=q[1],B=(0,o.useState)(!1),W=(0,l.Z)(B,2),A=W[0],U=W[1],H=(0,o.useState)([]),J=(0,l.Z)(H,2),_=J[0],K=J[1],Q=(0,o.useState)([]),X=(0,l.Z)(Q,2),$=X[0],ee=X[1],te=(0,o.useState)(!1),ae=(0,l.Z)(te,2),ne=ae[0],le=ae[1],oe=(0,o.useState)(!1),re=(0,l.Z)(oe,2),se=re[0],ie=re[1],de=(0,o.useState)([]),ue=(0,l.Z)(de,2),ce=ue[0],me=ue[1],he=(0,o.useState)(!1),pe=(0,l.Z)(he,2),ve=pe[0],fe=pe[1],xe=(0,o.useContext)(f.V).state,be=s.Z.useForm(),De=(0,l.Z)(be,1)[0];(0,o.useEffect)((function(){De.setFieldsValue({rosters:i})}),[i]);var je=[{label:"Fullname",name:"Fullname",alignment:"left",width:"200px"},{label:"On Site Status",name:"EmpOnSiteStatus",alignment:"center",cellRender:function(e){return(0,w.jsx)("div",{children:e.value?(0,w.jsx)(u.Z,{twoToneColor:"red",style:{fontSize:"16px"}}):""})}},{label:"Off Site Status",name:"EmpOffSiteStatus",alignment:"center",cellRender:function(e){return(0,w.jsx)("div",{children:e.value?(0,w.jsx)(u.Z,{twoToneColor:"red",style:{fontSize:"16px"}}):""})}},{label:"",name:"action",alignment:"right",width:220,cellRender:function(e){return(0,w.jsxs)("div",{className:"flex gap-3",children:[e.data.EmpOnSiteStatus?(0,w.jsx)(r.Button,{type:"danger",onClick:function(){return t=e.data,fe(t.EmpId),void(0,v.Z)({method:"delete",url:"tas/employee/deletetransport/".concat(t.EmpId,"/").concat(b()(t.OnsiteData.EventDate).format("YYYY-MM-DD"))}).then((function(){K(_.filter((function(e){return e.EmpId!==t.EmpId})))})).catch((function(e){})).then((function(){return fe(!1)}));var t},disabled:ve,loading:e.data.EmpId===ve,children:"On Site Delete"}):null,(0,w.jsx)("button",{type:"button",className:"dlt-button",onClick:function(){return function(e){var t=i.filter((function(t){return t.Id!==e.EmpId}));x(t),K(_.filter((function(t){return t.EmpId!==e.EmpId}))),ee($.filter((function(t){return t.employeeId!==e.EmpId})))}(e.data)},children:"Remove"})]})}}],Ce=(0,o.useCallback)((function(e){var t;if(0!==(null===(t=e.rosters)||void 0===t?void 0:t.length)){var a;U(!0);var n=[];null===(a=e.rosters)||void 0===a||a.map((function(e){e.Id&&n.push({employeeId:e.Id,rosterId:e.RosterId,costCodeId:e.CostCodeId,positionId:e.PositionId,departmentId:e.Departmentid,EmployerId:e.EmployerId})})),ee(n),V(e.durationMonth),k(e.startDate),P(e.flightGroupMasterId),(0,v.Z)({method:"post",url:"tas/bulkroster/preview",data:{startDate:b()(e.startDate).format("YYYY-MM-DD"),durationMonth:e.durationMonth,employees:n}}).then((function(e){K(e.data),le(!0)})).catch((function(e){})).then((function(){return U(!1)}))}}),[]),ge=(0,o.useCallback)((function(){P(null),V(null),ee([]),x([]),j(!1)}),[]),we=function(e,t){var a,n;if(null===(a=De.getFieldsValue())||void 0===a||null===(n=a.rosters)||void 0===n||n.map((function(a,n){De.setFieldValue(["rosters",n,t],e)})),"Departmentid"===t){var l,o,r,s=null===(l=xe.referData.departments)||void 0===l?void 0:l.find((function(t){return t.Id===e}));if(s&&s.CostCodeId)null===(o=De.getFieldsValue())||void 0===o||null===(r=o.rosters)||void 0===r||r.map((function(e,t){De.setFieldValue(["rosters",t,"CostCodeId"],s.CostCodeId)}))}},Se=(0,o.useMemo)((function(){return 0===_.filter((function(e){return e.EmpOnSiteStatus})).length}),[_]),Ne=(0,o.useMemo)((function(){return"boolean"===typeof ve&&!0===ve}),[ve]);return(0,w.jsxs)("div",{className:"rounded-ot bg-white p-5 mb-5 shadow-md ".concat(C),children:[(0,w.jsx)(r.Button,{className:"mb-3",onClick:function(){x(De.getFieldValue("rosters")),j(!1)},icon:(0,w.jsx)(c.Z,{}),children:"Back"}),(0,w.jsxs)(s.Z,{form:De,size:"small",onFinish:Ce,initialValues:{rosters:[],startDate:null,durationMonth:0,flightGroupMasterId:null},children:[(0,w.jsx)(s.Z.List,{name:"rosters",children:function(e,t){var a,l,o,r,i,u=t.remove;return(0,w.jsx)("div",{className:"border rounded-ot overflow-auto",children:(0,w.jsxs)("table",{className:"table-auto overflow-scroll w-full text-xs",children:[(0,w.jsx)("thead",{className:"text-[#959595]",children:(0,w.jsxs)("tr",{className:"text-left font-normal",children:[(0,w.jsx)("th",{className:"border-b px-1 sticky left-0 z-10 bg-white",children:"#"}),(0,w.jsx)("th",{className:"border-b px-1 sticky left-[38px] z-10 bg-white",children:"Fullname"}),(0,w.jsx)("th",{className:"border-b px-1",children:(0,w.jsx)(m.Z,{style:{width:180},options:null===(a=xe.referData)||void 0===a?void 0:a.rosters,placeholder:"Roster",onChange:function(e){return we(e,"RosterId")},allowClear:!0,showSearch:!0,filterOption:function(e,t){var a;return(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())}})}),(0,w.jsx)("th",{className:"border-b px-1",children:(0,w.jsx)(h.Z,{style:{width:200},treeData:null===(l=xe.referData)||void 0===l?void 0:l.departments,virtual:!0,treeLine:!0,popupMatchSelectWidth:!1,showSearch:!0,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},filterTreeNode:function(e,t){var a;return(null!==(a=null===t||void 0===t?void 0:t.Name)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},placeholder:"Department",onChange:function(e){return we(e,"Departmentid")},allowClear:!0})}),(0,w.jsx)("th",{className:"border-b px-1",children:(0,w.jsx)(m.Z,{style:{width:200},options:null===(o=xe.referData)||void 0===o?void 0:o.positions,popupMatchSelectWidth:!1,placeholder:"Position",allowClear:!0,showSearch:!0,filterOption:function(e,t){var a;return(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},onChange:function(e){return we(e,"PositionId")}})}),(0,w.jsx)("th",{className:"border-b px-1",children:(0,w.jsx)(m.Z,{style:{width:200},options:null===(r=xe.referData)||void 0===r?void 0:r.costCodes,placeholder:"Cost Code",allowClear:!0,showSearch:!0,filterOption:function(e,t){var a;return(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},onChange:function(e){return we(e,"CostCodeId")}})}),(0,w.jsx)("th",{className:"border-b px-1",children:(0,w.jsx)(m.Z,{style:{width:200},options:null===(i=xe.referData)||void 0===i?void 0:i.employers,placeholder:"Employer",allowClear:!0,showSearch:!0,filterOption:function(e,t){var a;return(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},onChange:function(e){return we(e,"EmployerId")}})}),(0,w.jsx)("th",{className:"border-b px-1",children:"Room Type"}),(0,w.jsx)("th",{className:"border-b px-1",children:"Room Number"}),(0,w.jsx)("th",{className:"border-b px-1"})]})}),(0,w.jsx)("tbody",{children:e.map((function(e){e.key;var t,a,l,o,r=e.name,i=(0,d.Z)(e,I);return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"p-1 border-t sticky left-0 z-10 ".concat((r+1)%2===0?"bg-[#fafafa]":"bg-white"),children:(0,w.jsx)(s.Z.Item,{className:"mb-0",children:(0,w.jsx)("div",{className:"w-[30px]",children:r+1})})}),(0,w.jsx)("td",{className:"p-1 border-t sticky left-[38px] z-10 ".concat((r+1)%2===0?"bg-[#fafafa]":"bg-white"),children:(0,w.jsx)(s.Z.Item,{className:"mb-0 text-xs",children:(0,w.jsx)(D.Link,{to:"/tas/people/search/".concat(De.getFieldValue(["rosters",r,"Id"])),children:(0,w.jsx)("span",{className:"text-blue-500 hover:underline text-xs",children:De.getFieldValue(["rosters",r,"Fullname"])})})})}),(0,w.jsx)("td",{className:"p-1 border-t w-[200px]",children:(0,w.jsx)(s.Z.Item,(0,n.Z)((0,n.Z)({},i),{},{name:[r,"RosterId"],className:"mb-0",rules:[{required:!0,message:"Roster is required"}],children:(0,w.jsx)(m.Z,{style:{width:180},options:null===(t=xe.referData)||void 0===t?void 0:t.rosters,placeholder:"Roster",allowClear:!0,showSearch:!0,tokenSeparators:[","],filterOption:function(e,t){var a;return(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())}})}))}),(0,w.jsx)("td",{className:"p-1 border-t",children:(0,w.jsx)(s.Z.Item,(0,n.Z)((0,n.Z)({},i),{},{name:[r,"Departmentid"],className:"mb-0",rules:[{required:!0,message:"Department is required"}],children:(0,w.jsx)(h.Z,{style:{width:200},treeData:null===(a=xe.referData)||void 0===a?void 0:a.departments,virtual:!0,treeLine:!0,popupMatchSelectWidth:!1,allowClear:!0,showSearch:!0,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},filterTreeNode:function(e,t){var a;return(null!==(a=null===t||void 0===t?void 0:t.Name)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},placeholder:"Department"})}))}),(0,w.jsx)("td",{className:"p-1 border-t",children:(0,w.jsx)(s.Z.Item,(0,n.Z)((0,n.Z)({},i),{},{name:[r,"PositionId"],className:"mb-0",rules:[{required:!0,message:"Position is required"}],children:(0,w.jsx)(m.Z,{style:{width:200},options:null===(l=xe.referData)||void 0===l?void 0:l.positions,placeholder:"Position",popupMatchSelectWidth:!1,allowClear:!0,showSearch:!0,filterOption:function(e,t){var a;return(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())}})}))}),(0,w.jsx)("td",{className:"p-1 border-t",children:(0,w.jsx)(s.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){var a,n;return(null===(a=e.rosters[r])||void 0===a?void 0:a.Departmentid)!==(null===(n=t.rosters[r])||void 0===n?void 0:n.Departmentid)},children:function(e){var t,a,l=e.getFieldValue,o=e.setFieldValue,d=null===(t=xe.referData.departments)||void 0===t?void 0:t.find((function(e){return e.Id===l(["rosters",r,"Departmentid"])}));return d&&d.CostCodeId&&o(["rosters",r,"CostCodeId"],d.CostCodeId),(0,w.jsx)(s.Z.Item,(0,n.Z)((0,n.Z)({},i),{},{name:[r,"CostCodeId"],className:"mb-0",rules:[{required:!0,message:"Cost Code is required"}],children:(0,w.jsx)(m.Z,{style:{width:200},options:null===(a=xe.referData)||void 0===a?void 0:a.costCodes,placeholder:"Cost Code",allowClear:!0,showSearch:!0,popupMatchSelectWidth:!1,filterOption:function(e,t){var a;return(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())}})}))}})}),(0,w.jsx)("td",{className:"p-1 border-t",children:(0,w.jsx)(s.Z.Item,(0,n.Z)((0,n.Z)({},i),{},{name:[r,"EmployerId"],className:"mb-0",rules:[{required:!0,message:"Employer is required"}],children:(0,w.jsx)(m.Z,{style:{width:200},options:null===(o=xe.referData)||void 0===o?void 0:o.employers,placeholder:"Employer",popupMatchSelectWidth:!1,allowClear:!0,showSearch:!0,filterOption:function(e,t){var a;return(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())}})}))}),(0,w.jsx)("td",{className:"p-1 border-t",children:(0,w.jsx)(s.Z.Item,{className:"mb-0",children:(0,w.jsx)("div",{className:"w-[180px] text-xs",children:De.getFieldValue(["rosters",r,"RoomTypeName"])})})}),(0,w.jsx)("td",{className:"p-1 border-t",children:(0,w.jsx)(s.Z.Item,{className:"mb-0",children:(0,w.jsx)("div",{className:"w-[100px] text-xs",children:De.getFieldValue(["rosters",r,"RoomNumber"])})})}),(0,w.jsx)("td",{className:"p-1 border-t",children:(0,w.jsx)("button",{type:"button",className:"dlt-button text-xs",onClick:function(){var e;e=De.getFieldValue(["rosters",r,"Id"]),g.current.instance.deselectRows([e]),u(r)},children:"Remove"})})]})}))})]})})}}),(0,w.jsxs)("div",{className:"col-span-12 flex gap-5 mt-8",children:[(0,w.jsx)(s.Z.Item,{name:"startDate",label:"Start Date",rules:[{required:!0,message:"Start date is required"}],children:(0,w.jsx)(r.DatePicker,{showWeek:!0,size:"middle"})}),(0,w.jsx)(s.Z.Item,{name:"durationMonth",label:"Month Duration",children:(0,w.jsx)(p.Z,{min:1,max:18,controls:!1,size:"middle"})}),(0,w.jsx)(s.Z.Item,{name:"flightGroupMasterId",label:"Flight Group",rules:[{required:!0,message:"Flight Group is required"}],children:(0,w.jsx)(m.Z,{options:null===(t=xe.referData)||void 0===t?void 0:t.transportGroups,style:{width:180},allowClear:!0,showSearch:!0,size:"middle",filterOption:function(e,t){var a;return(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())}})}),(0,w.jsx)(s.Z.Item,{shouldUpdate:function(e,t){return e.startDate!==t.startDate||e.durationMonth!==t.durationMonth||e.flightGroupMasterId!==t.flightGroupMasterId},children:function(e){var t=e.getFieldValue;return(0,w.jsx)(s.Z.Item,{children:(0,w.jsx)(r.Button,{type:"primary",disabled:!t("startDate")||!t("durationMonth")||0===t("rosters").length||!t("flightGroupMasterId"),onClick:function(){return De.submit()},loading:A,children:"Submit"})})}})]})]}),(0,w.jsxs)(r.Modal,{title:"Changing",open:ne,onCancel:function(){return le(!1)},width:900,children:[(0,w.jsxs)("div",{className:"mt-0 text-xs",children:[(0,w.jsx)("div",{className:"flex justify-end items-center mb-2",children:(0,w.jsx)(r.Button,{type:"danger",onClick:function(){fe(!0);var e=_.filter((function(e){return e.EmpOnSiteStatus})).map((function(e){return e.EmpId})),t=De.getFieldValue("startDate").format("YYYY-MM-DD");(0,v.Z)({method:"delete",url:"tas/employee/deletetransportbulk",data:{employeeIds:e,onsiteDate:t}}).then((function(){K(_.filter((function(t){return!e.includes(t.EmpId)})))})).catch((function(e){})).then((function(){return fe(!1)}))},disabled:Se,loading:Ne,children:"On Site Delete all"})}),(0,w.jsx)(r.Table,{data:_,columns:je,containerClass:"shadow-none border overflow-hidden",renderDetail:{enabled:!0,component:Z},pager:(null===_||void 0===_?void 0:_.length)>20})]}),(0,w.jsxs)("div",{className:"flex justify-end gap-5 items-center mt-3",children:[(0,w.jsx)(r.Button,{type:"primary",loading:M,onClick:function(){return E(!0),void(0,v.Z)({method:"post",url:"tas/bulkroster",data:{startDate:O?b()(O).format("YYYY-MM-DD"):null,durationMonth:T,employees:$,flightGroupMasterId:G}}).then((function(e){var t,a,n,l;me(e.data),((null===(t=e.data)||void 0===t||null===(a=t.RosterExecutedEmployees)||void 0===a?void 0:a.length)>0||(null===(n=e.data)||void 0===n||null===(l=n.RosterSkippedEmployees)||void 0===l?void 0:l.length)>0)&&ie(!0),le(!1)})).catch((function(e){})).then((function(){return E(!1)}))},children:"Process"}),(0,w.jsx)(r.Button,{onClick:function(){return le(!1)},disabled:M,children:"Cancel"})]})]}),(0,w.jsx)(r.Modal,{open:se,onCancel:function(){ie(!1),ge()},title:"Roster response",width:900,children:(0,w.jsx)(y,{data:ce})})]})},E=a(14261),Y=a(58821),R=[{label:"Person #",name:"Id",dataType:"string",width:"70px"},{label:"Firstname",name:"Firstname",dataType:"string"},{label:"Lastname",name:"Lastname",dataType:"string"},{label:"Department",name:"DepartmentName",dataType:"string",width:"220px"},{label:"Employer",name:"EmployerName",dataType:"string"},{label:"Roster",name:"RosterName",dataType:"string",width:"70px"},{label:"Resource Type",name:"PeopleTypeName",dataType:"string"},{label:"Room",name:"RoomNumber",dataType:"string"},{label:"Gender",name:"Gender",alignment:"center",width:"70px",cellRender:function(e){return(0,w.jsx)("span",{children:1===e.data.Gender?"M":"F"})},groupCellRender:function(e){return(0,w.jsxs)("span",{children:[1===e.value?"M":"F"," ",e.groupContinuesMessage?"- ".concat(e.groupContinuesMessage):""]})}},{label:"",name:"HasFutureTransport",width:"50px",cellRender:function(e){return(0,w.jsx)(E.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})},headerCellRender:function(e,t){return(0,w.jsx)(Y.dm9,{})}},{label:"",name:"HasFutureRoomBooking",width:"50px",cellRender:function(e,t){return(0,w.jsx)(E.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})},headerCellRender:function(e,t){return(0,w.jsx)("i",{className:"dx-icon-home"})}},{label:"",name:"",width:"90px",alignment:"center",cellRender:function(e){return(0,w.jsx)("div",{className:"flex items-center",children:(0,w.jsx)(D.Link,{to:"/tas/people/search/".concat(e.data.Id),children:(0,w.jsx)("button",{type:"button",className:"edit-button",children:"View"})})})}}];var O=function(){var e=(0,i.TH)(),t=(0,o.useState)([]),a=(0,l.Z)(t,2),d=a[0],u=a[1],c=(0,o.useState)([]),m=(0,l.Z)(c,2),h=m[0],p=m[1],v=(0,o.useState)(!1),f=(0,l.Z)(v,2),x=f[0],b=f[1],D=s.Z.useForm(),j=(0,l.Z)(D,1)[0],C=(0,o.useRef)(null);return(0,o.useEffect)((function(){e.state&&j.setFieldValue(e.state.name,e.state.value)}),[]),(0,w.jsxs)("div",{children:[(0,w.jsx)(M,{data:d,handleChangeData:function(e){u(e)},changeIsEditing:b,className:"".concat(x?"block":"hidden"),setSelectedData:u,selectionTableRef:C}),(0,w.jsx)("div",{className:"".concat(x?"hidden":"block"),children:(0,w.jsx)(r.PeolpeSelectionTable,{ref:C,onSelect:function(e){p(e)},onReturn:function(){var e=h.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{Fullname:"".concat(e.Firstname," ").concat(e.Lastname)})}));u(e),b(!0)},selectedRowsData:h,columns:R,searchDefaultValues:{Active:1},hideFields:["Active"]})})]})}},24957:function(e,t,a){a.d(t,{Z:function(){return i}});var n=a(87462),l=a(47313),o={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:t}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:e}}]}},name:"close-circle",theme:"twotone"},r=a(17469),s=function(e,t){return l.createElement(r.Z,(0,n.Z)({},e,{ref:t,icon:o}))};var i=l.forwardRef(s)}}]);