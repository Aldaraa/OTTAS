"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[2617],{76270:function(e,l,t){var a=t(29439),n=t(56573),i=t(47313),o=t(2135),r=t(26672),s=t(22539),d=t(63733),c=t(10658),u=t.n(c),m=t(42614),p=t(2880),f=t(1522),v=t(41612),h=t(21521),x=t(18637),g=t(29074),D=t(15413),b=t(58821),j=t(82508),F=t(59748),N=t(14261),I=t(43295),y=t(46417),S=function(e){if("Non Site Travel"===e.data.DocumentType)return"/request/task/nonsitetravel/".concat(e.data.Id);if("Profile Changes"===e.data.DocumentType)return"/request/task/profilechanges/".concat(e.data.Id);if("De Mobilisation"===e.data.DocumentType)return"/request/task/de-mobilisation/".concat(e.data.Id);if("Site Travel"===e.data.DocumentType){if("ADD"===e.data.DocumentTag)return"/request/task/sitetravel/addtravel/".concat(e.data.Id);if("RESCHEDULE"===e.data.DocumentTag)return"/request/task/sitetravel/reschedule/".concat(e.data.Id);if("REMOVE"===e.data.DocumentTag)return"/request/task/sitetravel/remove/".concat(e.data.Id)}},T=[{label:"Travel Date",name:"TravelDate",cellRender:function(e){return(0,y.jsx)("div",{children:u()(e.value).format("YYYY-MM-DD ddd ")})}},{label:"Favor Time",name:"FavorTime"},{label:"Depart Location",name:"DepartLocationName",alignment:"left"},{label:"Arrive Location",name:"ArriveLocationName",alignment:"left"},{label:"Comment",name:"Comment"},{label:"ETD",name:"ETD",alignment:"left",cellRender:function(e){return(0,y.jsx)(N.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})}}],C=[{label:"",name:"Direction"},{label:"Date",name:"EventDate",cellRender:function(e){return(0,y.jsx)("div",{children:u()(e.value).format("YYYY-MM-DD ddd HH:mm")})}},{label:"Description",name:"Description"},{label:"Status",name:"Status",cellRender:function(e){return(0,y.jsx)(g.Z,{color:R(e.value),children:e.value})}}],Z=[{label:"Type",name:"DocumentType"},{label:"Date",name:"RequestedDate",cellRender:function(e){return(0,y.jsx)("div",{children:u()(e.value).format("YYYY-MM-DD ddd HH:mm")})}},{label:"Description",name:"Description"},{label:"#",name:"Id",alignment:"left",cellRender:function(e){return(0,y.jsx)("div",{className:"flex items-center text-blue-500 hover:underline",children:(0,y.jsx)(o.Link,{to:S(e),target:"_blank",children:e.value})})}},{label:"Status",name:"CurrentStatus",cellRender:function(e){return(0,y.jsx)(g.Z,{color:R(e.value),children:e.value})}}],R=function(e){switch(e){case"Confirmed":case"Waiting":return"green";case"Submitted":return"orange"}};l.Z=function(e){var l,t,c,g,N,S=e.employeeId,R=e.profileData,w=e.pendingInfo,L=(0,i.useState)(null),q=(0,a.Z)(L,2),V=q[0],E=q[1],P=(0,i.useState)(!0),M=(0,a.Z)(P,2),k=M[0],Y=M[1],A=(0,i.useState)(!1),G=(0,a.Z)(A,2),O=G[0],U=G[1],z=(0,i.useState)(null),B=(0,a.Z)(z,2),H=B[0],W=B[1],$=(0,i.useState)(!1),X=(0,a.Z)($,2),_=X[0],J=X[1],K=(0,i.useState)(null),Q=(0,a.Z)(K,2),ee=Q[0],le=Q[1],te=(0,i.useContext)(m.V),ae=te.state,ne=te.action,ie=(0,i.useRef)(null);(0,i.useEffect)((function(){R?(ne.saveUserProfileData(R),E(R),le(R.Id),Y(!1)):S&&(le(S),oe())}),[S,R]),(0,i.useEffect)((function(){0!==ae.ChangedFlight&&oe()}),[ae.ChangedFlight]);var oe=function(){(0,n.Z)({method:"get",url:"tas/employee/profile/".concat(S)}).then((function(e){ne.saveUserProfileData(e.data),E(e.data)})).catch((function(e){})).then((function(){return Y(!1)}))},re=(0,i.useMemo)((function(){if(V){if(null!==V&&void 0!==V&&V.Gender&&V.Active)return f;if(null!==V&&void 0!==V&&V.Gender&&!V.Active)return v;if((null===V||void 0===V||!V.Gender)&&V.Active)return h;if((null===V||void 0===V||!V.Gender)&&!V.Active)return x}}),[V]),se=(0,I.useReactToPrint)({contentRef:ie,bodyClass:"w-[".concat(null===(l=ie.current)||void 0===l?void 0:l.clientWidth,"]")});return(0,y.jsxs)("div",{children:[k?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"animate-skeleton h-[130px] flex rounded-ot mb-5 border"}),(0,y.jsx)("div",{className:"animate-skeleton h-[300px] flex rounded-ot border"})]}):(0,y.jsxs)("div",{className:"grid grid-cols-12 gap-5 relative",children:[(0,y.jsx)("div",{className:"col-span-12",children:(0,y.jsx)(D.Z.Ribbon,{className:"z-20",text:"New Employee",color:"blue",style:{display:null!==V&&void 0!==V&&V.DateCreated&&u()(null===V||void 0===V?void 0:V.DateCreated).diff(u()().subtract(2,"d"))>0?"block":"none"},children:(0,y.jsxs)("div",{className:"rounded-ot p-4 flex justify-between col-span-12 border border-gray-300 sticky top-0 z-10 shadow-md ".concat(1===(null===V||void 0===V?void 0:V.Active)?"bg-white":"bg-[#d9d9d9]"),children:[(0,y.jsxs)("div",{className:"flex gap-5",children:[(0,y.jsx)(o.Link,{className:"bg-gray-100 h-[80px] w-[80px] flex items-center justify-center rounded-ot border overflow-hidden cursor-pointer",to:"/tas/people/search/".concat(null===V||void 0===V?void 0:V.Id),children:(0,y.jsx)("img",{src:re})}),(0,y.jsxs)("div",{children:[(0,y.jsxs)("span",{className:"text-start lg:text-lg font-bold flex gap-1 items-center",children:[null===V||void 0===V?void 0:V.Firstname," ",null===V||void 0===V?void 0:V.Lastname," (",null===V||void 0===V?void 0:V.Id,")",V.OnSiteStatus?(0,y.jsx)(p.Tooltip,{title:"Today on Site",children:(0,y.jsx)("span",{children:(0,y.jsx)("div",{className:"ml-2 h-3 w-3 bg-green-400 rounded-full relative z-0",children:(0,y.jsx)("div",{className:"absolute animate-ping inset-0 bg-green-400 rounded-full z-10"})})})}):null]}),(0,y.jsxs)("div",{className:"flex gap-5 divide-x mt-2",children:[(0,y.jsxs)("div",{className:"text-[#718096] text-xs flex flex-col gap-1",children:[(0,y.jsx)(p.Tooltip,{Tooltip:!0,title:"Nationality",children:(0,y.jsxs)("div",{className:"flex gap-3 items-center cursor-default",children:[(0,y.jsx)("div",{children:(0,y.jsx)(r.FaPassport,{size:15})}),(0,y.jsx)("div",{children:null!==V&&void 0!==V&&V.NationalityName?null===V||void 0===V?void 0:V.NationalityName:(0,y.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})}),(0,y.jsx)(p.Tooltip,{Tooltip:!0,title:"".concat(V.EmployerCurrentStatus?"Temporary":"Permanent"," Employer name"),children:(0,y.jsxs)("div",{className:"flex gap-3 items-center cursor-default",children:[(0,y.jsx)("div",{children:(0,y.jsx)(r.FaRegBuilding,{size:15})}),(0,y.jsxs)("div",{children:[(0,y.jsx)(D.Z,{className:"mr-1",status:V.EmployerCurrentStatus?"warning":"success"}),null!==V&&void 0!==V&&V.EmployerName?null===V||void 0===V?void 0:V.EmployerName:(0,y.jsx)("span",{className:"text-gray-400",children:"Not registered"})]})]})}),(0,y.jsx)(p.Tooltip,{title:(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:"text-secondary2",children:"Cost Code: "}),V.CostCodeDescription?V.CostCodeDescription:null]}),className:"flex items-center gap-3 cursor-default",children:(0,y.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,y.jsx)("div",{children:(0,y.jsx)(s.c85,{size:15})}),(0,y.jsxs)("div",{children:[(0,y.jsx)(D.Z,{className:"mr-1",status:V.CostCodeCurrentStatus?"warning":"success"}),null!==V&&void 0!==V&&V.CostCodeNumber?null===V||void 0===V?void 0:V.CostCodeNumber:(0,y.jsx)("span",{className:"text-gray-400",children:"Not registered"})]})]})}),(0,y.jsx)(p.Tooltip,{title:"Mobile",className:"flex items-center gap-3 cursor-default",children:(0,y.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,y.jsx)("div",{children:(0,y.jsx)(s.IXo,{size:15})}),(0,y.jsx)("div",{children:null!==V&&void 0!==V&&V.PersonalMobile?null===V||void 0===V?void 0:V.PersonalMobile:(0,y.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})})]}),(0,y.jsxs)("div",{className:"pl-5 text-[#718096] text-xs flex flex-col gap-1",children:[(0,y.jsx)(p.Tooltip,{title:"".concat(V.PositionCurrentStatus?"Temporary":"Permanent"," Position name"),className:"flex items-center gap-3 cursor-default",children:(0,y.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,y.jsx)("div",{children:(0,y.jsx)(r.FaBriefcase,{size:15})}),(0,y.jsxs)("div",{children:[(0,y.jsx)(D.Z,{className:"mr-1",status:V.PositionCurrentStatus?"warning":"success"}),null!==V&&void 0!==V&&V.PositionName?null===V||void 0===V?void 0:V.PositionName:(0,y.jsx)("span",{className:"text-gray-400",children:"Not registered"})]})]})}),(0,y.jsx)(p.Tooltip,{title:"SAP ID #",className:"flex items-center gap-3 cursor-default",children:(0,y.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,y.jsx)("div",{children:(0,y.jsx)(d.Lhg,{size:15})}),(0,y.jsx)("div",{children:null===V||void 0===V?void 0:V.SAPID})]})}),(0,y.jsxs)(p.Tooltip,{title:"Camp & Room Type",className:"flex items-start gap-3 cursor-default",children:[(0,y.jsx)("div",{children:(0,y.jsx)(b.hh$,{size:15})}),(0,y.jsx)("div",{children:null===V||void 0===V?void 0:V.CampRoomType})]}),(0,y.jsx)(p.Tooltip,{title:"Own Room",className:"flex items-center gap-3 cursor-default",children:(0,y.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,y.jsx)("div",{children:(0,y.jsx)(r.FaHouseUser,{size:15})}),null!==V&&void 0!==V&&V.RoomNumber?"AccomAdmin"===(null===(t=ae.userInfo)||void 0===t?void 0:t.Role)||"SystemAdmin"===(null===(c=ae.userInfo)||void 0===c?void 0:c.Role)?(0,y.jsx)(o.Link,{target:"_blank",to:"/tas/roomcalendar/".concat(V.RoomId,"/").concat(u()().format("YYYY-MM-DD")),children:null===V||void 0===V?void 0:V.RoomNumber}):(0,y.jsx)("div",{children:null===V||void 0===V?void 0:V.RoomNumber}):(0,y.jsx)("div",{className:"text-gray-400",children:"Not registered"})]})}),null!==V&&void 0!==V&&V.CurrentRoomNumber?(0,y.jsx)(p.Tooltip,{title:"Current Room",className:"flex items-center gap-3 cursor-default",children:(0,y.jsxs)("div",{className:"flex items-center gap-3 cursor-default text-success",children:[(0,y.jsx)("div",{children:(0,y.jsx)(r.FaHouseUser,{size:15})}),"AccomAdmin"===(null===(g=ae.userInfo)||void 0===g?void 0:g.Role)||"SystemAdmin"===(null===(N=ae.userInfo)||void 0===N?void 0:N.Role)?(0,y.jsx)(o.Link,{target:"_blank",to:"/tas/roomcalendar/".concat(V.CurrentRoomId,"/").concat(u()().format("YYYY-MM-DD")),children:null===V||void 0===V?void 0:V.CurrentRoomNumber}):(0,y.jsx)("div",{children:null===V||void 0===V?void 0:V.CurrentRoomNumber})]})}):null]}),(0,y.jsxs)("div",{className:"pl-5 text-[#718096] text-xs flex flex-col gap-1",children:[(0,y.jsx)(p.Tooltip,{title:"Location",className:"flex items-center gap-3 cursor-default",children:(0,y.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,y.jsx)("div",{children:(0,y.jsx)(r.FaLocationArrow,{size:15})}),(0,y.jsx)("div",{children:null!==V&&void 0!==V&&V.LocationName?null===V||void 0===V?void 0:V.LocationName:(0,y.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})}),(0,y.jsx)(p.Tooltip,{title:"Resource Type",className:"flex items-center gap-3 cursor-default",children:(0,y.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,y.jsx)("div",{children:(0,y.jsx)(r.FaUserAlt,{size:14})}),(0,y.jsx)("div",{children:null!==V&&void 0!==V&&V.PeopleTypeName?null===V||void 0===V?void 0:V.PeopleTypeName:(0,y.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})})]}),(0,y.jsx)("div",{className:"pl-4 text-[#718096] text-xs flex flex-col gap-1",children:(0,y.jsx)(p.DepartmentList,{data:V,id:null===V||void 0===V?void 0:V.DepartmentId})})]})]})]}),(0,y.jsx)("div",{className:"px-5 py-2 mt-8",children:(0,y.jsx)(D.Z,{count:null===w||void 0===w?void 0:w.PendingRequests,children:(0,y.jsx)("button",{type:"button",onClick:function(){U(!0),J(!0),(0,n.Z)({method:"get",url:"tas/requestdocument/existingbooking/".concat(ee)}).then((function(e){W(e.data)})).catch((function(e){})).then((function(){return J(!1)}))},children:(0,y.jsx)(b.$W1,{size:26})})})})]})})}),(0,y.jsx)("div",{className:"w-full col-span-12",children:(0,y.jsxs)("div",{className:"flex items-start gap-5",children:[(0,y.jsx)(p.VerticalCalendar,{employeeId:ee}),(0,y.jsx)(p.FlightList,{profileData:ae.userProfileData,employeeId:ee})]})})]}),(0,y.jsx)(p.Modal,{open:O,title:"Existing Bookings",width:800,onCancel:function(){return U(!1)},children:_?(0,y.jsx)("div",{className:"p-8 flex justify-center items-center",children:(0,y.jsx)(j.Z,{style:{fontSize:24}})}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{ref:ie,className:"flex flex-col gap-5",children:[(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:"text-gray-500 ",children:"Name:"})," ",null===H||void 0===H?void 0:H.FullName," (",null===H||void 0===H?void 0:H.SAPID,")"]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:"text-gray-500",children:"Department:"})," ",null===H||void 0===H?void 0:H.Department]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:"text-gray-500",children:"Employer:"})," ",null===H||void 0===H?void 0:H.Employer]})]}),(0,y.jsx)(p.Table,{data:null===H||void 0===H?void 0:H.SiteTravel,columns:C,pager:!1,containerClass:"shadow-none border border-gray-300",title:(0,y.jsx)("div",{className:"border-b py-1 font-bold",children:"Site Travel Requests"})}),(0,y.jsx)(p.Table,{data:null===H||void 0===H?void 0:H.NonSiteTravel,columns:T,pager:!1,containerClass:"shadow-none border border-gray-300",title:(0,y.jsx)("div",{className:"border-b py-1 font-bold",children:"Non Site Travel Requests"})}),(0,y.jsx)(p.Table,{data:null===H||void 0===H?void 0:H.PendingRequest,columns:Z,pager:!1,containerClass:"shadow-none border border-gray-300",title:(0,y.jsx)("div",{className:"border-b py-1 font-bold",children:"Pending Requests"})}),(0,y.jsx)(p.Table,{data:null===H||void 0===H?void 0:H.OtherRequest,columns:Z,pager:!1,containerClass:"shadow-none border border-gray-300",tableClass:"max-h-full",title:(0,y.jsx)("div",{className:"border-b py-1 font-bold",children:"Other Requests"})})]}),(0,y.jsx)("div",{className:"flex justify-end mt-5",children:(0,y.jsx)(p.Button,{onClick:se,type:"primary",icon:(0,y.jsx)(F.Z,{}),children:"Print"})})]})})]})}},42617:function(e,l,t){t.r(l),t.d(l,{default:function(){return me}});var a=t(1413),n=t(74165),i=t(15861),o=t(93433),r=t(29439),s=t(47313),d=t(56573),c=t(65040),u=t(12998),m=t(79036),p=t(14576),f=t(55333),v=t(21975),h=t(74294),x=t(31283),g=t(29816),D=t(23495),b=t(49959),j=t(2880),F=t(93031),N=t(29074),I=t(42614),y=t(10658),S=t.n(y),T=t(58467),C=t(81237),Z=t(46417),R=F.Z.RangePicker;var w=function(e){var l=e.form,t=(0,s.useState)([]),n=(0,r.Z)(t,2),i=n[0],o=n[1],c=(0,s.useState)([null,null]),u=(0,r.Z)(c,2),m=u[0],p=u[1],f=(0,s.useState)(!1),g=(0,r.Z)(f,2),D=g[0],b=g[1],y=(0,s.useState)(null),w=(0,r.Z)(y,2),L=w[0],q=w[1],V=(0,s.useState)(!1),E=(0,r.Z)(V,2),P=E[0],M=E[1],k=(0,s.useState)(null),Y=(0,r.Z)(k,2),A=Y[0],G=Y[1],O=(0,s.useState)(null),U=(0,r.Z)(O,2),z=U[0],B=U[1],H=(0,s.useContext)(I.V).state,W=(0,T.UO)().empId,$=(0,s.useRef)(null);(0,s.useEffect)((function(){var e;m&&(b(!0),(0,d.Z)({method:"get",url:"tas/transport?employeeId=".concat(W).concat(m[0]?"&startDate=".concat(null===(e=S()(m[0]))||void 0===e?void 0:e.format("YYYY-MM-DD")):"").concat(m[1]?"&endDate=".concat(S()(m[1]).format("YYYY-MM-DD")):"")}).then((function(e){o(e.data)})).catch((function(e){})).then((function(){return b(!1)})))}),[m]),(0,s.useEffect)((function(){L&&B((0,a.Z)((0,a.Z)({},L),{},{FromLocationId:L.fromLocationId,ToLocationId:L.toLocationId}))}),[L]);var X=function(){var e={StartDate:l.getFieldValue("endDate")?l.getFieldValue("endDate"):null,EndDate:l.getFieldValue("endDate")?l.getFieldValue("endDate"):null};z?(e.DepartLocationId=z.FromLocationId,e.ArriveLocationId=null===z||void 0===z?void 0:z.ToLocationId):e=(l.getFieldValue("Direction")&&l.getFieldValue("Direction"),(0,a.Z)((0,a.Z)({},e),{},{DepartLocationId:L.fromLocationId,ArriveLocationId:L.toLocationId})),G((0,a.Z)({},e)),M(!0)},_=function(e){l.setFieldValue("ReScheduleDescription","".concat(e.Code," ").concat(e.Description)),l.setFieldValue("endDate",S()(e.EventDate)),l.setFieldValue("ReScheduleId",e.Id)},J=[{type:"component",component:(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(j.Form.Item,{label:"Existing Transport",className:"col-span-12 mb-2",children:(0,Z.jsxs)("div",{className:"flex gap-2",children:[(0,Z.jsx)(j.Form.Item,{name:"startDate",className:"mb-0 col-span-3",children:(0,Z.jsx)(F.Z,{disabled:!0,className:"w-full"})}),(0,Z.jsx)(j.Form.Item,{name:"Direction",className:"mb-0 col-span-2",children:(0,Z.jsx)(v.Z,{disabled:!0,className:"w-[50px] py-[2px]"})}),(0,Z.jsx)(j.Form.Item,{noStyle:!0,name:"seats"}),(0,Z.jsx)(j.Form.Item,{name:"startFlight",className:"mb-0 flex-1",rules:[{required:!0,message:"Flight is required"}],children:(0,Z.jsx)(v.Z,{disabled:!0,className:"py-[2px]"})}),(0,Z.jsx)(j.Form.Item,{name:"existingScheduleId",noStyle:!0}),(0,Z.jsx)(j.Form.Item,{name:"ExistingScheduleIdNoShow",labelCol:{flex:"150px"},className:"col-span-12 mb-0",valuePropName:"checked",getValueFromEvent:function(e){var l;return null!==(l=e.target)&&void 0!==l&&l.checked?1:0},children:(0,Z.jsx)(x.Z,{children:"No Show"})})]})})})},{type:"component",component:(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(j.Form.Item,{label:(0,Z.jsxs)("span",{children:[(0,Z.jsx)("span",{className:"text-red-400",children:"*"}),"Reschedule Transport"]}),className:"col-span-12 mb-2",children:(0,Z.jsxs)("div",{className:"flex gap-2",children:[(0,Z.jsx)(j.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.startDate!==l.startDate||e.endDate!==l.endDate},children:function(e){var t=e.getFieldValue,a=!1;return t("endDate")||(a=t("startDate")),(0,Z.jsx)(j.Form.Item,{name:"endDate",className:"mb-0 col-span-3",children:(0,Z.jsx)(F.Z,{defaultPickerValue:a,showWeek:!0,className:"w-full",onChange:function(){l.setFieldValue("ReScheduleDescription",null),l.setFieldValue("ReScheduleId",null)}})})}}),(0,Z.jsx)(j.Form.Item,{name:"Direction",className:"mb-0",children:(0,Z.jsx)(v.Z,{disabled:!0,className:"w-[50px] py-[2px]"})}),(0,Z.jsx)(j.Form.Item,{noStyle:!0,name:"ReScheduleId"}),(0,Z.jsx)(j.Form.Item,{name:"ReScheduleDescription",rules:[{required:!0,message:"ReSchedule Transport is required"}],className:"flex-1 mb-0",children:(0,Z.jsx)(v.Z,{readOnly:!0,className:"py-[2px]"})}),(0,Z.jsx)(j.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.endDate!==l.endDate},children:function(e){var l=(0,e.getFieldValue)("endDate");return(0,Z.jsx)(j.Form.Item,{className:"col-span-1 mb-0",children:(0,Z.jsx)(j.Button,{disabled:!l,className:"text-xs py-[3px]",type:"primary",onClick:X,children:"..."})})}}),(0,Z.jsx)(j.Form.Item,{className:"col-span-1 mb-0",shouldUpdate:function(e,l){return e.endDate!==l.endDate},children:function(e){var l=e.getFieldValue,t=l("endDate"),a={eventDate:t,direction:l("Direction")};return(0,Z.jsx)(j.ButtonDrive,{onRecieve:_,searchValues:a,name:"lastTransport",disabled:!t})}}),(0,Z.jsx)(j.Form.Item,{className:"col-span-1 mb-0",shouldUpdate:function(e,l){return e.endDate!==l.endDate},children:function(e){var l=e.getFieldValue,t=l("endDate"),a={eventDate:t,direction:l("Direction")};return(0,Z.jsx)(j.ButtonDrive,{onRecieve:_,searchValues:a,name:"lastTransport",disabled:!t,mode:"evening"})}}),(0,Z.jsx)(j.Form.Item,{name:"ReScheduleGoShow",labelCol:{flex:"150px"},className:"col-span-12 mb-0",valuePropName:"checked",getValueFromEvent:function(e){var l;return null!==(l=e.target)&&void 0!==l&&l.checked?1:0},children:(0,Z.jsx)(x.Z,{children:"Go Show"})})]})})})},{type:"component",component:(0,Z.jsx)(j.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.endDate!==l.endDate},children:function(e){var t,a,n,i,o=e.getFieldValue,r=(e.setFieldValue,null),s=o("endDate");return s&&L.EventDate&&(S()(s).diff(S()(L.EventDate))>0?"IN"===o("Direction")?(r=0,i=S()(s).format("YYYY-MM-DD"),(0,d.Z)({method:"get",url:"tas/employeestatus/lasterstatus/offsite/".concat(W,"/").concat(i)}).then((function(e){l.setFieldValue("ShiftId",e.data.ShiftId)})).catch((function(e){}))):(r=1,function(e){(0,d.Z)({method:"get",url:"tas/employeestatus/lasterstatus/onsite/".concat(W,"/").concat(e)}).then((function(e){l.setFieldValue("ShiftId",e.data.ShiftId)})).catch((function(e){}))}(S()(s).format("YYYY-MM-DD"))):"IN"===o("Direction")?(r=1,function(e){(0,d.Z)({method:"get",url:"tas/employeestatus/futurefirststatus/onsite/".concat(W,"/").concat(e)}).then((function(e){l.setFieldValue("ShiftId",e.data.ShiftId)})).catch((function(e){}))}(S()(s).format("YYYY-MM-DD"))):(r=0,function(e){(0,d.Z)({method:"get",url:"tas/employeestatus/futurefirststatus/offsite/".concat(W,"/").concat(e)}).then((function(e){l.setFieldValue("ShiftId",e.data.ShiftId)})).catch((function(e){}))}(S()(s).format("YYYY-MM-DD")))),(0,Z.jsx)(j.Form.Item,{label:"Shift Status",name:"ShiftId",className:"col-span-12 mb-2",rules:[{required:!0,message:"Shift is required"}],children:(0,Z.jsx)(h.Z,{options:"number"===typeof r?null===(t=H.referData)||void 0===t||null===(a=t.roomStatuses)||void 0===a?void 0:a.filter((function(e){return e.OnSite===r})):null===(n=H.referData)||void 0===n?void 0:n.roomStatuses,filterOption:function(e,l){var t;return(null!==(t=null===l||void 0===l?void 0:l.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},className:"w-full",showSearch:!0,allowClear:!0})})}})},{label:"Reason",name:"Reason",className:"col-span-12 mb-2",type:"textarea",rules:[{required:!0,message:"Reason is required"}],inputprops:{showCount:!0,maxLength:300}}],K=[{label:"Date",name:"EventDate",cellRender:function(e){return(0,Z.jsx)("div",{children:S()(e.data.EventDate).format("YYYY-MM-DD ddd")})}},{label:"Transport Mode",name:"TransportMode"},{label:"Code",name:"Code"},{label:"Description",name:"Description"},{label:"Direction",name:"Direction",cellRender:function(e){var l,t=e.value;return(0,Z.jsx)(N.Z,{color:null===(l=C.Z.Directions[t])||void 0===l?void 0:l.tagColor,children:t})}},{label:"Status",name:"Status",cellRender:function(e){return(0,Z.jsx)(N.Z,{color:"Confirmed"===e.value?"success":"orange",className:"text-xs",children:e.value})}},{label:"Reschedule",name:"",alignment:"center",cellRender:function(e){return"EXTERNAL"!==e.data.Direction?(0,Z.jsx)("button",{type:"button",onClick:function(){return function(e){q(e);var t=l.getFieldsValue();t=(0,a.Z)((0,a.Z)({},t),{},{startDate:S()(e.EventDate),Direction:e.Direction,existingScheduleId:e.ScheduleId,startFlight:"".concat(e.Code," ").concat(e.Description),ShiftId:null,endDate:null,ReScheduleId:null,ReScheduleDescription:null}),l.setFieldsValue(t)}(e.data)},className:"edit-button",children:"Select"}):null}}];return(0,Z.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,Z.jsxs)("div",{className:"flex flex-col border rounded-ot",children:[(0,Z.jsxs)("div",{className:"flex px-2 py-2 justify-between items-center leading-none",children:[(0,Z.jsx)("div",{className:"items-start relative font-bold text-lg",children:"Choose Travel"}),(0,Z.jsx)(R,{value:m,onChange:function(e){return p(e)}})]}),(0,Z.jsx)(j.Table,{ref:$,data:i,columns:K,allowColumnReordering:!1,loading:D,pager:i.length>20,containerClass:"shadow-none border-t rounded-t-none",keyExpr:"EventDate"})]}),L&&(0,Z.jsxs)("div",{className:"px-5 max-w-[1000px]",children:[(0,Z.jsx)("div",{className:"text-lg font-bold mb-3",children:"Reschedule Existing Travel"}),(0,Z.jsx)(j.Form,{size:"small",labelCol:{flex:"150px"},form:l,fields:J,editData:L,className:"grid grid-cols-12 gap-y-2"})]}),(0,Z.jsx)(j.Modal,{title:"Select Transport",open:P,width:900,onCancel:function(){return M(!1)},destroyOnClose:!1,children:(0,Z.jsx)(j.TransportSearch,{initialSearchValues:A,handleSelect:function(e){B(e),l.setFieldValue("ReScheduleDescription","".concat(e.Code," ").concat(e.Description)),l.setFieldValue("endDate",S()(e.EventDate)),l.setFieldValue("ReScheduleId",e.Id),M(!1)},directionDisabled:!1,isExternal:"EXTERNAL"===(null===L||void 0===L?void 0:L.Direction)})})]})},L=F.Z.RangePicker;var q=function(e){var l,t=e.form,n=(0,s.useState)([]),i=(0,r.Z)(n,2),o=i[0],c=i[1],u=(0,s.useState)([null,null]),m=(0,r.Z)(u,2),p=m[0],f=m[1],g=(0,s.useState)(!1),D=(0,r.Z)(g,2),b=D[0],y=D[1],R=(0,s.useState)(null),w=(0,r.Z)(R,2),q=w[0],V=w[1],E=(0,s.useContext)(I.V).state,P=(0,T.UO)().empId;(0,s.useEffect)((function(){var e;y(!0),(0,d.Z)({method:"get",url:"tas/transport?employeeId=".concat(P).concat(p[0]?"&startDate=".concat(null===(e=S()(p[0]))||void 0===e?void 0:e.format("YYYY-MM-DD")):"").concat(p[1]?"&endDate=".concat(S()(p[1]).format("YYYY-MM-DD")):"")}).then((function(e){c(e.data.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{label:S()(e.EventDate).format("YYYY-MM-DD")})})))})).catch((function(e){})).then((function(){return y(!1)}))}),[p]);var M=[{label:"Date",name:"EventDate",cellRender:function(e){return(0,Z.jsx)("div",{children:S()(e.data.EventDate).format("YYYY-MM-DD ddd")})}},{label:"Transport Mode",name:"TransportMode"},{label:"Code",name:"Code"},{label:"Description",name:"Description"},{label:"Direction",name:"Direction",cellRender:function(e){var l,t=e.value;return(0,Z.jsx)(N.Z,{className:"text-xs",color:null===(l=C.Z.Directions[t])||void 0===l?void 0:l.tagColor,children:t})}},{label:"Status",name:"Status",cellRender:function(e){return(0,Z.jsx)(N.Z,{color:"Confirmed"===e.value?"success":"orange",className:"text-xs",children:e.value})}},{label:"Reschedule",name:"",alignment:"center",cellRender:function(e){return o.length-1!==e.rowIndex&&"EXTERNAL"!==e.data.Direction&&(0,Z.jsx)("button",{type:"button",onClick:function(){return function(e,l){if("EXTERNAL"===e.Direction)V(e),t.setFieldsValue(E.userProfileData),t.setFieldValue(["firstTransport","Date"],S()(e.EventDate)),t.setFieldValue(["firstTransport","Direction"],e.Direction),t.setFieldValue(["firstTransport","Description"],e.Description),t.setFieldValue(["firstTransport","firstScheduleId"],e.Id);else{var a=o[l.rowIndex+1];V(e),t.setFieldsValue(E.userProfileData),t.setFieldValue("ShiftId",null),t.setFieldValue(["firstTransport","Date"],S()(e.EventDate)),t.setFieldValue(["firstTransport","Direction"],e.Direction),t.setFieldValue(["firstTransport","Description"],e.Description),t.setFieldValue(["firstTransport","firstScheduleId"],e.ScheduleId),t.setFieldValue(["lastTransport","Date"],S()(a.EventDate).format("YYYY-MM-DD")),t.setFieldValue(["lastTransport","Direction"],a.Direction),t.setFieldValue(["lastTransport","Description"],a.Description),t.setFieldValue(["lastTransport","lastScheduleId"],a.ScheduleId)}}(e.data,e)},className:"edit-button",children:"Select"})}}];return(0,Z.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,Z.jsxs)("div",{className:"flex flex-col border rounded-ot",children:[(0,Z.jsxs)("div",{className:"flex px-2 py-2 justify-between items-center leading-none",children:[(0,Z.jsx)("div",{className:"items-start relative font-bold text-lg",children:"Choose Travel"}),(0,Z.jsx)(L,{value:p,onChange:function(e){return f(e)}})]}),(0,Z.jsx)(j.Table,{data:o,columns:M,allowColumnReordering:!1,loading:b,pager:o.length>20,containerClass:"shadow-none border-t rounded-t-none",keyExpr:"EventDate"})]}),q?(0,Z.jsxs)("div",{className:"px-5 max-w-[700px]",children:[(0,Z.jsx)("div",{className:"text-lg font-bold mb-3",children:"Remove Existing Travel"}),(0,Z.jsxs)("div",{className:"grid grid-cols-12 gap-y-2",children:[(0,Z.jsx)(j.Form.Item,{label:"First Transport",labelCol:{flex:"150px"},className:"col-span-12 mb-2",children:(0,Z.jsxs)("div",{className:"flex gap-2",children:[(0,Z.jsx)(j.Form.Item,{name:["firstTransport","Date"],className:"mb-0 w-[120px]",children:(0,Z.jsx)(F.Z,{disabled:!0})}),(0,Z.jsx)(j.Form.Item,{name:["firstTransport","Direction"],className:"mb-0 w-[70px]",children:(0,Z.jsx)(h.Z,{disabled:!0,options:[{value:"IN",label:"IN"},{value:"OUT",label:"OUT"}]})}),(0,Z.jsx)(j.Form.Item,{className:"mb-0 flex-1",name:["firstTransport","Description"],rules:[{required:!0,message:"Flight is required"}],children:(0,Z.jsx)(v.Z,{disabled:!0,className:"w-full"})}),(0,Z.jsx)(j.Form.Item,{name:["firstTransport","firstScheduleId"],noStyle:!0,className:"mb-0",rules:[{required:!0,message:"Flight is required"}]}),(0,Z.jsx)(j.Form.Item,{className:"mb-0",name:["firstTransport","NoShow"],label:"",getValueFromEvent:function(e){return e.target.checked?1:0},children:(0,Z.jsx)(x.Z,{children:"No Show"})})]})}),(0,Z.jsx)(j.Form.Item,{label:"Last Transport",labelCol:{flex:"150px"},className:"col-span-12 mb-2",children:(0,Z.jsxs)("div",{className:"flex gap-2",children:[(0,Z.jsx)(j.Form.Item,{name:["lastTransport","Date"],className:"mb-0 w-[120px]",children:(0,Z.jsx)(h.Z,{options:o.filter((function(e){return e.Direction!==(null===q||void 0===q?void 0:q.Direction)&&S()(e.EventDate).diff(S()(q.EventDate))>0})),fieldNames:{value:"EventDate",label:"label"},onChange:function(e,l){return a=l,t.setFieldValue(["lastTransport","Description"],a.Description),t.setFieldValue(["lastTransport","Direction"],a.Direction),void t.setFieldValue(["lastTransport","lastScheduleId"],a.ScheduleId);var a}})}),(0,Z.jsx)(j.Form.Item,{name:["lastTransport","Direction"],className:"mb-0 w-[70px]",children:(0,Z.jsx)(h.Z,{disabled:!0,options:[{value:"IN",label:"IN"},{value:"OUT",label:"OUT"}],className:"w-full"})}),(0,Z.jsx)(j.Form.Item,{noStyle:!0,name:["lastTransport","lastScheduleId"]}),(0,Z.jsx)(j.Form.Item,{name:["lastTransport","Description"],className:"mb-0 flex-1",children:(0,Z.jsx)(v.Z,{disabled:!0})}),(0,Z.jsx)(j.Form.Item,{className:"mb-0",name:["lastTransport","NoShow"],label:"",getValueFromEvent:function(e){return e.target.checked?1:0},children:(0,Z.jsx)(x.Z,{children:"No Show"})})]})}),(0,Z.jsx)(j.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.firstTransport.Description!==l.firstTransport.Description||e.lastTransport.Date!==l.lastTransport.Date},children:function(e){var l,a,n=e.getFieldValue,i=null,o=n(["firstTransport","Date"]);return"IN"===n(["firstTransport","Direction"])?(i=0,o&&(a=S()(o).format("YYYY-MM-DD"),(0,d.Z)({method:"get",url:"tas/employeestatus/lasterstatus/offsite/".concat(P,"/").concat(a)}).then((function(e){t.setFieldValue("ShiftId",e.data.ShiftId)})).catch((function(e){})))):(i=1,o&&function(e){(0,d.Z)({method:"get",url:"tas/employeestatus/lasterstatus/onsite/".concat(P,"/").concat(e)}).then((function(e){t.setFieldValue("ShiftId",e.data.ShiftId)})).catch((function(e){}))}(S()(o).format("YYYY-MM-DD"))),(0,Z.jsx)(j.Form.Item,{className:"col-span-12 mb-2",name:"ShiftId",label:"Shift Status",labelCol:{flex:"150px"},rules:[{required:!0,message:"Shift Status is required"}],children:(0,Z.jsx)(h.Z,{options:"number"===typeof i?null===(l=E.referData)||void 0===l?void 0:l.roomStatuses.filter((function(e){return e.OnSite===i})):null,showSearch:!0,allowClear:!0})})}}),(0,Z.jsx)(j.Form.Item,{className:"col-span-12 mb-2",name:"CostCodeId",label:"Cost Code",labelCol:{flex:"150px"},rules:[{required:!0,message:"Cost Code is required"}],children:(0,Z.jsx)(h.Z,{options:null===(l=E.referData)||void 0===l?void 0:l.costCodes,filterOption:function(e,l){var t;return(null!==(t=null===l||void 0===l?void 0:l.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}),(0,Z.jsx)(j.Form.Item,{className:"col-span-12 mb-2",name:"Reason",label:"Reason",labelCol:{flex:"150px"},rules:[{required:!0,message:"Reason is required"}],children:(0,Z.jsx)(v.Z.TextArea,{maxLength:300,showCount:!0})})]})]}):null]})},V=t(36459),E=t(14261),P=t(3489),M=t(66736),k=t(82138),Y=P.Z.Dragger;var A=function(e){var l=e.mainForm,t=(e.getMaster,(0,s.useState)(!1)),a=(0,r.Z)(t,2),n=a[0],i=a[1],u=(0,s.useState)([]),m=(0,r.Z)(u,2),p=m[0],f=m[1],v=c.Z.useForm(),h=(0,r.Z)(v,1)[0],x=[{type:"component",component:(0,Z.jsx)(j.Form.Item,{name:"files",valuePropName:"file",label:"File",className:"col-span-12 mb-2",children:(0,Z.jsxs)(Y,{beforeUpload:!0,multiple:!0,maxCount:5,onChange:function(e){return function(e){var l=[];e.fileList.map((function(e){l.push(e.originFileObj)})),f(l)}(e)},accept:".doc, .docx, .pdf, .txt, .rtf, .ppt, .pptx, .xls, .xlsx, .jpg, .jpeg, .png, .gif, .bmp, .tiff, .svg, .eml, .msg",children:[(0,Z.jsx)(M.Z,{color:"blue",style:{fontSize:32,marginBottom:8}}),(0,Z.jsx)("p",{className:"text-sm pb-1",children:"Click or drag file to this area to upload"}),(0,Z.jsx)("p",{className:"opacity-50 text-sm",children:"Support for a single or bulk upload."})]})},"form-item-c file-1")},{label:"Comment",name:"comment",className:"col-span-12 mb-2",type:"textarea"},{label:"Include E-Mail",name:"includeEmail",className:"col-span-12 mb-2",type:"check"}],g=[{label:"File",name:"file",alignment:"left",cellRender:function(e){return(0,Z.jsx)("div",{children:"File"})}},{label:"Uploader name",name:"FullName",alignment:"left"},{label:"Created Date",name:"CreatedDate",alignment:"left"},{label:"Include E-Mail",name:"includeEmail",alignment:"left",cellRender:function(e){return(0,Z.jsx)(E.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})}},{label:"Comment",name:"comment",alignment:"left"},{label:"",name:"action",width:"100px",alignment:"center",cellRender:function(e){return(0,Z.jsx)("button",{type:"button",className:"dlt-button",onClick:function(t){return function(e,t){var a;t.stopPropagation();var n=null===(a=l.getFieldValue("files"))||void 0===a?void 0:a.filter((function(l){return e.data.fileAddressId!==l.fileAddressId}));l.setFieldValue("files",n)}(e,t)},children:"Delete"})}}],D=function(){h.resetFields(),i(!1)};return(0,Z.jsxs)("div",{className:"col-span-12",children:[(0,Z.jsx)(j.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.files!==l.files},className:"col-span-12",children:function(e){return(0,V.Z)(e),(0,Z.jsx)(j.Table,{data:l.getFieldValue("files"),columns:g,allowColumnReordering:!1,containerClass:"shadow-none border border-gray-300",keyExpr:"Id",pager:l.getFieldValue("files").length>20,title:(0,Z.jsxs)("div",{className:"flex justify-between items-center py-2 gap-3 border-b",children:[(0,Z.jsx)("div",{className:"text-md font-bold pl-2",children:"Attachments"}),(0,Z.jsx)("div",{className:"flex gap-4 items-center",children:(0,Z.jsx)(j.Button,{icon:(0,Z.jsx)(k.Z,{}),onClick:function(){return i(!0)},className:"text-xs",htmlType:"button",children:"Add Attachment"})})]})})}}),(0,Z.jsx)(j.Modal,{title:"Add Attachment",open:n,onCancel:function(){return i(!1)},children:(0,Z.jsx)(j.Form,{form:h,fields:x,size:"small",className:"grid grid-cols-12 gap-x-8",onFinish:function(e){var t=new FormData;p.map((function(e){t.append("files",e)})),(0,d.Z)({method:"post",url:"/tas/SysFile/multi",data:t}).then((function(t){var a=[];a=l.getFieldValue("files")?[].concat((0,o.Z)(l.getFieldValue("files")),(0,o.Z)(t.data.map((function(l){return{fileAddressId:l.Id,comment:e.comment,includeEmail:e.includeEmail}})))):t.data.map((function(l){return{fileAddressId:l.Id,comment:e.comment,includeEmail:e.includeEmail}})),l.setFieldValue("files",a),h.resetFields(),D(!1)})).catch((function(e){})),i(!1)},noLayoutConfig:!0,layout:"vertical",children:(0,Z.jsxs)("div",{className:"col-span-12 flex justify-end gap-3",children:[(0,Z.jsx)(j.Button,{htmlType:"submit",type:"primary",icon:(0,Z.jsx)(k.Z,{}),children:"Add"}),(0,Z.jsx)(j.Button,{htmlType:"button",onClick:D,children:"Cancel"})]})})})]})},G=t(52957),O=t(76446);S().extend(O);var U=function(e){var l,t,n,i,o,c,u,m,p,f,g=e.form,D=(e.onSubmit,(0,s.useContext)(I.V).state),b=(0,s.useState)(null),N=(0,r.Z)(b,2),y=N[0],C=N[1],R=(0,s.useState)(null),w=(0,r.Z)(R,2),L=w[0],q=w[1],V=(0,s.useState)(!1),E=(0,r.Z)(V,2),P=(E[0],E[1],(0,s.useState)([])),M=(0,r.Z)(P,2),k=M[0],Y=M[1],A=(0,s.useState)(!1),O=(0,r.Z)(A,2),U=O[0],z=O[1],B=(0,s.useState)(null),H=(0,r.Z)(B,2),W=H[0],$=H[1],X=(0,s.useState)(null),_=(0,r.Z)(X,2),J=_[0],K=_[1],Q=(0,s.useState)(null),ee=(0,r.Z)(Q,2),le=ee[0],te=ee[1],ae=((0,T.TH)(),(0,T.UO)().empId),ne=null===(l=D.referData)||void 0===l?void 0:l.roomStatuses.find((function(e){return"DS"===e.Code})),ie={DepartLocationId:null===(t=D.userProfileData)||void 0===t?void 0:t.LocationId,ArriveLocationId:null===(n=D.referData)||void 0===n||null===(i=n.locations)||void 0===i?void 0:i.find((function(e){return"OT"===e.Code})).Id},oe={DepartLocationId:null===(o=D.referData)||void 0===o||null===(c=o.locations)||void 0===c?void 0:c.find((function(e){return"OT"===e.Code})).Id,ArriveLocationId:null===(u=D.userProfileData)||void 0===u?void 0:u.LocationId};(0,s.useEffect)((function(){g.setFieldsValue(D.userProfileData),g.setFieldValue("ShiftId",ne.value)}),[D.userProfileData]),(0,s.useEffect)((function(){if(y&&L){var e=null===y||void 0===y?void 0:y.format("YYYY-MM-DD"),l=L.diff(y,"month");(0,d.Z)({method:"get",url:"tas/employeestatus/annualyear/".concat(ae,"/").concat(e,"/").concat(l+1)}).then((function(e){Y(e.data)})).catch((function(e){}))}}),[y,L]);var re=[{label:"Shift",name:"ShiftCode",width:"50px"},{label:"Description",name:"Description"},{label:"Date",name:"EvenDate",cellRender:function(e){return(0,Z.jsx)("div",{children:S()(e.value).format("YYYY-MM-DD")})}}],se=function(){var e={StartDate:g.getFieldValue(["firstTransport","Date"])?g.getFieldValue(["firstTransport","Date"]):null,EndDate:null};J?(e.DepartLocationId=J.FromLocationId,e.ArriveLocationId=J.ToLocationId):e=g.getFieldValue(["firstTransport","Direction"])&&"IN"===g.getFieldValue(["firstTransport","Direction"])?(0,a.Z)((0,a.Z)({},e),ie):(0,a.Z)((0,a.Z)({},e),oe),$((0,a.Z)((0,a.Z)({},e),{},{transportType:"first"})),z(!0)},de=function(){var e={StartDate:g.getFieldValue(["lastTransport","Date"])?g.getFieldValue(["lastTransport","Date"]):null,EndDate:null,DepartLocationId:null,ArriveLocationId:null};le?(e.DepartLocationId=le.FromLocationId,e.ArriveLocationId=le.ToLocationId):J?(e.DepartLocationId=J.ToLocationId,e.ArriveLocationId=J.FromLocationId):e=g.getFieldValue(["lastTransport","Direction"])&&"IN"===g.getFieldValue(["lastTransport","Direction"])?(0,a.Z)((0,a.Z)({},e),ie):(0,a.Z)((0,a.Z)({},e),oe),$((0,a.Z)((0,a.Z)({},e),{},{transportType:"last"})),z(!0)},ce=function(e,l){g.setFieldValue([l,"Date"],S()(e.EventDate)),g.setFieldValue([l,"Description"],"".concat(e.Code," ").concat(e.Description)),g.setFieldValue([l,"flightId"],e.Id)};return(0,Z.jsxs)("div",{className:"max-w-[1000px] grid grid-cols-12 px-5 gap-5 items-start",children:[(0,Z.jsxs)("div",{className:"col-span-12",children:[(0,Z.jsx)("div",{className:"text-lg font-bold mb-3",children:"New Travel Request"}),(0,Z.jsxs)("div",{className:"grid grid-cols-12",children:[(0,Z.jsx)(j.Form.Item,{label:(0,Z.jsxs)("span",{children:[(0,Z.jsx)("span",{className:"text-red-500",children:"*"})," First Transport"]}),labelCol:{flex:"150px"},className:"col-span-12 mb-3",children:(0,Z.jsxs)("div",{className:"flex gap-2",children:[(0,Z.jsx)(j.Form.Item,{name:["firstTransport","Date"],className:"mb-0 col-span-3",children:(0,Z.jsx)(F.Z,{showWeek:!0,onChange:function(e){C(e),K(null),g.setFieldValue("RoomId",""),g.setFieldValue(["firstTransport","flightId"],null),g.setFieldValue(["firstTransport","Description"],null)},className:"w-full"})}),(0,Z.jsx)(j.Form.Item,{name:["firstTransport","Direction"],className:"mb-0 w-[70px]",children:(0,Z.jsx)(h.Z,{options:[{value:"IN",label:"IN"},{value:"OUT",label:"OUT"}],onChange:function(e){K(null),te(null),"IN"===e?(g.setFieldValue(["lastTransport","Direction"],"OUT"),g.setFieldValue(["firstTransport","Description"],null),g.setFieldValue(["firstTransport","flightId"],null),g.setFieldValue(["lastTransport","Description"],null),g.setFieldValue(["lastTransport","flightId"],null)):(g.setFieldValue(["lastTransport","Direction"],"IN"),g.setFieldValue(["firstTransport","flightId"],null),g.setFieldValue(["firstTransport","Description"],null),g.setFieldValue(["lastTransport","flightId"],null),g.setFieldValue(["lastTransport","Description"],null))}})}),(0,Z.jsx)(j.Form.Item,{noStyle:!0,name:["firstTransport","flightId"],rules:[{required:!0,message:"First Transport is required !"}]}),(0,Z.jsx)(j.Form.Item,{name:["firstTransport","Description"],className:"flex-1 mb-0",children:(0,Z.jsx)(v.Z,{readOnly:!0,className:"py-[1px]"})}),(0,Z.jsx)(j.Form.Item,{className:"col-span-1 mb-0",shouldUpdate:function(e,l){var t,a,n,i;return(null===(t=e.firstTransport)||void 0===t?void 0:t.Date)!==(null===(a=l.firstTransport)||void 0===a?void 0:a.Date)||(null===(n=e.firstTransport)||void 0===n?void 0:n.Direction)!==(null===(i=l.firstTransport)||void 0===i?void 0:i.Direction)},children:function(e){var l=e.getFieldValue;return(0,Z.jsx)(j.Button,{className:"text-xs py-[2px]",type:"primary",onClick:se,disabled:!l(["firstTransport","Date"])||!l(["firstTransport","Direction"]),children:"..."})}}),(0,Z.jsx)(j.Form.Item,{className:"col-span-1 mb-0",shouldUpdate:function(e,l){var t,a,n,i;return(null===(t=e.firstTransport)||void 0===t?void 0:t.Date)!==(null===(a=l.firstTransport)||void 0===a?void 0:a.Date)||(null===(n=e.firstTransport)||void 0===n?void 0:n.Direction)!==(null===(i=l.firstTransport)||void 0===i?void 0:i.Direction)},children:function(e){var l=e.getFieldValue,t=(e.setFieldValue,{eventDate:l(["firstTransport","Date"]),direction:l(["firstTransport","Direction"]),morning:!0});return(0,Z.jsx)(j.ButtonDrive,{onRecieve:ce,searchValues:t,name:"firstTransport",disabled:!l(["firstTransport","Date"])||!l(["firstTransport","Direction"])})}}),(0,Z.jsx)(j.Form.Item,{className:"col-span-1 mb-0",shouldUpdate:function(e,l){var t,a,n,i;return(null===(t=e.firstTransport)||void 0===t?void 0:t.Date)!==(null===(a=l.firstTransport)||void 0===a?void 0:a.Date)||(null===(n=e.firstTransport)||void 0===n?void 0:n.Direction)!==(null===(i=l.firstTransport)||void 0===i?void 0:i.Direction)},children:function(e){var l=e.getFieldValue,t={eventDate:l(["firstTransport","Date"]),direction:l(["firstTransport","Direction"]),morning:!1};return(0,Z.jsx)(j.ButtonDrive,{onRecieve:ce,searchValues:t,name:"firstTransport",disabled:!l(["firstTransport","Date"])||!l(["firstTransport","Direction"]),mode:"evening"})}}),(0,Z.jsx)(j.Form.Item,{name:["firstTransport","GoShow"],labelCol:{flex:"150px"},className:"col-span-12 mb-0",valuePropName:"checked",getValueFromEvent:function(e){var l;return null!==(l=e.target)&&void 0!==l&&l.checked?1:0},children:(0,Z.jsx)(x.Z,{children:"Go Show"})})]})}),(0,Z.jsx)(j.Form.Item,{label:(0,Z.jsxs)("span",{children:[(0,Z.jsx)("span",{className:"text-red-500",children:"*"})," Last Transport"]}),labelCol:{flex:"150px"},className:"col-span-12 mb-3",children:(0,Z.jsxs)("div",{className:"flex gap-2",children:[(0,Z.jsx)(j.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){var t,a,n,i;return(null===(t=e.firstTransport)||void 0===t?void 0:t.Date)!==(null===(a=l.firstTransport)||void 0===a?void 0:a.Date)||(null===(n=e.lastTransport)||void 0===n?void 0:n.Date)!==(null===(i=l.lastTransport)||void 0===i?void 0:i.Date)},children:function(e){var l=e.getFieldValue,t=!1;return l(["lastTransport","Date"])||(t=l(["firstTransport","Date"])),(0,Z.jsx)(j.Form.Item,{name:["lastTransport","Date"],className:"mb-0 col-span-3",children:(0,Z.jsx)(F.Z,{defaultPickerValue:t,showWeek:!0,className:"w-full",onChange:function(){return q(e),te(null),g.setFieldValue("RoomId",""),g.setFieldValue(["lastTransport","Description"],null),void g.setFieldValue(["lastTransport","flightId"],null);var e}})})}}),(0,Z.jsx)(j.Form.Item,{name:["lastTransport","Direction"],className:"mb-0 w-[70px]",children:(0,Z.jsx)(v.Z,{className:"py-[1px]",disabled:!0})}),(0,Z.jsx)(j.Form.Item,{noStyle:!0,name:["lastTransport","flightId"],rules:[{required:!0,message:"First Transport is required !"}]}),(0,Z.jsx)(j.Form.Item,{name:["lastTransport","Description"],className:"flex-1 mb-0",children:(0,Z.jsx)(v.Z,{readOnly:!0,className:"py-[1px]"})}),(0,Z.jsx)(j.Form.Item,{className:"col-span-1 mb-0",shouldUpdate:function(e,l){var t,a,n,i;return(null===(t=e.lastTransport)||void 0===t?void 0:t.Date)!==(null===(a=l.lastTransport)||void 0===a?void 0:a.Date)||(null===(n=e.lastTransport)||void 0===n?void 0:n.Direction)!==(null===(i=l.lastTransport)||void 0===i?void 0:i.Direction)},children:function(e){var l=e.getFieldValue;return(0,Z.jsx)(j.Button,{className:"text-xs py-[2px]",type:"primary",onClick:de,disabled:!l(["lastTransport","Date"])||!l(["lastTransport","Direction"]),children:"..."})}}),(0,Z.jsx)(j.Form.Item,{className:"col-span-1 mb-0",shouldUpdate:function(e,l){var t,a,n,i;return(null===(t=e.lastTransport)||void 0===t?void 0:t.Date)!==(null===(a=l.lastTransport)||void 0===a?void 0:a.Date)||(null===(n=e.lastTransport)||void 0===n?void 0:n.Direction)!==(null===(i=l.lastTransport)||void 0===i?void 0:i.Direction)},children:function(e){var l=e.getFieldValue,t={eventDate:l(["lastTransport","Date"]),direction:l(["lastTransport","Direction"]),morning:!0};return(0,Z.jsx)(j.ButtonDrive,{onRecieve:ce,searchValues:t,name:"lastTransport",disabled:!l(["lastTransport","Date"])||!l(["lastTransport","Direction"])})}}),(0,Z.jsx)(j.Form.Item,{className:"col-span-1 mb-0",shouldUpdate:function(e,l){var t,a,n,i;return(null===(t=e.lastTransport)||void 0===t?void 0:t.Date)!==(null===(a=l.lastTransport)||void 0===a?void 0:a.Date)||(null===(n=e.lastTransport)||void 0===n?void 0:n.Direction)!==(null===(i=l.lastTransport)||void 0===i?void 0:i.Direction)},children:function(e){var l=e.getFieldValue,t={eventDate:l(["lastTransport","Date"]),direction:l(["lastTransport","Direction"]),morning:!1};return(0,Z.jsx)(j.ButtonDrive,{onRecieve:ce,searchValues:t,name:"lastTransport",disabled:!l(["lastTransport","Date"])||!l(["lastTransport","Direction"]),mode:"evening"})}}),(0,Z.jsx)(j.Form.Item,{name:["lastTransport","GoShow"],labelCol:{flex:"150px"},className:"col-span-12 mb-0",valuePropName:"checked",getValueFromEvent:function(e){var l;return null!==(l=e.target)&&void 0!==l&&l.checked?1:0},children:(0,Z.jsx)(x.Z,{children:"Go Show"})})]})}),(0,Z.jsx)(j.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){var t,a;return(null===(t=e.firstTransport)||void 0===t?void 0:t.Direction)!==(null===(a=l.firstTransport)||void 0===a?void 0:a.Direction)},children:function(e){var l,t,a,n;return"OUT"===(0,e.getFieldValue)(["firstTransport","Direction"])?(0,Z.jsx)(j.Form.Item,{label:"Shift",labelCol:{flex:"150px"},name:"ShiftId",className:"col-span-12 mb-3",rules:[{required:!0,message:"Shift is required"}],children:(0,Z.jsx)(h.Z,{options:null===(l=D.referData)||void 0===l||null===(t=l.roomStatuses)||void 0===t?void 0:t.filter((function(e){return 0===e.OnSite})),className:"w-full",filterOption:function(e,l){var t;return(null!==(t=null===l||void 0===l?void 0:l.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}):(0,Z.jsx)(j.Form.Item,{label:"Shift",labelCol:{flex:"150px"},name:"ShiftId",className:"col-span-12 mb-3",rules:[{required:!0,message:"Shift is required"}],children:(0,Z.jsx)(h.Z,{options:null===(a=D.referData)||void 0===a||null===(n=a.roomStatuses)||void 0===n?void 0:n.filter((function(e){return 1===e.OnSite})),className:"w-full",filterOption:function(e,l){var t;return(null!==(t=null===l||void 0===l?void 0:l.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})})}}),(0,Z.jsx)(j.Form.Item,{label:"Department",name:"DepartmentId",className:"col-span-12 mb-3",labelCol:{flex:"150px"},rules:[{required:!0,message:"Department is required"}],children:(0,Z.jsx)(G.Z,{treeData:D.referData.departments,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},filterTreeNode:function(e,l){var t;return(null!==(t=null===l||void 0===l?void 0:l.Name)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},allowClear:!0,showSearch:!0})},"form-item-DepartmentId"),(0,Z.jsx)(j.Form.Item,{label:"Position",name:"PositionId",labelCol:{flex:"150px"},className:"col-span-12 mb-3",rules:[{required:!0,message:"Position is required"}],children:(0,Z.jsx)(h.Z,{allowClear:!0,showSearch:!0,filterOption:function(e,l){var t;return(null!==(t=null===l||void 0===l?void 0:l.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},options:null===(m=D.referData)||void 0===m?void 0:m.positions})},"form-item-PositionId"),(0,Z.jsx)(j.Form.Item,{label:"Cost Code",name:"CostCodeId",labelCol:{flex:"150px"},className:"col-span-12 mb-3",rules:[{required:!0,message:"Cost Code is required"}],children:(0,Z.jsx)(h.Z,{allowClear:!0,showSearch:!0,filterOption:function(e,l){var t;return(null!==(t=null===l||void 0===l?void 0:l.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},options:null===(p=D.referData)||void 0===p?void 0:p.costCodes})},"form-item-CostCodeId"),(0,Z.jsx)(j.Form.Item,{label:"Employer",name:"EmployerId",labelCol:{flex:"150px"},className:"col-span-12 mb-3",rules:[{required:!0,message:"Employer is required"}],children:(0,Z.jsx)(h.Z,{allowClear:!0,showSearch:!0,filterOption:function(e,l){var t;return(null!==(t=null===l||void 0===l?void 0:l.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},options:null===(f=D.referData)||void 0===f?void 0:f.employers})},"form-item-EmployerId"),(0,Z.jsx)(j.Form.Item,{label:"Reason",name:"Reason",labelCol:{flex:"150px"},className:"col-span-12 mb-2",rules:[{required:!0,message:"Reason is required"}],children:(0,Z.jsx)(v.Z.TextArea,{showCount:!0,maxLength:300})},"form-item-Reason")]})]}),k.length>0&&(0,Z.jsx)("div",{className:"col-span-4",children:(0,Z.jsx)(j.Table,{data:k,columns:re,containerClass:"shadow-none border",tableClass:"border-t",pager:k.length>20,title:(0,Z.jsx)("div",{className:"py-1 font-bold",children:"Future Annual Leave"})})}),(0,Z.jsx)(j.Modal,{title:"Select Transport",open:U,width:900,onCancel:function(){return z(!1)},destroyOnClose:!1,children:(0,Z.jsx)(j.TransportSearch,{initialSearchValues:W,handleSelect:function(e){"first"===W.transportType?(K(e),g.setFieldValue(["firstTransport","Date"],S()(e.EventDate)),g.setFieldValue(["firstTransport","Description"],"".concat(e.Code," ").concat(e.Description," ").concat(e.TransportMode)),g.setFieldValue(["firstTransport","flightId"],e.Id),z(!1)):(te(e),g.setFieldValue(["lastTransport","Date"],S()(e.EventDate)),g.setFieldValue(["lastTransport","Description"],"".concat(e.Code," ").concat(e.Description," ").concat(e.TransportMode)),g.setFieldValue(["lastTransport","flightId"],e.Id),z(!1))}})})]})},z=t(76270),B=t(24957),H=t(68197),W=t(59624),$=t(76298),X=t(76047),_=t(46146),J=t.n(_),K=t(69226),Q=t.n(K),ee=t(2135);S().extend(J()),S().extend(Q());var le=new RegExp(/^[\u0410-\u042f\u04ae\u04e8]{2}\d{8}$/),te=new RegExp(/^[0-9]{8}$/),ae=new RegExp(/^[A-Za-z -]+$/g),ne=new RegExp(/^[0-9 +]+$/),ie={labelCol:{xs:{span:24},sm:{span:12},md:{span:8},lg:{span:12},xl:{span:8},xxl:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}};var oe=function(e){var l,t,n,i,o,m,p,f,x,g,D,b,N,y,T,C,R,w,L,q,V,E,P,M,k,Y,A,G,O,U,z,B,_,J,K,Q,oe,re,se,de,ce,ue,me,pe,fe,ve,he,xe,ge,De,be,je,Fe,Ne,Ie,ye,Se,Te,Ce,Ze,Re,we,Le,qe,Ve,Ee,Pe,Me,ke,Ye,Ae,Ge,Oe,Ue,ze,Be,He,We,$e,Xe,_e,Je,Ke,Qe,el,ll,tl,al,nl,il,ol,rl,sl,dl,cl,ul,ml,pl,fl,vl,hl,xl,gl,Dl,bl,jl,Fl,Nl,Il,yl,Sl,Tl,Cl,Zl,Rl,wl,Ll,ql,Vl,El,Pl,Ml,kl,Yl,Al,Gl,Ol,Ul,zl,Bl,Hl,Wl,$l,Xl,_l,Jl,Kl,Ql,et,lt,tt,at,nt,it,ot,rt,st,dt,ct,ut,mt,pt,ft,vt,ht,xt,gt,Dt,bt,jt,Ft,Nt,It,yt,St,Tt,Ct,Zt,Rt,wt,Lt,qt,Vt,Et,Pt,Mt,kt,Yt,At,Gt,Ot,Ut,zt=e.className,Bt=e.onSubmit,Ht=e.containerRef,Wt=e.form,$t=(0,s.useState)(0),Xt=(0,r.Z)($t,2),_t=Xt[0],Jt=Xt[1],Kt=(0,s.useState)(!0),Qt=(0,r.Z)(Kt,2),ea=(Qt[0],Qt[1]),la=(0,s.useState)(!1),ta=(0,r.Z)(la,2),aa=(ta[0],ta[1],(0,s.useState)(null)),na=(0,r.Z)(aa,2),ia=na[0],oa=na[1],ra=(0,s.useContext)(I.V).state,sa=u.ZP.useNotification(),da=(0,r.Z)(sa,2),ca=da[0],ua=da[1];(0,s.useEffect)((function(){var e;ra.userProfileData&&Wt&&(null===Wt||void 0===Wt||Wt.setFieldsValue(ra.userProfileData),ma.map((function(e){"date"===e.type&&ra.userProfileData[e.name]&&(null===Wt||void 0===Wt||Wt.setFieldValue(e.name,S()(ra.userProfileData[e.name])))})),pa.map((function(e){"date"===e.type&&ra.userProfileData[e.name]&&(null===Wt||void 0===Wt||Wt.setFieldValue(e.name,S()(ra.userProfileData[e.name])))})),ga.map((function(e){"date"===e.type&&ra.userProfileData[e.name]&&(null===Wt||void 0===Wt||Wt.setFieldValue(e.name,S()(ra.userProfileData[e.name])))})),null===(e=ra.userProfileData.GroupData)||void 0===e||e.map((function(e){null===Wt||void 0===Wt||Wt.setFieldValue(e.GroupMasterId,e.GroupDetailId)})))}),[ra.userProfileData,Wt]);var ma=[{label:null===(l=ra.referData)||void 0===l||null===(t=l.profileFields.NationalityId)||void 0===t?void 0:t.Label,name:"NationalityId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(n=ra.referData)||void 0===n||null===(i=n.profileFields.NationalityId)||void 0===i?void 0:i.FieldRequired,message:"".concat(null===(o=ra.referData)||void 0===o||null===(m=o.profileFields.NationalityId)||void 0===m?void 0:m.Label," is required")}],inputprops:{options:ra.referData.nationalities}},{type:"component",component:(0,Z.jsx)(c.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.NationalityId!==l.NationalityId},children:function(e){var l,t,a,n,i,o,r=e.getFieldValue,s=ra.referData.nationalities.find((function(e){return e.value===r("NationalityId")}));return"MN"===(null===s||void 0===s?void 0:s.Code)?(0,Z.jsx)(c.Z.Item,{label:null===(l=ra.referData)||void 0===l||null===(t=l.profileFields.NRN)||void 0===t?void 0:t.Label,name:"NRN",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(a=ra.referData)||void 0===a||null===(n=a.profileFields.NRN)||void 0===n?void 0:n.FieldRequired,message:"".concat(null===(i=ra.referData)||void 0===i||null===(o=i.profileFields.NRN)||void 0===o?void 0:o.Label," is required")},{pattern:le,message:"Please use only cyrillic characters"}],children:(0,Z.jsx)(v.Z,{maxLength:10,onInput:function(e){return e.target.value=e.target.value.toUpperCase()}})}):(0,Z.jsx)("div",{className:"col-span-12 lg:col-span-6 mb-0"})}})},{label:null===(p=ra.referData)||void 0===p||null===(f=p.profileFields.Gender)||void 0===f?void 0:f.Label,name:"Gender",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(x=ra.referData)||void 0===x||null===(g=x.profileFields.Gender)||void 0===g?void 0:g.FieldRequired,message:"".concat(null===(D=ra.referData)||void 0===D||null===(b=D.profileFields.Gender)||void 0===b?void 0:b.Label," is required")}],inputprops:{options:[{value:1,label:"Male"},{value:0,label:"Female"}]}},{label:null===(N=ra.referData)||void 0===N||null===(y=N.profileFields.Dob)||void 0===y?void 0:y.Label,name:"Dob",className:"col-span-12 lg:col-span-6 mb-0",type:"date",rules:[{required:null===(T=ra.referData)||void 0===T||null===(C=T.profileFields.Dob)||void 0===C?void 0:C.FieldRequired,message:"".concat(null===(R=ra.referData)||void 0===R||null===(w=R.profileFields.Dob)||void 0===w?void 0:w.Label," is required")}]},{label:null===(L=ra.referData)||void 0===L||null===(q=L.profileFields.Firstname)||void 0===q?void 0:q.Label,name:"Firstname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(V=ra.referData)||void 0===V||null===(E=V.profileFields.Firstname)||void 0===E?void 0:E.FieldRequired,message:"".concat(null===(P=ra.referData)||void 0===P||null===(M=P.profileFields.Firstname)||void 0===M?void 0:M.Label," is required")}]},{label:null===(k=ra.referData)||void 0===k||null===(Y=k.profileFields.Lastname)||void 0===Y?void 0:Y.Label,name:"Lastname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(A=ra.referData)||void 0===A||null===(G=A.profileFields.Lastname)||void 0===G?void 0:G.FieldRequired,message:"".concat(null===(O=ra.referData)||void 0===O||null===(U=O.profileFields.Lastname)||void 0===U?void 0:U.Label," is required")}]},{label:null===(z=ra.referData)||void 0===z||null===(B=z.profileFields.MFirstname)||void 0===B?void 0:B.Label,name:"MFirstname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(_=ra.referData)||void 0===_||null===(J=_.profileFields.MFirstname)||void 0===J?void 0:J.FieldRequired,message:"".concat(null===(K=ra.referData)||void 0===K||null===(Q=K.profileFields.MFirstname)||void 0===Q?void 0:Q.Label," is required")}]},{label:null===(oe=ra.referData)||void 0===oe||null===(re=oe.profileFields.MLastname)||void 0===re?void 0:re.Label,name:"MLastname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(se=ra.referData)||void 0===se||null===(de=se.profileFields.MLastname)||void 0===de?void 0:de.FieldRequired,message:"".concat(null===(ce=ra.referData)||void 0===ce||null===(ue=ce.profileFields.MLastname)||void 0===ue?void 0:ue.Label," is required")}]},{label:null===(me=ra.referData)||void 0===me||null===(pe=me.profileFields.CommenceDate)||void 0===pe?void 0:pe.Label,name:"CommenceDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date",rules:[{required:null===(fe=ra.referData)||void 0===fe||null===(ve=fe.profileFields.CommenceDate)||void 0===ve?void 0:ve.FieldRequired,message:"".concat(null===(he=ra.referData)||void 0===he||null===(xe=he.profileFields.CommenceDate)||void 0===xe?void 0:xe.Label," is required")}],inputprops:{format:"M/D/YYYY"}},{label:"Completion Date",name:"CompletionDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date",inputprops:{format:"M/D/YYYY"}},{label:null===(ge=ra.referData)||void 0===ge||null===(De=ge.profileFields.DepartmentId)||void 0===De?void 0:De.Label,name:"DepartmentId",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(be=ra.referData)||void 0===be||null===(je=be.profileFields.DepartmentId)||void 0===je?void 0:je.FieldRequired,message:"".concat(null===(Fe=ra.referData)||void 0===Fe||null===(Ne=Fe.profileFields.DepartmentId)||void 0===Ne?void 0:Ne.Label," is required")}],type:"treeSelect",inputprops:{treeData:ra.referData.departments,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},allowClear:!0,showSearch:!0,filterTreeNode:function(e,l){var t;return(null!==(t=null===l||void 0===l?void 0:l.Name)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())}}},{label:null===(Ie=ra.referData)||void 0===Ie||null===(ye=Ie.profileFields.CostCodeId)||void 0===ye?void 0:ye.Label,name:"CostCodeId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Se=ra.referData)||void 0===Se||null===(Te=Se.profileFields.CostCodeId)||void 0===Te?void 0:Te.FieldRequired,message:"".concat(null===(Ce=ra.referData)||void 0===Ce||null===(Ze=Ce.profileFields.CostCodeId)||void 0===Ze?void 0:Ze.Label," is required")}],inputprops:{options:ra.referData.costCodes}},{label:null===(Re=ra.referData)||void 0===Re||null===(we=Re.profileFields.StateId)||void 0===we?void 0:we.Label,name:"StateId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Le=ra.referData)||void 0===Le||null===(qe=Le.profileFields.StateId)||void 0===qe?void 0:qe.FieldRequired,message:"".concat(null===(Ve=ra.referData)||void 0===Ve||null===(Ee=Ve.profileFields.StateId)||void 0===Ee?void 0:Ee.Label," is required")}],inputprops:{options:ra.referData.states}},{label:null===(Pe=ra.referData)||void 0===Pe||null===(Me=Pe.profileFields.Email)||void 0===Me?void 0:Me.Label,name:"Email",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(ke=ra.referData)||void 0===ke||null===(Ye=ke.profileFields.Email)||void 0===Ye?void 0:Ye.FieldRequired,message:"".concat(null===(Ae=ra.referData)||void 0===Ae||null===(Ge=Ae.profileFields.Email)||void 0===Ge?void 0:Ge.Label," is required")},{type:"email",message:"The input is not valid E-mail!"}]},{type:"component",component:(0,Z.jsx)(c.Z.Item,{className:"col-span-12 lg:col-span-6 mb-0",label:"AD Account",children:(0,Z.jsxs)(H.Z,{gutter:8,children:[(0,Z.jsx)(W.Z,{span:12,children:(0,Z.jsx)(c.Z.Item,{name:"ADAccount",className:"mb-0",children:(0,Z.jsx)(v.Z,{})})}),(0,Z.jsx)(W.Z,{span:12,children:(0,Z.jsx)(j.Button,{htmlType:"button",onClick:function(){var e;(0,d.Z)({method:"post",url:"tas/employee/checkadaccount",data:{employeeId:null===(e=ra.userProfileData)||void 0===e?void 0:e.Id,adAccount:null===Wt||void 0===Wt?void 0:Wt.getFieldValue("ADAccount")}}).then((function(e){e.data.AdAccountValidationStatus?ca.success({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1,description:(0,Z.jsx)("div",{})}):ca.error({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1,description:(0,Z.jsx)("div",{children:e.data.EmployeeId&&(0,Z.jsxs)(ee.Link,{to:"/tas/people/search/".concat(e.data.EmployeeId),className:"text-blue-500 hover:underline",children:[e.data.Firstname," ",e.data.Lastname]})})})})).catch((function(e){})).then((function(){return ea(!1)}))},children:"Account Check"})})]})},"component-ADAccount")}],pa=[{label:null===(Oe=ra.referData)||void 0===Oe||null===(Ue=Oe.profileFields.EmployerId)||void 0===Ue?void 0:Ue.Label,name:"EmployerId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(ze=ra.referData)||void 0===ze||null===(Be=ze.profileFields.EmployerId)||void 0===Be?void 0:Be.FieldRequired,message:"".concat(null===(He=ra.referData)||void 0===He||null===(We=He.profileFields.EmployerId)||void 0===We?void 0:We.Label," is required")}],inputprops:{options:null===($e=ra.referData)||void 0===$e?void 0:$e.employers}},{label:null===(Xe=ra.referData)||void 0===Xe||null===(_e=Xe.profileFields.PeopleTypeId)||void 0===_e?void 0:_e.Label,name:"PeopleTypeId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Je=ra.referData)||void 0===Je||null===(Ke=Je.profileFields.PeopleTypeId)||void 0===Ke?void 0:Ke.FieldRequired,message:"".concat(null===(Qe=ra.referData)||void 0===Qe||null===(el=Qe.profileFields.PeopleTypeId)||void 0===el?void 0:el.Label," is required")}],inputprops:{options:null===(ll=ra.referData)||void 0===ll?void 0:ll.peopleTypes,disabled:!(null===(tl=ra.userProfileData)||void 0===tl||!tl.PeopleTypeId)}},{label:null===(al=ra.referData)||void 0===al||null===(nl=al.profileFields.SAPID)||void 0===nl?void 0:nl.Label,name:"SAPID",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(il=ra.referData)||void 0===il||null===(ol=il.profileFields.SAPID)||void 0===ol?void 0:ol.FieldRequired,message:"".concat(null===(rl=ra.referData)||void 0===rl||null===(sl=rl.profileFields.SAPID)||void 0===sl?void 0:sl.Label," is required")}],inputprops:{maxLength:8}},{label:null===(dl=ra.referData)||void 0===dl||null===(cl=dl.profileFields.ContractNumber)||void 0===cl?void 0:cl.Label,name:"ContractNumber",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(ul=ra.referData)||void 0===ul||null===(ml=ul.profileFields.ContractNumber)||void 0===ml?void 0:ml.FieldRequired,message:"".concat(null===(pl=ra.referData)||void 0===pl||null===(fl=pl.profileFields.ContractNumber)||void 0===fl?void 0:fl.Label," is required")}]},{label:"Person #",name:"Id",className:"col-span-12 lg:col-span-6 mb-0",inputprops:{disabled:!0}},{label:null===(vl=ra.referData)||void 0===vl||null===(hl=vl.profileFields.PositionId)||void 0===hl?void 0:hl.Label,name:"PositionId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(xl=ra.referData)||void 0===xl||null===(gl=xl.profileFields.PositionId)||void 0===gl?void 0:gl.FieldRequired,message:"".concat(null===(Dl=ra.referData)||void 0===Dl||null===(bl=Dl.profileFields.PositionId)||void 0===bl?void 0:bl.Label," is required")}],inputprops:{options:null===(jl=ra.referData)||void 0===jl?void 0:jl.positions}},{label:null===(Fl=ra.referData)||void 0===Fl||null===(Nl=Fl.profileFields.HotelCheck)||void 0===Nl?void 0:Nl.Label,name:"HotelCheck",className:"col-span-12 lg:col-span-6 mb-0",type:"check",rules:[{required:null===(Il=ra.referData)||void 0===Il||null===(yl=Il.profileFields.HotelCheck)||void 0===yl?void 0:yl.FieldRequired,message:"".concat(null===(Sl=ra.referData)||void 0===Sl||null===(Tl=Sl.profileFields.HotelCheck)||void 0===Tl?void 0:Tl.Label," is required")}]},{label:null===(Cl=ra.referData)||void 0===Cl||null===(Zl=Cl.profileFields.RosterId)||void 0===Zl?void 0:Zl.Label,name:"RosterId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Rl=ra.referData)||void 0===Rl||null===(wl=Rl.profileFields.RosterId)||void 0===wl?void 0:wl.FieldRequired,message:"".concat(null===(Ll=ra.referData)||void 0===Ll||null===(ql=Ll.profileFields.RosterId)||void 0===ql?void 0:ql.Label," is required")}],inputprops:{options:null===(Vl=ra.referData)||void 0===Vl?void 0:Vl.rosters}},{label:"Next Roster Start",name:"NextRosterDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date"},{label:null===(El=ra.referData)||void 0===El||null===(Pl=El.profileFields.RoomId)||void 0===Pl?void 0:Pl.Label,name:"RoomId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Ml=ra.referData)||void 0===Ml||null===(kl=Ml.profileFields.RoomId)||void 0===kl?void 0:kl.FieldRequired,message:"".concat(null===(Yl=ra.referData)||void 0===Yl||null===(Al=Yl.profileFields.RoomId)||void 0===Al?void 0:Al.Label," is required")}],inputprops:{options:null===(Gl=ra.referData)||void 0===Gl?void 0:Gl.rooms}},{label:null===(Ol=ra.referData)||void 0===Ol||null===(Ul=Ol.profileFields.LocationId)||void 0===Ul?void 0:Ul.Label,name:"LocationId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(zl=ra.referData)||void 0===zl||null===(Bl=zl.profileFields.LocationId)||void 0===Bl?void 0:Bl.FieldRequired,message:"".concat(null===(Hl=ra.referData)||void 0===Hl||null===(Wl=Hl.profileFields.LocationId)||void 0===Wl?void 0:Wl.Label," is required")}],inputprops:{options:null===($l=ra.referData)||void 0===$l?void 0:$l.locations.filter((function(e){return 1!==e.onSite}))}},{label:null===(Xl=ra.referData)||void 0===Xl||null===(_l=Xl.profileFields.FlightGroupMasterId)||void 0===_l?void 0:_l.Label,name:"FlightGroupMasterId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Jl=ra.referData)||void 0===Jl||null===(Kl=Jl.profileFields.FlightGroupMasterId)||void 0===Kl?void 0:Kl.FieldRequired,message:"".concat(null===(Ql=ra.referData)||void 0===Ql||null===(et=Ql.profileFields.FlightGroupMasterId)||void 0===et?void 0:et.Label," is required")}],inputprops:{options:null===(lt=ra.referData)||void 0===lt?void 0:lt.transportGroups}},{label:null===(tt=ra.referData)||void 0===tt||null===(at=tt.profileFields.SiteContactEmployeeId)||void 0===at?void 0:at.Label,name:"SiteContactEmployeeId",className:"col-span-12 lg:col-span-6 mb-0",type:"searchSelect",rules:[{required:null===(nt=ra.referData)||void 0===nt||null===(it=nt.profileFields.SiteContactEmployeeId)||void 0===it?void 0:it.FieldRequired,message:"".concat(null===(ot=ra.referData)||void 0===ot||null===(rt=ot.profileFields.SiteContactEmployeeId)||void 0===rt?void 0:rt.Label," is required")}],inputprops:{fetchOptions:function(e){return(0,d.Z)({method:"post",url:"tas/employee/searchshort",data:{model:{keyWord:e},pageIndex:0,pageSize:100}}).then((function(e){return e.data.data.map((function(e){return{label:"".concat(e.Firstname," ").concat(e.Lastname," /").concat(e.Mobile,"/"),value:e.Id}}))}))},showSearch:!0,editName:["SiteContactEmployeeFirstname","SiteContactEmployeeLastname"],placeholder:"Select user",allowClear:!0}}],fa=[{label:null===(st=ra.referData)||void 0===st||null===(dt=st.profileFields.EmergencyContactName)||void 0===dt?void 0:dt.Label,name:"EmergencyContactName",className:"col-span-6 mb-0",rules:[{required:null===(ct=ra.referData)||void 0===ct||null===(ut=ct.profileFields.EmergencyContactName)||void 0===ut?void 0:ut.FieldRequired,message:"".concat(null===(mt=ra.referData)||void 0===mt||null===(pt=mt.profileFields.EmergencyContactName)||void 0===pt?void 0:pt.Label," is required")}]},{label:null===(ft=ra.referData)||void 0===ft||null===(vt=ft.profileFields.EmergencyContactMobile)||void 0===vt?void 0:vt.Label,name:"EmergencyContactMobile",className:"col-span-6 mb-0",rules:[{required:null===(ht=ra.referData)||void 0===ht||null===(xt=ht.profileFields.EmergencyContactMobile)||void 0===xt?void 0:xt.FieldRequired,message:"".concat(null===(gt=ra.referData)||void 0===gt||null===(Dt=gt.profileFields.EmergencyContactMobile)||void 0===Dt?void 0:Dt.Label," is required")},{pattern:ne,message:"Invalid phone number"}],inputprops:{className:"w-full",maxLength:15}},{label:null===(bt=ra.referData)||void 0===bt||null===(jt=bt.profileFields.Mobile)||void 0===jt?void 0:jt.Label,name:"Mobile",className:"col-span-6 mb-0",type:"number",rules:[{required:null===(Ft=ra.referData)||void 0===Ft||null===(Nt=Ft.profileFields.Mobile)||void 0===Nt?void 0:Nt.FieldRequired,message:"".concat(null===(It=ra.referData)||void 0===It||null===(yt=It.profileFields.Mobile)||void 0===yt?void 0:yt.Label," is required")},{pattern:te,message:"".concat(null===(St=ra.referData)||void 0===St||null===(Tt=St.profileFields.Mobile)||void 0===Tt?void 0:Tt.Label," must be 8 digit")}],inputprops:{prefix:"+976",className:"w-full",maxLength:8}},{type:"component",component:(0,Z.jsx)(c.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.PeopleTypeId!==l.PeopleTypeId},children:function(e){var l,t,a,n,i,o,r,s,d,u,m=(0,e.getFieldValue)("PeopleTypeId"),p="Visitor"===(null===(l=ra.referData.peopleTypes)||void 0===l||null===(t=l.find((function(e){return e.value===m})))||void 0===t?void 0:t.Code);return(0,Z.jsx)(c.Z.Item,{className:"col-span-6 mb-0",name:"PersonalMobile",label:null===(a=ra.referData)||void 0===a||null===(n=a.profileFields.PersonalMobile)||void 0===n?void 0:n.Label,rules:[{required:!p&&(null===(i=ra.referData)||void 0===i||null===(o=i.profileFields.PersonalMobile)||void 0===o?void 0:o.FieldRequired),message:"".concat(null===(r=ra.referData)||void 0===r||null===(s=r.profileFields.PersonalMobile)||void 0===s?void 0:s.Label," is required")},{pattern:te,message:"".concat(null===(d=ra.referData)||void 0===d||null===(u=d.profileFields.PersonalMobile)||void 0===u?void 0:u.Label," must be 8 digit")}],children:(0,Z.jsx)($.Z,{controls:!1,prefix:"+976",className:"w-full",maxLength:8})})}})},{label:null===(Ct=ra.referData)||void 0===Ct||null===(Zt=Ct.profileFields.PickUpAddress)||void 0===Zt?void 0:Zt.Label,name:"PickUpAddress",className:"col-span-6 mb-0",type:"textarea",rules:[{required:null===(Rt=ra.referData)||void 0===Rt||null===(wt=Rt.profileFields.PickUpAddress)||void 0===wt?void 0:wt.FieldRequired,message:"".concat(null===(Lt=ra.referData)||void 0===Lt||null===(qt=Lt.profileFields.PickUpAddress)||void 0===qt?void 0:qt.Label," is required")}]},{label:null===(Vt=ra.referData)||void 0===Vt||null===(Et=Vt.profileFields.FrequentFlyer)||void 0===Et?void 0:Et.Label,name:"FrequentFlyer",className:"col-span-6 mb-0",rules:[{required:null===(Pt=ra.referData)||void 0===Pt||null===(Mt=Pt.profileFields.FrequentFlyer)||void 0===Mt?void 0:Mt.FieldRequired,message:"".concat(null===(kt=ra.referData)||void 0===kt||null===(Yt=kt.profileFields.FrequentFlyer)||void 0===Yt?void 0:Yt.Label," is required")}]}],va=(0,s.useMemo)((function(){var e;return null===(e=ra.referData)||void 0===e?void 0:e.fieldsOfGroups.map((function(e){return{name:e.Id,label:e.Description}}))}),[null===(At=ra.referData)||void 0===At?void 0:At.fieldsOfGroups]),ha=[{type:"component",component:(0,Z.jsx)(Z.Fragment,{children:null===(Gt=ra.referData)||void 0===Gt||null===(Ot=Gt.fieldsOfGroups)||void 0===Ot?void 0:Ot.map((function(e,l){return(0,Z.jsx)(c.Z.Item,{name:e.Id,label:e.Description,rules:[{required:e.Required,message:"".concat(e.Description," is required")}],className:"col-span-12 lg:col-span-7 mb-0",children:(0,Z.jsx)(h.Z,{fieldNames:{value:"Id",label:"Description"},filterOption:function(e,l){var t;return(null!==(t=null===l||void 0===l?void 0:l.Description)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0,options:e.details})},"g-fields-".concat(l))}))})}],xa=[{type:"component",component:(0,Z.jsx)(c.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.NationalityId!==l.NationalityId},children:function(e){e.getFieldValue;var l,t,a,n,i,o,r,s,d,u,m,p,f,h,x,g,D,b,j,N,I=null===(l=ra.referData)||void 0===l||null===(t=l.nationalities)||void 0===t?void 0:t.find((function(e){return e.value===Wt.getFieldValue("NationalityId")}));return"MN"!==(null===I||void 0===I?void 0:I.Code)&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(c.Z.Item,{label:null===(a=ra.referData)||void 0===a||null===(n=a.profileFields.PassportNumber)||void 0===n?void 0:n.Label,name:"PassportNumber",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(i=ra.referData)||void 0===i||null===(o=i.profileFields.PassportExpiry)||void 0===o?void 0:o.FieldRequired,message:"".concat(null===(r=ra.referData)||void 0===r||null===(s=r.profileFields.PassportNumber)||void 0===s?void 0:s.Label," is required")}],children:(0,Z.jsx)(v.Z,{})}),(0,Z.jsx)(c.Z.Item,{label:null===(d=ra.referData)||void 0===d||null===(u=d.profileFields.PassportName)||void 0===u?void 0:u.Label,name:"PassportName",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(m=ra.referData)||void 0===m||null===(p=m.profileFields.PassportExpiry)||void 0===p?void 0:p.FieldRequired,message:"".concat(null===(f=ra.referData)||void 0===f||null===(h=f.profileFields.PassportName)||void 0===h?void 0:h.Label," is required")},{pattern:ae,message:"The input is not valid name!"}],children:(0,Z.jsx)(v.Z,{})}),(0,Z.jsx)(c.Z.Item,{label:null===(x=ra.referData)||void 0===x||null===(g=x.profileFields.PassportExpiry)||void 0===g?void 0:g.Label,name:"PassportExpiry",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(D=ra.referData)||void 0===D||null===(b=D.profileFields.PassportExpiry)||void 0===b?void 0:b.FieldRequired,message:"".concat(null===(j=ra.referData)||void 0===j||null===(N=j.profileFields.PassportExpiry)||void 0===N?void 0:N.Label," is required")}],children:(0,Z.jsx)(F.Z,{})})]})}})},{label:"Passport Image",name:"PassportRawImage",className:"col-span-12 lg:col-span-7 mb-0",type:"image"}],ga=[{name:"PassportNumber",type:"image"},{name:"PassportName",type:"image"},{name:"PassportExpiry",type:"date"},{name:"PassportImage",type:"image"}],Da=function(e){var l=0;return ia&&ia.map((function(t){null!==e&&void 0!==e&&e.find((function(e){return e.name===t.name[0]}))&&l++})),l>0&&(0,Z.jsx)(j.ErrorTabElement,{children:l})},ba=[{label:(0,Z.jsxs)("div",{className:"font-normal",children:["Personal ",Da([].concat(ma,[{name:"NRN"}]))]}),key:0,forceRender:!0,children:(0,Z.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,Z.jsx)(j.FormItemRender,{fields:ma,form:Wt,editData:ra.userProfileData},"t-item-1c")},"t-item-0")},{label:(0,Z.jsxs)("div",{children:["On Site ",Da(pa)]}),key:1,forceRender:!0,children:(0,Z.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,Z.jsx)(j.FormItemRender,{fields:pa,form:Wt,editData:ra.userProfileData},"t-item-2c")},"t-item-1")},{label:(0,Z.jsxs)("div",{children:["Off Site ",Da([].concat(fa,[{name:"PersonalMobile"}]))]}),key:2,forceRender:!0,children:(0,Z.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,Z.jsx)(j.FormItemRender,{fields:fa,form:Wt,editData:ra.userProfileData},"t-item-3c")},"t-item-2")},"DataApproval"===(null===(Ut=ra.userInfo)||void 0===Ut?void 0:Ut.Role)?{label:(0,Z.jsxs)("div",{children:["Group ",Da(va)]}),key:3,forceRender:!0,children:(0,Z.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,Z.jsx)(j.FormItemRender,{fields:ha,form:Wt,editData:ra.userProfileData},"t-item-4c")},"t-item-3")}:null,{label:(0,Z.jsxs)("div",{children:["Citizenship ",Da(ga)]}),key:4,forceRender:!0,children:(0,Z.jsx)("div",{className:"grid grid-cols-12 gap-x-5 gap-y-2 mt-5",children:(0,Z.jsx)(j.FormItemRender,{fields:xa,form:Wt,editData:ra.userProfileData},"t-item-5c")},"t-item-4")}];return(0,Z.jsxs)(Z.Fragment,{children:[ra.customLoading?(0,Z.jsx)("div",{className:"animate-skeleton h-[400px] flex rounded-ot shadow-md col-span-12"}):(0,Z.jsx)("div",{className:"bg-white rounded-ot p-4 col-span-12 shadow-md mb-1 ".concat(zt),children:(0,Z.jsx)(c.Z,(0,a.Z)((0,a.Z)({form:Wt},ie),{},{labelAlign:"left",onFinish:function(e){oa(null),Bt()},className:"bg-white rounded-lg",onFinishFailed:function(e){e&&(oa(e.errorFields),ca.error({duration:4,btn:!1,closeIcon:!1,description:"Please fill in all required fields of profile information"}),null===Ht||void 0===Ht||Ht.current.scrollIntoView())},scrollToFirstError:!0,children:(0,Z.jsx)(X.Z,{defaultActiveKey:"1",type:"card",size:"middle",items:ba,activeKey:_t,onTabClick:function(e){return Jt(e)}})}))}),ua]})};var re=function(e){var l=e.errordata,t=[{label:"",name:"FullName",alignment:"left",wrap:!0,cellRender:function(e){var l,t;return(0,Z.jsx)("div",{className:"flex items-center",children:(0,Z.jsx)(ee.Link,{to:"/tas/people/search/".concat(null===(l=e.data)||void 0===l?void 0:l.EmployeeId),children:(0,Z.jsxs)("span",{className:"text-blue-500 hover:underline whitespace-normal",children:[e.value," (",null===(t=e.data)||void 0===t?void 0:t.EmployeeId,")"]})})})}},{label:"ADAccount",name:"ADAccount",alignment:"left",cellRender:function(e){return(0,Z.jsx)("div",{children:"boolean"===typeof e.value?e.value?"":(0,Z.jsx)(B.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})}},{label:"SAP ID",name:"SAPID",alignment:"center",width:"60px",cellRender:function(e){return(0,Z.jsx)("div",{children:"boolean"===typeof e.value?e.value?"":(0,Z.jsx)(B.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})}},{label:"Mobile",name:"Mobile",alignment:"center",width:"60px",cellRender:function(e){return(0,Z.jsx)("div",{children:"boolean"===typeof e.value?e.value?"":(0,Z.jsx)(B.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})}},{label:"NRN",name:"NRN",alignment:"center",width:"50px",cellRender:function(e){return(0,Z.jsx)("div",{children:"boolean"===typeof e.value?e.value?"":(0,Z.jsx)(B.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})}}];return(0,Z.jsx)(j.Table,{data:l,columns:t,containerClass:"shadow-none border",pager:!1})},se=t(73030),de=[{label:"Group",name:"GroupName"},{label:"Current Position",name:"CurrentPosition",alignment:"left",cellRender:function(e){return(0,Z.jsx)("div",{children:0===e.rowIndex?(0,Z.jsx)(g.Z,{style:{color:"#e57200"}}):""})}}],ce={marginTop:16},ue=function(e){return e.map((function(e){return{key:e.title,title:e.title}}))};var me=function(){var e=(0,s.useState)(null),l=(0,r.Z)(e,2),t=l[0],g=l[1],F=(0,s.useState)(null),N=(0,r.Z)(F,2),y=N[0],C=N[1],R=(0,s.useState)(null),L=(0,r.Z)(R,2),V=L[0],E=L[1],P=(0,s.useState)(0),M=(0,r.Z)(P,2),k=M[0],Y=M[1],G=(0,s.useState)(!1),O=(0,r.Z)(G,2),B=O[0],H=O[1],W=(0,s.useState)([]),$=(0,r.Z)(W,2),X=$[0],_=$[1],J=(0,s.useState)(null),K=(0,r.Z)(J,2),Q=K[0],ee=K[1],le=(0,s.useState)(!1),te=(0,r.Z)(le,2),ae=te[0],ne=te[1],ie=(0,s.useState)(null),me=(0,r.Z)(ie,2),pe=me[0],fe=me[1],ve=(0,s.useState)(!0),he=(0,r.Z)(ve,2),xe=he[0],ge=he[1],De=(0,s.useState)({documentData:{},flightData:{},files:[]}),be=(0,r.Z)(De,2),je=be[0],Fe=(be[1],c.Z.useForm()),Ne=(0,r.Z)(Fe,1)[0],Ie=c.Z.useForm(),ye=(0,r.Z)(Ie,1)[0],Se=c.Z.useForm(),Te=(0,r.Z)(Se,1)[0],Ce=u.ZP.useNotification(),Ze=(0,r.Z)(Ce,2),Re=Ze[0],we=Ze[1],Le=(0,s.useRef)(null),qe=(0,s.useContext)(I.V).action,Ve=(0,T.s0)(),Ee=(0,T.UO)().empId;(0,s.useEffect)((function(){Me()}),[]),(0,s.useEffect)((function(){t&&Pe()}),[t]);var Pe=function(e){(0,d.Z)({method:"get",url:"/tas/requestgroupconfig/groupandmembers/bytype/Site Travel?empId=".concat(Ee)}).then((function(e){fe(e.data);var l=e.data.groups[0],t=(0,o.Z)(e.data.groups);t.unshift({GroupName:"Requester",id:0}),t.push({GroupName:"Completed",id:99999}),C(t),Ne.setFieldValue("files",[]);var a=[];l.groupMembers.map((function(e){a.push({value:e.employeeId,label:e.fullName})})),Ne.setFieldValue("assignEmployeeOptions",a),Ne.setFieldValue("nextGroupName",null===l||void 0===l?void 0:l.GroupName),Ne.setFieldValue("nextGroupId",null===l||void 0===l?void 0:l.id),ee(l)})).finally((function(){ge(!1)}))},Me=function(){(0,d.Z)({method:"get",url:"tas/employee/profile/".concat(Ee)}).then((function(e){qe.saveUserProfileData(e.data),g(e.data)})).catch((function(e){}))},ke=(0,s.useMemo)((function(){return{1:(0,Z.jsx)(U,{form:Ne}),2:(0,Z.jsx)(w,{data:null,form:ye}),3:(0,Z.jsx)(q,{form:Ne})}}),[Ne,ye]),Ye=(0,s.useMemo)((function(){return[{title:"Choose Request Type",content:(0,Z.jsx)("div",{className:"flex flex-col items-start gap-4 p-4",children:(0,Z.jsx)(m.ZP.Group,{onChange:function(e){E(e.target.value),Y((function(e){return e+1}))},children:(0,Z.jsxs)(p.Z,{direction:"vertical",children:[(0,Z.jsx)(m.ZP,{value:1,children:"New Travel Request"}),1===(null===t||void 0===t?void 0:t.Active)?(0,Z.jsx)(m.ZP,{value:2,children:"Reschedule Existing Travel"}):null,1===(null===t||void 0===t?void 0:t.Active)?(0,Z.jsx)(m.ZP,{value:3,children:"Remove Existing Travel"}):null]})})})},{title:"Form",content:(0,Z.jsx)("div",{children:ke[V]})}]}),[t,V,ye,Ne]),Ae=function(){var e=Ne.getFieldsValue();(0,d.Z)({method:"post",url:"tas/requestsitetravel/addtravel",data:{documentData:{comment:e.comment,employeeId:Ee,action:"Submitted",assignedEmployeeId:e.assignedEmployeeId,nextGroupId:e.nextGroupId},flightData:{inScheduleId:"IN"===e.firstTransport.Direction?e.firstTransport.flightId:e.lastTransport.flightId,outScheduleId:"OUT"===e.firstTransport.Direction?e.firstTransport.flightId:e.lastTransport.flightId,inScheduleGoShow:"IN"===e.firstTransport.Direction?e.firstTransport.GoShow:e.lastTransport.GoShow,outScheduleGoShow:"OUT"===e.firstTransport.Direction?e.firstTransport.GoShow:e.lastTransport.GoShow,departmentId:e.DepartmentId,shiftId:e.ShiftId,employerId:e.EmployerId,positionId:e.PositionId,costcodeId:e.CostCodeId,Reason:e.Reason},files:e.files,skipMailNotification:!!e.skipMailNotification}}).then((function(e){Ve("/request/task")})).catch((function(e){ne(!1)}))},Ge=function(){var e=Ne.getFieldsValue();ne(!0),(0,d.Z)({method:"post",url:"tas/requestsitetravel/addtravel/checkduplicate",data:{employeeId:Ee,inScheduleId:"IN"===e.firstTransport.Direction?e.firstTransport.flightId:e.lastTransport.flightId,outScheduleId:"OUT"===e.firstTransport.Direction?e.firstTransport.flightId:e.lastTransport.flightId}}).then((function(e){_(e.data),0===e.data.length?1===V&&0===(null===t||void 0===t?void 0:t.Active)?function(){var e,l,t=Te.getFieldsValue(),a=[],o=new FormData;Object.keys(t).map((function(e){isNaN(e)?"PassportRawImage"!==e&&"SiteContactEmployeeId"!==e?"Gender"===e?o.append(e,t[e]?1:0):"CommenceDate"===e||"CompletionDate"===e?o.append(e,t[e]?S()(t[e]).format("YYYY-MM-DD"):""):o.append(e,t[e]?t[e]:""):"SiteContactEmployeeId"===e&&("string"===typeof t[e]?o.append(e,null!==t&&void 0!==t&&t.SiteContactEmployeeId?null===t||void 0===t?void 0:t.SiteContactEmployeeId:""):o.append(e,t[e]?t[e]:"")):a.push({GroupMasterId:parseInt(e),GroupDetailId:t[e]?t[e]:""})})),o.append("PassportRawImage",null!==(e=t.PassportRawImage)&&void 0!==e&&e.file?null===(l=t.PassportRawImage)||void 0===l?void 0:l.file:""),o.append("id",Ee),(0,d.Z)({method:"patch",url:"tas/employee",data:o}).then(function(){var e=(0,i.Z)((0,n.Z)().mark((function e(l){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===a||void 0===a?void 0:a.length)>0?(0,d.Z)({method:"post",url:"tas/groupmembers/".concat(Ee),data:a}).then((function(e){Ae()})).catch((function(e){ne(!1)})):Ae();case 1:case"end":return e.stop()}}),e)})));return function(l){return e.apply(this,arguments)}}()).catch((function(e){ne(!1);var l=JSON.parse(e.response.data.message);l&&l.length>0&&Re.error({message:"Validation Warning",duration:0,description:(0,Z.jsx)("div",{children:(0,Z.jsx)(re,{errordata:l})})})}))}():Ae():(ne(!1),H(!0))})).catch((function(){ne(!1)}))},Oe=function(e){ne(!0);var l={existingScheduleId:ye.getFieldValue("existingScheduleId"),ExistingScheduleIdNoShow:ye.getFieldValue("ExistingScheduleIdNoShow"),reScheduleId:ye.getFieldValue("ReScheduleId"),ReScheduleGoShow:ye.getFieldValue("ReScheduleGoShow"),shiftId:ye.getFieldValue("ShiftId"),Reason:ye.getFieldValue("Reason")};(0,d.Z)({method:"post",url:"tas/requestsitetravel/reschedule/checkduplicate",data:{existingScheduleId:l.existingScheduleId,reScheduleId:l.reScheduleId,employeeId:Ee}}).then((function(t){_(t.data),0===t.data.length?(0,d.Z)({method:"post",url:"tas/requestsitetravel/reschedule",data:{documentData:{comment:e.comment,employeeId:Ee,action:"Submitted",assignedEmployeeId:e.assignedEmployeeId,nextGroupId:e.nextGroupId},flightData:l,files:e.files,skipMailNotification:!!e.skipMailNotification}}).then((function(e){Ve("/request/task")})).catch((function(e){})):(H(!0),ne(!1))})).catch((function(){ne(!1)}))},Ue=function(e){var l,t;ne(!0),(0,d.Z)({method:"post",url:"tas/requestsitetravel/remove/checkduplicate",data:{employeeId:Ee,firstScheduleId:null===e||void 0===e||null===(l=e.firstTransport)||void 0===l?void 0:l.firstScheduleId,lastScheduleId:null===e||void 0===e||null===(t=e.lastTransport)||void 0===t?void 0:t.lastScheduleId,Reason:null===e||void 0===e?void 0:e.Reason}}).then((function(l){var t,a,n,i;(_(l.data),0===l.data.length)?(0,d.Z)({method:"post",url:"tas/requestsitetravel/removetravel",data:{documentData:{comment:e.comment,employeeId:Ee,action:"Submitted",assignedEmployeeId:e.assignedEmployeeId,nextGroupId:e.nextGroupId},flightData:{firstScheduleId:null===e||void 0===e||null===(t=e.firstTransport)||void 0===t?void 0:t.firstScheduleId,lastScheduleId:null===e||void 0===e||null===(a=e.lastTransport)||void 0===a?void 0:a.lastScheduleId,FirstScheduleNoShow:null===e||void 0===e||null===(n=e.firstTransport)||void 0===n?void 0:n.NoShow,LastScheduleNoShow:null===e||void 0===e||null===(i=e.lastTransport)||void 0===i?void 0:i.NoShow,shiftId:e.ShiftId,CostCodeId:e.CostCodeId,Reason:e.Reason},files:e.files,skipMailNotification:!!e.skipMailNotification}}).then((function(e){Ve("/request/task")})).catch((function(e){ne(!1)})):(H(!0),ne(!1))})).catch((function(){ne(!1)}))};return(0,Z.jsxs)("div",{className:"px-6 py-5 rounded-ot shadow-card bg-white",children:[(0,Z.jsx)(j.Button,{className:"mb-3",onClick:function(){return Ve("/request/sitetravel")},icon:(0,Z.jsx)(D.Z,{}),children:"Back"}),(0,Z.jsxs)("div",{className:(0,se.m6)("grid grid-cols-1 gap-4",xe?"grid":"hidden"),children:[(0,Z.jsx)(j.Skeleton,{className:"h-[200px]"}),(0,Z.jsx)(j.Skeleton,{className:"h-[200px]"}),(0,Z.jsx)(j.Skeleton,{className:"h-[300px]"}),(0,Z.jsx)(j.Skeleton,{className:"h-[200px]"})]}),(0,Z.jsxs)("div",{className:xe?"hidden":"block",children:[(0,Z.jsx)(j.Accordion,{title:"Profile",className:"border",children:(0,Z.jsx)("div",{className:"p-3",children:(0,Z.jsx)(z.Z,{profileData:t,pendingInfo:pe})})}),(0,Z.jsx)("div",{className:"flex flex-col gap-4 mt-4",children:(0,Z.jsxs)(j.Form,{className:"grid grid-cols-12 gap-y-5",size:"small",form:Ne,scrollToFirstError:!0,initValues:{EmergencyContactMobile:"",EmergencyContactName:"",FrequentFlyer:null,PassportExpiry:null,PassportName:"",PassportNumber:"",assignedEmployeeId:null,nextGroupId:null,nextGroupName:"null",flightData:[],accommodationData:[],files:[],assignEmployeeOptions:[],DocumentRoute:[]},onFinish:function(e){1===V?0===(null===t||void 0===t?void 0:t.Active)?Te.submit():Ge(e):2===V?ye.validateFields().then((function(){Oe(e,ye.getFieldsValue())})).catch((function(){ye.scrollToField("ReScheduleDescription")})):3===V&&Ue(e)},children:[1===V&&0===(null===t||void 0===t?void 0:t.Active)?(0,Z.jsx)(j.Accordion,{className:"col-span-12 border rounded-ot overflow-hidden mt-3",title:"Profile",children:(0,Z.jsx)("div",{className:"flex flex-col gap-5",ref:Le,children:(0,Z.jsx)(oe,{data:t,form:Te,containerRef:Le,onSubmit:Ge,className:"shadow-none border-none"})})}):null,(0,Z.jsx)(j.Accordion,{title:"Travel",className:"border col-span-12",children:(0,Z.jsxs)("div",{className:"p-4",children:[(0,Z.jsx)(f.Z,{items:ue(Ye),current:k,size:"small"}),(0,Z.jsx)("div",{style:ce,children:Ye[k].content}),(0,Z.jsx)("div",{className:"mt-6 flex justify-between items-center",children:k>0&&(0,Z.jsx)(j.Button,{style:{margin:"0 8px"},onClick:function(){Y((function(e){return e-1}))},children:"Previous"})})]})}),(0,Z.jsx)(j.Form.Item,{className:"col-span-12 mb-0",name:"files",children:(0,Z.jsx)(A,{mainForm:Ne})}),(0,Z.jsx)(j.Accordion,{title:"Request Document",className:"border col-span-12",children:(0,Z.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,Z.jsxs)("div",{children:["Comments:",(0,Z.jsx)(j.Form.Item,{className:"m-0",name:"comment",children:(0,Z.jsx)(v.Z.TextArea,{autoSize:{minRows:3,maxRows:5},maxLength:300,showCount:!0})})]}),(0,Z.jsxs)("div",{className:"flex gap-10",children:[(0,Z.jsx)(j.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.nextGroupName!==l.nextGroupName},children:function(e){var l=e.getFieldValue;return(0,Z.jsxs)(j.Form.Item,{name:"nextGroupId",className:"mb-0",children:["Next Approval: ",(0,Z.jsx)("span",{className:"font-bold",children:l("nextGroupName")})]})}}),"linemanager"===(null===Q||void 0===Q?void 0:Q.GroupTag)&&(0,Z.jsx)(j.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.assignEmployeeOptions!==l.assignEmployeeOptions},children:function(e){var l=e.getFieldValue;return(0,Z.jsx)(j.Form.Item,{name:"assignedEmployeeId",label:"Send to:",rules:[{required:!0,message:"Assign Employee is required"}],className:"w-[300px] mb-0",children:(0,Z.jsx)(h.Z,{size:"small",options:l("assignEmployeeOptions"),className:"w-[200px]",popupMatchSelectWidth:!1,filterOption:function(e,l){var t;return(null!==(t=null===l||void 0===l?void 0:l.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0})})}}),(0,Z.jsx)(j.Form.Item,{name:"skipMailNotification",valuePropName:"checked",className:"w-[300px] mb-0",children:(0,Z.jsxs)(x.Z,{children:[(0,Z.jsx)("span",{className:"text-xs",children:"Skip Mail Notifcation"}),(0,Z.jsx)(j.Tooltip,{title:"If checked, email notifications to the assigned Line Manager will not be sent for this request.",children:(0,Z.jsx)(b.Z,{className:"text-gray-400 ml-2"})})]})})]})]})}),(0,Z.jsx)(j.Accordion,{title:"Document Route",className:"border col-span-12",children:(0,Z.jsx)("div",{className:"flex flex-col gap-4 p-4",children:(0,Z.jsx)(j.Table,{data:y,columns:de,pager:!1,containerClass:"shadow-none border border-gray-300"})})})]})}),(0,Z.jsxs)("div",{className:"flex justify-end mt-4 gap-4",children:[(0,Z.jsx)(j.Button,{type:"primary",onClick:function(){return Ne.submit()},loading:ae,children:"Submit"}),(0,Z.jsx)(j.Button,{onClick:function(){(0,d.Z)({method:"post",url:"tas/requestdocument/sitetravel",data:(0,a.Z)((0,a.Z)({},je),{},{travelData:(0,a.Z)((0,a.Z)({},je.travelData),{},{employeeId:Ee,action:"Saved"})})}).then((function(e){Ve("/request/task")})).catch((function(e){}))},disabled:ae,children:"Draft"}),(0,Z.jsx)(j.Button,{disabled:ae,children:"Cancel"})]}),(0,Z.jsx)(j.DuplicatedDocument,{data:X,open:B,onCancel:function(){return H(!1)}}),we]})]})}},24957:function(e,l,t){t.d(l,{Z:function(){return s}});var a=t(87462),n=t(47313),i={icon:function(e,l){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:l}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:e}}]}},name:"close-circle",theme:"twotone"},o=t(17469),r=function(e,l){return n.createElement(o.Z,(0,a.Z)({},e,{ref:l,icon:i}))};var s=n.forwardRef(r)},66736:function(e,l,t){t.d(l,{Z:function(){return s}});var a=t(87462),n=t(47313),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},o=t(17469),r=function(e,l){return n.createElement(o.Z,(0,a.Z)({},e,{ref:l,icon:i}))};var s=n.forwardRef(r)}}]);