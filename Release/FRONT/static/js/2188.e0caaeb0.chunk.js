"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[2188],{1710:function(e,l,a){var i=a(29439),t=a(56573),n=a(47313),s=a(2135),o=a(26672),r=a(22539),d=a(63733),c=a(10658),u=a.n(c),m=a(42614),p=a(2880),v=a(1522),x=a(41612),f=a(21521),h=a(18637),b=a(29074),g=a(15413),j=a(58821),N=a(82508),y=a(59748),D=a(14261),C=a(43295),I=a.n(C),q=a(46417),F=function(e){if("Non Site Travel"===e.data.DocumentType)return"/request/task/nonsitetravel/".concat(e.data.Id);if("Profile Changes"===e.data.DocumentType)return"/request/task/profilechanges/".concat(e.data.Id);if("De Mobilisation"===e.data.DocumentType)return"/request/task/de-mobilisation/".concat(e.data.Id);if("Site Travel"===e.data.DocumentType){if("ADD"===e.data.DocumentTag)return"/request/task/sitetravel/addtravel/".concat(e.data.Id);if("RESCHEDULE"===e.data.DocumentTag)return"/request/task/sitetravel/reschedule/".concat(e.data.Id);if("REMOVE"===e.data.DocumentTag)return"/request/task/sitetravel/remove/".concat(e.data.Id)}},L=[{label:"Travel Date",name:"TravelDate",cellRender:function(e){return(0,q.jsx)("div",{children:u()(e.value).format("YYYY-MM-DD ddd ")})}},{label:"Favor Time",name:"FavorTime"},{label:"Depart Location",name:"DepartLocationName",alignment:"left"},{label:"Arrive Location",name:"ArriveLocationName",alignment:"left"},{label:"Comment",name:"Comment"},{label:"ETD",name:"ETD",alignment:"left",cellRender:function(e){return(0,q.jsx)(D.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})}}],P=[{label:"",name:"Direction"},{label:"Date",name:"EventDate",cellRender:function(e){return(0,q.jsx)("div",{children:u()(e.value).format("YYYY-MM-DD ddd HH:mm")})}},{label:"Description",name:"Description"},{label:"Status",name:"Status",cellRender:function(e){return(0,q.jsx)(b.Z,{color:R[e.value],children:e.value})}}],Z=[{label:"Type",name:"DocumentType"},{label:"Date",name:"RequestedDate",cellRender:function(e){return(0,q.jsx)("div",{children:u()(e.value).format("YYYY-MM-DD ddd HH:mm")})}},{label:"Description",name:"Description"},{label:"#",name:"Id",alignment:"left",cellRender:function(e){return(0,q.jsx)("div",{className:"flex items-center text-blue-500 hover:underline",children:(0,q.jsx)(s.Link,{to:F(e),target:"_blank",children:e.value})})}},{label:"Status",name:"CurrentStatus",cellRender:function(e){return(0,q.jsx)(b.Z,{color:R[e.value],children:e.value})}}],R={Confirmed:"green",Waiting:"green",Submitted:"orange"};l.Z=function(e){var l,a,c=e.employeeId,u=e.profileData,b=e.pendingInfo,D=(0,n.useState)(null),C=(0,i.Z)(D,2),F=C[0],R=C[1],S=(0,n.useState)(!0),E=(0,i.Z)(S,2),T=E[0],w=E[1],M=(0,n.useState)(!1),k=(0,i.Z)(M,2),A=k[0],Y=k[1],G=(0,n.useState)(null),z=(0,i.Z)(G,2),V=z[0],O=z[1],U=(0,n.useState)(!1),B=(0,i.Z)(U,2),H=B[0],$=B[1],W=(0,n.useContext)(m.V),_=W.state,K=W.action,J=(0,n.useRef)(null);(0,n.useEffect)((function(){c?X():u&&(K.saveUserProfileData(u),R(u),w(!1))}),[c,u,K]),(0,n.useEffect)((function(){0!==_.ChangedFlight&&X()}),[_.ChangedFlight]);var X=function(){(0,t.Z)({method:"get",url:"tas/employee/".concat(c)}).then((function(e){K.saveUserProfileData(e.data),R(e.data)})).catch((function(e){})).then((function(){return w(!1)}))},Q=(0,n.useMemo)((function(){if(F){if(F.Gender&&F.Active)return v;if(F.Gender&&!F.Active)return x;if(!F.Gender&&F.Active)return f;if(!F.Gender&&!F.Active)return h}}),[F]);return(0,q.jsxs)("div",{children:[T?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("div",{className:"animate-skeleton h-[130px] flex rounded-ot mb-5 border"}),(0,q.jsx)("div",{className:"animate-skeleton h-[300px] flex rounded-ot border"})]}):F?(0,q.jsxs)("div",{className:"grid grid-cols-12 gap-5 relative",children:[(0,q.jsxs)("div",{className:"rounded-ot p-4 flex justify-between col-span-12 border border-gray-300 sticky top-0 z-10 shadow-md bg-white",children:[(0,q.jsxs)("div",{className:"flex gap-5",children:[(0,q.jsx)(s.Link,{className:"bg-gray-100 h-[80px] w-[80px] flex items-center justify-center rounded-ot border overflow-hidden cursor-pointer",to:"/tas/people/search/".concat(null===F||void 0===F?void 0:F.Id),children:(0,q.jsx)("img",{alt:"profile-img",src:Q})}),(0,q.jsxs)("div",{children:[(0,q.jsxs)("span",{className:"text-start lg:text-lg font-bold flex gap-1 items-center",children:[null===F||void 0===F?void 0:F.Firstname," ",null===F||void 0===F?void 0:F.Lastname," (",null===F||void 0===F?void 0:F.Id,")",null!==F&&void 0!==F&&F.OnSiteStatus?(0,q.jsx)(p.Tooltip,{title:"Today on Site",children:(0,q.jsx)("span",{children:(0,q.jsx)("div",{className:"ml-2 h-3 w-3 bg-green-400 rounded-full relative z-0",children:(0,q.jsx)("div",{className:"absolute animate-ping inset-0 bg-green-400 rounded-full z-10"})})})}):null]}),(0,q.jsxs)("div",{className:"flex gap-5 divide-x mt-2",children:[(0,q.jsxs)("div",{className:"text-[#718096] text-xs flex flex-col gap-1",children:[(0,q.jsx)(p.Tooltip,{Tooltip:!0,title:"Nationality",children:(0,q.jsxs)("div",{className:"flex gap-3 items-center cursor-default",children:[(0,q.jsx)("div",{children:(0,q.jsx)(o.FaPassport,{size:15})}),(0,q.jsx)("div",{children:null!==F&&void 0!==F&&F.NationalityName?null===F||void 0===F?void 0:F.NationalityName:(0,q.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})}),(0,q.jsx)(p.Tooltip,{Tooltip:!0,title:"".concat(null!==F&&void 0!==F&&F.EmployerCurrentStatus?"Temporary":"Permanent"," Employer name"),children:(0,q.jsxs)("div",{className:"flex gap-3 items-center cursor-default",children:[(0,q.jsx)("div",{children:(0,q.jsx)(o.FaRegBuilding,{size:15})}),(0,q.jsxs)("div",{children:[(0,q.jsx)(g.Z,{className:"mr-1",status:F.EmployerCurrentStatus?"warning":"success"}),null!==F&&void 0!==F&&F.EmployerName?null===F||void 0===F?void 0:F.EmployerName:(0,q.jsx)("span",{className:"text-gray-400",children:"Not registered"})]})]})}),(0,q.jsx)(p.DepartmentTooltip,{data:F,id:null===F||void 0===F?void 0:F.DepartmentId,children:(0,q.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,q.jsx)("div",{children:(0,q.jsx)(o.FaUsers,{size:15})}),(0,q.jsxs)("div",{children:[(0,q.jsx)(g.Z,{className:"mr-1",status:F.DepartmentCurrentStatus?"warning":"success"}),null!==F&&void 0!==F&&F.DepartmentName?null===F||void 0===F?void 0:F.DepartmentName:(0,q.jsx)("span",{className:"text-gray-400",children:"Not registered"})]})]})}),(0,q.jsx)(p.Tooltip,{title:"".concat(F.CostCodeCurrentStatus?"Temporary":"Permanent"," Cost Code"),className:"flex items-center gap-3 cursor-default",children:(0,q.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,q.jsx)("div",{children:(0,q.jsx)(r.c85,{size:15})}),(0,q.jsxs)("div",{children:[(0,q.jsx)(g.Z,{className:"mr-1",status:F.CostCodeCurrentStatus?"warning":"success"}),null!==F&&void 0!==F&&F.CostCodeName?null===F||void 0===F?void 0:F.CostCodeName:(0,q.jsx)("span",{className:"text-gray-400",children:"Not registered"})]})]})}),(0,q.jsx)(p.Tooltip,{title:"Mobile",className:"flex items-center gap-3 cursor-default",children:(0,q.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,q.jsx)("div",{children:(0,q.jsx)(r.IXo,{size:15})}),(0,q.jsx)("div",{children:null!==F&&void 0!==F&&F.PersonalMobile?null===F||void 0===F?void 0:F.PersonalMobile:(0,q.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})})]}),(0,q.jsxs)("div",{className:"pl-5 text-[#718096] text-xs flex flex-col gap-1",children:[(0,q.jsx)(p.Tooltip,{title:"".concat(F.PositionCurrentStatus?"Temporary":"Permanent"," Position name"),className:"flex items-center gap-3 cursor-default",children:(0,q.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,q.jsx)("div",{children:(0,q.jsx)(o.FaBriefcase,{size:15})}),(0,q.jsxs)("div",{children:[(0,q.jsx)(g.Z,{className:"mr-1",status:F.PositionCurrentStatus?"warning":"success"}),null!==F&&void 0!==F&&F.PositionName?null===F||void 0===F?void 0:F.PositionName:(0,q.jsx)("span",{className:"text-gray-400",children:"Not registered"})]})]})}),(0,q.jsx)(p.Tooltip,{title:"SAP ID #",className:"flex items-center gap-3 cursor-default",children:(0,q.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,q.jsx)("div",{children:(0,q.jsx)(d.Lhg,{size:15})}),(0,q.jsx)("div",{children:null===F||void 0===F?void 0:F.SAPID})]})}),(0,q.jsx)(p.Tooltip,{title:"Room number",className:"flex items-center gap-3 cursor-default",children:(0,q.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,q.jsx)("div",{children:(0,q.jsx)(o.FaHouseUser,{size:15})}),(0,q.jsx)("div",{children:null!==F&&void 0!==F&&F.RoomNumber?"".concat(null===F||void 0===F?void 0:F.RoomNumber):(0,q.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})}),(0,q.jsxs)(p.Tooltip,{title:"Camp & Room Type",className:"flex items-start gap-3 cursor-default",children:[(0,q.jsx)("div",{children:(0,q.jsx)(j.hh$,{size:15})}),(0,q.jsx)("div",{children:null===F||void 0===F?void 0:F.CampRoomType})]}),null!==F&&void 0!==F&&F.CurrentRoomNumber?(0,q.jsx)(p.Tooltip,{title:"Current Room",className:"flex items-center gap-3 cursor-default",children:(0,q.jsxs)("div",{className:"flex items-center gap-3 cursor-default text-success",children:[(0,q.jsx)("div",{children:(0,q.jsx)(o.FaHouseUser,{size:15})}),(0,q.jsx)("div",{children:null===F||void 0===F?void 0:F.CurrentRoomNumber})]})}):null]}),(0,q.jsxs)("div",{className:"pl-5 text-[#718096] text-xs flex flex-col gap-1",children:[(0,q.jsx)(p.Tooltip,{title:"Location",className:"flex items-center gap-3 cursor-default",children:(0,q.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,q.jsx)("div",{children:(0,q.jsx)(o.FaLocationArrow,{size:15})}),(0,q.jsx)("div",{children:null!==F&&void 0!==F&&F.LocationName?null===F||void 0===F?void 0:F.LocationName:(0,q.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})}),(0,q.jsx)(p.Tooltip,{title:"Resource Type",className:"flex items-center gap-3 cursor-default",children:(0,q.jsxs)("div",{className:"flex items-center gap-3 cursor-default",children:[(0,q.jsx)("div",{children:(0,q.jsx)(o.FaUserAlt,{size:14})}),(0,q.jsx)("div",{children:null!==F&&void 0!==F&&F.PeopleTypeName?null===F||void 0===F?void 0:F.PeopleTypeName:(0,q.jsx)("span",{className:"text-gray-400",children:"Not registered"})})]})}),(0,q.jsx)(p.Tooltip,{title:"Gender",children:(0,q.jsx)("div",{className:"flex items-center gap-3 cursor-default",children:(0,q.jsx)("div",{children:null!==F&&void 0!==F&&F.Gender?"Male":"Female"})})})]})]})]})]}),(0,q.jsx)("div",{className:"px-5 py-2",children:(0,q.jsx)(g.Z,{count:null===b||void 0===b?void 0:b.PendingRequests,children:(0,q.jsx)("button",{type:"button",onClick:function(){Y(!0),function(e){$(!0),(0,t.Z)({method:"get",url:"tas/requestdocument/existingbooking/".concat(e)}).then((function(e){O(e.data)})).catch((function(e){})).then((function(){return $(!1)}))}(c)},children:(0,q.jsx)(j.$W1,{size:26})})})})]}),(0,q.jsx)("div",{className:"w-full col-span-12",children:(0,q.jsxs)("div",{className:"flex items-start gap-5",children:[(0,q.jsx)(p.VerticalCalendar,{employeeId:null===(l=_.userInfo)||void 0===l?void 0:l.Id}),(0,q.jsx)(p.FlightList,{profileData:_.userProfileData,employeeId:null===(a=_.userInfo)||void 0===a?void 0:a.Id})]})})]}):null,(0,q.jsx)(p.Modal,{open:A,title:"Existing Bookings",width:800,onCancel:function(){return Y(!1)},children:H?(0,q.jsx)("div",{className:"p-8 flex justify-center items-center",children:(0,q.jsx)(N.Z,{style:{fontSize:24}})}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)("div",{ref:J,className:"flex flex-col gap-5",children:[(0,q.jsxs)("div",{children:[(0,q.jsxs)("div",{children:[(0,q.jsx)("span",{className:"text-gray-500 ",children:"Name:"})," ",null===V||void 0===V?void 0:V.FullName," (",null===V||void 0===V?void 0:V.SAPID,")"]}),(0,q.jsxs)("div",{children:[(0,q.jsx)("span",{className:"text-gray-500",children:"Department:"})," ",null===V||void 0===V?void 0:V.Department]}),(0,q.jsxs)("div",{children:[(0,q.jsx)("span",{className:"text-gray-500",children:"Employer:"})," ",null===V||void 0===V?void 0:V.Employer]})]}),(0,q.jsx)(p.Table,{data:null===V||void 0===V?void 0:V.SiteTravel,columns:P,pager:!1,containerClass:"shadow-none border border-gray-300",title:(0,q.jsx)("div",{className:"border-b py-1 font-bold",children:"Site Travel Requests"})}),(0,q.jsx)(p.Table,{data:null===V||void 0===V?void 0:V.NonSiteTravel,columns:L,pager:!1,containerClass:"shadow-none border border-gray-300",title:(0,q.jsx)("div",{className:"border-b py-1 font-bold",children:"Non Site Travel Requests"})}),(0,q.jsx)(p.Table,{data:null===V||void 0===V?void 0:V.PendingRequest,columns:Z,pager:!1,containerClass:"shadow-none border border-gray-300",title:(0,q.jsx)("div",{className:"border-b py-1 font-bold",children:"Pending Requests"})}),(0,q.jsx)(p.Table,{data:null===V||void 0===V?void 0:V.OtherRequest,columns:Z,pager:!1,containerClass:"shadow-none border border-gray-300",tableClass:"max-h-full",title:(0,q.jsx)("div",{className:"border-b py-1 font-bold",children:"Other Requests"})})]}),(0,q.jsx)("div",{className:"flex justify-end mt-5",children:(0,q.jsx)(I(),{bodyClass:"p-5",content:function(){return J.current},trigger:function(){return(0,q.jsx)(p.Button,{type:"primary",icon:(0,q.jsx)(y.Z,{}),children:"Print"})}})})]})})]})}},92188:function(e,l,a){a.r(l),a.d(l,{default:function(){return z}});var i=a(1413),t=a(29439),n=a(47313),s=a(56573),o=a(65040),r=a(79036),d=a(14576),c=a(55333),u=a(21975),m=a(29816),p=a(23495),v=a(2880),x=a(53979),f=a(12998),h=a(93031),b=a(68197),g=a(59624),j=a(22834),N=a(74294),y=a(76047),D=a(10658),C=a.n(D),I=a(46146),q=a.n(I),F=a(69226),L=a.n(F),P=a(58467),Z=a(2135),R=a(42614),S=a(46417);C().extend(q()),C().extend(L());var E=new RegExp(/^[0-9]{8}$/),T=new RegExp(/^[0-9 +]+$/),w=new RegExp(/^[A-Za-z -]+$/g),M={labelCol:{xs:{span:24},sm:{span:12},md:{span:8},lg:{span:12},xl:{span:8},xxl:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}};var k=function(e){var l,a,r,d,c,m,p,D,I,q,F,L,k,A,Y,G,z,V,O,U,B,H,$,W,_,K,J,X,Q,ee,le,ae,ie,te,ne,se,oe,re,de,ce,ue,me,pe,ve,xe,fe,he,be,ge,je,Ne,ye,De,Ce,Ie,qe,Fe,Le,Pe,Ze,Re,Se,Ee,Te,we,Me,ke,Ae,Ye,Ge,ze,Ve,Oe,Ue,Be,He,$e,We,_e,Ke,Je,Xe,Qe,el,ll,al,il,tl,nl,sl,ol,rl,dl,cl,ul,ml,pl,vl,xl=e.form,fl=(0,n.useState)(0),hl=(0,t.Z)(fl,2),bl=hl[0],gl=hl[1],jl=(0,n.useState)(!0),Nl=(0,t.Z)(jl,2),yl=(Nl[0],Nl[1]),Dl=(0,n.useState)(!1),Cl=(0,t.Z)(Dl,2),Il=Cl[0],ql=(Cl[1],(0,n.useState)(null)),Fl=(0,t.Z)(ql,2),Ll=Fl[0],Pl=Fl[1],Zl=(0,n.useState)(!1),Rl=(0,t.Z)(Zl,2),Sl=Rl[0],El=Rl[1],Tl=(0,n.useState)(0),wl=(0,t.Z)(Tl,2),Ml=(wl[0],wl[1]),kl=(0,n.useState)(null),Al=(0,t.Z)(kl,2),Yl=(Al[0],Al[1]),Gl=(0,n.useState)([]),zl=(0,t.Z)(Gl,2),Vl=zl[0],Ol=zl[1],Ul=(0,n.useState)(!0),Bl=(0,t.Z)(Ul,2),Hl=(Bl[0],Bl[1]),$l=(0,P.UO)().employeeId,Wl=(0,n.useContext)(R.V).state,_l=f.ZP.useNotification(),Kl=(0,t.Z)(_l,2),Jl=Kl[0],Xl=Kl[1];(0,n.useEffect)((function(){xl.resetFields(),El(!1),Ql()}),[]),(0,n.useEffect)((function(){if(Wl.userProfileData){var e,l,a,t,n,s,o,r,d,c,u,m=(0,i.Z)((0,i.Z)({},Wl.userProfileData),{},{Dob:null!==(e=Wl.userProfileData)&&void 0!==e&&e.Dob?C()(null===(l=Wl.userProfileData)||void 0===l?void 0:l.Dob):null,CommenceDate:null!==(a=Wl.userProfileData)&&void 0!==a&&a.CommenceDate?C()(null===(t=Wl.userProfileData)||void 0===t?void 0:t.CommenceDate):null,CompletionDate:null!==(n=Wl.userProfileData)&&void 0!==n&&n.CompletionDate?C()(null===(s=Wl.userProfileData)||void 0===s?void 0:s.CompletionDate):null,NextRosterDate:null!==(o=Wl.userProfileData)&&void 0!==o&&o.NextRosterDate?C()(null===(r=Wl.userProfileData)||void 0===r?void 0:r.NextRosterDate):null,PassportExpiry:null!==(d=Wl.userProfileData)&&void 0!==d&&d.PassportExpiry?C()(null===(c=Wl.userProfileData)||void 0===c?void 0:c.PassportExpiry):null});null===(u=m.GroupData)||void 0===u||u.map((function(e){m[e.GroupMasterId]=e.GroupDetailId})),Yl(m),xl.setFieldsValue(m)}}),[Wl.userProfileData]);var Ql=function(){(0,s.Z)({method:"get",url:"tas/profilefield"}).then((function(e){var l={};e.data.map((function(e){l[e.ColumnName]=e})),Ol(l)})).catch((function(){})).then((function(){return Hl(!1)}))},ea=[{label:null===(l=Vl.NationalityId)||void 0===l?void 0:l.Label,name:"NationalityId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(a=Vl.NationalityId)||void 0===a?void 0:a.FieldRequired,message:"".concat(null===(r=Vl.NationalityId)||void 0===r?void 0:r.Label," is required")}],inputprops:{options:Wl.referData.nationalities}},{label:null===(d=Vl.Email)||void 0===d?void 0:d.Label,name:"Email",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(c=Vl.Email)||void 0===c?void 0:c.FieldRequired,message:"".concat(null===(m=Vl.Email)||void 0===m?void 0:m.Label," is required")},{type:"email",message:"The input is not valid E-mail!"}]},{label:null===(p=Vl.Gender)||void 0===p?void 0:p.Label,name:"Gender",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(D=Vl.Gender)||void 0===D?void 0:D.FieldRequired,message:"".concat(null===(I=Vl.Gender)||void 0===I?void 0:I.Label," is required")}],inputprops:{options:[{value:1,label:"Male"},{value:0,label:"Female"}]}},{type:"component",component:(0,S.jsx)(o.Z.Item,{label:null===(q=Vl.Dob)||void 0===q?void 0:q.Label,name:"Dob",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(F=Vl.Dob)||void 0===F?void 0:F.FieldRequired,message:"".concat(null===(L=Vl.Dob)||void 0===L?void 0:L.Label," is required")}],children:(0,S.jsx)(h.Z,{})})},{label:null===(k=Vl.Firstname)||void 0===k?void 0:k.Label,name:"Firstname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(A=Vl.Firstname)||void 0===A?void 0:A.FieldRequired,message:"".concat(null===(Y=Vl.Firstname)||void 0===Y?void 0:Y.Label," is required")}]},{label:null===(G=Vl.Lastname)||void 0===G?void 0:G.Label,name:"Lastname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(z=Vl.Lastname)||void 0===z?void 0:z.FieldRequired,message:"".concat(null===(V=Vl.Lastname)||void 0===V?void 0:V.Label," is required")}]},{label:null===(O=Vl.MFirstname)||void 0===O?void 0:O.Label,name:"MFirstname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(U=Vl.MFirstname)||void 0===U?void 0:U.FieldRequired,message:"".concat(null===(B=Vl.MFirstname)||void 0===B?void 0:B.Label," is required")}]},{label:null===(H=Vl.MLastname)||void 0===H?void 0:H.Label,name:"MLastname",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===($=Vl.MLastname)||void 0===$?void 0:$.FieldRequired,message:"".concat(null===(W=Vl.MLastname)||void 0===W?void 0:W.Label," is required")}]},{label:null===(_=Vl.CommenceDate)||void 0===_?void 0:_.Label,name:"CommenceDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date",rules:[{required:null===(K=Vl.CommenceDate)||void 0===K?void 0:K.FieldRequired,message:"".concat(null===(J=Vl.CommenceDate)||void 0===J?void 0:J.Label," is required")}],inputprops:{format:"M/D/YYYY"}},{label:"Completion Date",name:"CompletionDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date",inputprops:{format:"M/D/YYYY"}},{label:null===(X=Vl.DepartmentId)||void 0===X?void 0:X.Label,name:"DepartmentId",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(Q=Vl.DepartmentId)||void 0===Q?void 0:Q.FieldRequired,message:"".concat(null===(ee=Vl.DepartmentId)||void 0===ee?void 0:ee.Label," is required")}],type:"treeSelect",inputprops:{treeData:Wl.referData.departments,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},allowClear:!0,showSearch:!0,filterTreeNode:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.Name)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())}}},{label:null===(le=Vl.CostCodeId)||void 0===le?void 0:le.Label,name:"CostCodeId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(ae=Vl.CostCodeId)||void 0===ae?void 0:ae.FieldRequired,message:"".concat(null===(ie=Vl.CostCodeId)||void 0===ie?void 0:ie.Label," is required")}],inputprops:{options:Wl.referData.costCodes}},{label:null===(te=Vl.StateId)||void 0===te?void 0:te.Label,name:"StateId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(ne=Vl.StateId)||void 0===ne?void 0:ne.FieldRequired,message:"".concat(null===(se=Vl.StateId)||void 0===se?void 0:se.Label," is required")}],inputprops:{options:Wl.referData.states}},{type:"component",component:(0,S.jsx)(o.Z.Item,{className:"col-span-12 lg:col-span-6 mb-0",label:"AD Account",children:(0,S.jsxs)(b.Z,{gutter:8,children:[(0,S.jsx)(g.Z,{span:12,children:(0,S.jsx)(o.Z.Item,{name:"ADAccount",className:"mb-0",children:(0,S.jsx)(u.Z,{})})}),(0,S.jsx)(g.Z,{span:12,children:(0,S.jsx)(j.ZP,{htmlType:"button",disabled:!Sl,onClick:function(){(0,s.Z)({method:"post",url:"tas/employee/checkadaccount",data:{employeeId:$l,adAccount:xl.getFieldValue("ADAccount")}}).then((function(e){e.data.AdAccountValidationStatus?Jl.success({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1,description:(0,S.jsx)("div",{})}):Jl.error({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1,description:(0,S.jsx)("div",{children:e.data.EmployeeId&&(0,S.jsxs)(Z.Link,{to:"/tas/people/search/".concat(e.data.EmployeeId),className:"text-blue-500 hover:underline",children:[e.data.Firstname," ",e.data.Lastname]})})})})).catch((function(e){})).then((function(){return yl(!1)}))},children:"Account Check"})})]})},"component-ADAccount")}],la=[{label:null===(oe=Vl.EmployerId)||void 0===oe?void 0:oe.Label,name:"EmployerId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(re=Vl.EmployerId)||void 0===re?void 0:re.FieldRequired,message:"".concat(null===(de=Vl.EmployerId)||void 0===de?void 0:de.Label," is required")}],inputprops:{options:null===(ce=Wl.referData)||void 0===ce?void 0:ce.employers}},{label:null===(ue=Vl.PeopleTypeId)||void 0===ue?void 0:ue.Label,name:"PeopleTypeId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(me=Vl.PeopleTypeId)||void 0===me?void 0:me.FieldRequired,message:"".concat(null===(pe=Vl.PeopleTypeId)||void 0===pe?void 0:pe.Label," is required")}],inputprops:{options:null===(ve=Wl.referData)||void 0===ve?void 0:ve.peopleTypes}},{label:null===(xe=Vl.SAPID)||void 0===xe?void 0:xe.Label,name:"SAPID",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(fe=Vl.SAPID)||void 0===fe?void 0:fe.FieldRequired,message:"".concat(null===(he=Vl.SAPID)||void 0===he?void 0:he.Label," is required")}],inputprops:{maxLength:8}},{label:null===(be=Vl.ContractNumber)||void 0===be?void 0:be.Label,name:"ContractNumber",className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(ge=Vl.ContractNumber)||void 0===ge?void 0:ge.FieldRequired,message:"".concat(null===(je=Vl.ContractNumber)||void 0===je?void 0:je.Label," is required")}]},{label:"Person #",name:"Id",className:"col-span-12 lg:col-span-6 mb-0",inputprops:{disabled:!0}},{label:null===(Ne=Vl.PositionId)||void 0===Ne?void 0:Ne.Label,name:"PositionId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(ye=Vl.PositionId)||void 0===ye?void 0:ye.FieldRequired,message:"".concat(null===(De=Vl.PositionId)||void 0===De?void 0:De.Label," is required")}],inputprops:{options:null===(Ce=Wl.referData)||void 0===Ce?void 0:Ce.positions}},{label:"Active",name:"Active",className:"col-span-12 lg:col-span-6 mb-0",type:"check"},{label:null===(Ie=Vl.HotelCheck)||void 0===Ie?void 0:Ie.Label,name:"HotelCheck",className:"col-span-12 lg:col-span-6 mb-0",type:"check",rules:[{required:null===(qe=Vl.HotelCheck)||void 0===qe?void 0:qe.FieldRequired,message:"".concat(null===(Fe=Vl.HotelCheck)||void 0===Fe?void 0:Fe.Label," is required")}]},{label:null===(Le=Vl.RosterId)||void 0===Le?void 0:Le.Label,name:"RosterId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Pe=Vl.RosterId)||void 0===Pe?void 0:Pe.FieldRequired,message:"".concat(null===(Ze=Vl.RosterId)||void 0===Ze?void 0:Ze.Label," is required")}],inputprops:{options:null===(Re=Wl.referData)||void 0===Re?void 0:Re.rosters}},{label:"Next Roster Start",name:"NextRosterDate",className:"col-span-12 lg:col-span-6 mb-0",type:"date"},{label:null===(Se=Vl.RoomId)||void 0===Se?void 0:Se.Label,name:"RoomId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Ee=Vl.RoomId)||void 0===Ee?void 0:Ee.FieldRequired,message:"".concat(null===(Te=Vl.RoomId)||void 0===Te?void 0:Te.Label," is required")}],inputprops:{options:null===(we=Wl.referData)||void 0===we?void 0:we.rooms}},{label:null===(Me=Vl.LocationId)||void 0===Me?void 0:Me.Label,name:"LocationId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(ke=Vl.LocationId)||void 0===ke?void 0:ke.FieldRequired,message:"".concat(null===(Ae=Vl.LocationId)||void 0===Ae?void 0:Ae.Label," is required")}],inputprops:{options:null===(Ye=Wl.referData)||void 0===Ye?void 0:Ye.locations.filter((function(e){return 1!==e.onSite}))}},{label:null===(Ge=Vl.FlightGroupMasterId)||void 0===Ge?void 0:Ge.Label,name:"FlightGroupMasterId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(ze=Vl.FlightGroupMasterId)||void 0===ze?void 0:ze.FieldRequired,message:"".concat(null===(Ve=Vl.FlightGroupMasterId)||void 0===Ve?void 0:Ve.Label," is required")}],inputprops:{options:null===(Oe=Wl.referData)||void 0===Oe?void 0:Oe.transportGroups}},{label:null===(Ue=Vl.SiteContactEmployeeId)||void 0===Ue?void 0:Ue.Label,name:"SiteContactEmployeeId",className:"col-span-12 lg:col-span-6 mb-0",type:"searchSelect",rules:[{required:null===(Be=Vl.SiteContactEmployeeId)||void 0===Be?void 0:Be.FieldRequired,message:"".concat(null===(He=Vl.SiteContactEmployeeId)||void 0===He?void 0:He.Label," is required")}],inputprops:{fetchOptions:function(e){return(0,s.Z)({method:"post",url:"tas/employee/searchshort",data:{model:{keyWord:e},pageIndex:0,pageSize:100}}).then((function(e){return e.data.data.map((function(e){return{label:"".concat(e.Firstname," ").concat(e.Lastname," /").concat(e.Mobile,"/"),value:e.Id}}))}))},showSearch:!0,editName:["SiteContactEmployeeFirstname","SiteContactEmployeeLastname"],placeholder:"Select user",allowClear:!0}}],aa=[{label:null===($e=Vl.EmergencyContactName)||void 0===$e?void 0:$e.Label,name:"EmergencyContactName",className:"col-span-6 mb-0",rules:[{required:null===(We=Vl.EmergencyContactName)||void 0===We?void 0:We.FieldRequired,message:"".concat(null===(_e=Vl.EmergencyContactName)||void 0===_e?void 0:_e.Label," is required")}]},{label:null===(Ke=Vl.EmergencyContactMobile)||void 0===Ke?void 0:Ke.Label,name:"EmergencyContactMobile",className:"col-span-6 mb-0",rules:[{required:null===(Je=Vl.EmergencyContactMobile)||void 0===Je?void 0:Je.FieldRequired,message:"".concat(null===(Xe=Vl.EmergencyContactMobile)||void 0===Xe?void 0:Xe.Label," is required")},{pattern:T,message:"Invalid phone number"}],inputprops:{className:"w-full",maxLength:15}},{label:null===(Qe=Vl.Mobile)||void 0===Qe?void 0:Qe.Label,name:"Mobile",className:"col-span-6 mb-0",type:"number",rules:[{required:null===(el=Vl.Mobile)||void 0===el?void 0:el.FieldRequired,message:"".concat(null===(ll=Vl.Mobile)||void 0===ll?void 0:ll.Label," is required")},{pattern:E,message:"".concat(null===(al=Vl.Mobile)||void 0===al?void 0:al.Label," must be 8 digit")}],inputprops:{prefix:"+976",className:"w-full",maxLength:8}},{label:null===(il=Vl.PersonalMobile)||void 0===il?void 0:il.Label,name:"PersonalMobile",className:"col-span-6 mb-0",type:"number",rules:[{required:null===(tl=Vl.PersonalMobile)||void 0===tl?void 0:tl.FieldRequired,message:"".concat(null===(nl=Vl.PersonalMobile)||void 0===nl?void 0:nl.Label," is required")},{pattern:E,message:"".concat(null===(sl=Vl.PersonalMobile)||void 0===sl?void 0:sl.Label," must be 8 digit")}],inputprops:{prefix:"+976",className:"w-full",maxLength:8}},{label:null===(ol=Vl.PickUpAddress)||void 0===ol?void 0:ol.Label,name:"PickUpAddress",className:"col-span-6 mb-0",type:"textarea",rules:[{required:null===(rl=Vl.PickUpAddress)||void 0===rl?void 0:rl.FieldRequired,message:"".concat(null===(dl=Vl.PickUpAddress)||void 0===dl?void 0:dl.Label," is required")}]},{label:null===(cl=Vl.FrequentFlyer)||void 0===cl?void 0:cl.Label,name:"FrequentFlyer",className:"col-span-6 mb-0",rules:[{required:null===(ul=Vl.FrequentFlyer)||void 0===ul?void 0:ul.FieldRequired,message:"".concat(null===(ml=Vl.FrequentFlyer)||void 0===ml?void 0:ml.Label," is required")}]}],ia=[{type:"component",component:(0,S.jsx)(S.Fragment,{children:null===(pl=Wl.referData)||void 0===pl||null===(vl=pl.fieldsOfGroups)||void 0===vl?void 0:vl.map((function(e,l){return(0,S.jsx)(o.Z.Item,{name:e.Id,label:e.Description,className:"col-span-12 lg:col-span-6 mb-0",children:(0,S.jsx)(N.Z,{showSearch:!0,allowClear:!0,options:e.details,filterOption:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.Description)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},fieldNames:{value:"Id",label:"Description"}})},"g-fields-".concat(l))}))})}],ta=[{type:"component",component:(0,S.jsx)(o.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.NationalityId!==l.NationalityId},children:function(e){e.getFieldValue;var l,a,i,t,n,s,r,d,c,m,p,v=null===(l=Wl.referData)||void 0===l||null===(a=l.nationalities)||void 0===a?void 0:a.find((function(e){return e.value===xl.getFieldValue("NationalityId")}));return"MN"!==(null===v||void 0===v?void 0:v.Code)&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(o.Z.Item,{label:null===(i=Vl.PassportNumber)||void 0===i?void 0:i.Label,name:"PassportNumber",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(t=Vl.PassportExpiry)||void 0===t?void 0:t.FieldRequired,message:"".concat(null===(n=Vl.PassportNumber)||void 0===n?void 0:n.Label," is required")}],children:(0,S.jsx)(u.Z,{})}),(0,S.jsx)(o.Z.Item,{label:null===(s=Vl.PassportName)||void 0===s?void 0:s.Label,name:"PassportName",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(r=Vl.PassportExpiry)||void 0===r?void 0:r.FieldRequired,message:"".concat(null===(d=Vl.PassportName)||void 0===d?void 0:d.Label," is required")},{pattern:w,message:"The input is not valid name!"}],children:(0,S.jsx)(u.Z,{})}),(0,S.jsx)(o.Z.Item,{label:null===(c=Vl.PassportExpiry)||void 0===c?void 0:c.Label,name:"PassportExpiry",className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(m=Vl.PassportExpiry)||void 0===m?void 0:m.FieldRequired,message:"".concat(null===(p=Vl.PassportExpiry)||void 0===p?void 0:p.Label," is required")}],children:(0,S.jsx)(h.Z,{})})]})}})}],na=function(e){var l=0;return Ll&&Ll.map((function(a,i){null!==e&&void 0!==e&&e.find((function(e){return e.name===a.name[0]}))&&l++})),l>0&&(0,S.jsx)(v.ErrorTabElement,{children:l})},sa=[{label:(0,S.jsxs)("div",{className:"font-normal",children:["Personal ",na([].concat(ea))]}),key:0,forceRender:!0,children:(0,S.jsx)("div",{className:"pt-4 grid grid-cols-12 gap-x-5 gap-y-2",children:(0,S.jsx)(v.FormItemRender,{fields:ea,form:xl,handleInitStatus:Ml},"t-item-1c")},"t-item-0")},{label:(0,S.jsxs)("div",{children:["On Site ",na(la)]}),key:1,forceRender:!0,children:(0,S.jsx)("div",{className:"pt-4 grid grid-cols-12 gap-x-5 gap-y-2",children:(0,S.jsx)(v.FormItemRender,{fields:la,form:xl,handleInitStatus:Ml},"t-item-2c")},"t-item-1")},{label:(0,S.jsxs)("div",{children:["Off Site ",na([].concat(aa,[{name:"PersonalMobile"}]))]}),key:2,forceRender:!0,children:(0,S.jsx)("div",{className:"pt-4 grid grid-cols-12 gap-x-5 gap-y-2",children:(0,S.jsx)(v.FormItemRender,{fields:aa,form:xl,handleInitStatus:Ml},"t-item-3c")},"t-item-2")},{label:(0,S.jsx)("div",{children:"Group"}),key:3,forceRender:!0,children:(0,S.jsx)("div",{className:"pt-4 grid grid-cols-12 gap-x-5 gap-y-2",children:(0,S.jsx)(v.FormItemRender,{fields:ia,form:xl,handleInitStatus:Ml},"t-item-4c")},"t-item-3")},{label:(0,S.jsxs)("div",{children:["Citizenship ",na(function(){if(xl.getFieldValue("NationalityId")){var e,l,a=null===(e=Wl.referData)||void 0===e||null===(l=e.nationalities)||void 0===l?void 0:l.find((function(e){return e.value===xl.getFieldValue("NationalityId")}));if("MN"!==(null===a||void 0===a?void 0:a.Code))return[{label:"Passport Number",name:"PassportNumber",rules:[{required:!0,message:"Passport Number is required"}]},{label:"Name On Passport",name:"PassportName",rules:[{required:!0,message:"Name on password is required"},{pattern:w,message:"The input is not valid name!"}]},{label:"Passport Expiry Date",name:"PassportExpiry",rules:[{required:!0,message:"Password expiry date is required"}]}]}}())]}),key:4,forceRender:!0,children:(0,S.jsx)("div",{className:"pt-4 grid grid-cols-12 gap-x-5 gap-y-2",children:(0,S.jsx)(v.FormItemRender,{fields:ta,form:xl,handleInitStatus:Ml},"t-item-5c")},"t-item-4")}];return(0,S.jsxs)(S.Fragment,{children:[Wl.customLoading?(0,S.jsx)("div",{className:"animate-skeleton h-[400px] flex rounded-ot shadow-md col-span-12"}):(0,S.jsxs)("div",{className:"bg-white rounded-ot p-4 col-span-12 shadow-md mb-1",children:[(0,S.jsx)(o.Z,(0,i.Z)((0,i.Z)({form:xl},M),{},{labelAlign:"left",onFinish:function(e){Pl(null),El(!1)},className:"bg-white rounded-lg",onFinishFailed:function(e){e&&Pl(e.errorFields)},disabled:!Sl,size:"middle",children:(0,S.jsx)(y.Z,{defaultActiveKey:"1",type:"card",size:"middle",items:sa,activeKey:bl,onTabClick:function(e){return gl(e)}})})),(0,S.jsx)("div",{className:"mt-3 flex justify-end",children:Sl?(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[(0,S.jsx)(v.Button,{type:"primary",loading:Il,onClick:function(){return xl.submit()},icon:(0,S.jsx)(x.Z,{}),children:"Save"}),(0,S.jsx)(v.Button,{onClick:function(){return El(!1)},disabled:Il,children:"Cancel"})]}):(0,S.jsx)(v.Button,{onClick:function(){return El(!0)},children:"Edit"})})]}),Xl]})},A=a(1710),Y=a(52957);var G=function(e){var l,a,i,t,s=e.form,o=e.disabled,r=(0,n.useContext)(R.V).state;return(0,n.useEffect)((function(){r.userProfileData&&s.setFieldsValue(r.userProfileData)}),[r.userProfileData]),(0,S.jsxs)(v.Form,{form:s,className:"max-w-[600px]",disabled:o,children:[(0,S.jsx)(v.Form.Item,{name:"EmployerId",label:"Employer",className:"col-span-12 mb-2",children:(0,S.jsx)(N.Z,{options:null===(l=r.referData)||void 0===l?void 0:l.employers,filterOption:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}),(0,S.jsx)(v.Form.Item,{name:"DepartmentId",label:"Department",className:"col-span-12 mb-2",children:(0,S.jsx)(Y.Z,{treeData:null===(a=r.referData)||void 0===a?void 0:a.departments,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},onSelect:function(e,l){return s.setFieldValue("CostCodeId",l.CostCodeId)},filterTreeNode:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.Name)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}),(0,S.jsx)(v.Form.Item,{name:"CostCodeId",label:"Cost Code",className:"col-span-12 mb-2",children:(0,S.jsx)(N.Z,{options:null===(i=r.referData)||void 0===i?void 0:i.costCodes,filterOption:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}),(0,S.jsx)(v.Form.Item,{name:"PositionId",label:"Position",className:"col-span-12 mb-2",children:(0,S.jsx)(N.Z,{options:null===(t=r.referData)||void 0===t?void 0:t.positions,filterOption:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}),(0,S.jsx)(v.Form.Item,{name:"StartDate",label:"Start Date",className:"col-span-12 mb-2",children:(0,S.jsx)(h.Z,{})}),(0,S.jsx)(v.Form.Item,{name:"EndDate",label:"End Date",className:"col-span-12 mb-2",children:(0,S.jsx)(h.Z,{})})]})};var z=function(e){e.onSubmit;var l=(0,n.useState)(null),a=(0,t.Z)(l,2),x=a[0],f=a[1],h=(0,n.useState)([]),b=(0,t.Z)(h,2),g=b[0],j=b[1],N=(0,n.useState)(!1),y=(0,t.Z)(N,2),D=y[0],I=y[1],q=(0,n.useState)(null),F=(0,t.Z)(q,2),L=(F[0],F[1]),E=(0,n.useState)(!1),T=(0,t.Z)(E,2),w=T[0],M=T[1],Y=(0,n.useState)(null),z=(0,t.Z)(Y,2),V=z[0],O=z[1],U=(0,n.useState)(null),B=(0,t.Z)(U,2),H=B[0],$=B[1],W=(0,n.useState)(0),_=(0,t.Z)(W,2),K=_[0],J=_[1],X=(0,n.useContext)(R.V).action,Q=o.Z.useForm(),ee=(0,t.Z)(Q,1)[0],le=o.Z.useForm(),ae=(0,t.Z)(le,1)[0],ie=o.Z.useForm(),te=(0,t.Z)(ie,1)[0],ne=(0,P.s0)(),se=(0,P.UO)().empId;(0,n.useEffect)((function(){oe(),re()}),[]);var oe=function(e){(0,s.Z)({method:"get",url:"/tas/requestgroupconfig/groupandmembers/bytype/Profile Changes?empId=".concat(se)}).then((function(e){var l=e.data.groups[0];O(e.data),L(l);var a=[];l.groupMembers.map((function(e){a.push({value:e.employeeId,label:e.fullName})})),ee.setFieldValue("assignEmployeeOptions",a),ee.setFieldValue("nextGroupName",null===l||void 0===l?void 0:l.GroupName),ee.setFieldValue("nextGroupId",null===l||void 0===l?void 0:l.id);var i=e.data.groups;i.unshift({GroupName:"Requester",id:0}),i.push({GroupName:"Completed",id:99999}),f(i)}))},re=function(){(0,s.Z)({method:"get",url:"tas/employee/".concat(se)}).then((function(e){X.saveUserProfileData(e.data)})).catch((function(e){}))},de=[{label:"Group",name:"GroupName"},{label:"Current Position",name:"CurrentPosition",alignment:"left",cellRender:function(e){return(0,S.jsx)("div",{children:0==e.rowIndex?(0,S.jsx)(m.Z,{style:{color:"#e57200"}}):""})}}],ce=[{title:"Choose Request Type",content:(0,S.jsx)("div",{className:"flex flex-col items-start gap-4 p-4",children:(0,S.jsx)(r.ZP.Group,{onChange:function(e){$(e.target.value),J(K+1)},children:(0,S.jsxs)(d.Z,{direction:"vertical",children:[(0,S.jsx)(r.ZP,{value:1,children:"Permanent Change"}),(0,S.jsx)(d.Z,{className:"ml-6",children:"\u2022 Add a new site travel request"}),(0,S.jsx)(r.ZP,{value:2,children:"Temporary Change"}),(0,S.jsx)(d.Z,{className:"ml-6",children:"\u2022 Change the details of an existing travel request"})]})})})},{title:"Form",content:(0,S.jsx)("div",{children:H?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:1===H?"block":"hidden",children:(0,S.jsx)(k,{form:ae})}),(0,S.jsx)("div",{className:2===H?"block":"hidden",children:(0,S.jsx)(G,{form:te})})]}):null})}],ue=ce.map((function(e){return{key:e.title,title:e.title}}));return(0,S.jsxs)("div",{children:[(0,S.jsx)(Z.Link,{to:"/guest",children:(0,S.jsx)(v.Button,{icon:(0,S.jsx)(p.Z,{}),children:"Back"})}),(0,S.jsx)(v.Accordion,{title:"Profile",className:"border",children:(0,S.jsx)("div",{className:"p-3",children:(0,S.jsx)(A.Z,{employeeId:se,pendingInfo:V})})}),(0,S.jsx)("div",{className:"flex flex-col gap-4 mt-4",children:(0,S.jsxs)(v.Form,{className:"grid grid-cols-12 gap-y-5",size:"small",form:ee,initValues:{comment:"",assignedEmployeeId:null},onFinish:function(e){M(!0);var l=ae.getFieldsValue();(0,s.Z)({method:"get",url:"tas/requestdocument/checkduplicate/samprofilechanges/".concat(se)}).then((function(a){j(a.data),0===a.data.length?1===H?(0,s.Z)({method:"post",url:"tas/requestdocumentprofilechange",data:{employee:(0,i.Z)((0,i.Z)({},l),{},{Dob:null!==l&&void 0!==l&&l.Dob?C()(null===l||void 0===l?void 0:l.Dob).format("YYYY-MM-DD"):null,CommenceDate:null!==l&&void 0!==l&&l.CommenceDate?C()(null===l||void 0===l?void 0:l.CommenceDate).format("YYYY-MM-DD"):null,CompletionDate:null!==l&&void 0!==l&&l.CompletionDate?C()(null===l||void 0===l?void 0:l.CompletionDate).format("YYYY-MM-DD"):null,NextRosterDate:null!==l&&void 0!==l&&l.NextRosterDate?C()(null===l||void 0===l?void 0:l.NextRosterDate).format("YYYY-MM-DD"):null,PassportExpiry:null!==l&&void 0!==l&&l.PassportExpiry?C()(null===l||void 0===l?void 0:l.PassportExpiry).format("YYYY-MM-DD"):null,EmployeeId:se}),changeRequestData:(0,i.Z)((0,i.Z)({},e),{},{action:"Submitted"})}}).then((function(e){ne("/guest/request")})).catch((function(e){})).then((function(){M(!1)})):2===H&&(0,s.Z)({method:"post",url:"tas/requestdocumentprofilechange/temp",data:{employee:(0,i.Z)((0,i.Z)({},te.getFieldsValue()),{},{EmployeeId:se}),changeRequestData:(0,i.Z)((0,i.Z)({},e),{},{action:"Submitted"})}}).then((function(e){ne("/guest/request")})).catch((function(e){})).then((function(){M(!1)})):(I(!0),M(!1))})).catch((function(){}))},children:[(0,S.jsx)(v.Accordion,{title:"Detail",className:"border col-span-12",children:(0,S.jsxs)("div",{className:"p-4",children:[(0,S.jsx)(c.Z,{items:ue,current:K,size:"small"}),(0,S.jsx)("div",{style:{marginTop:16},children:ce[K].content}),(0,S.jsx)("div",{className:"mt-6 flex justify-between items-center",children:K>0&&(0,S.jsx)(v.Button,{style:{margin:"0 8px"},onClick:function(){J(K-1)},children:"Previous"})})]})}),(0,S.jsx)(v.Accordion,{title:"Request Document",className:"border col-span-12",children:(0,S.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,S.jsxs)("div",{children:["Comments:",(0,S.jsx)(v.Form.Item,{className:"m-0",name:"comment",children:(0,S.jsx)(u.Z.TextArea,{autoSize:{minRows:3,maxRows:5}})})]}),(0,S.jsx)("div",{className:"flex gap-10",children:(0,S.jsx)(v.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.nextGroupName!==l.nextGroupName},children:function(e){var l=e.getFieldValue;return(0,S.jsxs)(v.Form.Item,{name:"nextGroupId",className:"mb-0",children:["Next Approval: ",(0,S.jsx)("span",{className:"font-bold",children:l("nextGroupName")})]})}})})]})}),(0,S.jsx)(v.Accordion,{title:"Document Route",className:"border col-span-12",children:(0,S.jsx)("div",{className:"flex flex-col gap-4 p-4",children:(0,S.jsx)(v.Table,{data:x,columns:de,pager:!1,containerClass:"shadow-none border border-gray-300"})})})]})}),(0,S.jsxs)("div",{className:"flex justify-end mt-4 gap-4",children:[(0,S.jsx)(v.Button,{type:"primary",htmlType:"button",onClick:function(){return ee.submit()},loading:w,children:"Submit"}),(0,S.jsx)(v.Button,{disabled:w,onClick:function(){return ne(-1)},children:"Cancel"})]}),(0,S.jsx)(v.DuplicatedDocument,{open:D,onCancel:function(){return I(!1)},data:g})]})}},53979:function(e,l,a){a.d(l,{Z:function(){return r}});var i=a(87462),t=a(47313),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-12-12-28.3-18.7-45.3-18.7H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 176h256v112H384V176zm128 554c-79.5 0-144-64.5-144-144s64.5-144 144-144 144 64.5 144 144-64.5 144-144 144zm0-224c-44.2 0-80 35.8-80 80s35.8 80 80 80 80-35.8 80-80-35.8-80-80-80z"}}]},name:"save",theme:"filled"},s=a(17469),o=function(e,l){return t.createElement(s.Z,(0,i.Z)({},e,{ref:l,icon:n}))};var r=t.forwardRef(o)}}]);