"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[8933],{68933:function(e,t,l){l.r(t),l.d(t,{default:function(){return Y}});var n=l(74165),o=l(15861),a=l(29439),i=l(47313),r=l(56573),s=l(65040),d=l(21975),u=l(74294),c=l(2880),m=l(1413),p=l(93031),f=l(42614),v=l(10658),h=l.n(v),x=l(5049),I=l(46417),D=function(e){var t=e.data,l=e.refreshData,n=e.disabled,o=e.currentGroup,v=(0,i.useState)(!1),D=(0,a.Z)(v,2),g=D[0],S=D[1],j=(0,i.useState)(!1),b=(0,a.Z)(j,2),N=b[0],F=b[1],T=(0,i.useState)(!1),y=(0,a.Z)(T,2),C=y[0],Z=y[1],w=(0,i.useState)(!1),R=(0,a.Z)(w,2),V=R[0],E=R[1],k=(0,i.useState)(null),A=(0,a.Z)(k,2),L=A[0],M=A[1],Y=(0,i.useContext)(f.V).state,q=s.Z.useForm(),O=(0,a.Z)(q,1)[0],U=(0,i.useMemo)((function(){if(t)return{startDate:t.ExistingScheduleDate?h()(t.ExistingScheduleDate):null,endDate:t.ReScheduleDate?h()(t.ReScheduleDate):null,ShiftId:t.shiftId,Direction:t.ExistingScheduleDirection||t.ReScheduleDirection,ExistingScheduleDescription:t.ExistingScheduleDescription,ExistingScheduleDirection:t.ExistingScheduleDirection,ExistingScheduleIdDescr:t.ExistingScheduleIdDescr,existingScheduleId:t.ExistingScheduleId,ReScheduleIdDescr:t.ReScheduleIdDescr,ReScheduleId:t.ReScheduleId,ReScheduleDescription:t.ReScheduleDescription,ReScheduleDirection:t.ReScheduleDirection,FromLocationId:t.ReScheduleFromLocationid,ToLocationId:t.ReScheduleToLocationid,RoomId:null===t||void 0===t?void 0:t.RoomId,RoomNumber:t.RoomnNumber}}),[t]);(0,i.useEffect)((function(){U&&O.setFieldsValue(U)}),[U]);var G=function(){var e=O.getFieldValue("FromLocationId"),t=O.getFieldValue("ToLocationId"),l={StartDate:O.getFieldValue("endDate")?O.getFieldValue("endDate"):null,EndDate:O.getFieldValue("endDate")?O.getFieldValue("endDate"):null};l.DepartLocationId=e,l.ArriveLocationId=t,M((0,m.Z)({},l)),E(!0)},P=(0,i.useCallback)((function(e){var t;(0,r.Z)({method:"get",url:"tas/employeestatus/lasterstatus/onsite/".concat(null===(t=Y.userProfileData)||void 0===t?void 0:t.Id,"/").concat(e)}).then((function(e){O.setFieldValue("ShiftId",e.data.ShiftId)})).catch((function(e){}))}),[Y,O]),B=(0,i.useCallback)((function(e){var t;(0,r.Z)({method:"get",url:"tas/employeestatus/lasterstatus/offsite/".concat(null===(t=Y.userProfileData)||void 0===t?void 0:t.Id,"/").concat(e)}).then((function(e){O.setFieldValue("ShiftId",e.data.ShiftId)})).catch((function(e){}))}),[Y,O]),H=(0,i.useCallback)((function(e){var t;(0,r.Z)({method:"get",url:"tas/employeestatus/futurefirststatus/onsite/".concat(null===(t=Y.userProfileData)||void 0===t?void 0:t.Id,"/").concat(e)}).then((function(e){O.setFieldValue("ShiftId",e.data.ShiftId)})).catch((function(e){}))}),[Y,O]),z=(0,i.useCallback)((function(e){var t;(0,r.Z)({method:"get",url:"tas/employeestatus/futurefirststatus/offsite/".concat(null===(t=Y.userProfileData)||void 0===t?void 0:t.Id,"/").concat(e)}).then((function(e){O.setFieldValue("ShiftId",e.data.ShiftId)})).catch((function(e){}))}),[Y,O]),_=[{type:"component",component:(0,I.jsx)(c.Form.Item,{label:"Existing Transport",shouldUpdate:function(e,t){return(null===e||void 0===e?void 0:e.startDate)!==(null===t||void 0===t?void 0:t.startDate)},className:"col-span-12 mb-2",children:function(e){var l=(0,e.getFieldValue)("startDate");return(0,I.jsxs)("div",{className:"flex gap-2",children:[(0,I.jsx)(c.Form.Item,{name:"startDate",noStyle:!l,className:"mb-0 w-[115px]",children:l?(0,I.jsx)(p.Z,{disabled:!0,className:"w-full"}):null}),(0,I.jsx)(c.Form.Item,{name:"ExistingScheduleDirection",noStyle:!l,className:"mb-0 w-[60px]",children:l?(0,I.jsx)(d.Z,{disabled:!0,className:"w-full py-[1px]"}):null}),(0,I.jsx)(c.Form.Item,{noStyle:!0,name:"existingScheduleId"}),(0,I.jsx)(c.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.existingScheduleId!==t.existingScheduleId},children:function(e){var t=(0,e.getFieldValue)("existingScheduleId");return(0,I.jsx)(c.Form.Item,{name:"ExistingScheduleDescription",noStyle:!l,className:"flex-1 mb-0",rules:[{required:!0,message:"Flight is required"}],children:l?(0,I.jsx)(d.Z,{disabled:!0,className:"py-[1px]",addonAfter:(0,I.jsx)(c.SeatTooltip,{id:t})}):null})}}),l?null:(0,I.jsx)(c.RemovedTransportField,{description:null===t||void 0===t?void 0:t.ExistingScheduleIdDescr,form:O})]})}})},{type:"component",component:(0,I.jsx)(c.Form.Item,{label:(0,I.jsxs)("span",{children:[(0,I.jsx)("span",{className:"text-red-400",children:"*"}),"Reschedule Transport"]}),className:"col-span-12 mb-2",shouldUpdate:function(e,t){return e.ReScheduleId!==t.ReScheduleId},children:function(e){var t=0===(0,e.getFieldValue)("ReScheduleId");return(0,I.jsxs)("div",{className:"flex gap-2",children:[(0,I.jsx)(c.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.startDate!==t.startDate||e.endDate!==t.endDate},children:function(e){var l=e.getFieldValue,n=!1;return l("endDate")||(n=!!l("startDate")&&l("startDate")),(0,I.jsx)(c.Form.Item,{name:"endDate",className:"mb-0 col-span-3",noStyle:t,children:t?null:(0,I.jsx)(p.Z,{defaultPickerValue:n,showWeek:!0,className:"w-full",onChange:function(){O.setFieldValue("ReScheduleDescription",null),O.setFieldValue("ReScheduleId",null)}})})}}),(0,I.jsx)(c.Form.Item,{name:"ReScheduleDirection",className:"mb-0",noStyle:t,children:t?null:(0,I.jsx)(d.Z,{disabled:!0,className:"w-[50px] py-[2px]"})}),(0,I.jsx)(c.Form.Item,{noStyle:!0,name:"ReScheduleId"}),(0,I.jsx)(c.Form.Item,{noStyle:!0,name:"FormLocationId"}),(0,I.jsx)(c.Form.Item,{noStyle:!0,name:"ToLocationId"}),(0,I.jsx)(c.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.ReScheduleId!==t.ReScheduleId},children:function(e){var l=(0,e.getFieldValue)("ReScheduleId");return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(c.Form.Item,{name:"ReScheduleDescription",rules:[{required:!0,message:"ReSchedule Transport is required"}],className:"flex-1 mb-0",noStyle:t,children:t?null:(0,I.jsx)(d.Z,{readOnly:!0,className:"py-[2px]",addonAfter:(0,I.jsx)(c.SeatTooltip,{id:l})})})})}}),t?(0,I.jsx)(c.Tooltip,{title:"Removed schedule",children:(0,I.jsx)(c.Form.Item,{className:"w-full mb-0",name:"ReScheduleIdDescr",children:(0,I.jsx)(d.Z,{disabled:!0,status:"error",prefix:(0,I.jsx)(x.Z,{}),className:"w-full"})})}):null,(0,I.jsx)(c.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.endDate!==t.endDate},children:function(e){var l=(0,e.getFieldValue)("endDate");return(0,I.jsx)(c.Form.Item,{className:"col-span-1 mb-0",children:(0,I.jsx)(c.Button,{disabled:!l&&!t,className:"text-xs py-[3px]",type:"primary",onClick:G,children:"..."})})}})]})}})},{type:"component",component:(0,I.jsx)(c.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.endDate!==t.endDate},children:function(e){var l,n,o,a=e.getFieldValue,i=(e.setFieldValue,null),r=a("endDate");return r&&t.ExistingScheduleDate&&(h()(r).diff(h()(t.ExistingScheduleDate))>0?"IN"===a("Direction")?(i=0,B(h()(r).format("YYYY-MM-DD"))):(i=1,P(h()(r).format("YYYY-MM-DD"))):"IN"===a("Direction")?(i=1,H(h()(r).format("YYYY-MM-DD"))):(i=0,z(h()(r).format("YYYY-MM-DD")))),(0,I.jsx)(c.Form.Item,{label:"Shift Status",name:"ShiftId",className:"col-span-12 mb-2",rules:[{required:!0,message:"Shift is required"}],children:(0,I.jsx)(u.Z,{options:"number"===typeof i?null===(l=Y.referData)||void 0===l||null===(n=l.roomStatuses)||void 0===n?void 0:n.filter((function(e){return e.OnSite===i})):null===(o=Y.referData)||void 0===o?void 0:o.roomStatuses,filterOption:function(e,t){var l;return(null!==(l=null===t||void 0===t?void 0:t.label)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},className:"w-full",showSearch:!0,allowClear:!0})})}})}],W=(0,i.useMemo)((function(){var e=[];return null!==o&&void 0!==o&&o.GroupTag&&(e=_),e}),[o,_]);(0,i.useEffect)((function(){U&&W.length>0&&Z(!0)}),[U,W]);return(0,I.jsxs)("div",{className:"w-full",children:[C?(0,I.jsx)(c.Form,{form:O,fields:W,onFinish:function(e){S(!0),(0,r.Z)({method:"put",url:"tas/requestsitetravel/reschedule",data:{id:null===t||void 0===t?void 0:t.Id,shiftId:e.ShiftId,roomId:e.RoomId,reScheduleId:e.ReScheduleId,existingScheduleId:e.existingScheduleId,Reason:t.Reason}}).then((function(e){F(!1),l()})).catch((function(e){})).then((function(){return S(!1)}))},disabled:!N,className:"grid grid-cols-12 gap-x-5 max-w-[700px]",size:"small",labelAlign:"left",labelCol:{flex:"150px"},children:!n&&"Completed"!==(null===o||void 0===o?void 0:o.GroupTag)&&0!==(null===U||void 0===U?void 0:U.ReScheduleId)&&0!==(null===U||void 0===U?void 0:U.existingScheduleId)&&(0,I.jsx)("div",{className:"col-span-12 flex justify-end gap-5",children:N?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(c.Button,{htmlType:"button",onClick:function(){return O.submit()},type:"success",loading:g,className:"text-xs",children:"Save"}),(0,I.jsx)(c.Button,{htmlType:"button",onClick:function(){F(!1),O.setFieldsValue(U)},disabled:g,className:"text-xs",children:"Cancel"})]}):(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(c.Button,{htmlType:"button",onClick:function(){return F(!0)},type:"primary",className:"text-xs",children:"Edit"})})})}):null,(0,I.jsx)(c.Modal,{title:"Select Transport",open:V,width:900,onCancel:function(){return E(!1)},destroyOnClose:!1,children:(0,I.jsx)(c.TransportSearch,{initialSearchValues:L,handleSelect:function(e){O.setFieldValue("endDate",h()(e.EventDate)),O.setFieldValue("FormLocationId",e.FromLocationId),O.setFieldValue("ToLocationId",e.ToLocationId),O.setFieldValue("ReScheduleDescription","".concat(e.Code," ").concat(e.Description)),O.setFieldValue("ReScheduleDirection",e.Direction),O.setFieldValue("ReScheduleId",e.Id),E(!1)},directionDisabled:!1})})]})},g=l(31283),S=l(40765),j=(l(67245),l(26672)),b=l(58467),N=l(2135),F=l(14261);var T=function(e){var t,l,n,o,d,u,p,v,x,D,g,F=e.form,T=e.closeModal,y=e.startDate,C=e.endDate,Z=e.handleSelect,w=(0,i.useState)(null),R=(0,a.Z)(w,2),V=R[0],E=R[1],k=(0,i.useState)(!1),A=(0,a.Z)(k,2),L=A[0],M=A[1],Y=(0,i.useState)(!1),q=(0,a.Z)(Y,2),O=q[0],U=q[1],G=(0,i.useState)([]),P=(0,a.Z)(G,2),B=P[0],H=P[1],z=(0,i.useContext)(f.V).state,_=s.Z.useForm(),W=(0,a.Z)(_,1)[0],J=(0,b.s0)();(0,i.useEffect)((function(){z.userProfileData&&K()}),[z.userProfileData]);var K=function(){var e;M(!0),(0,r.Z)({method:"get",url:"tas/room/employeeprofile/".concat(null===(e=z.userProfileData)||void 0===e?void 0:e.Id)}).then((function(e){E(e.data)})).finally((function(){return M(!1)}))},Q=[{label:"Room Number",name:"RoomNumber",cellRender:function(e){return(0,I.jsx)("div",{children:e.value})}},{label:"Camp",name:"Camp",cellRender:function(e){return(0,I.jsx)("div",{children:e.value})}},{label:"Start Date",name:"StartDate",cellRender:function(e){return(0,I.jsx)("div",{children:h()(e.value).format("YYYY-MM-DD")})}},{label:"End Date",name:"EndDate",cellRender:function(e){return(0,I.jsx)("div",{children:h()(e.value).format("YYYY-MM-DD")})}}],X=[{label:"Camp",name:"CampId",className:"col-span-6 mb-2",type:"select",inputprops:{options:null===(t=z.referData)||void 0===t?void 0:t.camps}},{label:"Room Number",name:"RoomNumber",className:"col-span-6 mb-2"},{label:"Room Type",name:"RoomTypeId",className:"col-span-6 mb-2",type:"select",depindex:"CampId",inputprops:{optionsurl:"tas/roomtype?active=1&campId=",loading:z.customLoading,optionvalue:"Id",optionlabel:"Description"}},{label:"Bed Count",name:"BedCount",className:"col-span-6 mb-2",type:"number"},{label:"Private",name:"Private",className:"col-span-6 mb-2",type:"check",inputprops:{indeterminatewith:!0}}],$=[{label:"Room Number",name:"roomNumber",width:"150px"},{label:"Bed #",name:"BedCount",alignment:"left"},{label:"Owners",name:"RoomOwners",alignment:"left"},{label:"Employees",name:"Employees",alignment:"left"},{label:"Owner In Date",name:"OwnerInDate",alignment:"center",cellRender:function(e){var t=e.value;return(0,I.jsx)("div",{children:t?h()(t).format("YYYY-MM-DD HH:mm"):"-"})}},{label:"",name:"action",width:"90px",cellRender:function(e){return(0,I.jsx)("div",{className:"flex gap-4",children:(0,I.jsx)("button",{type:"button",className:"edit-button",onClick:function(){return t=e.data,F.setFieldValue("Room",t),Z&&Z(t),void T();var t},children:"Select"})})}}];return(0,I.jsxs)("div",{children:[(0,I.jsxs)("div",{className:"p-4 border rounded-ot mb-5",children:[(0,I.jsx)("div",{className:"flex justify-between",children:(0,I.jsxs)("div",{className:"flex flex-wrap gap-x-8 gap-y-2",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{className:"text-xs text-gray-500",children:"Fullname:"}),(0,I.jsx)(N.Link,{to:"/tas/people/search/".concat(null===(l=z.userProfileData)||void 0===l?void 0:l.Id),children:(0,I.jsxs)("span",{className:"cursor-pointer text-blue-500 hover:underline flex gap-2 items-center",children:[null===(n=z.userProfileData)||void 0===n?void 0:n.Firstname," ",null===(o=z.userProfileData)||void 0===o?void 0:o.Lastname]})})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{className:"text-xs text-gray-500",children:"Department:"}),(0,I.jsx)("div",{children:(null===(d=z.userProfileData)||void 0===d?void 0:d.DepartmentName)||"-"})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{className:"text-xs text-gray-500",children:"Employer:"}),(0,I.jsx)("div",{children:(null===(u=z.userProfileData)||void 0===u?void 0:u.EmployerName)||"-"})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{className:"text-xs text-gray-500",children:"Resource Type:"}),(0,I.jsx)("div",{children:(null===(p=z.userProfileData)||void 0===p?void 0:p.PeopleTypeCode)||"-"})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{className:"text-xs text-gray-500",children:"Own Room:"}),(0,I.jsx)("div",{children:(null===(v=z.userProfileData)||void 0===v?void 0:v.RoomNumber)||"-"})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{className:"text-xs text-gray-500",children:"Gender:"}),(0,I.jsx)("div",{children:1===(null===(x=z.userProfileData)||void 0===x?void 0:x.Gender)?(0,I.jsxs)("div",{className:"flex items-center gap-1",children:[(0,I.jsx)(j.FaMale,{className:"text-blue-600"}),"Male"]}):(0,I.jsxs)("div",{className:"flex items-center gap-1",children:[(0,I.jsx)(j.FaFemale,{className:"text-pink-500"}),"Female"]})})]})]})}),(null===V||void 0===V||null===(D=V.employeeRoomProfileRoomHistories)||void 0===D?void 0:D.length)>0?(0,I.jsx)("div",{className:"mt-5",children:(0,I.jsx)(c.Table,{containerClass:"shadow-none border",columns:Q,data:null===V||void 0===V?void 0:V.employeeRoomProfileRoomHistories,allowColumnReordering:!1,loading:L,keyExpr:"RoomId",pager:(null===V||void 0===V||null===(g=V.employeeRoomProfileRoomHistories)||void 0===g?void 0:g.length)>20,focusedRowEnabled:!1,showRowLines:!0,title:(0,I.jsx)("div",{className:"border-b text-sm font-bold py-2",children:"Stay History"})})}):null]}),(0,I.jsx)(c.Form,{form:W,fields:X,initValues:{Private:null},className:"border rounded-ot p-4 gap-x-8 mb-5",onFinish:function(e){U(!0),(0,r.Z)({method:"post",url:"tas/room/findavailablebydates",data:(0,m.Z)((0,m.Z)({},e),{},{Private:e.Private,StartDate:h()(y).format("YYYY-MM-DD"),EndDate:h()(C).format("YYYY-MM-DD")})}).then((function(e){H(e.data)})).catch((function(e){})).then((function(){return U(!1)}))},children:(0,I.jsx)("div",{className:"col-span-12 flex justify-end",children:(0,I.jsx)(c.Button,{htmlType:"button",icon:(0,I.jsx)(S.Z,{}),loading:O,onClick:function(){return W.submit()},children:"Search"})})}),(0,I.jsx)(c.Table,{containerClass:"shadow-none border",columns:$,data:B,allowColumnReordering:!1,loading:L,keyExpr:"RoomId",focusedRowEnabled:!1,showRowLines:!0,pager:!0,tableClass:"max-h-[calc(100vh-400px)]",renderDetail:{enabled:!0,component:function(e){return(0,I.jsx)(c.ExpandRowRoomDetail,{propData:e,startDate:y,endDate:C})}},onRowDblClick:function(e){return J("/tas/room/".concat(e.data.Id))}})]})};var y=function(e){var t,l,n,o,r,s=e.form,v=(e.setMode,e.editData),D=(e.lastData,e.currentGroup,e.refreshData,e.disabled),S=(0,i.useState)(!1),j=(0,a.Z)(S,2),b=(j[0],j[1],(0,i.useContext)(f.V)),N=b.state,F=(b.action,(0,i.useState)(!1)),y=(0,a.Z)(F,2),C=(y[0],y[1],(0,i.useState)(!1)),Z=(0,a.Z)(C,2),w=Z[0],R=Z[1],V=(0,i.useState)(!1),E=(0,a.Z)(V,2),k=(E[0],E[1],(0,i.useState)(!1)),A=(0,a.Z)(k,2),L=A[0],M=A[1],Y=(0,i.useState)(null),q=(0,a.Z)(Y,2),O=(q[0],q[1]);(0,i.useEffect)((function(){var e={};v&&N.userProfileData&&(e=(0,m.Z)((0,m.Z)({},v),{},{ShiftId:v.shiftId,Room:{RoomId:v.RoomId,roomNumber:null===v||void 0===v?void 0:v.RoomNumber},firstTransport:{flightId:v.FirstScheduleId,Direction:v.FirstScheduleDirection,Date:v.FirstScheduleDate?h()(v.FirstScheduleDate):null,Description:(v.FirstScheduleDirection,v.FirstScheduleDescription)},lastTransport:{flightId:v.LastScheduleId,Direction:v.LastScheduleDirection,Date:v.LastScheduleDate?h()(v.LastScheduleDate):null,Description:(v.LastScheduleDirection,v.LastScheduleDescription)},CostCodeId:null===v||void 0===v?void 0:v.CostCodeId}),s.setFieldsValue(e),R(!0))}),[v,N.userProfileData]);var U=[{type:"component",component:(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(c.Form.Item,{label:"First Transport",className:"col-span-12 mb-2",shouldUpdate:function(e,t){var l,n;return(null===e||void 0===e||null===(l=e.firstTransport)||void 0===l?void 0:l.Date)!==(null===t||void 0===t||null===(n=t.firstTransport)||void 0===n?void 0:n.Date)},children:function(e){var t=(0,e.getFieldValue)(["firstTransport","Date"]);return(0,I.jsxs)("div",{className:"flex gap-2",children:[(0,I.jsx)(c.Form.Item,{name:["firstTransport","Date"],className:"mb-0 w-[115px]",noStyle:!t,children:t?(0,I.jsx)(p.Z,{disabled:!0,className:"w-full"}):null}),(0,I.jsx)(c.Form.Item,{name:["firstTransport","Direction"],className:"mb-0 w-[65px]",noStyle:!t,children:t?(0,I.jsx)(u.Z,{disabled:!0,options:[{value:"IN",label:"IN"},{value:"OUT",label:"OUT"}],className:"w-full"}):null}),(0,I.jsx)(c.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){var l,n;return(null===(l=e.firstTransport)||void 0===l?void 0:l.flightId)!==(null===(n=t.firstTransport)||void 0===n?void 0:n.flightId)},children:function(e){var l=(0,e.getFieldValue)(["firstTransport","flightId"]);return(0,I.jsx)(c.Form.Item,{className:"mb-0 w-auto flex-1",name:["firstTransport","Description"],noStyle:!t,rules:[{required:!0,message:"Flight is required"}],children:t?(0,I.jsx)(d.Z,{disabled:!0,addonAfter:(0,I.jsx)(c.SeatTooltip,{id:l})}):null})}}),(0,I.jsx)(c.Form.Item,{noStyle:!0,name:["firstTransport","flightId"]}),t?null:(0,I.jsx)(c.Tooltip,{title:"Removed schedule",children:(0,I.jsx)(c.Form.Item,{className:"mb-0 w-full",children:(0,I.jsx)(d.Z,{disabled:!0,status:"error",prefix:(0,I.jsx)(x.Z,{}),value:null===v||void 0===v?void 0:v.FirstScheduleIdDescr,className:"w-full"})})})]})}})})},{type:"component",component:(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(c.Form.Item,{label:"Last Transport",className:"col-span-12 mb-2",shouldUpdate:function(e,t){var l,n;return(null===(l=e.lastTransport)||void 0===l?void 0:l.Date)!==(null===(n=t.lastTransport)||void 0===n?void 0:n.Date)},children:function(e){var t=(0,e.getFieldValue)(["lastTransport","Date"]);return(0,I.jsxs)("div",{className:"flex gap-2",children:[(0,I.jsx)(c.Form.Item,{name:["lastTransport","Date"],className:"mb-0 w-[115px]",noStyle:!t,children:t?(0,I.jsx)(p.Z,{disabled:!0,className:"w-full"}):null}),(0,I.jsx)(c.Form.Item,{name:["lastTransport","Direction"],className:"mb-0 w-[65px]",noStyle:!t,children:t?(0,I.jsx)(u.Z,{disabled:!0,options:[{value:"IN",label:"IN"},{value:"OUT",label:"OUT"}],className:"w-full"}):null}),(0,I.jsx)(c.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){var l,n;return(null===(l=e.lastTransport)||void 0===l?void 0:l.flightId)!==(null===(n=t.lastTransport)||void 0===n?void 0:n.flightId)},children:function(e){var l=(0,e.getFieldValue)(["lastTransport","flightId"]);return(0,I.jsx)(c.Form.Item,{className:"mb-0 flex-1",name:["lastTransport","Description"],rules:[{required:!0,message:"Flight is required"}],noStyle:!t,children:t?(0,I.jsx)(d.Z,{disabled:!0,addonAfter:(0,I.jsx)(c.SeatTooltip,{id:l})}):null})}}),(0,I.jsx)(c.Form.Item,{noStyle:!0,name:["lastTransport","flightId"]}),t?null:(0,I.jsx)(c.Tooltip,{title:"Removed schedule",children:(0,I.jsx)(c.Form.Item,{className:"mb-0 w-full",children:(0,I.jsx)(d.Z,{disabled:!0,status:"error",prefix:(0,I.jsx)(x.Z,{}),value:null===v||void 0===v?void 0:v.LastScheduleIdDescr,className:"w-full"})})})]})}})})},{label:"Shift Status",name:"ShiftId",className:"col-span-12 mb-2",type:"select",rules:[{required:!0,message:"Shift Status is required"}],inputprops:{style:{width:"auto"},options:"IN"===(null===v||void 0===v?void 0:v.FirstScheduleDirection)?null===(t=N.referData)||void 0===t||null===(l=t.roomStatuses)||void 0===l?void 0:l.filter((function(e){return 0===e.OnSite})):null===(n=N.referData)||void 0===n||null===(o=n.roomStatuses)||void 0===o?void 0:o.filter((function(e){return 1===e.OnSite}))}},{label:"Cost Code",name:"CostCodeId",className:"col-span-12 mb-2",type:"select",rules:[{required:!0,message:"Cost Code is required"}],inputprops:{style:{width:"auto",minWidth:"200px"},options:null===(r=N.referData)||void 0===r?void 0:r.costCodes}}];return(0,I.jsxs)("div",{className:"w-full max-w-[1200px]",children:[w?(0,I.jsx)(c.Form,{form:s,fields:U,size:"small",labelAlign:"right",labelCol:{flex:"120px"},wrapperCol:{flex:1},disabled:D,children:(0,I.jsx)(c.Form.Item,{valuePropName:"checked",label:"No Show",name:"noShow",className:"col-span-12 mb-2",children:(0,I.jsx)(g.Z,{onChange:function(e){s.setFieldValue("noShow",e.target.checked?1:0)}})},"form-item-check")}):null,(0,I.jsx)(c.Modal,{open:L,onCancel:function(){return M(!1)},title:"Change Room /".concat(h()(s.getFieldValue(["firstTransport","Date"])).format("YYYY-MM-DD")," ").concat(h()(s.getFieldValue(["lastTransport","Date"])).format("YYYY-MM-DD"),"/"),width:900,forceRender:!0,children:(0,I.jsx)(T,{form:s,closeModal:function(){return M(!1)},startDate:h()(s.getFieldValue(["firstTransport","Date"])).format("YYYY-MM-DD"),endDate:h()(s.getFieldValue(["lastTransport","Date"])).format("YYYY-MM-DD"),documentDetail:v,handleSelect:function(e){return O(e)}})})]})},C=l(3489),Z=l(66736),w=l(82138),R=C.Z.Dragger;var V=function(e){e.mainForm,e.getMaster;var t=e.disabled,l=e.showTitle,n=void 0===l||l,o=(0,i.useState)(!1),d=(0,a.Z)(o,2),u=d[0],p=d[1],f=(0,i.useState)(!0),v=(0,a.Z)(f,2),h=(v[0],v[1]),x=(0,i.useState)(!1),D=(0,a.Z)(x,2),g=D[0],S=D[1],j=(0,i.useState)(!1),N=(0,a.Z)(j,2),T=N[0],y=N[1],C=(0,i.useState)([]),V=(0,a.Z)(C,2),E=V[0],k=V[1],A=(0,i.useState)(null),L=(0,a.Z)(A,2),M=L[0],Y=L[1],q=(0,i.useState)([]),O=(0,a.Z)(q,2),U=O[0],G=O[1],P=s.Z.useForm(),B=(0,a.Z)(P,1)[0],H=(0,b.UO)().documentId;(0,i.useEffect)((function(){z()}),[]);var z=function(){h(!0),(0,r.Z)({method:"get",url:"/tas/requestdocumentattachment/".concat(H)}).then((function(e){k(e.data)})).catch((function(e){})).then((function(){return h(!1)}))},_=[{type:"component",component:(0,I.jsx)(c.Form.Item,{name:"files",valuePropName:"file",label:"File",className:"col-span-12 mb-2",children:(0,I.jsxs)(R,{beforeUpload:!0,multiple:!0,maxCount:5,onChange:function(e){return function(e){var t=[];e.fileList.map((function(e){t.push(e.originFileObj)})),G(t)}(e)},accept:".doc, .docx, .pdf, .txt, .rtf, .ppt, .pptx, .xls, .xlsx, .jpg, .jpeg, .png, .gif, .bmp, .tiff, .svg, .eml, .msg",children:[(0,I.jsx)(Z.Z,{color:"blue",style:{fontSize:32,marginBottom:8}}),(0,I.jsx)("p",{className:"text-sm pb-1",children:"Click or drag file to this area to upload"}),(0,I.jsx)("p",{className:"opacity-50 text-sm",children:"Support for a single or bulk upload."})]})},"form-item-c file-1")},{label:"Description",name:"Description",className:"col-span-12 mb-2",type:"textarea"},{label:"Include E-Mail",name:"includeEmail",className:"col-span-12 mb-2",type:"check"}],W=[{label:"File",name:"FileAddress",alignment:"left",cellRender:function(e){return(0,I.jsx)(c.Tooltip,{title:"".concat("https://ottas-api").concat(e.value),children:(0,I.jsx)("a",{className:"edit-button",href:"".concat("https://ottas-api").concat(e.value),target:"_blank",children:"View File"})})}},{label:"Uploader name",name:"FullName",alignment:"left"},{label:"Created Date",name:"CreatedDate",alignment:"left"},{label:"Include E-Mail",name:"IncludeEmail",alignment:"left",cellRender:function(e){return(0,I.jsx)(F.Jg,{disabled:!0,iconSize:18,value:1===e.value||0})}},{label:"Comment",name:"Description",alignment:"left"},{label:"",name:"action",width:"".concat(t?"0px":"150px"),alignment:"center",cellRender:function(e){return!t&&(0,I.jsxs)("div",{className:"flex gap-4",children:[(0,I.jsx)("button",{type:"button",className:"edit-button",onClick:function(){return t=e.data,Y(t),void p(!0);var t},children:"Edit"}),(0,I.jsx)("button",{type:"button",className:"dlt-button",onClick:function(t){return l=e.data,Y(l),void S(!0);var l},children:"Delete"})]})}}],J=function(){B.resetFields(),p(!1),y(!1)};return(0,I.jsxs)("div",{className:"col-span-12",children:[(0,I.jsx)(c.Table,{data:E,columns:W,allowColumnReordering:!1,containerClass:"shadow-none",keyExpr:"Id",pager:E.length>20,title:(0,I.jsxs)("div",{className:"flex justify-between items-center py-2 gap-3 border-b",children:[(0,I.jsx)("div",{className:"text-md font-bold pl-2",children:n?"Attachments":null}),!t&&(0,I.jsx)("div",{className:"flex gap-4 items-center",children:(0,I.jsx)(c.Button,{icon:(0,I.jsx)(w.Z,{}),onClick:function(){Y(null),p(!0)},className:"text-xs",htmlType:"button",children:"Add Attachment"})})]})}),(0,I.jsx)(c.Modal,{title:"Add Attachment",open:u,onCancel:function(){return p(!1)},children:(0,I.jsx)(c.Form,{form:B,fields:M?[{label:"Comment",name:"Description",className:"col-span-12 mb-2",type:"textarea"},{label:"Include E-Mail",name:"IncludeEmail",className:"col-span-12 mb-2",type:"check"}]:_,size:"small",className:"grid grid-cols-12 gap-x-8",onFinish:function(e){if(y(!0),M)(0,r.Z)({method:"put",url:"tas/requestdocumentattachment",data:(0,m.Z)((0,m.Z)({},e),{},{id:M.Id})}).then((function(e){z(),J()})).catch((function(e){})).then((function(){return y(!1)}));else{var t=new FormData;U.map((function(e){t.append("files",e)})),(0,r.Z)({method:"post",url:"/tas/SysFile/multi",data:t}).then((function(t){(0,r.Z)({method:"post",url:"/tas/requestdocumentattachment",data:(0,m.Z)((0,m.Z)({},e),{},{fileAddressIds:t.data.map((function(e){return e.Id})),documentId:H})}).then((function(e){z()})).catch((function(e){})).then((function(){return J()}))})).catch((function(e){J()}))}},noLayoutConfig:!0,layout:"vertical",children:(0,I.jsxs)("div",{className:"col-span-12 flex justify-end gap-3",children:[(0,I.jsx)(c.Button,{htmlType:"submit",type:"primary",icon:(0,I.jsx)(w.Z,{}),loading:T,children:"Save"}),(0,I.jsx)(c.Button,{htmlType:"button",onClick:J,disabled:T,children:"Cancel"})]})})}),(0,I.jsxs)(F.GI,{visible:g,showTitle:!1,height:110,width:350,children:[(0,I.jsx)("div",{children:"Are you sure you want to delete this record?"}),(0,I.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,I.jsx)(c.Button,{type:"danger",onClick:function(){(0,r.Z)({method:"delete",url:"tas/requestdocumentattachment/".concat(M.Id)}).then((function(){z(),S(!1)})).catch((function(e){}))},children:"Yes"}),(0,I.jsx)(c.Button,{onClick:function(){return S(!1)},children:"No"})]})]})]})},E=l(61033),k=l(52957);var A=function(e){var t,l,n,o,v,D,g,S,j,b,N,F=e.refreshData,T=e.disabled,y=e.currentGroup,C=e.travelData,Z=(0,i.useState)(!1),w=(0,a.Z)(Z,2),R=w[0],V=w[1],A=(0,i.useState)(!1),L=(0,a.Z)(A,2),M=L[0],Y=L[1],q=(0,i.useState)(null),O=(0,a.Z)(q,2),U=O[0],G=O[1],P=(0,i.useState)(!1),B=(0,a.Z)(P,2),H=B[0],z=B[1],_=(0,i.useState)(null),W=(0,a.Z)(_,2),J=W[0],K=W[1],Q=(0,i.useContext)(f.V).state,X=s.Z.useForm(),$=(0,a.Z)(X,1)[0],ee={DepartLocationId:null===(t=Q.referData)||void 0===t||null===(l=t.locations)||void 0===l?void 0:l.find((function(e){return"UB"===e.Code})).Id,ArriveLocationId:null===(n=Q.referData)||void 0===n||null===(o=n.locations)||void 0===o?void 0:o.find((function(e){return"OT"===e.Code})).Id},te={DepartLocationId:null===(v=Q.referData)||void 0===v||null===(D=v.locations)||void 0===D?void 0:D.find((function(e){return"OT"===e.Code})).Id,ArriveLocationId:null===(g=Q.referData)||void 0===g||null===(S=g.locations)||void 0===S?void 0:S.find((function(e){return"UB"===e.Code})).Id},le=function(){var e,t,l,n,o,a={RoomId:null,roomNumber:null};Q.userProfileData&&(a={roomNumber:null!==(e=Q.userProfileData)&&void 0!==e&&e.RoomNumber?null===(t=Q.userProfileData)||void 0===t?void 0:t.RoomNumber:"Virtual Room",RoomId:null!==(l=Q.userProfileData)&&void 0!==l&&l.RoomId?null===(n=Q.userProfileData)||void 0===n?void 0:n.RoomId:null===(o=Q.referData)||void 0===o?void 0:o.noRoomId.Id});return a};(0,i.useEffect)((function(){var e;C&&Q.userProfileData&&(e=h()(C.inScheduleDate).diff(h()(C.outScheduleDate))>0?(0,m.Z)((0,m.Z)({},C),{},{ShiftId:null===C||void 0===C?void 0:C.shiftId,Room:C.RoomId?{RoomId:C.RoomId,roomNumber:C.RoomNumber}:le(),firstTransport:{seats:{Seats:null===C||void 0===C?void 0:C.OUTScheduleSeatsCount,Booked:null===C||void 0===C?void 0:C.OUTScheduleBookedCount,Available:null===C||void 0===C?void 0:C.OUTScheduleAvailableCount},flightId:null===C||void 0===C?void 0:C.outScheduleId,flightInfo:"",Direction:null===C||void 0===C?void 0:C.outScheduleDirection,Date:null!==C&&void 0!==C&&C.outScheduleDate?h()(null===C||void 0===C?void 0:C.outScheduleDate):null,Description:null===C||void 0===C?void 0:C.OUTScheduleDescription},lastTransport:{seats:{Seats:null===C||void 0===C?void 0:C.INScheduleSeatsCount,Booked:null===C||void 0===C?void 0:C.INScheduleBookedCount,Available:null===C||void 0===C?void 0:C.INScheduleAvailableCount},flightId:null===C||void 0===C?void 0:C.inScheduleId,flightInfo:"",Direction:C.inScheduleDirection,Date:C.inScheduleDate?h()(C.inScheduleDate):null,Description:null===C||void 0===C?void 0:C.INScheduleDescription}}):(0,m.Z)((0,m.Z)({},C),{},{ShiftId:null===C||void 0===C?void 0:C.shiftId,Room:C.RoomId?{RoomId:C.RoomId,roomNumber:null===C||void 0===C?void 0:C.RoomNumber}:le(),firstTransport:{seats:{Seats:null===C||void 0===C?void 0:C.INScheduleSeatsCount,Booked:null===C||void 0===C?void 0:C.INScheduleBookedCount,Available:null===C||void 0===C?void 0:C.INScheduleAvailableCount},flightId:null===C||void 0===C?void 0:C.inScheduleId,Direction:C.inScheduleDirection,Date:C.inScheduleDate?h()(C.inScheduleDate):null,Description:null===C||void 0===C?void 0:C.INScheduleDescription},lastTransport:{seats:{Seats:null===C||void 0===C?void 0:C.OUTScheduleSeatsCount,Booked:null===C||void 0===C?void 0:C.OUTScheduleBookedCount,Available:null===C||void 0===C?void 0:C.OUTScheduleAvailableCount},flightId:null===C||void 0===C?void 0:C.outScheduleId,Direction:null===C||void 0===C?void 0:C.outScheduleDirection,Date:null!==C&&void 0!==C&&C.outScheduleDate?h()(null===C||void 0===C?void 0:C.outScheduleDate):null,Description:null===C||void 0===C?void 0:C.OUTScheduleDescription}}),ne(e),$.setFieldsValue(e),G(e))}),[C,Q.userProfileData]);var ne=function(e){var t=h()(e.firstTransport.Date).format("YYYY-MM-DD"),l=h()(e.lastTransport.Date).format("YYYY-MM-DD");e.inScheduleDate&&(0,r.Z)({method:"get",url:"tas/ActiveTransport/getdatetransport?eventDate=".concat(t,"&Direction=").concat(e.firstTransport.Direction)}).then((function(t){var l=[];t.data.map((function(e){l.push((0,m.Z)((0,m.Z)({},e),{},{value:e.ScheduleId,label:"".concat(e.Description," ").concat(e.Seat,"/").concat(e.BookedCount)}))})),$.setFieldValue(["firstTransport","flightId"],e.firstTransport.flightId)})),e.outScheduleDate&&(0,r.Z)({method:"get",url:"tas/ActiveTransport/getdatetransport?eventDate=".concat(l,"&Direction=").concat(e.lastTransport.Direction)}).then((function(t){var l=[];t.data.map((function(e){l.push((0,m.Z)((0,m.Z)({},e),{},{value:e.ScheduleId,label:"".concat(e.Description," ").concat(e.Seat,"/").concat(e.BookedCount)}))})),$.setFieldValue(["lastTransport","flightId"],e.lastTransport.flightId)}))},oe=function(e){"IN"===e?$.setFieldValue(["lastTransport","Direction"],"OUT"):$.setFieldValue(["lastTransport","Direction"],"IN")},ae=function(){var e={StartDate:$.getFieldValue(["firstTransport","Date"])?$.getFieldValue(["firstTransport","Date"]):null,EndDate:$.getFieldValue(["firstTransport","Date"])?$.getFieldValue(["firstTransport","Date"]):null};e="IN"===$.getFieldValue(["firstTransport","Direction"])?(0,m.Z)((0,m.Z)({},e),ee):"OUT"===$.getFieldValue(["firstTransport","Direction"])?(0,m.Z)((0,m.Z)({},e),te):(0,m.Z)((0,m.Z)({},e),{},{DepartLocationId:null,ArriveLocationId:null}),K((0,m.Z)((0,m.Z)({},e),{},{transportType:"first"})),z(!0)},ie=function(){var e=$.getFieldValue(["lastTransport","Direction"]),t=$.getFieldValue(["firstTransport","Direction"]),l={StartDate:$.getFieldValue(["lastTransport","Date"])?$.getFieldValue(["lastTransport","Date"]):null,EndDate:$.getFieldValue(["lastTransport","Date"])?$.getFieldValue(["lastTransport","Date"]):null};l="IN"===e||"OUT"===t?(0,m.Z)((0,m.Z)({},l),ee):"OUT"===e||"IN"===t?(0,m.Z)((0,m.Z)({},l),te):(0,m.Z)((0,m.Z)({},l),{},{DepartLocationId:null,ArriveLocationId:null}),K((0,m.Z)((0,m.Z)({},l),{},{transportType:"last"})),z(!0)},re=(0,i.useCallback)((function(e){$.setFieldValue("RoomId",""),$.setFieldValue(["firstTransport","Description"],null),$.setFieldValue(["firstTransport","flightId"],null)}),[]),se=(0,i.useCallback)((function(){$.setFieldValue(["lastTransport","Description"],null),$.setFieldValue(["lastTransport","flightId"],null)}),[]);return(0,I.jsxs)("div",{className:"w-full max-w-[1200px] col-span-12",children:[(0,I.jsxs)(c.Form,{className:"grid grid-cols-12 col-span-12 gap-x-5",form:$,onFinish:function(e){var t;V(!0),(0,r.Z)({method:"put",url:"tas/requestsitetravel/addtravel",data:{inScheduleId:"IN"===e.firstTransport.Direction?e.firstTransport.flightId:e.lastTransport.flightId,outScheduleId:"OUT"===e.firstTransport.Direction?e.firstTransport.flightId:e.lastTransport.flightId,departmentId:e.DepartmentId,shiftId:e.ShiftId,employerId:e.EmployerId,CheckRoom:"accomodation"===(null===y||void 0===y?void 0:y.GroupTag),positionId:e.PositionId,costcodeId:e.CostCodeId,roomId:null===(t=e.Room)||void 0===t?void 0:t.RoomId,id:C.Id}}).then((function(e){F(),Y(!1)})).catch((function(e){})).then((function(){return V(!1)}))},disabled:!M,size:"small",labelCol:{xs:{span:24},sm:{span:5}},children:[(0,I.jsx)(c.Form.Item,{label:"First Transport",className:"col-span-12 mb-2",shouldUpdate:function(e,t){var l,n;return(null===(l=e.firstTransport)||void 0===l?void 0:l.Date)!==(null===(n=t.firstTransport)||void 0===n?void 0:n.Date)},children:function(e){var t=e.getFieldValue,l=(e.getFieldsValue,t(["firstTransport","Date"]));return(0,I.jsxs)("div",{className:"flex gap-2",children:[(0,I.jsx)(c.Form.Item,{name:["firstTransport","Date"],noStyle:!l,className:"mb-0 w-[115px]",children:l?(0,I.jsx)(p.Z,{showWeek:!0,onChange:re,className:"w-full"}):null}),(0,I.jsx)(c.Form.Item,{name:["firstTransport","Direction"],noStyle:!l,className:"mb-0 w-[65px]",children:l?(0,I.jsx)(u.Z,{options:[{value:"IN",label:"IN"},{value:"OUT",label:"OUT"}],className:"w-full",onChange:oe}):null}),(0,I.jsx)(c.Form.Item,{noStyle:!0,name:["firstTransport","flightId"]}),(0,I.jsx)(c.Form.Item,{noStyle:!0,name:["firstTransport","seats"]}),(0,I.jsx)(c.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){var l,n;return(null===(l=e.firstTransport)||void 0===l?void 0:l.flightId)!==(null===(n=t.firstTransport)||void 0===n?void 0:n.flightId)},children:function(e){var t=(0,e.getFieldValue)(["firstTransport","flightId"]);return(0,I.jsx)(c.Form.Item,{noStyle:!l,name:["firstTransport","Description"],className:"flex-1 mb-0",children:l?(0,I.jsx)(d.Z,{readOnly:!0,addonAfter:(0,I.jsx)(c.SeatTooltip,{id:t})}):null})}}),l?null:(0,I.jsx)(c.Tooltip,{title:"Removed Schedule",children:(0,I.jsx)(c.Form.Item,{name:"inScheduleIdDescr",className:"mb-0 w-full",children:(0,I.jsx)(d.Z,{disabled:!0,status:"error",prefix:(0,I.jsx)(x.Z,{}),className:"w-full"})})}),(0,I.jsx)(c.Form.Item,{className:"col-span-1 mb-0",children:(0,I.jsx)(c.Button,{className:"text-xs py-[4px] px-2",type:"primary",onClick:ae,disabled:!M,icon:(0,I.jsx)(E.Z,{})})})]})}}),(0,I.jsx)(c.Form.Item,{label:"Last Transport",className:"col-span-12 mb-2",shouldUpdate:function(e,t){var l,n,o,a;return(null===(l=e.lastTransport)||void 0===l?void 0:l.Date)!==(null===(n=t.lastTransport)||void 0===n?void 0:n.Date)||(null===e||void 0===e||null===(o=e.firstTransport)||void 0===o?void 0:o.Direction)!==(null===t||void 0===t||null===(a=t.firstTransport)||void 0===a?void 0:a.Direction)},children:function(e){var t=(0,e.getFieldValue)(["lastTransport","Date"]);return(0,I.jsxs)("div",{className:"flex gap-2",children:[(0,I.jsx)(c.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){var l,n,o,a;return(null===(l=e.firstTransport)||void 0===l?void 0:l.Date)!==(null===(n=t.firstTransport)||void 0===n?void 0:n.Date)||(null===(o=e.lastTransport)||void 0===o?void 0:o.Date)!==(null===(a=t.lastTransport)||void 0===a?void 0:a.Date)},children:function(e){var l=e.getFieldValue,n=!1;return l(["lastTransport","Date"])||(n=l(["firstTransport","Date"])),(0,I.jsx)(c.Form.Item,{name:["lastTransport","Date"],noStyle:!t,className:"mb-0 w-[115px]",children:t?(0,I.jsx)(p.Z,{defaultPickerValue:n,showWeek:!0,onChange:se,className:"w-full"}):null})}}),(0,I.jsx)(c.Form.Item,{className:"mb-0 w-[65px]",noStyle:!0,shouldUpdate:function(e,t){var l,n;return(null===e||void 0===e||null===(l=e.firstTransport)||void 0===l?void 0:l.Direction)!==(null===t||void 0===t||null===(n=t.firstTransport)||void 0===n?void 0:n.Direction)},children:function(e){var t=e.getFieldValue,l=e.setFieldValue,n=t(["firstTransport","Direction"]);"IN"===n&&l(["lastTransport","Direction"],"OUT"),"OUT"===n&&l(["lastTransport","Direction"],"IN")}}),(0,I.jsx)(c.Form.Item,{name:["lastTransport","Direction"],noStyle:!t,className:"mb-0 w-[65px]",children:t?(0,I.jsx)(u.Z,{disabled:!0,options:[{value:"IN",label:"IN"},{value:"OUT",label:"OUT"}],className:"w-full"}):null}),(0,I.jsx)(c.Form.Item,{noStyle:!0,name:["lastTransport","flightId"]}),(0,I.jsx)(c.Form.Item,{noStyle:!0,name:["lastTransport","seats"]}),(0,I.jsx)(c.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){var l,n;return(null===(l=e.lastTransport)||void 0===l?void 0:l.flightId)!==(null===(n=t.lastTransport)||void 0===n?void 0:n.flightId)},children:function(e){var l=(0,e.getFieldValue)(["lastTransport","flightId"]);return(0,I.jsx)(c.Form.Item,{name:["lastTransport","Description"],noStyle:!t,className:"flex-1 mb-0",children:t?(0,I.jsx)(d.Z,{readOnly:!0,addonAfter:(0,I.jsx)(c.SeatTooltip,{id:l})}):null})}}),t?null:(0,I.jsx)(c.Tooltip,{title:"Removed Schedule",children:(0,I.jsx)(c.Form.Item,{name:"outScheduleIdDescr",className:"mb-0 w-full",children:(0,I.jsx)(d.Z,{disabled:!0,status:"error",prefix:(0,I.jsx)(x.Z,{}),className:"w-full"})})}),(0,I.jsx)(c.Form.Item,{className:"col-span-1 mb-0",children:(0,I.jsx)(c.Button,{className:"text-xs py-1 px-2",type:"primary",onClick:ie,disabled:!M,icon:(0,I.jsx)(E.Z,{})})})]})}}),(0,I.jsx)(c.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){var l,n;return(null===(l=e.firstTransport)||void 0===l?void 0:l.Direction)!==(null===(n=t.firstTransport)||void 0===n?void 0:n.Direction)},children:function(e){var t,l,n,o,a=e.getFieldValue;e.setFieldValue;return"OUT"===a(["firstTransport","Direction"])?(0,I.jsx)(c.Form.Item,{label:"Shift",name:"ShiftId",className:"col-span-12 mb-2",rules:[{required:!0,message:"Shift is required"}],children:(0,I.jsx)(u.Z,{options:null===(t=Q.referData)||void 0===t||null===(l=t.roomStatuses)||void 0===l?void 0:l.filter((function(e){return 0===e.OnSite})),className:"w-full",filterOption:function(e,t){var l;return(null!==(l=null===t||void 0===t?void 0:t.label)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})}):(0,I.jsx)(c.Form.Item,{label:"Shift",name:"ShiftId",className:"col-span-12 mb-2",rules:[{required:!0,message:"Shift is required"}],children:(0,I.jsx)(u.Z,{options:null===(n=Q.referData)||void 0===n||null===(o=n.roomStatuses)||void 0===o?void 0:o.filter((function(e){return 1===e.OnSite})),className:"w-full",filterOption:function(e,t){var l;return(null!==(l=null===t||void 0===t?void 0:t.label)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0,allowClear:!0})})}}),(0,I.jsx)(c.Form.Item,{label:"Department",name:"DepartmentId",className:"col-span-12 mb-2",rules:[{required:!0,message:"Department is required"}],children:(0,I.jsx)(k.Z,{treeData:Q.referData.departments,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},filterTreeNode:function(e,t){var l;return(null!==(l=null===t||void 0===t?void 0:t.Name)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},allowClear:!0,showSearch:!0})},"form-item-DepartmentId"),(0,I.jsx)(c.Form.Item,{label:"Position",name:"PositionId",className:"col-span-12 mb-2",rules:[{required:!0,message:"Position is required"}],children:(0,I.jsx)(u.Z,{allowClear:!0,showSearch:!0,filterOption:function(e,t){var l;return(null!==(l=null===t||void 0===t?void 0:t.label)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},options:null===(j=Q.referData)||void 0===j?void 0:j.positions})},"form-item-PositionId"),(0,I.jsx)(c.Form.Item,{label:"Cost Code",name:"CostCodeId",className:"col-span-12 mb-2",rules:[{required:!0,message:"Cost Code is required"}],children:(0,I.jsx)(u.Z,{allowClear:!0,showSearch:!0,filterOption:function(e,t){var l;return(null!==(l=null===t||void 0===t?void 0:t.label)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},options:null===(b=Q.referData)||void 0===b?void 0:b.costCodes})},"form-item-CostCodeId"),(0,I.jsx)(c.Form.Item,{label:"Employer",name:"EmployerId",className:"col-span-12 mb-2",rules:[{required:!0,message:"Employer is required"}],children:(0,I.jsx)(u.Z,{allowClear:!0,showSearch:!0,filterOption:function(e,t){var l;return(null!==(l=null===t||void 0===t?void 0:t.label)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},options:null===(N=Q.referData)||void 0===N?void 0:N.employers})},"form-item-EmployerId"),!T&&"Completed"!==(null===y||void 0===y?void 0:y.GroupTag)&&(0,I.jsx)("div",{className:"col-span-12 flex justify-end gap-5",children:M?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(c.Button,{htmlType:"button",onClick:function(){return $.submit()},type:"success",loading:R,children:"Save"}),(0,I.jsx)(c.Button,{htmlType:"button",onClick:function(){Y(!1),$.setFieldsValue(U)},children:"Cancel"})]}):(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(c.Button,{htmlType:"button",onClick:function(){return Y(!0)},type:"primary",children:"Edit"})})})]}),(0,I.jsx)(c.Modal,{title:"Select Transport",open:H,width:900,onCancel:function(){return z(!1)},destroyOnClose:!0,children:(0,I.jsx)(c.TransportSearch,{initialSearchValues:J,handleSelect:function(e){"first"===J.transportType?($.setFieldValue(["firstTransport","seats"],{Seats:e.Seats,Booked:e.Confirmed,Available:e.Seats-e.Confirmed<0?0:e.Seats-e.Confirmed}),$.setFieldValue(["firstTransport","Direction"],e.Direction),$.setFieldValue(["firstTransport","Description"],"".concat(e.Code," ").concat(e.Description," ").concat(e.TransportMode)),$.setFieldValue(["firstTransport","flightId"],e.Id),$.setFieldValue(["firstTransport","Date"],h()(e.EventDate)),z(!1)):($.setFieldValue(["lastTransport","seats"],{Seats:e.Seats,Booked:e.Confirmed,Available:e.Seats-e.Confirmed<0?0:e.Seats-e.Confirmed}),$.setFieldValue(["lastTransport","Direction"],e.Direction),$.setFieldValue(["lastTransport","Description"],"".concat(e.Code," ").concat(e.Description," ").concat(e.TransportMode)),$.setFieldValue(["lastTransport","flightId"],e.Id),$.setFieldValue(["lastTransport","Date"],h()(e.EventDate)),z(!1))}})})]})},L=l(8251),M=l(10202);var Y=function(){var e,t=(0,i.useState)(null),l=(0,a.Z)(t,2),m=l[0],p=l[1],v=(0,i.useState)(!1),h=(0,a.Z)(v,2),x=h[0],g=h[1],S=(0,i.useState)(null),j=(0,a.Z)(S,2),N=j[0],T=j[1],C=(0,i.useState)(null),Z=(0,a.Z)(C,2),w=Z[0],R=Z[1],E=(0,i.useState)(null),k=(0,a.Z)(E,2),Y=k[0],q=k[1],O=(0,i.useState)(!1),U=(0,a.Z)(O,2),G=U[0],P=U[1],B=(0,i.useState)([]),H=(0,a.Z)(B,2),z=H[0],_=H[1],W=(0,i.useState)(null),J=(0,a.Z)(W,2),K=J[0],Q=J[1],X=(0,i.useState)(!1),$=(0,a.Z)(X,2),ee=$[0],te=$[1],le=(0,i.useState)(null),ne=(0,a.Z)(le,2),oe=ne[0],ae=ne[1],ie=(0,b.f_)().data,re=(0,i.useContext)(f.V),se=re.state,de=re.action,ue=s.Z.useForm(),ce=(0,a.Z)(ue,1)[0],me=s.Z.useForm(),pe=(0,a.Z)(me,1)[0],fe=s.Z.useForm(),ve=(0,a.Z)(fe,1)[0],he=(0,b.s0)(),xe=(0,b.UO)(),Ie=xe.documentId,De=xe.documentTag,ge="requestDocumentDetail_".concat(Ie);(0,i.useEffect)((function(){ie.Id&&p(ie)}),[ie]),(0,i.useEffect)((function(){Ie&&ie.Id&&(g(!0),de.changeMenuKey("/request/task"),r.Z.all(["tas/employee/profile/".concat(ie.EmployeeId),"tas/requestdocumenthistory/".concat(Ie),"tas/requestdocument/myinfo","/tas/requestgroupconfig/groupandmembers/".concat(Ie),"/tas/requestgroupconfig/documentroute/".concat(Ie)].map((function(e){return r.Z.get(e)}))).then(r.Z.spread((function(e,t,l,n,o){de.saveUserProfileData(e.data),ae(e.data),_(t.data),Q(l.data),Fe(o.data,n.data)}))).catch((function(){})).then((function(){return g(!1)})))}),[Ie,ie]),(0,i.useEffect)((function(){return se.connectionMultiViewer&&se.userInfo&&(je(),se.connectionMultiViewer.on("UsersInScreen",(function(e,t){var l=t.map((function(e){var t,l;return{name:null===(t=e.userName)||void 0===t?void 0:t.split("_")[0],role:null===(l=e.userName)||void 0===l?void 0:l.split("_")[1],color:(0,M.Z)()}}));de.setMultiViewers(l.filter((function(e){var t,l;return e.name!=="".concat(null===(t=se.userInfo)||void 0===t?void 0:t.Firstname," ").concat(null===(l=se.userInfo)||void 0===l?void 0:l.Lastname)})))}))),function(){se.connectionMultiViewer&&be()}}),[se.connectionMultiViewer,se.userInfo]);var Se,je=function(){var e,t,l,n="".concat(null===(e=se.userInfo)||void 0===e?void 0:e.Firstname," ").concat(null===(t=se.userInfo)||void 0===t?void 0:t.Lastname,"_").concat(null===(l=se.userInfo)||void 0===l?void 0:l.Role);try{var o;null===(o=se.connectionMultiViewer)||void 0===o||o.invoke("JoinScreen",n,ge)}catch(a){}},be=function(){var e,t,l,n;de.setMultiViewers([]);var o="".concat(null===(e=se.userInfo)||void 0===e?void 0:e.Firstname," ").concat(null===(t=se.userInfo)||void 0===t?void 0:t.Lastname,"_").concat(null===(l=se.userInfo)||void 0===l?void 0:l.Role);null===(n=se.connectionMultiViewer)||void 0===n||n.invoke("LeaveScreen",o,ge)},Ne=function(){(0,r.Z)({method:"get",url:"tas/requestsitetravel/".concat(De,"/").concat(Ie)}).then(function(){var e=(0,o.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data.Id&&p(t.data);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))},Fe=function(e,t){var l=e.find((function(e){return 1===e.CurrentPosition}));if(q(l),"reschedule"===De){if("Requester"===(null===l||void 0===l?void 0:l.GroupTag)){var n=t.find((function(e){return"linemanager"===(null===e||void 0===e?void 0:e.GroupTag)}));if(n){var o=[];n.groupMembers.map((function(e){o.push({value:e.employeeId,label:e.fullName})})),ce.setFieldValue("nextGroupName",null===n||void 0===n?void 0:n.GroupName),ce.setFieldValue("nextGroupId",null===n||void 0===n?void 0:n.id),ce.setFieldValue("assignEmployeeOptions",o)}R(n)}}else if("addtravel"===De){if("Requester"===(null===l||void 0===l?void 0:l.GroupTag)){var a=t.find((function(e){return"linemanager"===(null===e||void 0===e?void 0:e.GroupTag)}));if(a){var i=[];a.groupMembers.map((function(e){i.push({value:e.employeeId,label:e.fullName})})),ce.setFieldValue("nextGroupName",null===a||void 0===a?void 0:a.GroupName),ce.setFieldValue("nextGroupId",null===a||void 0===a?void 0:a.id),ce.setFieldValue("assignEmployeeOptions",i)}R(a)}}else if("Requester"===(null===l||void 0===l?void 0:l.GroupTag)){var r=t.find((function(e){return"linemanager"===(null===e||void 0===e?void 0:e.GroupTag)}));if(r){var s=[];r.groupMembers.map((function(e){s.push({value:e.employeeId,label:e.fullName})})),ce.setFieldValue("nextGroupName",null===r||void 0===r?void 0:r.GroupName),ce.setFieldValue("nextGroupId",null===r||void 0===r?void 0:r.id),ce.setFieldValue("assignEmployeeOptions",s)}R(r)}},Te=function(){var e=ce.getFieldsValue();if(te(!0),"remove"===De)if("Cancel"===N)(0,r.Z)({method:"put",url:"tas/requestdocument/".concat(N),data:{nextGroupId:e.nextGroupId,comment:e.comment,assignEmployeeId:e.assignedEmployeeId,id:Ie,impersonateUserId:null}}).then((function(e){P(!1),he("/guest/request")})).catch((function(e){})).then((function(){return te(!1)}));else{var t,l,n=ve.getFieldsValue();(0,r.Z)({method:"put",url:"tas/requestsitetravel/removetravel",data:{id:null===m||void 0===m?void 0:m.TravelData.Id,firstScheduleId:n.firstTransport.flightId,lastScheduleId:n.lastTransport.flightId,shiftId:n.ShiftId,RoomId:null!==(t=n.Room)&&void 0!==t&&t.RoomId?null===(l=n.Room)||void 0===l?void 0:l.RoomId:null,CostCodeId:n.CostCodeId}}).then((function(t){(0,r.Z)({method:"put",url:"tas/requestdocument/".concat(N),data:{nextGroupId:e.nextGroupId,comment:e.comment,assignEmployeeId:e.assignedEmployeeId,id:Ie,impersonateUserId:null}}).then((function(e){P(!1),he("/guest/request")})).catch((function(e){})).then((function(){return te(!1)}))})).catch((function(){}))}else(0,r.Z)({method:"put",url:"tas/requestdocument/".concat(N),data:{nextGroupId:e.nextGroupId,comment:e.comment,assignEmployeeId:e.assignedEmployeeId,id:Ie,impersonateUserId:null}}).then((function(e){P(!1),he("/guest/request")})).catch((function(e){})).then((function(){return te(!1)}))},ye=(0,i.useMemo)((function(){return"Completed"===(null===m||void 0===m?void 0:m.CurrentStatus)||"Cancelled"===(null===m||void 0===m?void 0:m.CurrentStatus)||L.Z.getDisabledStatus({documentData:m,userData:K,groupTag:null===Y||void 0===Y?void 0:Y.GroupTag})}),[m,K,Y]),Ce=function(e){T(e),"Approve"===e?ce.submit():P(!0)};return ie.Id?(0,I.jsxs)("div",{children:[x?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{className:"animate-skeleton h-[230px] flex rounded-ot mb-5 shadow-md"}),(0,I.jsx)("div",{className:"animate-skeleton h-[400px] flex rounded-ot shadow-md"})]}):(0,I.jsxs)("div",{className:"relative",children:[(0,I.jsx)(c.RequestDocumentHeader,{profileData:oe,documentDetail:m}),(0,I.jsx)(c.Accordion,{title:"Travel Calendar",className:"border mt-3",children:(0,I.jsx)("div",{className:"p-3",children:(0,I.jsx)(c.ProfileCalendar,{profile:oe})})}),(0,I.jsxs)("div",{className:"grid grid-cols-12 gap-3 mt-3",children:[function(){switch(De){case"addtravel":return(0,I.jsx)(c.Accordion,{title:"New Travel Request",className:"border col-span-12 xl:col-span-7 2xl:col-span-6",children:(0,I.jsx)("div",{className:"p-4",children:(0,I.jsx)(A,{form:pe,documentDetail:m,refreshData:Ne,disabled:ye,currentGroup:Y,travelData:null===m||void 0===m?void 0:m.TravelData})})});case"reschedule":return(0,I.jsx)(c.Accordion,{title:"Reschedule Existing Travel",className:"border col-span-12 xl:col-span-7 2xl:col-span-6",children:(0,I.jsx)("div",{className:"p-4",children:(0,I.jsx)(D,{documentDetail:m,data:null===m||void 0===m?void 0:m.TravelData,refreshData:Ne,disabled:ye,currentGroup:Y,travelData:null===m||void 0===m?void 0:m.TravelData})})});case"remove":return(0,I.jsx)(c.Accordion,{title:"Remove Existing Travel",className:"border col-span-12 xl:col-span-7 2xl:col-span-6",children:(0,I.jsx)("div",{className:"p-4",children:(0,I.jsx)(y,{form:ve,editData:null===m||void 0===m?void 0:m.TravelData,currentGroup:Y,disabled:ye})})})}}(),(0,I.jsx)(c.Accordion,{title:"Request Document",className:"border col-span-12 xl:col-span-5 2xl:col-span-6",children:(0,I.jsx)(c.Form,{className:"grid grid-cols-12 ",form:ce,onFinish:Te,children:(0,I.jsxs)("div",{className:"flex flex-col gap-1 px-4 pb-2 pt-4 col-span-12",children:[(0,I.jsxs)("div",{className:"border border-[#ffe58f] bg-[#fffbe6] rounded-md px-3 py-2",children:[(0,I.jsx)("div",{className:"font-medium leading-none mb-1",children:"Reason"}),(0,I.jsx)("div",{children:null===m||void 0===m||null===(e=m.TravelData)||void 0===e?void 0:e.Reason})]}),L.Z.getActionPermission({documentData:m,userData:K,groupTag:null===Y||void 0===Y?void 0:Y.GroupTag,userGroupIds:null===K||void 0===K?void 0:K.ApprovalGroupIds})?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:"mt-2",children:["Comments:",(0,I.jsx)(c.Form.Item,{className:"mb-0",name:"comment",children:(0,I.jsx)(d.Z.TextArea,{autoSize:{minRows:3,maxRows:5},maxLength:300,showCount:!0})})]}),(0,I.jsx)("div",{className:"flex mt-2 mb-2 gap-5",children:w&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(c.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.nextGroupName!==t.nextGroupName},children:function(e){var t=e.getFieldValue;return(0,I.jsxs)(c.Form.Item,{name:"nextGroupId",className:"mb-0 leading-none",children:["Next Approval: ",(0,I.jsx)("span",{className:"font-bold",children:t("nextGroupName")})]})}}),(0,I.jsx)(c.Form.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.assignEmployeeOptions!==t.assignEmployeeOptions},children:function(e){var t=e.getFieldValue;return(0,I.jsx)(c.Form.Item,{name:"assignedEmployeeId",label:"Send to:",rules:[{required:!0,message:"Assign Employee is required"}],className:"w-[300px] mb-0",labelCol:{flex:"70px"},children:(0,I.jsx)(u.Z,{options:t("assignEmployeeOptions"),className:"w-[200px]",filterOption:function(e,t){var l;return(null!==(l=null===t||void 0===t?void 0:t.label)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},showSearch:!0})})}})]})}),(0,I.jsx)("div",{className:"flex justify-end gap-4",children:(0,I.jsx)("div",{className:"flex items-center gap-3 justify-end",children:(Se=null===w||void 0===w?void 0:w.GroupTag,Se?"complete"!==Se?(0,I.jsx)(I.Fragment,{children:"Requester"===Y.GroupTag?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(c.Button,{htmlType:"button",type:"primary",onClick:function(){return Ce("Approve")},disabled:ee,loading:ee&&"Approve"===N,children:"Submit"}),(0,I.jsx)(c.Button,{htmlType:"button",type:"danger",onClick:function(){return Ce("Cancel")},disabled:ee,children:"Cancel Request"})]}):null}):void 0:null)})})]}):(null===K||void 0===K?void 0:K.EmployeeId)===(null===m||void 0===m?void 0:m.RequestUserId)&&"Completed"!==(null===m||void 0===m?void 0:m.CurrentStatus)&&"Cancelled"!==(null===m||void 0===m?void 0:m.CurrentStatus)?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:"mt-2",children:["Comments:",(0,I.jsx)(c.Form.Item,{className:"mb-0",name:"comment",children:(0,I.jsx)(d.Z.TextArea,{autoSize:{minRows:3,maxRows:5},maxLength:300,showCount:!0})})]}),(0,I.jsx)("div",{className:"flex justify-end mt-3",children:(0,I.jsx)(c.Button,{htmlType:"button",type:"danger",onClick:function(){return Ce("Cancel")},disabled:ee,children:"Cancel Request"})})]}):null]})})}),(0,I.jsx)(c.Accordion,{defaultOpen:!1,title:"Attachments",className:"border col-span-12",children:(0,I.jsx)("div",{className:"p-4",children:(0,I.jsx)(V,{showTitle:!1,disabled:ye})})}),(0,I.jsx)(c.Accordion,{defaultOpen:!1,title:"Document History & Comments, Document Route",className:"border col-span-12 rounded-ot overflow-hidden",children:(0,I.jsx)("div",{className:"grid grid-cols-12 items-start gap-4 p-4",children:(0,I.jsx)(c.DocumentTimeline,{data:z})})})]})]}),(0,I.jsx)(F.GI,{visible:G,showTitle:!1,height:120,width:350,children:(0,I.jsx)("div",{children:function(e){switch(e){case"Approve":return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{children:"Are you sure you want to approve this request?"}),(0,I.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,I.jsx)(c.Button,{type:"success",onClick:function(){return ce.submit()},loading:ee,children:"Yes"}),(0,I.jsx)(c.Button,{onClick:function(){return P(!1)},disabled:ee,children:"No"})]})]});case"Cancel":return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{children:"Are you sure you want to cancel this request?"}),(0,I.jsxs)("div",{className:"flex gap-5 mt-4 justify-center",children:[(0,I.jsx)(c.Button,{type:"danger",onClick:Te,loading:ee,children:"Yes"}),(0,I.jsx)(c.Button,{onClick:function(){return P(!1)},disabled:ee,children:"No"})]})]})}}(N)})})]}):(0,I.jsxs)("div",{className:"bg-white rounded-ot px-4 py-3 min-h-[300px] flex flex-col justify-center items-center",children:[(0,I.jsx)("div",{className:"text-xl",children:"Not Found Document"}),(0,I.jsx)(c.Button,{htmlType:"button",type:"primary",className:"mt-5",onClick:function(){return he("/request/task")},children:"Back to List"})]})}},8251:function(e,t){var l={getDisabledStatus:function(e){var t,l,n=e.documentData,o=e.userData,a=e.groupTag;e.userGroupIds;return console.log("hello",n,o,a),"Completed"===a||"Cancelled"===a||(null!==n&&void 0!==n&&n.AssignedEmployeeId?!(null!==o&&void 0!==o&&null!==(t=o.LineManagerIds)&&void 0!==t&&t.includes(null===n||void 0===n?void 0:n.AssignedEmployeeId)||(null===n||void 0===n?void 0:n.AssignedEmployeeId)===(null===o||void 0===o?void 0:o.EmployeeId)||"Data Approval"===(null===o||void 0===o?void 0:o.Rolename)&&"linemanager"===a||"SystemAdministrator"===(null===o||void 0===o?void 0:o.Rolename)):!("SystemAdministrator"===(null===o||void 0===o?void 0:o.Rolename)||null!==o&&void 0!==o&&null!==(l=o.ApprovalGroupIds)&&void 0!==l&&l.includes(null===n||void 0===n?void 0:n.AssignedRouteConfigId)))},getActionPermission:function(e){var t,l,n=e.documentData,o=e.userData,a=e.groupTag,i=(e.userGroupIds,null);"Completed"===(null===n||void 0===n?void 0:n.CurrentStatus)||"Cancelled"===(null===n||void 0===n?void 0:n.CurrentStatus)?i=!1:i=null!==n&&void 0!==n&&n.AssignedEmployeeId?!!(null!==o&&void 0!==o&&null!==(t=o.LineManagerIds)&&void 0!==t&&t.includes(null===n||void 0===n?void 0:n.AssignedEmployeeId)||(null===n||void 0===n?void 0:n.AssignedEmployeeId)===(null===o||void 0===o?void 0:o.EmployeeId)||"Data Approval"===(null===o||void 0===o?void 0:o.Rolename)&&"linemanager"===a||"SystemAdministrator"===(null===o||void 0===o?void 0:o.Rolename)):!!("SystemAdministrator"===(null===o||void 0===o?void 0:o.Rolename)||null!==o&&void 0!==o&&null!==(l=o.ApprovalGroupIds)&&void 0!==l&&l.includes(null===n||void 0===n?void 0:n.AssignedRouteConfigId));return i},checkUpdateItinerary:function(e){var t,l=e.groupAndMembers,n=e.userData,o=!1,a=null===l||void 0===l?void 0:l.find((function(e){return"travelflight"===e.GroupTag}));return null!==n&&void 0!==n&&null!==(t=n.GroupIds)&&void 0!==t&&t.includes(null===a||void 0===a?void 0:a.GroupId)&&(o=!0),o}};t.Z=l},66736:function(e,t,l){l.d(t,{Z:function(){return s}});var n=l(87462),o=l(47313),a={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},i=l(17469),r=function(e,t){return o.createElement(i.Z,(0,n.Z)({},e,{ref:t,icon:a}))};var s=o.forwardRef(r)}}]);