"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[4713],{14713:function(e,l,a){a.r(l);var o=a(74165),i=a(15861),n=a(1413),t=a(29439),r=a(24957),s=a(53979),d=a(12998),u=a(65040),c=a(74294),p=a(21975),m=a(93031),v=a(68197),b=a(59624),f=a(22834),x=a(76298),g=a(76047),N=a(2880),h=a(10658),y=a.n(h),D=a(47313),I=a(46146),C=a.n(I),q=a(69226),L=a.n(q),P=a(56573),j=a(58467),R=a(2135),F=a(42614),Z=a(41303),E=a(63462),w=a(46417);y().extend(C()),y().extend(L());var M=new RegExp(/^[\u0410-\u042f\u04ae\u04e8]{2}\d{8}$/),A=new RegExp(/^[0-9]{8}$/),S=new RegExp(/^[A-Za-z -]+$/g),k=new RegExp(/^[0-9 +]+$/),T={labelCol:{xs:{span:24},sm:{span:12},md:{span:8},lg:{span:12},xl:{span:8},xxl:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}};l.default=function(){var e,l,a,h,I,C,q,L,V,G,z,O,U,Y,H,B,$,K,_,J,Q,W,X,ee,le,ae,oe,ie,ne,te,re,se,de,ue,ce,pe,me,ve,be,fe,xe,ge,Ne,he,ye,De,Ie,Ce,qe,Le,Pe,je,Re,Fe,Ze,Ee,we,Me,Ae,Se,ke,Te,Ve,Ge,ze,Oe,Ue,Ye,He,Be,$e,Ke,_e,Je,Qe,We,Xe,el,ll,al,ol,il,nl,tl,rl=(0,D.useState)("0"),sl=(0,t.Z)(rl,2),dl=sl[0],ul=sl[1],cl=(0,D.useState)(!0),pl=(0,t.Z)(cl,2),ml=(pl[0],pl[1]),vl=(0,D.useState)(!1),bl=(0,t.Z)(vl,2),fl=bl[0],xl=bl[1],gl=(0,D.useState)(null),Nl=(0,t.Z)(gl,2),hl=Nl[0],yl=Nl[1],Dl=(0,D.useState)(!1),Il=(0,t.Z)(Dl,2),Cl=Il[0],ql=Il[1],Ll=(0,D.useState)([]),Pl=(0,t.Z)(Ll,2),jl=Pl[0],Rl=Pl[1],Fl=(0,D.useState)(!0),Zl=(0,t.Z)(Fl,2),El=Zl[0],wl=Zl[1],Ml=(0,j.UO)().employeeId,Al=(0,D.useContext)(F.V),Sl=Al.state,kl=Al.action,Tl=d.ZP.useNotification(),Vl=(0,t.Z)(Tl,2),Gl=Vl[0],zl=Vl[1],Ol=u.Z.useForm(),Ul=(0,t.Z)(Ol,1)[0];(0,D.useEffect)((function(){Bl()}),[]),(0,D.useEffect)((function(){Ul.resetFields(),ql(!1)}),[Ml]),(0,D.useEffect)((function(){Sl.userProfileData&&Yl(Sl.userProfileData)}),[Sl.userProfileData]);var Yl=function(e){var l;Ul.setFieldsValue((0,n.Z)((0,n.Z)({},e),{},{Dob:e.Dob?y()(e.Dob):null,CommenceDate:e.CommenceDate?y()(e.CommenceDate):null,CompletionDate:e.CompletionDate?y()(e.CompletionDate):null,NextRosterDate:e.NextRosterDate?y()(e.NextRosterDate):null,PassportExpiry:e.PassportExpiry?y()(e.PassportExpiry):null})),null===(l=e.GroupData)||void 0===l||l.map((function(e){Ul.setFieldValue(e.GroupMasterId,e.GroupDetailId)})),ml(!1)},Hl=(0,D.useMemo)((function(){if(Sl.userProfileData)return(0,n.Z)((0,n.Z)({},Sl.userProfileData),{},{Dob:Sl.userProfileData.Dob?y()(Sl.userProfileData.Dob):null,CommenceDate:Sl.userProfileData.CommenceDate?y()(Sl.userProfileData.CommenceDate):null,CompletionDate:Sl.userProfileData.CompletionDate?y()(Sl.userProfileData.CompletionDate):null,NextRosterDate:Sl.userProfileData.NextRosterDate?y()(Sl.userProfileData.NextRosterDate):null,PassportExpiry:Sl.userProfileData.PassportExpiry?y()(Sl.userProfileData.PassportExpiry):null})}),[Sl.userProfileData]),Bl=function(){(0,P.Z)({method:"get",url:"tas/profilefield"}).then((function(e){var l={};e.data.map((function(e){l[e.ColumnName]=e})),Rl(l)})).catch((function(){})).then((function(){return wl(!1)}))},$l=[{label:null===(e=jl.NationalityId)||void 0===e?void 0:e.Label,name:"NationalityId",className:"col-span-12 lg:col-span-6 mb-0",type:"select",labelCol:{flex:"150px"},rules:[{required:null===(l=jl.NationalityId)||void 0===l?void 0:l.FieldRequired,message:"".concat(null===(a=jl.NationalityId)||void 0===a?void 0:a.Label," is required")}],inputprops:{options:Sl.referData.nationalities}},{type:"component",name:"Gender",component:(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.NRN!==l.NRN||e.NationalityId!==l.NationalityId},children:function(e){var l,a,o;e.getFieldValue,e.setFieldValue;return(0,w.jsx)(u.Z.Item,{label:null===(l=jl.Gender)||void 0===l?void 0:l.Label,name:"Gender",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(a=jl.Gender)||void 0===a?void 0:a.FieldRequired,message:"".concat(null===(o=jl.Gender)||void 0===o?void 0:o.Label," is required")}],children:(0,w.jsx)(c.Z,{options:[{value:1,label:"Male"},{value:0,label:"Female"}]})})}})},{type:"component",name:"NRN",component:(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.NationalityId!==l.NationalityId},children:function(e){var l,a,o,i=e.getFieldValue,n=Sl.referData.nationalities.find((function(e){return e.value===i("NationalityId")}));return"MN"===(null===n||void 0===n?void 0:n.Code)&&(0,w.jsx)(u.Z.Item,{label:null===(l=jl.NRN)||void 0===l?void 0:l.Label,name:"NRN",className:"col-span-12 lg:col-span-6 mb-0",labelCol:{flex:"150px"},rules:[{required:null===(a=jl.NRN)||void 0===a?void 0:a.FieldRequired,message:"".concat(null===(o=jl.NRN)||void 0===o?void 0:o.Label," is required")},{pattern:M,message:"Please use only cyrillic characters"}],children:(0,w.jsx)(p.Z,{maxLength:10,onInput:function(e){return e.target.value=e.target.value.toUpperCase()}})})}})},{type:"component",name:"Dob",component:(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.NRN!==l.NRN||e.NationalityId!==l.NationalityId},children:function(e){var l,a,o,i,n=e.getFieldValue,t=e.setFieldValue,r=Sl.referData.nationalities.find((function(e){return e.value===n("NationalityId")}));return"MN"!==(null===r||void 0===r?void 0:r.Code)||10!==(null===(l=n("NRN"))||void 0===l?void 0:l.length)||n("Dob")||t("Dob",y()(E.Z.getDob(n("NRN")))),(0,w.jsx)(u.Z.Item,{label:null===(a=jl.Dob)||void 0===a?void 0:a.Label,name:"Dob",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(o=jl.Dob)||void 0===o?void 0:o.FieldRequired,message:"".concat(null===(i=jl.Dob)||void 0===i?void 0:i.Label," is required")}],children:(0,w.jsx)(m.Z,{})})}})},{label:null===(h=jl.Firstname)||void 0===h?void 0:h.Label,name:"Firstname",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(I=jl.Firstname)||void 0===I?void 0:I.FieldRequired,message:"".concat(null===(C=jl.Firstname)||void 0===C?void 0:C.Label," is required")}]},{label:null===(q=jl.Lastname)||void 0===q?void 0:q.Label,name:"Lastname",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(L=jl.Lastname)||void 0===L?void 0:L.FieldRequired,message:"".concat(null===(V=jl.Lastname)||void 0===V?void 0:V.Label," is required")}]},{label:null===(G=jl.MFirstname)||void 0===G?void 0:G.Label,name:"MFirstname",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(z=jl.MFirstname)||void 0===z?void 0:z.FieldRequired,message:"".concat(null===(O=jl.MFirstname)||void 0===O?void 0:O.Label," is required")}]},{label:null===(U=jl.MLastname)||void 0===U?void 0:U.Label,name:"MLastname",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(Y=jl.MLastname)||void 0===Y?void 0:Y.FieldRequired,message:"".concat(null===(H=jl.MLastname)||void 0===H?void 0:H.Label," is required")}]},{label:null===(B=jl.CommenceDate)||void 0===B?void 0:B.Label,name:"CommenceDate",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",type:"date",rules:[{required:null===($=jl.CommenceDate)||void 0===$?void 0:$.FieldRequired,message:"".concat(null===(K=jl.CommenceDate)||void 0===K?void 0:K.Label," is required")}],inputprops:{format:"M/D/YYYY"}},{label:"Completion Date",name:"CompletionDate",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(_=jl.CompletionDate)||void 0===_?void 0:_.FieldRequired,message:"".concat(null===(J=jl.CompletionDate)||void 0===J?void 0:J.Label," is required")}],type:"date",inputprops:{format:"M/D/YYYY"}},{label:null===(Q=jl.DepartmentId)||void 0===Q?void 0:Q.Label,name:"DepartmentId",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(W=jl.DepartmentId)||void 0===W?void 0:W.FieldRequired,message:"".concat(null===(X=jl.DepartmentId)||void 0===X?void 0:X.Label," is required")}],type:"treeSelect",inputprops:{treeData:Sl.referData.departments,fieldNames:{label:"Name",value:"Id",children:"ChildDepartments"},filterTreeNode:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.Name)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},allowClear:!0,showSearch:!0}},{type:"component",component:(0,w.jsx)(N.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.DepartmentId!==l.DepartmentId},children:function(e){var l,a,o,i,n=e.getFieldValue,t=e.setFieldValue,r=null===(l=Sl.referData.departments)||void 0===l?void 0:l.find((function(e){return e.Id===n("DepartmentId")}));return r&&r.CostCodeId&&t("CostCodeId",r.CostCodeId),(0,w.jsx)(N.Form.Item,{name:"CostCodeId",label:null===(a=jl.CostCodeId)||void 0===a?void 0:a.Label,labelCol:{flex:"150px"},rules:[{required:null===(o=jl.CostCodeId)||void 0===o?void 0:o.FieldRequired,message:"".concat(null===(i=jl.CostCodeId)||void 0===i?void 0:i.Label," is required")}],className:"col-span-12 lg:col-span-6 mb-0",children:(0,w.jsx)(c.Z,{options:Sl.referData.costCodes,allowClear:!0,showSearch:!0,filterOption:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())}})})}})},{label:null===(ee=jl.StateId)||void 0===ee?void 0:ee.Label,name:"StateId",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(le=jl.StateId)||void 0===le?void 0:le.FieldRequired,message:"".concat(null===(ae=jl.StateId)||void 0===ae?void 0:ae.Label," is required")}],inputprops:{options:Sl.referData.states}},{label:null===(oe=jl.Email)||void 0===oe?void 0:oe.Label,name:"Email",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(ie=jl.Email)||void 0===ie?void 0:ie.FieldRequired,message:"".concat(null===(ne=jl.Email)||void 0===ne?void 0:ne.Label," is required")},{type:"email",message:"The input is not valid E-mail!"}]},{type:"component",component:(0,w.jsx)(u.Z.Item,{labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",label:"ADAccount",children:(0,w.jsxs)(v.Z,{gutter:8,children:[(0,w.jsx)(b.Z,{span:12,children:(0,w.jsx)(u.Z.Item,{name:"ADAccount",className:"mb-0",children:(0,w.jsx)(p.Z,{})})}),(0,w.jsx)(b.Z,{span:12,children:(0,w.jsx)(f.ZP,{htmlType:"button",onClick:function(){(0,P.Z)({method:"post",url:"tas/employee/checkadaccount",data:{employeeId:Ml,adAccount:Ul.getFieldValue("ADAccount")}}).then((function(e){e.data.AdAccountValidationStatus?Gl.success({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1}):Gl.error({message:e.data.AdAccountValidationFailedReason,duration:4,btn:!1,closeIcon:!1,description:(0,w.jsx)("div",{children:e.data.EmployeeId&&(0,w.jsxs)(R.Link,{to:"/tas/people/search/".concat(e.data.EmployeeId),className:"text-blue-500 hover:underline",children:[e.data.Firstname," ",e.data.Lastname]})})})})).catch((function(e){})).then((function(){return ml(!1)}))},children:"Account Check"})})]})},"component-ADAccount")},{label:"Camp",name:"CampId",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",type:"select",inputprops:{options:null===(te=Sl.referData)||void 0===te?void 0:te.camps}},{label:"Room Type",name:"RoomTypeId",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",type:"select",depindex:"CampId",inputprops:{optionsurl:"tas/roomtype?active=1&campId=",optionvalue:"Id",optionlabel:"Description"}},"SystemAdmin"===(null===(re=Sl.userInfo)||void 0===re?void 0:re.Role)&&{label:"Create Request",name:"CreateRequest",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",type:"check"}],Kl=[{label:null===(se=jl.EmployerId)||void 0===se?void 0:se.Label,name:"EmployerId",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(de=jl.EmployerId)||void 0===de?void 0:de.FieldRequired,message:"".concat(null===(ue=jl.EmployerId)||void 0===ue?void 0:ue.Label," is required")}],inputprops:{options:null===(ce=Sl.referData)||void 0===ce?void 0:ce.employers}},{label:null===(pe=jl.PeopleTypeId)||void 0===pe?void 0:pe.Label,name:"PeopleTypeId",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(me=jl.PeopleTypeId)||void 0===me?void 0:me.FieldRequired,message:"".concat(null===(ve=jl.PeopleTypeId)||void 0===ve?void 0:ve.Label," is required")}],inputprops:{options:null===(be=Sl.referData)||void 0===be?void 0:be.peopleTypes}},{label:null===(fe=jl.SAPID)||void 0===fe?void 0:fe.Label,name:"SAPID",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(xe=jl.SAPID)||void 0===xe?void 0:xe.FieldRequired,message:"".concat(null===(ge=jl.SAPID)||void 0===ge?void 0:ge.Label," is required")}],inputprops:{maxLength:8}},{label:null===(Ne=jl.ContractNumber)||void 0===Ne?void 0:Ne.Label,name:"ContractNumber",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",rules:[{required:null===(he=jl.ContractNumber)||void 0===he?void 0:he.FieldRequired,message:"".concat(null===(ye=jl.ContractNumber)||void 0===ye?void 0:ye.Label," is required")}]},{label:"Person #",name:"Id",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",inputprops:{disabled:!0}},{label:null===(De=jl.PositionId)||void 0===De?void 0:De.Label,name:"PositionId",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Ie=jl.PositionId)||void 0===Ie?void 0:Ie.FieldRequired,message:"".concat(null===(Ce=jl.PositionId)||void 0===Ce?void 0:Ce.Label," is required")}],inputprops:{options:null===(qe=Sl.referData)||void 0===qe?void 0:qe.positions}},{label:"Active",name:"Active",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",type:"check"},{label:null===(Le=jl.HotelCheck)||void 0===Le?void 0:Le.Label,name:"HotelCheck",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",type:"check",rules:[{required:null===(Pe=jl.HotelCheck)||void 0===Pe?void 0:Pe.FieldRequired,message:"".concat(null===(je=jl.HotelCheck)||void 0===je?void 0:je.Label," is required")}]},{label:null===(Re=jl.RosterId)||void 0===Re?void 0:Re.Label,name:"RosterId",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Fe=jl.RosterId)||void 0===Fe?void 0:Fe.FieldRequired,message:"".concat(null===(Ze=jl.RosterId)||void 0===Ze?void 0:Ze.Label," is required")}],inputprops:{options:null===(Ee=Sl.referData)||void 0===Ee?void 0:Ee.rosters}},{label:"Next Roster Start",name:"NextRosterDate",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",type:"date"},{label:null===(we=jl.LocationId)||void 0===we?void 0:we.Label,name:"LocationId",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Me=jl.LocationId)||void 0===Me?void 0:Me.FieldRequired,message:"".concat(null===(Ae=jl.LocationId)||void 0===Ae?void 0:Ae.Label," is required")}],inputprops:{options:null===(Se=Sl.referData)||void 0===Se?void 0:Se.locations.filter((function(e){return 1!==e.onSite}))}},{label:null===(ke=jl.FlightGroupMasterId)||void 0===ke?void 0:ke.Label,name:"FlightGroupMasterId",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-6 mb-0",type:"select",rules:[{required:null===(Te=jl.FlightGroupMasterId)||void 0===Te?void 0:Te.FieldRequired,message:"".concat(null===(Ve=jl.FlightGroupMasterId)||void 0===Ve?void 0:Ve.Label," is required")}],inputprops:{options:null===(Ge=Sl.referData)||void 0===Ge?void 0:Ge.transportGroups}},{type:"component",component:(0,w.jsx)(Z.Z,{profileFields:jl,form:Ul})}],_l=[{label:null===(ze=jl.EmergencyContactName)||void 0===ze?void 0:ze.Label,name:"EmergencyContactName",className:"col-span-6 mb-0",rules:[{required:null===(Oe=jl.EmergencyContactName)||void 0===Oe?void 0:Oe.FieldRequired,message:"".concat(null===(Ue=jl.EmergencyContactName)||void 0===Ue?void 0:Ue.Label," is required")}]},{label:null===(Ye=jl.EmergencyContactMobile)||void 0===Ye?void 0:Ye.Label,name:"EmergencyContactMobile",className:"col-span-6 mb-0",rules:[{required:null===(He=jl.EmergencyContactMobile)||void 0===He?void 0:He.FieldRequired,message:"".concat(null===(Be=jl.EmergencyContactMobile)||void 0===Be?void 0:Be.Label," is required")},{pattern:k,message:"Invalid phone number"}],inputprops:{className:"w-full",maxLength:15}},{label:null===($e=jl.Mobile)||void 0===$e?void 0:$e.Label,name:"Mobile",className:"col-span-6 mb-0",type:"number",rules:[{required:null===(Ke=jl.Mobile)||void 0===Ke?void 0:Ke.FieldRequired,message:"".concat(null===(_e=jl.Mobile)||void 0===_e?void 0:_e.Label," is required")},{pattern:A,message:"".concat(null===(Je=jl.Mobile)||void 0===Je?void 0:Je.Label," must be 8 digit")}],inputprops:{prefix:"+976",className:"w-full",maxLength:8}},{type:"component",component:(0,w.jsx)(N.Form.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.PeopleTypeId!==l.PeopleTypeId},children:function(e){var l,a,o,i,n,t,r=(0,e.getFieldValue)("PeopleTypeId"),s="Visitor"===(null===(l=Sl.referData.peopleTypes)||void 0===l||null===(a=l.find((function(e){return e.value===r})))||void 0===a?void 0:a.Code);return(0,w.jsx)(N.Form.Item,{className:"col-span-6 mb-0",name:"PersonalMobile",label:null===(o=jl.PersonalMobile)||void 0===o?void 0:o.Label,rules:[{required:!s&&(null===(i=jl.PersonalMobile)||void 0===i?void 0:i.FieldRequired),message:"".concat(null===(n=jl.PersonalMobile)||void 0===n?void 0:n.Label," is required")},{pattern:A,message:"".concat(null===(t=jl.PersonalMobile)||void 0===t?void 0:t.Label," must be 8 digit")}],children:(0,w.jsx)(x.Z,{controls:!1,prefix:"+976",className:"w-full",maxLength:8})})}})},{label:null===(Qe=jl.PickUpAddress)||void 0===Qe?void 0:Qe.Label,name:"PickUpAddress",className:"col-span-6 mb-0",type:"textarea",rules:[{required:null===(We=jl.PickUpAddress)||void 0===We?void 0:We.FieldRequired,message:"".concat(null===(Xe=jl.PickUpAddress)||void 0===Xe?void 0:Xe.Label," is required")}]},{label:null===(el=jl.FrequentFlyer)||void 0===el?void 0:el.Label,name:"FrequentFlyer",className:"col-span-6 mb-0",rules:[{required:null===(ll=jl.FrequentFlyer)||void 0===ll?void 0:ll.FieldRequired,message:"".concat(null===(al=jl.FrequentFlyer)||void 0===al?void 0:al.Label," is required")}]}],Jl=(0,D.useMemo)((function(){var e;return null===(e=Sl.referData)||void 0===e?void 0:e.fieldsOfGroups.map((function(e){return{name:e.Id,label:e.Description}}))}),[null===(ol=Sl.referData)||void 0===ol?void 0:ol.fieldsOfGroups]),Ql=[{type:"component",component:(0,w.jsx)(w.Fragment,{children:null===(il=Sl.referData)||void 0===il||null===(nl=il.fieldsOfGroups)||void 0===nl?void 0:nl.map((function(e,l){var a;return(0,w.jsx)(u.Z.Item,{label:(0,w.jsxs)("div",{children:[e.Required?(0,w.jsx)("span",{className:"text-red-500",children:"* "}):null,e.Description]}),labelCol:{flex:"130px"},className:"col-span-12 lg:col-span-7 mb-0",children:(0,w.jsxs)(v.Z,{gutter:8,children:[(0,w.jsx)(b.Z,{span:12,children:(0,w.jsx)(u.Z.Item,{name:e.Id,className:"mb-0 col-span-12 lg:col-span-7",rules:[{required:e.Required,message:"".concat(e.Description," is required")}],children:(0,w.jsx)(c.Z,{showSearch:!0,allowClear:!0,filterOption:function(e,l){var a;return(null!==(a=null===l||void 0===l?void 0:l.children)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},children:null===(a=e.details)||void 0===a?void 0:a.map((function(e,l){return(0,w.jsx)(c.Z.Option,{value:e.Id,children:e.Description},l)}))})},"g-fields-".concat(l))}),e.CreateLog?(0,w.jsx)(b.Z,{span:12,children:(0,w.jsx)(N.GroupLog,{groupId:e.Id,employeeId:Ml,name:e.Description})}):null]})},l)}))})}],Wl=[{type:"component",component:(0,w.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,l){return e.NationalityId!==l.NationalityId},children:function(e){var l,a,o,i,n,t,r,s,d,c,v,b,f=e.getFieldValue,x=Sl.referData.nationalities.find((function(e){return e.value===f("NationalityId")}));return"MN"!==(null===x||void 0===x?void 0:x.Code)&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.Z.Item,{label:null===(l=jl.PassportNumber)||void 0===l?void 0:l.Label,name:"PassportNumber",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(a=jl.PassportExpiry)||void 0===a?void 0:a.FieldRequired,message:"".concat(null===(o=jl.PassportNumber)||void 0===o?void 0:o.Label," is required")}],children:(0,w.jsx)(p.Z,{})}),(0,w.jsx)(u.Z.Item,{label:null===(i=jl.PassportName)||void 0===i?void 0:i.Label,name:"PassportName",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(n=jl.PassportExpiry)||void 0===n?void 0:n.FieldRequired,message:"".concat(null===(t=jl.PassportName)||void 0===t?void 0:t.Label," is required")},{pattern:S,message:"The input is not valid name!"}],children:(0,w.jsx)(p.Z,{})}),(0,w.jsx)(u.Z.Item,{label:null===(r=jl.Hometown)||void 0===r?void 0:r.Label,name:"Hometown",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(s=jl.Hometown)||void 0===s?void 0:s.FieldRequired,message:"".concat(null===(d=jl.Hometown)||void 0===d?void 0:d.Label," is required")}],children:(0,w.jsx)(p.Z.TextArea,{maxLength:50})}),(0,w.jsx)(u.Z.Item,{label:null===(c=jl.PassportExpiry)||void 0===c?void 0:c.Label,name:"PassportExpiry",labelCol:{flex:"150px"},className:"col-span-12 lg:col-span-7 mb-0",rules:[{required:null===(v=jl.PassportExpiry)||void 0===v?void 0:v.FieldRequired,message:"".concat(null===(b=jl.PassportExpiry)||void 0===b?void 0:b.Label," is required")}],children:(0,w.jsx)(m.Z,{})})]})}})},{label:"Passport Image",name:"PassportRawImage",className:"col-span-12 lg:col-span-7 mb-0",labelCol:{flex:"150px"},type:"image"}],Xl=function(e){var l=0;return hl&&hl.map((function(a,o){null!==e&&void 0!==e&&e.find((function(e){return e.name===a.name[0]}))&&l++})),l>0&&(0,w.jsx)(N.ErrorTabElement,{children:l})},ea=[{label:(0,w.jsxs)("div",{className:"font-normal",children:["Personal ",Xl([].concat($l,[{name:"NRN"}]))]}),key:"0",forceRender:!0,children:(0,w.jsx)("div",{className:"py-4 grid grid-cols-12 gap-x-10 gap-y-2",children:(0,w.jsx)(N.FormItemRender,{fields:$l,form:Ul,editData:Sl.userProfileData},"t-item-1c")},"t-item-0")},{label:(0,w.jsxs)("div",{children:["On Site ",Xl(Kl)]}),key:"1",forceRender:!0,children:(0,w.jsx)("div",{className:"py-4 grid grid-cols-12 gap-x-10 gap-y-2",children:(0,w.jsx)(N.FormItemRender,{fields:Kl,form:Ul,editData:Sl.userProfileData},"t-item-2c")},"t-item-1")},{label:(0,w.jsxs)("div",{children:["Off Site ",Xl([].concat(_l,[{name:"PersonalMobile"}]))]}),key:"2",forceRender:!0,children:(0,w.jsx)("div",{className:"py-4 grid grid-cols-12 gap-x-10 gap-y-2",children:(0,w.jsx)(N.FormItemRender,{fields:_l,form:Ul,editData:Sl.userProfileData},"t-item-3c")},"t-item-2")},{label:(0,w.jsxs)("div",{children:["Group ",Xl(Jl)]}),key:"3",forceRender:!0,children:(0,w.jsx)("div",{className:"py-4 grid grid-cols-12 gap-x-10 gap-y-2",children:(0,w.jsx)(N.FormItemRender,{fields:Ql,form:Ul,editData:Sl.userProfileData},"t-item-4c")},"t-item-3")},{label:(0,w.jsxs)("div",{children:["Citizenship ",Xl(function(){if(Ul.getFieldValue("NationalityId")){var e,l,a=null===(e=Sl.referData)||void 0===e||null===(l=e.nationalities)||void 0===l?void 0:l.find((function(e){return e.value===Ul.getFieldValue("NationalityId")}));return"MN"!==(null===a||void 0===a?void 0:a.Code)?[{label:"Passport Number",name:"PassportNumber",rules:[{required:!0,message:"Passport Number is required"}]},{label:"Name On Passport",name:"PassportName",rules:[{required:!0,message:"Name on password is required"}]},{label:"Passport Expiry Date",name:"PassportExpiry",rules:[{required:!0,message:"Password expiry date is required"}]}]:[{label:"National Registration Number",name:"NRN",rules:[{required:!0,message:"National registration number is required"}]}]}return[{label:"Passport Number",name:"PassportNumber",rules:[{required:!0,message:"Passport Number is required"}]},{label:"Name On Passport",name:"PassportName",rules:[{required:!0,message:"Name on password is required"}]},{label:"Passport Expiry Date",name:"PassportExpiry",rules:[{required:!0,message:"Password expiry date is required"}]},{label:"National Registration Number",name:"NRN",rules:[{required:!0,message:"National registration number is required"}]}]}())]}),key:"4",forceRender:!0,children:(0,w.jsx)("div",{className:"py-4 grid grid-cols-12 gap-x-10 gap-y-2",children:(0,w.jsx)(N.FormItemRender,{fields:Wl,form:Ul,editData:Sl.userProfileData},"t-item-5c")},"t-item-4")}];return(0,w.jsxs)("div",{className:"col-span-12",children:[(0,w.jsx)("div",{className:"bg-white rounded-ot p-4 col-span-12 shadow-md mb-1",children:El?(0,w.jsx)(N.Skeleton,{className:"h-[400px]"}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.Z,(0,n.Z)((0,n.Z)({form:Ul},T),{},{labelAlign:"left",onFinish:function(e){var l,a,n;yl(null),xl(!0);var t=[],s=new FormData;Object.keys(e).map((function(l){isNaN(l)?"PassportRawImage"!==l&&"SiteContactEmployeeId"!==l?"Gender"===l?s.append(l,e[l]?1:0):"CommenceDate"===l||"CompletionDate"===l||"Dob"===l||"NextRosterDate"===l||"PassportExpiry"===l?s.append(l,e[l]?y()(e[l]).format("YYYY-MM-DD"):""):s.append(l,e[l]?e[l]:""):"SiteContactEmployeeId"===l&&(e[l],s.append(l,e[l]||"")):t.push({GroupMasterId:parseInt(l),GroupDetailId:e[l]?e[l]:""})})),s.append("PassportRawImage",null!==(l=e.PassportRawImage)&&void 0!==l&&l.file?null===(a=e.PassportRawImage)||void 0===a?void 0:a.file:""),s.append("id",Sl.userProfileData.Id),"DataApproval"===(null===(n=Sl.userInfo)||void 0===n?void 0:n.Role)&&0===Sl.userProfileData.Active&&s.set("Active",1),s.append("id",Sl.userProfileData.Id),(0,P.Z)({method:"patch",url:"tas/employee",data:s}).then(function(){var e=(0,i.Z)((0,o.Z)().mark((function e(l){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,P.Z)({method:"post",url:"tas/groupmembers/".concat(Ml),data:t}).then((function(e){ql(!1),ml(!0),(0,P.Z)({method:"get",url:"tas/employee/".concat(Ml)}).then((function(e){kl.saveUserProfileData(e.data)})).catch((function(e){})).then((function(){return ml(!1)})),xl(!1)})).catch((function(e){xl(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(l){return e.apply(this,arguments)}}()).catch((function(e){if(xl(!1),"["===e.response.data.message[0]){var l=JSON.parse(e.response.data.message);(null===l||void 0===l?void 0:l.length)>0&&Gl.error({message:"Data Duplicated",duration:10,description:(0,w.jsx)("div",{children:(0,w.jsxs)("table",{className:"border-collapse border border-gray-200 text-xs mt-5",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{className:"text-[11px] font-medium",children:[(0,w.jsx)("th",{className:"border border-gray-200"}),(0,w.jsx)("th",{className:"border border-gray-200 px-1",children:"ADAccount"}),(0,w.jsx)("th",{className:"border border-gray-200 px-1",children:"SAP ID #"}),(0,w.jsx)("th",{className:"border border-gray-200 px-1",children:"Mobile"}),(0,w.jsx)("th",{className:"border border-gray-200 px-1",children:"NRN"})]})}),(0,w.jsx)("tbody",{children:null===l||void 0===l?void 0:l.map((function(e){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border border-gray-200 text-center",children:(0,w.jsx)(R.Link,{to:"/tas/people/search/".concat(e.EmployeeId),children:(0,w.jsxs)("span",{className:"text-blue-500 hover:underline cursor-pointer",children:[e.FullName," (",e.EmployeeId,")"]})})}),(0,w.jsx)("td",{className:"border border-gray-200 text-center",children:"boolean"===typeof e.ADAccount?e.ADAccount?"":(0,w.jsx)(r.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""}),(0,w.jsx)("td",{className:"border border-gray-200 text-center",children:"boolean"===typeof e.SAPID?e.SAPID?"":(0,w.jsx)(r.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""}),(0,w.jsx)("td",{className:"border border-gray-200 text-center",children:"boolean"===typeof e.Mobile?e.Mobile?"":(0,w.jsx)(r.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""}),(0,w.jsx)("td",{className:"border border-gray-200 text-center",children:"boolean"===typeof e.NRN?e.NRN?"":(0,w.jsx)(r.Z,{twoToneColor:"#eb2f96",style:{fontSize:"16px"}}):""})]})}))})]})})})}else e.response.data.message&&Gl.error({message:"Operation Failed",duration:5,description:e.response.data.message})}))},className:"bg-white rounded-lg",onFinishFailed:function(e){e&&yl(e.errorFields)},disabled:!Cl,initialValues:Hl,children:(0,w.jsx)(g.Z,{defaultActiveKey:"1",type:"card",size:"middle",items:ea,activeKey:dl,onTabClick:function(e){return ul(e)}})})),(0,w.jsx)("div",{className:"mt-3 flex justify-end",children:null!==(tl=Sl.userInfo)&&void 0!==tl&&tl.ReadonlyAccess?null:Cl?(0,w.jsxs)("div",{className:"flex items-center gap-3",children:[(0,w.jsx)(N.Button,{type:"primary",loading:fl,onClick:function(){return Ul.submit()},icon:(0,w.jsx)(s.Z,{}),children:"Save"}),(0,w.jsx)(N.Button,{onClick:function(){ql(!1),Yl(Sl.userProfileData)},disabled:fl,children:"Cancel"})]}):(0,w.jsx)(N.Button,{onClick:function(){return ql(!0)},children:"Edit"})})]})}),zl]})}},24957:function(e,l,a){a.d(l,{Z:function(){return s}});var o=a(87462),i=a(47313),n={icon:function(e,l){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:l}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:e}}]}},name:"close-circle",theme:"twotone"},t=a(17469),r=function(e,l){return i.createElement(t.Z,(0,o.Z)({},e,{ref:l,icon:n}))};var s=i.forwardRef(r)},53979:function(e,l,a){a.d(l,{Z:function(){return s}});var o=a(87462),i=a(47313),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-12-12-28.3-18.7-45.3-18.7H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 176h256v112H384V176zm128 554c-79.5 0-144-64.5-144-144s64.5-144 144-144 144 64.5 144 144-64.5 144-144 144zm0-224c-44.2 0-80 35.8-80 80s35.8 80 80 80 80-35.8 80-80-35.8-80-80-80z"}}]},name:"save",theme:"filled"},t=a(17469),r=function(e,l){return i.createElement(t.Z,(0,o.Z)({},e,{ref:l,icon:n}))};var s=i.forwardRef(r)}}]);