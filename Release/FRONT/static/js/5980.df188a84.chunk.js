"use strict";(self.webpackChunkot_tas=self.webpackChunkot_tas||[]).push([[5980],{45980:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var a=n(29439),l=n(23495),o=n(65040),r=n(76047),s=n(93031),i=n(56573),c=n(2880),m=n(42614),u=n(10658),d=n.n(u),f=n(47313),h=n(58467),x=n(46417),g=[{label:"Travel Date",name:"TravelDate",alignment:"left",cellRender:function(e){return(0,x.jsx)("div",{children:d()(e.value).format("YYYY-MM-DD")})}},{label:"Direction",name:"Direction",alignment:"left"},{label:"Dep",name:"fromLocationCode",alignment:"left",width:50},{label:"ETD",name:"ETD",alignment:"left",width:50},{label:"Arr",name:"toLocationCode",alignment:"left",width:50},{label:"ETA",name:"ETA",alignment:"left",width:50},{label:"Code",name:"comment",alignment:"left"},{label:"Camp",name:"comment",alignment:"left"},{label:"Status",name:"status",alignment:"left"},{label:"Booking Ref#",name:"comment",alignment:"left"},{label:"Request",name:"comment",alignment:"left"}],p=function(e){var t=e.firstDate,n=e.lastDate,l=(0,f.useState)(!1),o=(0,a.Z)(l,2),r=o[0],s=o[1],m=(0,f.useState)([]),u=(0,a.Z)(m,2),p=u[0],b=u[1],D=(0,h.UO)().empId;return(0,f.useEffect)((function(){s(!0),(0,i.Z)({method:"get",url:"/tas/transport/employee/existingtransport/".concat(D,"/").concat(d()(t).format("YYYY-MM-DD"),"/").concat(d()(n).format("YYYY-MM-DD"))}).then((function(e){b(e.data)})).catch((function(e){})).then((function(){return s(!1)}))}),[t,n]),(0,x.jsx)("div",{className:"py-4 ",children:(0,x.jsx)(c.Table,{data:p,columns:g,allowColumnReordering:!1,loading:r,containerClass:"shadow-none border border-gray-300",keyExpr:"Id",pager:p.length>20})})},b=[{label:"Owner",name:"RoomOwner",alignment:"center",width:"55px",cellRender:function(e){return(0,x.jsx)("span",{className:"text-[12px] px-1",children:e.value?(0,x.jsx)("i",{className:"dx-icon-home text-green-500"}):(0,x.jsx)("i",{className:"dx-icon-home text-gray-400 text-[14px]"})})}},{label:"Room Number",name:"RoomNumber"},{label:"Camp",name:"Camp"},{label:"Room Type",name:"RoomType"},{label:"Date In",name:"DateIn",cellRender:function(e){return(0,x.jsx)("div",{children:d()(e.value).format("YYYY-MM-DD ddd")})}},{label:"Last Night",name:"LastNight",cellRender:function(e){return(0,x.jsx)("div",{children:d()(e.value).format("YYYY-MM-DD ddd")})}},{label:"Days",name:"Days"}];var D=function(e){var t=e.firstDate,n=e.lastDate,l=(0,f.useState)(!1),o=(0,a.Z)(l,2),r=o[0],s=o[1],m=(0,f.useState)([]),u=(0,a.Z)(m,2),d=u[0],g=u[1],p=(0,h.UO)().empId;return(0,f.useEffect)((function(){s(!0),(0,i.Z)({method:"get",url:"tas/employeestatus/employeebooking?employeeId=".concat(p,"&startDate=".concat(t,"&endDate=").concat(n))}).then((function(e){g(e.data)})).catch((function(e){})).then((function(){return s(!1)}))}),[t,n]),(0,x.jsx)("div",{className:"py-4 ",children:(0,x.jsx)(c.Table,{data:d,columns:b,allowColumnReordering:!1,loading:r,containerClass:"shadow-none border border-gray-300",keyExpr:"Id",pager:d.length>20})})};var Y=function(){var e=(0,f.useState)([]),t=(0,a.Z)(e,2),n=(t[0],t[1]),u=(0,f.useState)(!1),g=(0,a.Z)(u,2),b=(g[0],g[1]),Y=(0,f.useState)(d()()),y=(0,a.Z)(Y,2),v=y[0],j=y[1],C=(0,f.useState)(d()().add(1,"month")),w=(0,a.Z)(C,2),Z=w[0],M=w[1],N=o.Z.useForm(),k=((0,a.Z)(N,1)[0],(0,h.UO)().empId),R=(0,f.useContext)(m.V).action,E=(0,h.s0)();(0,f.useEffect)((function(){R.changeMenuKey("/request/existingbookings")}),[]),(0,f.useEffect)((function(){T()}),[v,Z]);var T=function(){b(!0),(0,i.Z)({method:"get",url:"/tas/transport/employee/existingtransport/".concat(k,"/").concat(d()(v).format("YYYY-MM-DD"),"/").concat(d()(Z).format("YYYY-MM-DD"))}).then((function(e){n(e.data)})).catch((function(e){})).then((function(){return b(!1)}))},I=[{key:"1",label:"Existing Transport",children:(0,x.jsx)(p,{firstDate:v,lastDate:Z})},{key:"2",label:"Room Occupancy Enquiry",children:(0,x.jsx)(D,{firstDate:v,lastDate:Z})}];return(0,x.jsxs)("div",{className:"px-6 py-5 rounded-ot shadow-card bg-white",children:[(0,x.jsx)(c.Button,{className:"mb-3",onClick:function(){return E("/request/existingbookings")},icon:(0,x.jsx)(l.Z,{}),children:"Back"}),(0,x.jsx)(c.PeopleProfile,{employeeId:k}),(0,x.jsx)(r.Z,{type:"card",items:I,defaultActiveKey:"1",className:"mt-5",tabBarExtraContent:{right:(0,x.jsxs)("div",{className:"flex gap-4 items-center py-2",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"mr-2",children:"From:"}),(0,x.jsx)(s.Z,{allowClear:!1,value:v,onChange:function(e){return j(d()(e))},size:"small"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"mr-2",children:"To:"}),(0,x.jsx)(s.Z,{allowClear:!1,value:Z,onChange:function(e){return M(d()(e))},size:"small"})]})]})}})]})}}}]);